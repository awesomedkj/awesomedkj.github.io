<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>首页-丁康健的个人博客</title>
  
  <subtitle>假作真时真亦假</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://actionding.github.io/"/>
  <updated>2021-02-18T03:04:11.972Z</updated>
  <id>https://actionding.github.io/</id>
  
  <author>
    <name>丁康健</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MyBatis 笔记</title>
    <link href="https://actionding.github.io/2020/08/MyBatis%20%E7%AC%94%E8%AE%B0/"/>
    <id>https://actionding.github.io/2020/08/MyBatis%20%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-04T19:02:03.000Z</published>
    <updated>2021-02-18T03:04:11.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="第1章-简介"><a href="#第1章-简介" class="headerlink" title="第1章 简介"></a>第1章 简介</h2><p><a href="https://mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="noopener">MyBatis</a> 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</p><a id="more"></a><h2 id="第2章-入门案例"><a href="#第2章-入门案例" class="headerlink" title="第2章 入门案例"></a>第2章 入门案例</h2><ol><li><p>创建一张测试表 employee</p></li><li><p>创建对应的 JavaBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String empName;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">private</span> Integer gender;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getEmpName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> empName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpName</span><span class="params">(String empName)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.empName = empName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.email = email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getGender</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> gender;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(Integer gender)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Employee [id="</span> + id + <span class="string">", empName="</span> + empName + <span class="string">", email="</span> + email + <span class="string">", gender="</span> + gender + <span class="string">"]"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Employee <span class="title">getEmpById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p><a href="https://github.com/mybatis/mybatis-3/releases" target="_blank" rel="noopener">导包</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log4j-1.2.17.jar</span><br><span class="line">mybatis-3.5.5.jar</span><br><span class="line">mysql-connector-java-5.1.7-bin.jar</span><br></pre></td></tr></table></figure></li><li><p>创建 MyBatis 配置文件，sql 映射文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-config.xml --&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/mybatis"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"ding32"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"EmployeeDao.xml"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- EmployeeDao.xml --&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.ding.dao.EmployeeDao"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getEmpById"</span> <span class="attr">resultType</span>=<span class="string">"com.ding.bean.Employee"</span>&gt;</span></span><br><span class="line">select * from employee where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>测试</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyBatisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="comment">// 1、根据全局配置文件创建一个 SqlSessionFactory</span></span><br><span class="line">String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"></span><br><span class="line">SqlSession openSession = <span class="keyword">null</span>;</span><br><span class="line">Employee employee = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// 2、获取和数据库的一次会话：getConnetion()</span></span><br><span class="line">openSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">// 3、使用 SqlSession 操作数据库，获取到 dao 接口的实现</span></span><br><span class="line">EmployeeDao employeeDao = openSession.getMapper(EmployeeDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">// 4、调用之前的方法</span></span><br><span class="line">employee = employeeDao.getEmpById(<span class="number">1</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">openSession.close();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(employee);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>关于 SqlSession</strong></p><p>SqlSession 的实例不是线程安全的，因此是不能被共享的</p><p>SqlSession 每次使用完成后需要正确关闭，这个关闭操作是必须的</p><p>SqlSession 可以直接调用方法的 id 进行数据库操作，但是我们一般还是推荐使用 SqlSession 获取到 Dao 接口的代理类，执行代理对象的方法，可以更安全的进行类型检查操作</p><h2 id="第3章-全局配置文件"><a href="#第3章-全局配置文件" class="headerlink" title="第3章 全局配置文件"></a>第3章 全局配置文件</h2><blockquote><p>在 Eclipse 中引入 XML 的 dtd 约束文件，方便编写 XML 的时候有提示</p></blockquote><h3 id="3-1-configuration（配置）"><a href="#3-1-configuration（配置）" class="headerlink" title="3.1 configuration（配置）"></a>3.1 configuration（配置）</h3><h4 id="properties（属性）"><a href="#properties（属性）" class="headerlink" title="properties（属性）"></a>properties（属性）</h4><p>这些属性可以在外部进行配置，并可以进行动态替换。你既可以在典型的 Java 属性文件中配置这些属性，也可以在 properties 元素的子元素中设置。</p><p>如果一个属性在不只一个地方进行了配置，那么，MyBatis 将按照下面的顺序来加载：</p><ul><li>首先读取在 properties 元素体内指定的属性。</li><li>然后根据 properties 元素中的 resource 属性读取类路径下属性文件，或根据 url 属性指定的路径读取属性文件，并覆盖之前读取过的同名属性。</li><li>最后读取作为方法参数传递的属性，并覆盖之前读取过的同名属性。</li></ul><p>因此，通过方法参数传递的属性具有最高优先级，resource/url 属性中指定的配置文件次之，最低优先级的则是 properties 元素中指定的属性。</p><h4 id="settings（设置）"><a href="#settings（设置）" class="headerlink" title="settings（设置）"></a>settings（设置）</h4><table><thead><tr><th align="left">设置名</th><th align="left">描述</th><th align="left">有效值</th><th align="left">默认值</th></tr></thead><tbody><tr><td align="left">cacheEnabled</td><td align="left">全局性地开启或关闭所有映射器配置文件中已配置的任何缓存。</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">lazyLoadingEnabled</td><td align="left">延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 特定关联关系中可通过设置 <code>fetchType</code> 属性来覆盖该项的开关状态。</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">aggressiveLazyLoading</td><td align="left">开启时，任一方法的调用都会加载该对象的所有延迟加载属性。 否则，每个延迟加载属性会按需加载（参考 <code>lazyLoadTriggerMethods</code>)。</td><td align="left">true | false</td><td align="left">false （在 3.4.1 及之前的版本中默认为 true）</td></tr><tr><td align="left">multipleResultSetsEnabled</td><td align="left">是否允许单个语句返回多结果集（需要数据库驱动支持）。</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">useColumnLabel</td><td align="left">使用列标签代替列名。实际表现依赖于数据库驱动，具体可参考数据库驱动的相关文档，或通过对比测试来观察。</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">useGeneratedKeys</td><td align="left">允许 JDBC 支持自动生成主键，需要数据库驱动支持。如果设置为 true，将强制使用自动生成主键。尽管一些数据库驱动不支持此特性，但仍可正常工作（如 Derby）。</td><td align="left">true | false</td><td align="left">False</td></tr><tr><td align="left">autoMappingBehavior</td><td align="left">指定 MyBatis 应如何自动映射列到字段或属性。 NONE 表示关闭自动映射；PARTIAL 只会自动映射没有定义嵌套结果映射的字段。 FULL 会自动映射任何复杂的结果集（无论是否嵌套）。</td><td align="left">NONE, PARTIAL, FULL</td><td align="left">PARTIAL</td></tr><tr><td align="left">autoMappingUnknownColumnBehavior</td><td align="left">指定发现自动映射目标未知列（或未知属性类型）的行为。<code>NONE</code>: 不做任何反应<code>WARNING</code>: 输出警告日志（<code>&#39;org.apache.ibatis.session.AutoMappingUnknownColumnBehavior&#39;</code> 的日志等级必须设置为 <code>WARN</code>）<code>FAILING</code>: 映射失败 (抛出 <code>SqlSessionException</code>)</td><td align="left">NONE, WARNING, FAILING</td><td align="left">NONE</td></tr><tr><td align="left">defaultExecutorType</td><td align="left">配置默认的执行器。SIMPLE 就是普通的执行器；REUSE 执行器会重用预处理语句（PreparedStatement）； BATCH 执行器不仅重用语句还会执行批量更新。</td><td align="left">SIMPLE REUSE BATCH</td><td align="left">SIMPLE</td></tr><tr><td align="left">defaultStatementTimeout</td><td align="left">设置超时时间，它决定数据库驱动等待数据库响应的秒数。</td><td align="left">任意正整数</td><td align="left">未设置 (null)</td></tr><tr><td align="left">defaultFetchSize</td><td align="left">为驱动的结果集获取数量（fetchSize）设置一个建议值。此参数只可以在查询设置中被覆盖。</td><td align="left">任意正整数</td><td align="left">未设置 (null)</td></tr><tr><td align="left">defaultResultSetType</td><td align="left">指定语句默认的滚动策略。（新增于 3.5.2）</td><td align="left">FORWARD_ONLY | SCROLL_SENSITIVE | SCROLL_INSENSITIVE | DEFAULT（等同于未设置）</td><td align="left">未设置 (null)</td></tr><tr><td align="left">safeRowBoundsEnabled</td><td align="left">是否允许在嵌套语句中使用分页（RowBounds）。如果允许使用则设置为 false。</td><td align="left">true | false</td><td align="left">False</td></tr><tr><td align="left">safeResultHandlerEnabled</td><td align="left">是否允许在嵌套语句中使用结果处理器（ResultHandler）。如果允许使用则设置为 false。</td><td align="left">true | false</td><td align="left">True</td></tr><tr><td align="left"><strong>mapUnderscoreToCamelCase</strong></td><td align="left">是否开启驼峰命名自动映射，即从经典数据库列名 A_COLUMN 映射到经典 Java 属性名 aColumn。</td><td align="left">true | false</td><td align="left">False</td></tr><tr><td align="left">localCacheScope</td><td align="left">MyBatis 利用本地缓存机制（Local Cache）防止循环引用和加速重复的嵌套查询。 默认值为 SESSION，会缓存一个会话中执行的所有查询。 若设置值为 STATEMENT，本地缓存将仅用于执行语句，对相同 SqlSession 的不同查询将不会进行缓存。</td><td align="left">SESSION | STATEMENT</td><td align="left">SESSION</td></tr><tr><td align="left">jdbcTypeForNull</td><td align="left">当没有为参数指定特定的 JDBC 类型时，空值的默认 JDBC 类型。 某些数据库驱动需要指定列的 JDBC 类型，多数情况直接用一般类型即可，比如 NULL、VARCHAR 或 OTHER。</td><td align="left">JdbcType 常量，常用值：NULL、VARCHAR 或 OTHER。</td><td align="left">OTHER</td></tr><tr><td align="left">lazyLoadTriggerMethods</td><td align="left">指定对象的哪些方法触发一次延迟加载。</td><td align="left">用逗号分隔的方法列表。</td><td align="left">equals,clone,hashCode,toString</td></tr><tr><td align="left">defaultScriptingLanguage</td><td align="left">指定动态 SQL 生成使用的默认脚本语言。</td><td align="left">一个类型别名或全限定类名。</td><td align="left">org.apache.ibatis.scripting.xmltags.XMLLanguageDriver</td></tr><tr><td align="left">defaultEnumTypeHandler</td><td align="left">指定 Enum 使用的默认 <code>TypeHandler</code> 。（新增于 3.4.5）</td><td align="left">一个类型别名或全限定类名。</td><td align="left">org.apache.ibatis.type.EnumTypeHandler</td></tr><tr><td align="left">callSettersOnNulls</td><td align="left">指定当结果集中值为 null 的时候是否调用映射对象的 setter（map 对象时为 put）方法，这在依赖于 Map.keySet() 或 null 值进行初始化时比较有用。注意基本类型（int、boolean 等）是不能设置成 null 的。</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">returnInstanceForEmptyRow</td><td align="left">当返回行的所有列都是空时，MyBatis默认返回 <code>null</code>。 当开启这个设置时，MyBatis会返回一个空实例。 请注意，它也适用于嵌套的结果集（如集合或关联）。（新增于 3.4.2）</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">logPrefix</td><td align="left">指定 MyBatis 增加到日志名称的前缀。</td><td align="left">任何字符串</td><td align="left">未设置</td></tr><tr><td align="left">logImpl</td><td align="left">指定 MyBatis 所用日志的具体实现，未指定时将自动查找。</td><td align="left">SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</td><td align="left">未设置</td></tr><tr><td align="left">proxyFactory</td><td align="left">指定 Mybatis 创建可延迟加载对象所用到的代理工具。</td><td align="left">CGLIB | JAVASSIST</td><td align="left">JAVASSIST （MyBatis 3.3 以上）</td></tr><tr><td align="left">vfsImpl</td><td align="left">指定 VFS 的实现</td><td align="left">自定义 VFS 的实现的类全限定名，以逗号分隔。</td><td align="left">未设置</td></tr><tr><td align="left">useActualParamName</td><td align="left">允许使用方法签名中的名称作为语句参数名称。 为了使用该特性，你的项目必须采用 Java 8 编译，并且加上 <code>-parameters</code> 选项。（新增于 3.4.1）</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">configurationFactory</td><td align="left">指定一个提供 <code>Configuration</code> 实例的类。 这个被返回的 Configuration 实例用来加载被反序列化对象的延迟加载属性值。 这个类必须包含一个签名为<code>static Configuration getConfiguration()</code> 的方法。（新增于 3.2.3）</td><td align="left">一个类型别名或完全限定类名。</td><td align="left">未设置</td></tr><tr><td align="left">shrinkWhitespacesInSql</td><td align="left">从SQL中删除多余的空格字符。请注意，这也会影响SQL中的文字字符串。 (新增于 3.5.5)</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">defaultSqlProviderType</td><td align="left">Specifies an sql provider class that holds provider method (Since 3.5.6). This class apply to the <code>type</code>(or <code>value</code>) attribute on sql provider annotation(e.g. <code>@SelectProvider</code>), when these attribute was omitted.</td><td align="left">A type alias or fully qualified class name</td><td align="left">Not set</td></tr></tbody></table><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"multipleResultSetsEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"useColumnLabel"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"useGeneratedKeys"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"autoMappingBehavior"</span> <span class="attr">value</span>=<span class="string">"PARTIAL"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"autoMappingUnknownColumnBehavior"</span> <span class="attr">value</span>=<span class="string">"WARNING"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"defaultExecutorType"</span> <span class="attr">value</span>=<span class="string">"SIMPLE"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"defaultStatementTimeout"</span> <span class="attr">value</span>=<span class="string">"25"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"defaultFetchSize"</span> <span class="attr">value</span>=<span class="string">"100"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"safeRowBoundsEnabled"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"localCacheScope"</span> <span class="attr">value</span>=<span class="string">"SESSION"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"jdbcTypeForNull"</span> <span class="attr">value</span>=<span class="string">"OTHER"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadTriggerMethods"</span> <span class="attr">value</span>=<span class="string">"equals,clone,hashCode,toString"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="typeAliases（类型别名）"><a href="#typeAliases（类型别名）" class="headerlink" title="typeAliases（类型别名）"></a>typeAliases（类型别名）</h4><p>类型别名可为 Java 类型设置一个缩写名字。 它仅用于 XML 配置，意在降低冗余的全限定类名书写。</p><p>有三种方式取别名：</p><ol><li><p>一个一个取别名</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">"Author"</span> <span class="attr">type</span>=<span class="string">"domain.blog.Author"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">"Blog"</span> <span class="attr">type</span>=<span class="string">"domain.blog.Blog"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">"Comment"</span> <span class="attr">type</span>=<span class="string">"domain.blog.Comment"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>按包批量取别名</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用 Bean 的首字母小写的非限定类名来作为它的别名 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"domain.blog"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>注解取别名</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias</span>(<span class="string">"author"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>下面是一些为常见的 Java 类型内建的类型别名。它们都是不区分大小写的，注意，为了应对原始类型的命名重复，采取了特殊的命名风格。</p><table><thead><tr><th align="left">别名</th><th align="left">映射的类型</th></tr></thead><tbody><tr><td align="left">_byte</td><td align="left">byte</td></tr><tr><td align="left">_long</td><td align="left">long</td></tr><tr><td align="left">_short</td><td align="left">short</td></tr><tr><td align="left">_int</td><td align="left">int</td></tr><tr><td align="left">_integer</td><td align="left">int</td></tr><tr><td align="left">_double</td><td align="left">double</td></tr><tr><td align="left">_float</td><td align="left">float</td></tr><tr><td align="left">_boolean</td><td align="left">boolean</td></tr><tr><td align="left">string</td><td align="left">String</td></tr><tr><td align="left">byte</td><td align="left">Byte</td></tr><tr><td align="left">long</td><td align="left">Long</td></tr><tr><td align="left">short</td><td align="left">Short</td></tr><tr><td align="left">int</td><td align="left">Integer</td></tr><tr><td align="left">integer</td><td align="left">Integer</td></tr><tr><td align="left">double</td><td align="left">Double</td></tr><tr><td align="left">float</td><td align="left">Float</td></tr><tr><td align="left">boolean</td><td align="left">Boolean</td></tr><tr><td align="left">date</td><td align="left">Date</td></tr><tr><td align="left">decimal</td><td align="left">BigDecimal</td></tr><tr><td align="left">bigdecimal</td><td align="left">BigDecimal</td></tr><tr><td align="left">object</td><td align="left">Object</td></tr><tr><td align="left">map</td><td align="left">Map</td></tr><tr><td align="left">hashmap</td><td align="left">HashMap</td></tr><tr><td align="left">list</td><td align="left">List</td></tr><tr><td align="left">arraylist</td><td align="left">ArrayList</td></tr><tr><td align="left">collection</td><td align="left">Collection</td></tr><tr><td align="left">iterator</td><td align="left">Iterator</td></tr></tbody></table><h4 id="typeHandlers（类型处理器）"><a href="#typeHandlers（类型处理器）" class="headerlink" title="typeHandlers（类型处理器）"></a>typeHandlers（类型处理器）</h4><p>MyBatis 在设置预处理语句（PreparedStatement）中的参数或从结果集中取出一个值时， 都会用类型处理器将获取到的值以合适的方式转换成 Java 类型。</p><h4 id="objectFactory（对象工厂）"><a href="#objectFactory（对象工厂）" class="headerlink" title="objectFactory（对象工厂）"></a>objectFactory（对象工厂）</h4><p>每次 MyBatis 创建结果对象的新实例时，它都会使用一个对象工厂（ObjectFactory）实例来完成实例化工作。 默认的对象工厂需要做的仅仅是实例化目标类，要么通过默认无参构造方法，要么通过存在的参数映射来调用带有参数的构造方法。 如果想覆盖对象工厂的默认行为，可以通过创建自己的对象工厂来实现。</p><h4 id="plugins（插件）"><a href="#plugins（插件）" class="headerlink" title="plugins（插件）"></a>plugins（插件）</h4><p>MyBatis 允许你在映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：</p><ul><li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</li><li>ParameterHandler (getParameterObject, setParameters)</li><li>ResultSetHandler (handleResultSets, handleOutputParameters)</li><li>StatementHandler (prepare, parameterize, batch, update, query)</li></ul><p>这些类中方法的细节可以通过查看每个方法的签名来发现，或者直接查看 MyBatis 发行包中的源代码。 如果你想做的不仅仅是监控方法的调用，那么你最好相当了解要重写的方法的行为。 因为在试图修改或重写已有方法的行为时，很可能会破坏 MyBatis 的核心模块。 这些都是更底层的类和方法，所以使用插件的时候要特别当心。</p><p>通过 MyBatis 提供的强大机制，使用插件是非常简单的，只需实现 Interceptor 接口，并指定想要拦截的方法签名即可。</p><h4 id="environments（环境配置）"><a href="#environments（环境配置）" class="headerlink" title="environments（环境配置）"></a>environments（环境配置）</h4><p>MyBatis 可以配置成适应多种环境，这种机制有助于将 SQL 映射应用于多种数据库之中， 现实情况下有多种理由需要这么做。例如，开发、测试和生产环境需要有不同的配置；或者想在具有相同 Schema 的多个生产数据库中使用相同的 SQL 映射。还有许多类似的使用场景。</p><p><strong>不过要记住：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。</strong></p><h5 id="environment（环境变量）"><a href="#environment（环境变量）" class="headerlink" title="environment（环境变量）"></a>environment（环境变量）</h5><p>transactionManager（事务管理器）</p><p>在 MyBatis 中有两种类型的事务管理器（也就是 type=”[JDBC|MANAGED]”）：</p><ul><li>JDBC – 这个配置直接使用了 JDBC 的提交和回滚设施，它依赖从数据源获得的连接来管理事务作用域。</li><li>MANAGED – 这个配置几乎没做什么。它从不提交或回滚一个连接，而是让容器来管理事务的整个生命周期（比如 JEE 应用服务器的上下文）。 默认情况下它会关闭连接。然而一些容器并不希望连接被关闭，因此需要将 closeConnection 属性设置为 false 来阻止默认的关闭行为。</li></ul><p><strong>提示</strong> 如果你正在使用 Spring + MyBatis，则没有必要配置事务管理器，因为 Spring 模块会使用自带的管理器来覆盖前面的配置。</p><p>dataSource（数据源）</p><p>dataSource 元素使用标准的 JDBC 数据源接口来配置 JDBC 连接对象的资源。</p><ul><li>大多数 MyBatis 应用程序会按示例中的例子来配置数据源。虽然数据源配置是可选的，但如果要启用延迟加载特性，就必须配置数据源。</li></ul><p>有三种内建的数据源类型（也就是 type=”[UNPOOLED|POOLED|JNDI]”</p><h4 id="databaseIdProvider（数据库厂商标识）"><a href="#databaseIdProvider（数据库厂商标识）" class="headerlink" title="databaseIdProvider（数据库厂商标识）"></a>databaseIdProvider（数据库厂商标识）</h4><p>MyBatis 可以根据不同的数据库厂商执行不同的语句，这种多厂商的支持是基于映射语句中的 <code>databaseId</code> 属性。 MyBatis 会加载带有匹配当前数据库 <code>databaseId</code> 属性和所有不带 <code>databaseId</code> 属性的语句。 如果同时找到带有 <code>databaseId</code> 和不带 <code>databaseId</code> 的相同语句，则后者会被舍弃。</p><h4 id="mappers（映射器）"><a href="#mappers（映射器）" class="headerlink" title="mappers（映射器）"></a>mappers（映射器）</h4><p>既然 MyBatis 的行为已经由上述元素配置完了，我们现在就要来定义 SQL 映射语句了。 但首先，我们需要告诉 MyBatis 到哪里去找到这些语句。 在自动查找资源方面，Java 并没有提供一个很好的解决方案，所以最好的办法是直接告诉 MyBatis 到哪里去找映射文件。 你可以使用相对于类路径的资源引用，或完全限定资源定位符（包括 <code>file:///</code> 形式的 URL），或类名和包名等。</p><h2 id="第4章-映射文件"><a href="#第4章-映射文件" class="headerlink" title="第4章 映射文件"></a>第4章 映射文件</h2><p>SQL 映射文件只有很少的几个顶级元素（按照应被定义的顺序列出）：</p><ul><li><code>cache</code> – 该命名空间的缓存配置。</li><li><code>cache-ref</code> – 引用其它命名空间的缓存配置。</li><li><code>resultMap</code> – 描述如何从数据库结果集中加载对象，是最复杂也是最强大的元素。</li><li><del><code>parameterMap</code> – 老式风格的参数映射。此元素已被废弃，并可能在将来被移除！请使用行内参数映射。文档中不会介绍此元素。</del></li><li><code>sql</code> – 可被其它语句引用的可重用语句块。</li><li><code>insert</code> – 映射插入语句。</li><li><code>update</code> – 映射更新语句。</li><li><code>delete</code> – 映射删除语句。</li><li><code>select</code> – 映射查询语句。</li></ul><h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>select 元素允许你配置很多属性来配置每条语句的行为细节。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"selectPerson"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"int"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterMap</span>=<span class="string">"deprecated"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultType</span>=<span class="string">"hashmap"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultMap</span>=<span class="string">"personResultMap"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">useCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">fetchSize</span>=<span class="string">"256"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultSetType</span>=<span class="string">"FORWARD_ONLY"</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">属性</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>id</code></td><td align="left">在命名空间中唯一的标识符，可以被用来引用这条语句。</td></tr><tr><td align="left"><code>parameterType</code></td><td align="left">将会传入这条语句的参数的类全限定名或别名。这个属性是可选的，因为 MyBatis 可以通过类型处理器（TypeHandler）推断出具体传入语句的参数，默认值为未设置（unset）。</td></tr><tr><td align="left">parameterMap</td><td align="left">用于引用外部 parameterMap 的属性，目前已被废弃。请使用行内参数映射和 parameterType 属性。</td></tr><tr><td align="left"><code>resultType</code></td><td align="left">期望从这条语句中返回结果的类全限定名或别名。 注意，如果返回的是集合，那应该设置为集合包含的类型，而不是集合本身的类型。 resultType 和 resultMap 之间只能同时使用一个。</td></tr><tr><td align="left"><code>resultMap</code></td><td align="left">对外部 resultMap 的命名引用。结果映射是 MyBatis 最强大的特性，如果你对其理解透彻，许多复杂的映射问题都能迎刃而解。 resultType 和 resultMap 之间只能同时使用一个。</td></tr><tr><td align="left"><code>flushCache</code></td><td align="left">将其设置为 true 后，只要语句被调用，都会导致本地缓存和二级缓存被清空，默认值：false。</td></tr><tr><td align="left"><code>useCache</code></td><td align="left">将其设置为 true 后，将会导致本条语句的结果被二级缓存缓存起来，默认值：对 select 元素为 true。</td></tr><tr><td align="left"><code>timeout</code></td><td align="left">这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为未设置（unset）（依赖数据库驱动）。</td></tr><tr><td align="left"><code>fetchSize</code></td><td align="left">这是一个给驱动的建议值，尝试让驱动程序每次批量返回的结果行数等于这个设置值。 默认值为未设置（unset）（依赖驱动）。</td></tr><tr><td align="left"><code>statementType</code></td><td align="left">可选 STATEMENT，PREPARED 或 CALLABLE。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。</td></tr><tr><td align="left"><code>resultSetType</code></td><td align="left">FORWARD_ONLY，SCROLL_SENSITIVE, SCROLL_INSENSITIVE 或 DEFAULT（等价于 unset） 中的一个，默认值为 unset （依赖数据库驱动）。</td></tr><tr><td align="left"><code>databaseId</code></td><td align="left">如果配置了数据库厂商标识（databaseIdProvider），MyBatis 会加载所有不带 databaseId 或匹配当前 databaseId 的语句；如果带和不带的语句都有，则不带的会被忽略。</td></tr><tr><td align="left"><code>resultOrdered</code></td><td align="left">这个设置仅针对嵌套结果 select 语句：如果为 true，将会假设包含了嵌套结果集或是分组，当返回一个主结果行时，就不会产生对前面结果集的引用。 这就使得在获取嵌套结果集的时候不至于内存不够用。默认值：<code>false</code>。</td></tr><tr><td align="left"><code>resultSets</code></td><td align="left">这个设置仅适用于多结果集的情况。它将列出语句执行后返回的结果集并赋予每个结果集一个名称，多个名称之间以逗号分隔。</td></tr></tbody></table><h3 id="insert-update-和-delete"><a href="#insert-update-和-delete" class="headerlink" title="insert, update 和 delete"></a>insert, update 和 delete</h3><p>数据变更语句 insert，update 和 delete 的实现非常接近：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"insertAuthor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"domain.blog.Author"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyProperty</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyColumn</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">useGeneratedKeys</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"20"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"updateAuthor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"domain.blog.Author"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"20"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"deleteAuthor"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">"domain.blog.Author"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">"PREPARED"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">"20"</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">属性</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>id</code></td><td align="left">在命名空间中唯一的标识符，可以被用来引用这条语句。</td></tr><tr><td align="left"><code>parameterType</code></td><td align="left">将会传入这条语句的参数的类全限定名或别名。这个属性是可选的，因为 MyBatis 可以通过类型处理器（TypeHandler）推断出具体传入语句的参数，默认值为未设置（unset）。</td></tr><tr><td align="left"><del><code>parameterMap</code></del></td><td align="left"><del>用于引用外部 parameterMap 的属性，目前已被废弃。请使用行内参数映射和 parameterType 属性。</del></td></tr><tr><td align="left"><code>flushCache</code></td><td align="left">将其设置为 true 后，只要语句被调用，都会导致本地缓存和二级缓存被清空，默认值：（对 insert、update 和 delete 语句）true。</td></tr><tr><td align="left"><code>timeout</code></td><td align="left">这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为未设置（unset）（依赖数据库驱动）。</td></tr><tr><td align="left"><code>statementType</code></td><td align="left">可选 STATEMENT，PREPARED 或 CALLABLE。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。</td></tr><tr><td align="left"><code>useGeneratedKeys</code></td><td align="left">（仅适用于 insert 和 update）这会令 MyBatis 使用 JDBC 的 getGeneratedKeys 方法来取出由数据库内部生成的主键（比如：像 MySQL 和 SQL Server 这样的关系型数据库管理系统的自动递增字段），默认值：false。</td></tr><tr><td align="left"><code>keyProperty</code></td><td align="left">（仅适用于 insert 和 update）指定能够唯一识别对象的属性，MyBatis 会使用 getGeneratedKeys 的返回值或 insert 语句的 selectKey 子元素设置它的值，默认值：未设置（<code>unset</code>）。如果生成列不止一个，可以用逗号分隔多个属性名称。</td></tr><tr><td align="left"><code>keyColumn</code></td><td align="left">（仅适用于 insert 和 update）设置生成键值在表中的列名，在某些数据库（像 PostgreSQL）中，当主键列不是表中的第一列的时候，是必须设置的。如果生成列不止一个，可以用逗号分隔多个属性名称。</td></tr><tr><td align="left"><code>databaseId</code></td><td align="left">如果配置了数据库厂商标识（databaseIdProvider），MyBatis 会加载所有不带 databaseId 或匹配当前 databaseId 的语句；如果带和不带的语句都有，则不带的会被忽略。</td></tr></tbody></table><h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><p>这个元素可以用来定义可重用的 SQL 代码片段，以便在其它语句中使用。 参数可以静态地（在加载的时候）确定下来，并且可以在不同的 include 元素中定义不同的参数值。</p><h2 id="第5章-动态-SQL"><a href="#第5章-动态-SQL" class="headerlink" title="第5章 动态 SQL"></a>第5章 动态 SQL</h2><p>动态 SQL 是 MyBatis 的强大特性之一。如果你使用过 JDBC 或其它类似的框架，你应该能理解根据不同条件拼接 SQL 语句有多痛苦，例如拼接时要确保不能忘记添加必要的空格，还要注意去掉列表最后一个列名的逗号。利用动态 SQL，可以彻底摆脱这种痛苦。</p><p>使用动态 SQL 并非一件易事，但借助可用于任何 SQL 映射语句中的强大的动态 SQL 语言，MyBatis 显著地提升了这一特性的易用性。</p><p>如果你之前用过 JSTL 或任何基于类 XML 语言的文本处理器，你对动态 SQL 元素可能会感觉似曾相识。在 MyBatis 之前的版本中，需要花时间了解大量的元素。借助功能强大的基于 OGNL 的表达式，MyBatis 3 替换了之前的大部分元素，大大精简了元素种类，现在要学习的元素种类比原来的一半还要少。</p><ul><li>if</li><li>choose (when, otherwise)</li><li>trim (where, set)</li><li>foreach</li></ul><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><h3 id="choose、when、otherwise"><a href="#choose、when、otherwise" class="headerlink" title="choose、when、otherwise"></a>choose、when、otherwise</h3><h3 id="trim、where、set"><a href="#trim、where、set" class="headerlink" title="trim、where、set"></a>trim、where、set</h3><h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><h2 id="第6章-缓存机制"><a href="#第6章-缓存机制" class="headerlink" title="第6章 缓存机制"></a>第6章 缓存机制</h2><h2 id="第7章-Spring-整合"><a href="#第7章-Spring-整合" class="headerlink" title="第7章 Spring 整合"></a>第7章 Spring 整合</h2><h2 id="第8章-逆向工程"><a href="#第8章-逆向工程" class="headerlink" title="第8章 逆向工程"></a>第8章 逆向工程</h2><p>MyBatis Generator，简称 MBG，是一个专门为 MyBatis 框架使用者定制的代码生成器，可以快速的根据表生成对应的映射文件，接口，以及bean类。支持基本的增删改查，以及 QBC 风格的条件查询。但是表连接、存储过程等这些复杂 sql 的定义需要我们手工编写。</p><p>使用步骤：<br>1）编写MBG的配置文件（重要几处配置）<br>    1）jdbcConnection配置数据库连接信息<br>    2）javaModelGenerator配置javaBean的生成策略<br>    3）sqlMapGenerator配置sql映射文件生成策略<br>    4）javaClientGenerator配置Mapper接口的生成策略<br>    5）table配置要逆向解析的数据表<br>        tableName：表名<br>        domainObjectName：对应的javaBean名<br>2）运行代码生成器生成代码<br>注意：<br>Context标签<br>targetRuntime=“MyBatis3“可以生成带条件的增删改查<br>targetRuntime=“MyBatis3Simple“可以生成基本的增删改查<br>如果再次生成，建议将之前生成的数据删除，避免xml向后追加内容出现的问题。</p><h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><p><img src="/2020/08/MyBatis%20%E7%AC%94%E8%AE%B0/C:%5CDvenotes%5C3_JavaEE%5C3_MyBatis%5C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png" alt="工作原理"></p><h2 id="插件开发"><a href="#插件开发" class="headerlink" title="插件开发"></a>插件开发</h2><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="PageHelper-插件进行分页"><a href="#PageHelper-插件进行分页" class="headerlink" title="PageHelper 插件进行分页"></a>PageHelper 插件进行分页</h3><p>PageHelper 是 MyBatis 中非常方便的第三方分页插件。</p><p>我们可以对照官方文档的说明，快速的使用插件.</p><p><a href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/README_zh.md" target="_blank" rel="noopener">官方文档</a></p><h3 id="批量操作"><a href="#批量操作" class="headerlink" title="批量操作"></a>批量操作</h3><h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><h3 id="typeHandler-处理枚举"><a href="#typeHandler-处理枚举" class="headerlink" title="typeHandler 处理枚举"></a>typeHandler 处理枚举</h3>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;第1章-简介&quot;&gt;&lt;a href=&quot;#第1章-简介&quot; class=&quot;headerlink&quot; title=&quot;第1章 简介&quot;&gt;&lt;/a&gt;第1章 简介&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://mybatis.org/mybatis-3/zh/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MyBatis&lt;/a&gt; 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。&lt;/p&gt;
    
    </summary>
    
    
      <category term="MyBatis" scheme="https://ActionDing.github.io/categories/MyBatis/"/>
    
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="MyBatis" scheme="https://ActionDing.github.io/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>Linux 笔记</title>
    <link href="https://actionding.github.io/2020/08/Linux%20%E7%AC%94%E8%AE%B0/"/>
    <id>https://actionding.github.io/2020/08/Linux%20%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-04T19:02:03.000Z</published>
    <updated>2021-02-18T03:06:07.921Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>学习Linux流程为：<br>第1阶段：Linux环境下的基本操作命令，包括文件操作命令（rm mkdir chmod，chown）编辑工具使用（vi vim）Linux用户管理（useradd userdel usermod）等。<br>第2阶段：Linux的各种配置（环境变量配置，网络配置，服务配置）。<br>第3阶段：Linux下如何搭建对应语言的开发环境（大数据，JavaEE，Python等）。<br>第4阶段：能编写sheLL脚本，对Linux服务器进行维护。<br>第5阶段：能进行安全设置，防止攻击，保障服务器正常运行，能对系统调优。<br>第6阶段：深入理解Linux系统（对内核有研究），熟练掌握大型网站应用架构组成、并熟悉各个环节的部署和维护方法。</p></blockquote><h2 id="第一章-Linux-概述"><a href="#第一章-Linux-概述" class="headerlink" title="第一章 Linux 概述"></a>第一章 Linux 概述</h2><p>Linux是一个开源、免费的操作系统，其稳定性、安全性、处理多并发已经得到业界的认可，目前很多中型，大型甚至是集群项目都在使用Linux，很多软件公司考虑到开发成本都首选Linux，在中国软件公司得到广泛的使用。</p><h3 id="1-1-准备工作"><a href="#1-1-准备工作" class="headerlink" title="1.1 准备工作"></a>1.1 准备工作</h3><ol><li>安装 VM 和 CentOS</li><li>安装 VM Tools，设置共享文件夹</li><li>安装 Xshell5 远程登陆</li><li>安装 Xftp5 远程上传和下载文件</li></ol><h3 id="1-2-Linux-目录结构"><a href="#1-2-Linux-目录结构" class="headerlink" title="1.2 Linux 目录结构"></a>1.2 Linux 目录结构</h3><p><img src="/2020/08/Linux%20%E7%AC%94%E8%AE%B0/centos7-filesystem.png" alt="centos7-filesystem"></p><p><code>/bin</code>(<code>/usr/bin</code>, <code>/usr/local/bin</code>): 是 Binary 的缩写, 这个目录存放着最经常使用的<strong>命令</strong></p><p><code>/home</code>：存放普通用户的<strong>主目录</strong>，在 Linux 中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的</p><p><code>/root</code>：该目录为<strong>系统管理员</strong>，也称作超级权限者的用户主目录</p><p><code>/boot</code>：存放的是启动 Linux 时使用的一些<strong>核心文件</strong>，包括一些连接文件以及镜像文件</p><p><code>/media</code>：Linux 系统会自动识别一些<strong>设备</strong>，例如U盘、光驱等等，当识别后，Linux会 把识别的设备挂载到这个目录下</p><p><code>/mnt</code>：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在 <code>/mnt/</code> 上，然后进入该目录就可以查看里的内容了</p><p><code>/usr/local</code>：这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序</p><p><code>/var</code>：这个目录存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件。</p><hr><p><code>/sbin</code>( <code>/usr/sbin</code>, <code>/usr/local/sbin</code>): s 就是 Super User 的意思，这里存放的是系统管理员使用的<strong>系统管理程序</strong></p><p><code>/etc</code>：所有的系统管理所需要的<strong>配置</strong>文件和子目录<code>my.conf</code></p><p><code>/proc</code>：这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息。</p><p><code>/dev</code>：类似于 windows 的设备管理器，把所有的硬件用文件的形式存储。</p><p><code>/opt</code>：给主机额外安装软件所摆放的目录。</p><p><code>/tmp</code>：存放临时文件。</p><p><code>/var</code>：这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件</p><h3 id="1-3-Xshell5"><a href="#1-3-Xshell5" class="headerlink" title="1.3 Xshell5"></a>1.3 Xshell5</h3><p>Xshell5 是目前最好的远程登录到 Linux 操作的软件，流畅的速度并且完美解决了中文乱码问题，是目前程序员首选的软件。</p><h3 id="1-4-Xftp5"><a href="#1-4-Xftp5" class="headerlink" title="1.4 Xftp5"></a>1.4 Xftp5</h3><p>Xftp5 是一个基于 Windows 平台的功能强大的 SFTP、FTP 文件传输软件。使用了 Xftp 后，Windows 用户可以安全地在 Unix/Linux 和 Windows PC 之间传输文件。</p><h2 id="第二章-Vi-和-Vim-编辑器"><a href="#第二章-Vi-和-Vim-编辑器" class="headerlink" title="第二章 Vi 和 Vim 编辑器"></a>第二章 Vi 和 Vim 编辑器</h2><h3 id="2-1-vi-和-vim-的基本介绍"><a href="#2-1-vi-和-vim-的基本介绍" class="headerlink" title="2.1 vi 和 vim 的基本介绍"></a>2.1 vi 和 vim 的基本介绍</h3><p>所有的Linux系统都会内建vi文本编辑器。</p><p>Vim具有程序编辑的能力，可以看做是Vi的增强版本，可以主动的以字体颜色辨别语法的正确性，方便程序设计。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。</p><h3 id="2-2-vi-和-vim-的三种常见模式"><a href="#2-2-vi-和-vim-的三种常见模式" class="headerlink" title="2.2 vi 和 vim 的三种常见模式"></a>2.2 vi 和 vim 的三种常见模式</h3><ol><li><p>正常模式</p><p>以 vim 打开一个文档进入此模式。</p><p>在正常模式下，可以使用上、下、左、右键移动光标，可以删除字符和删除整行（<code>dd</code>），还可以使用复制和粘贴功能。</p></li><li><p>插入模式</p><p>在此模式下，可以输入内容。</p><p>在正常模式下，按下 I、i（insert）、O、o（open）、A、a（append）、R、r（replace）、C、c（change）任何一个字母进入编辑模式。一般按 i 即可。</p></li><li><p>命令行模式</p><p>在此模式下，可以完成读取、存盘、替换、显示行号、退出 vim 等操作。</p><p><code>:q</code>：退出。</p><p><code>:q!</code>：强制不保存退出。</p><p><code>:qw!</code>：强制保存并退出。</p><p><code>:x</code>：保存并退出。</p><p><code>:w</code>：保存。</p><p><code>:w!</code>：强制保存。</p><p><code>:w filename</code>：文件另存为 filename。</p><p><code>n1,n2 w filename</code>：将 n1 行到 n2 行的数据另存为 filename。</p></li></ol><h3 id="2-3-快捷键键盘"><a href="#2-3-快捷键键盘" class="headerlink" title="2.3 快捷键键盘"></a>2.3 快捷键键盘</h3><p><img src="/2020/08/Linux%20%E7%AC%94%E8%AE%B0/vim-sheet.gif" alt="vim-sheet"></p><h2 id="第三章-基本操作命令"><a href="#第三章-基本操作命令" class="headerlink" title="第三章 基本操作命令"></a>第三章 基本操作命令</h2><h3 id="3-1-关机-amp-重启命令"><a href="#3-1-关机-amp-重启命令" class="headerlink" title="3.1 关机&amp;重启命令"></a>3.1 关机&amp;重启命令</h3><p><code>shutdown -h now</code>：立刻关机</p><p><code>shutdown -h 1</code>：1分钟后关机</p><p><code>shutdown -r now</code>：重启</p><p><code>halt</code>：关机</p><p><code>reboot</code>：重启</p><p><code>sync</code>：把内存的数据同步到磁盘</p><blockquote><p>当我们关机或重启时，都应该先执行一下 <code>sync</code> 命令，把内存的数据写入磁盘，防止数据丢失。</p></blockquote><h3 id="3-2-用户登录与注销"><a href="#3-2-用户登录与注销" class="headerlink" title="3.2 用户登录与注销"></a>3.2 用户登录与注销</h3><p><code>su - username</code>：切换成系统管理员身份。</p><p><code>logout</code>：注销用户。</p><h3 id="3-3-用户管理"><a href="#3-3-用户管理" class="headerlink" title="3.3 用户管理"></a>3.3 用户管理</h3><p><code>useradd [username]</code>：添加用户</p><p><code>userdel [username]</code>：删除用户</p><p><code>passwd [username]</code>：指定/修改密码</p><p><code>id [username]</code>：查询用户信息</p><p><code>su – [username]</code>：切换用户</p><ul><li>从权限高的用户切换到权限低的用户，不需要输入密码，反之需要</li><li>当需要返回到原来用户时，使用<code>exit</code>指令</li></ul><p><code>whoami</code>/<code>who am I</code>：查看当前用户/登录用户</p><h3 id="3-4-用户组"><a href="#3-4-用户组" class="headerlink" title="3.4 用户组"></a>3.4 用户组</h3><p><code>groupadd [groupname]</code>：新增组</p><p><code>groupdel [groupname]</code>：删除组</p><p><code>useradd -g [groupname] [username]</code>：添加用户时加入组</p><p><code>usermod -g [groupname] [username]</code>：修改用户的组</p><p> <strong>用户和组的相关文件</strong></p><p><code>/etc/passwd</code>：用户（user）的配置文件，记录用户的各种信息</p><p><code>/etc/shadow</code>：口令的配置文件</p><p><code>/etc/group</code>：组（group）的配置文件，记录Linux包含的组的信息</p><h3 id="3-5-帮助指令"><a href="#3-5-帮助指令" class="headerlink" title="3.5 帮助指令"></a>3.5 帮助指令</h3><p><code>man [命令或配置文件]</code>：获得帮助信息</p><p><code>help [命令]</code>：获得 shell 内置命令的帮助信息</p><h2 id="第四章-常用命令"><a href="#第四章-常用命令" class="headerlink" title="第四章 常用命令"></a>第四章 常用命令</h2><h3 id="4-1-指令的运行级别"><a href="#4-1-指令的运行级别" class="headerlink" title="4.1 指令的运行级别"></a>4.1 指令的运行级别</h3><ul><li>0：关机</li><li>1：单用户（找回丢失密码）</li><li>2：多用户无网络服务</li><li>3：多用户有网络服务</li><li>4：系统未使用，保留给用户</li><li>5：图形界面</li><li>6：系统重启</li></ul><p>常用的运行级别为 3 和 5。</p><p><code>init [0-6]</code>：切换到指定的运行级别。</p><p><code>/etc/inittab</code>：系统的运行级别配置文件。</p><p><code>id:5:initdefault</code>：默认的运行级别为 5。</p><p><strong>如何修改 root 密码？</strong></p><p>思路：进入到<strong>单用户模式</strong>，然后修改 root 密码。因为进入单用户模式，root 不需要密码就可以登录。</p><h3 id="4-2-文件目录类"><a href="#4-2-文件目录类" class="headerlink" title="4.2 文件目录类"></a>4.2 文件目录类</h3><h4 id="4-2-1-pwd-指令"><a href="#4-2-1-pwd-指令" class="headerlink" title="4.2.1 pwd 指令"></a>4.2.1 pwd 指令</h4><p><code>pwd</code>：显示当前工作目录的绝对路径。</p><h4 id="4-2-2-ls-指令"><a href="#4-2-2-ls-指令" class="headerlink" title="4.2.2 ls 指令"></a>4.2.2 ls 指令</h4><p><code>ls [选项] [目录或者文件]</code>：查看当前目录的所有内容信息。</p><p><strong>常用选项</strong></p><ul><li><code>-a</code>：显示当前目录所有的文件和目录，包括隐藏的。</li><li><code>-l</code>：以列表的方式显示信息。</li></ul><h4 id="4-2-3-cd-指令"><a href="#4-2-3-cd-指令" class="headerlink" title="4.2.3 cd 指令"></a>4.2.3 cd 指令</h4><p><code>cd [参数]</code>：切换到指定目录。</p><ul><li><code>cd ~</code>或<code>cd</code>：回到自己的家目录。</li><li><code>cd ..</code>：回到当前目录的上一级目录。</li></ul><h4 id="4-3-4-mkdir-指令"><a href="#4-3-4-mkdir-指令" class="headerlink" title="4.3.4 mkdir 指令"></a>4.3.4 mkdir 指令</h4><p><code>mkdir [选项]</code>：创建目录。</p><ul><li><code>-p</code>：创建多级目录。</li></ul><h4 id="4-3-5-rmdir-指令"><a href="#4-3-5-rmdir-指令" class="headerlink" title="4.3.5 rmdir 指令"></a>4.3.5 rmdir 指令</h4><p><code>rmdir [选项]</code>：删除<strong>空</strong>目录。</p><ul><li><code>rm -rf</code>：删除非空目录。</li></ul><h4 id="4-3-6-touch-指令"><a href="#4-3-6-touch-指令" class="headerlink" title="4.3.6 touch 指令"></a>4.3.6 touch 指令</h4><p><code>touch [文件名]</code>：创建空文件。</p><h4 id="4-3-7-cp-指令"><a href="#4-3-7-cp-指令" class="headerlink" title="4.3.7 cp 指令"></a>4.3.7 cp 指令</h4><p><code>cp [选项] [source dest]</code>：复制文件到指定目录。</p><ul><li><p><code>-r</code>：递归复制整个文件夹</p></li><li><p><code>\cp</code>：强制覆盖不提示，如：<code>\cp -r aaa/ bbb/</code></p></li></ul><h4 id="4-3-8-rm-指令"><a href="#4-3-8-rm-指令" class="headerlink" title="4.3.8 rm 指令"></a>4.3.8 rm 指令</h4><p><code>rm [选项]</code>：删除文件或目录。</p><ul><li><code>-r</code>：递归删除整个文件夹。</li><li><code>-f</code>：强制删除不提示。</li></ul><h4 id="4-3-9-mv-指令"><a href="#4-3-9-mv-指令" class="headerlink" title="4.3.9 mv 指令"></a>4.3.9 mv 指令</h4><p><code>rm [oldFileName] [newFileName]</code>：重命名。</p><p><code>mv [moveFileName] [targetFolder]</code>：移动文件。</p><h4 id="4-3-10-cat-指令"><a href="#4-3-10-cat-指令" class="headerlink" title="4.3.10 cat 指令"></a>4.3.10 cat 指令</h4><p><code>cat [选项]</code>：查看文件的内容，只以读的方式打开。</p><ul><li><code>-n</code>：显示行号。</li></ul><h4 id="4-3-11-more-指令"><a href="#4-3-11-more-指令" class="headerlink" title="4.3.11 more 指令"></a>4.3.11 more 指令</h4><p><code>more [fileName]</code>：基于 vim 编辑器的文本过滤器，它以全屏幕的方式按页显示文件的内容。</p><ul><li><code>space</code>：向下翻一页。</li><li><code>Enter</code>：向下翻一行。</li><li><code>q</code>：退出 more 指令。</li><li>Ctrl + F`：向下滚动一屏。</li><li>Ctrl + B`：向上滚动一屏。</li><li><code>=</code>：输出当前行号。</li><li><code>:f</code>：输出文件名和当前行号。</li></ul><h4 id="4-3-12-less-指令"><a href="#4-3-12-less-指令" class="headerlink" title="4.3.12 less 指令"></a>4.3.12 less 指令</h4><p><code>less [fileName]</code>：分屏查看文件内容。</p><ul><li><code>space</code>：向下翻一页。</li><li><code>pageup</code>：向上翻一页。</li><li><code>pagedown</code>：向下翻一页。</li><li><code>/字符串</code>：向下搜寻字符串，<code>n</code>：向下查找；<code>N</code>：向上查找。</li><li><code>?字符串</code>：向上搜寻字符串，<code>n</code>：向下查找；<code>N</code>：向上查找。</li><li>q`：退出 less 指令。</li></ul><h4 id="4-3-13-gt-指令和-gt-gt-指令"><a href="#4-3-13-gt-指令和-gt-gt-指令" class="headerlink" title="4.3.13 &gt; 指令和 &gt;&gt; 指令"></a>4.3.13 &gt; 指令和 &gt;&gt; 指令</h4><p><code>&gt;</code> ：输出重定向，会覆盖原来的文件的内容。</p><p><code>&gt;&gt;</code>：追加，在文件的尾部追加。</p><ul><li><code>ls -l &gt; [fileName]</code>：将列表的内容写入文件中（覆盖写），如果文件不存在就创建该文件。</li><li><code>ls -al &gt;&gt; [fileName]</code>：将列表的内容写入文件中（追加写），如果文件不存在就创建该文件。</li><li><code>cat [fileName1] &gt; [fileName2]</code></li><li><code>echo 字符串&gt;&gt; [fileName]</code></li></ul><h4 id="4-3-14-echo-指令"><a href="#4-3-14-echo-指令" class="headerlink" title="4.3.14 echo 指令"></a>4.3.14 echo 指令</h4><p><code>echo [选项] [输出内容]</code>：输出内容到控制台。</p><h4 id="4-3-15-head-指令"><a href="#4-3-15-head-指令" class="headerlink" title="4.3.15 head 指令"></a>4.3.15 head 指令</h4><p><code>head [fileName]</code>：显示文件的开头部分内容，默认前十行内容。</p><ul><li><code>head -n [number] [fileName]</code>：查看文件前 <code>number</code> 行内容。</li></ul><h4 id="4-3-16-tail-指令"><a href="#4-3-16-tail-指令" class="headerlink" title="4.3.16 tail 指令"></a>4.3.16 tail 指令</h4><p>tail [fileName]`：显示文件的开头部分内容，默认前十行内容。</p><ul><li>tail -n [number] [fileName]<code>：查看文件前</code>number` 行内容。</li><li>tail -f [fileName]`：实时追踪该文档的所有更新。</li></ul><h4 id="4-3-17-ln-指令"><a href="#4-3-17-ln-指令" class="headerlink" title="4.3.17 ln 指令"></a>4.3.17 ln 指令</h4><p><code>ln -s [原文件或目录] [软链接名]</code>：给原文件或目录创建一个软链接。</p><h4 id="4-3-18-history-指令"><a href="#4-3-18-history-指令" class="headerlink" title="4.3.18 history 指令"></a>4.3.18 history 指令</h4><p><code>history</code>：查看已经执行过的历史命令。</p><ul><li><code>history [number]</code>：查看最近执行 <code>number</code> 个指令。</li><li><code>![行号]</code>：执行行号对应的指令。</li></ul><h3 id="4-4-时间日期类"><a href="#4-4-时间日期类" class="headerlink" title="4.4 时间日期类"></a>4.4 时间日期类</h3><h4 id="4-4-1-date-指令"><a href="#4-4-1-date-指令" class="headerlink" title="4.4.1 date 指令"></a>4.4.1 date 指令</h4><p><code>date</code>：显示当前时间。</p><ul><li><code>date +%Y</code>：显示当前年份。</li><li><code>date +%m</code>：显示当前月份。</li><li><code>date +%d</code>：显示当前天数。</li><li><code>date &quot;+%Y-%m-%d %H:%M:%S&quot;</code>：显示年月日时分秒。</li><li><code>date -s [字符串时间]</code>：设置系统当前时间。</li></ul><h4 id="4-4-2-cal-指令"><a href="#4-4-2-cal-指令" class="headerlink" title="4.4.2 cal 指令"></a>4.4.2 cal 指令</h4><p><code>cal</code>：显示本月日历。</p><ul><li><code>cal [年份]</code>：显示年日历。</li></ul><h3 id="4-5-搜索查找类"><a href="#4-5-搜索查找类" class="headerlink" title="4.5 搜索查找类"></a>4.5 搜索查找类</h3><h4 id="4-5-1-find-指令"><a href="#4-5-1-find-指令" class="headerlink" title="4.5.1 find 指令"></a>4.5.1 find 指令</h4><p><code>find [搜索范围] [选项]</code>：从指定目录向下递归地遍历各个子目录，将满足条件的文件或者目录显示在终端。</p><ul><li><code>-name</code>：按照指定的文件名查找模式查找文件。</li><li><code>-user</code>：查找属于指定用户名的所有文件。</li><li><code>-size</code>：按照指定的文件大小查找文件。</li></ul><h4 id="4-5-2-locate-指令"><a href="#4-5-2-locate-指令" class="headerlink" title="4.5.2 locate 指令"></a>4.5.2 locate 指令</h4><p><code>locate [fileName]</code>：快速定位文件路径。</p><p>4.5.2 grep 指令和管道符号 |</p><p><code>grep [选项] [查找内容] [源文件]</code>：过滤查找。</p><p><code>|</code>：管道符，表示将前一个命令的处理结果输出传递给后面的命令处理。</p><ul><li><code>-n</code>：显示匹配行及行号。</li><li><code>-i</code>：忽略字母大小写。</li></ul><p>如：<code>cat hello.txt | grep -ni yes</code></p><h3 id="4-6-压缩和解压类"><a href="#4-6-压缩和解压类" class="headerlink" title="4.6 压缩和解压类"></a>4.6 压缩和解压类</h3><h4 id="4-6-1-gzip-gunzip-指令"><a href="#4-6-1-gzip-gunzip-指令" class="headerlink" title="4.6.1 gzip/gunzip 指令"></a>4.6.1 gzip/gunzip 指令</h4><p><code>gzip [fileName]</code>：压缩文件，只能将文件压缩为 <code>*.gz</code> 文件。</p><p><code>gunzip [fileName]</code>：解压缩文件命令。</p><p>使用 <code>gzip</code> 对文件进行压缩后，不会保留原来的文件。</p><h4 id="4-6-1-zip-uzip-指令"><a href="#4-6-1-zip-uzip-指令" class="headerlink" title="4.6.1 zip/uzip 指令"></a>4.6.1 zip/uzip 指令</h4><p><code>zip [选项] xxx.zip</code>：压缩文件和目录。</p><ul><li><code>-r</code>：递归压缩，即压缩目录。</li><li>如：<code>zip -r package.zip /home/test/</code></li></ul><p><code>uzip [选项] xxx.zip</code>：解压缩文件。</p><ul><li><code>-d [目录]</code>：指定压缩后的文件存放目录。</li><li>如：<code>unzip -d /opt/tmp/ package.zip</code></li></ul><h4 id="4-6-3-tar-指令"><a href="#4-6-3-tar-指令" class="headerlink" title="4.6.3 tar 指令"></a>4.6.3 tar 指令</h4><p><code>tar [选项] xxx.tar.gz</code>：打包目录，压缩后的文件格式为 <code>xxx.tar.gz</code>。</p><ul><li><code>-c</code>：产生 <code>.tar</code> 打包文件。</li><li><code>-x</code>：解包 <code>.tar</code> 文件。</li><li><code>-v</code>：显示详细信息。</li><li><code>-f</code>：指定压缩后的文件名。</li><li><code>-z</code>：打包同时压缩。</li><li></li><li>如：<code>tar -zcvf myhome.tar.gz /home/</code>（将 <code>/home</code> 的文件夹压缩为 <code>myhome.tar.gz</code>）。</li><li>如：<code>tar -zxvf a.tar.gz</code>（将 <code>a.tar.gz</code> 解压到当前目录）。</li></ul><h2 id="第五章-组管理和权限管理"><a href="#第五章-组管理和权限管理" class="headerlink" title="第五章 组管理和权限管理"></a>第五章 组管理和权限管理</h2><h3 id="5-1-Linux-组基本介绍"><a href="#5-1-Linux-组基本介绍" class="headerlink" title="5.1 Linux 组基本介绍"></a>5.1 Linux 组基本介绍</h3><p>在 Linux 中的每个用户必须属于一个组，不能独立于组外。在 Linux 中每个文件有所有者、所在组、其他组的概念。</p><p><strong>1）所有者</strong></p><p>一般文件的创建者就是该文件的所有者。</p><p><code>ls -ahl</code>：查看文件的所有者。</p><p><code>chown [用户名] [文件名]</code>：修改文件的所有者。</p><p><code>chown [newowner]:[newgroup] [fileName]</code> ：改变用户的所有者和所有组。</p><p><code>-R</code>：如果是目录则使其下所有子文件或目录递归生效。</p><p><strong>2）所在组</strong></p><p><code>groupadd [组名]</code>：创建组。</p><p><code>ls -ahl</code>：查看文件的所在组。</p><p><code>chgrp [组名] [文件名]</code>：修改文件所在组。</p><p><strong>3）其他组</strong></p><p>除文件的所有者和所在组的用户外，系统的其他用户都是文件的其他组。</p><p><strong>4）改变用户所在组</strong></p><p><code>usermod -g [组名] [用户名]</code>：改变用户所在组。</p><p><code>usermod -d [目录名] [用户名]</code>：改变该用户登录的初始目录。</p><h3 id="5-2-权限的基本介绍"><a href="#5-2-权限的基本介绍" class="headerlink" title="5.2 权限的基本介绍"></a>5.2 权限的基本介绍</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# ls -l</span><br><span class="line">总用量 0</span><br><span class="line">-rw-r--r--. 1 root root 0 12月 25 04:12 a.txt</span><br><span class="line">0123456789</span><br></pre></td></tr></table></figure><p><strong>0-9 位说明</strong></p><p>第 0 位：确定文件的类型（d，-，l，c，b 分别表示目录、文件、链接、字符设备文件、块设备文件）。</p><p>第 1-3 位：确定所有者拥有该文件的权限。（User）</p><p>第 4-6 位：确定所属组拥有该文件的权限。（Group）</p><p>第 7-9 位：确定其他用户拥有该文件的权限。（Other）</p><p><strong>1）rwx 权限详解</strong></p><p><strong>rwx 作用到文件</strong></p><p><code>[r]</code>代表可读（read）：可以读取、查看。</p><p><code>[w]</code>代表可写（write）：可以修改。（但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件。）</p><p><code>[x]</code>代表可执行（execute）：可以被执行。</p><p><strong>rwx 作用到目录</strong></p><p><code>[r]</code>代表可读（read）：可以读取，通过 <code>ls</code> 查看目录内容。</p><p><code>[w]</code>代表可写（write）：可以修改，目录内创建、删除、重命名目录。</p><p><code>[x]</code>代表可执行（execute）：可以进入该目录。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc</span><br><span class="line">10 个字符确定不同用户能对文件干什么</span><br><span class="line">第一个字符代表文件类型： 文件 (-),目录(d),链接(l)</span><br><span class="line">其余字符每3 个一组(rwx) 读(r) 写(w) 执行(x)</span><br><span class="line">第一组rwx : 文件拥有者的权限是读、写和执行</span><br><span class="line">第二组rw- : 与文件拥有者同一组的用户的权限是读、写但不能执行</span><br><span class="line">第三组r-- :不与文件拥有者同组的其他用户的权限是读不能写和执行</span><br><span class="line">可用数字表示为: r&#x3D;4,w&#x3D;2,x&#x3D;1 因此rwx&#x3D;4+2+1&#x3D;7</span><br><span class="line">1 文件：硬连接数或 目录：子目录数</span><br><span class="line">root 用户</span><br><span class="line">root 组</span><br><span class="line">1213 文件大小(字节)，如果是文件夹，显示 4096 字节</span><br><span class="line">Feb 2 09:39  最后修改日期</span><br><span class="line">abc 文件名</span><br></pre></td></tr></table></figure><h3 id="5-3-修改权限-chmod"><a href="#5-3-修改权限-chmod" class="headerlink" title="5.3 修改权限 chmod"></a>5.3 修改权限 chmod</h3><p>通过 <code>chmod</code> 指令，可以修改文件或者目录的权限。</p><p><strong>1）通过 <code>+</code>、<code>-</code>、<code>=</code> 变更权限</strong></p><p><code>u</code>：表示所有者</p><p><code>g</code>：表示所有组</p><p><code>o</code>：表示其他人</p><p><code>a</code>：表示所有人(u、g、o 的总和)</p><p><code>chmod u=rwx,g=rx,o=x [文件目录名]</code>：所有者读写执行的权限，所有组读执行的权限，其他人执行的权限。</p><p><code>chmod o+w [文件目录名]</code>：其他人增加写的权限。</p><p><code>chmod a-x [文件目录名]</code>：所有人除去执行的权限。</p><p><strong>2）通过数字变更权限</strong></p><p>规则：<code>r=4</code>、<code>w=2</code>、<code>x=1</code> ，<code>rwx=4+2+1=7</code></p><p><code>chmod u=rwx,g=rx,o=x [文件目录名]</code> 相当于 <code>chmod 751 文件目录名]</code></p><h2 id="第六章-CROND-任务调度"><a href="#第六章-CROND-任务调度" class="headerlink" title="第六章 CROND 任务调度"></a>第六章 CROND 任务调度</h2><h3 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h3><h2 id="第七章-LINUX-磁盘分区、挂载"><a href="#第七章-LINUX-磁盘分区、挂载" class="headerlink" title="第七章 LINUX 磁盘分区、挂载"></a>第七章 LINUX 磁盘分区、挂载</h2><h3 id="7-1-分区基础知识"><a href="#7-1-分区基础知识" class="headerlink" title="7.1 分区基础知识"></a>7.1 分区基础知识</h3><p><strong>1）MBR 分区</strong></p><ol><li>最多支持四个主分区。</li><li>系统只能安装在主分区。</li><li>扩展分区要占一个主分区。</li><li>MBR 最大支持 2TB，但拥有最好的兼容性。</li></ol><p><strong>2）GTP 分区</strong></p><ol><li>支持无线多个分区。（但操作系统可能限制，比如：windows 下最多 128 个分区。）</li><li>最大支持 18EB 的大容量。（1 EB = 1024 PB，1 PB = 1024 TB）</li><li>windows7 64 位以后支持 GTP。</li></ol><h3 id="7-2-Linux-分区"><a href="#7-2-Linux-分区" class="headerlink" title="7.2 Linux 分区"></a>7.2 Linux 分区</h3><p><strong>1）原理介绍</strong></p><p>Linux 来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构, Linux 中每个分区都是用来组成整个文件系统的一部分。</p><p>Linux 采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。</p><p><strong>2）硬盘说明</strong></p><p>Linux 硬盘分 IDE 硬盘和 SCSI 硬盘，目前基本上是 SCSI 硬盘。</p><p>对于 <strong>IDE 硬盘</strong>，驱动器标识符为“hdx~”，其中“hd”表明分区所在设备的类型，这里是指 IDE 硬盘了。</p><p>对于 <strong>SCSI 硬盘</strong>，则标识为“sdx~”，SCSI 硬盘是用“sd”来表示分区所在设备的类型的。</p><p>“x”为盘号（a 为基本盘，b 为基本从属盘，c 为辅助主盘，d 为辅助从属盘），“~”代表分区，前四个分区用数字 1 到 4 表示，它们是主分区或扩展分区，从 5 开始就是逻辑分区。</p><p><code>lsblk</code>：查看当前系统的分区情况。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lsblk -f</span><br><span class="line">NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT</span><br><span class="line">sda                                                                 </span><br><span class="line">├─sda1 xfs                     b4957853-a1e7-48ae-89e9-18026483c661 /boot</span><br><span class="line">├─sda2 swap                    420f1351-c5d5-42c9-90fd-eb6b892b8bab [SWAP]</span><br><span class="line">└─sda3 xfs                     69e02e9e-4b77-4ad9-b656-49495852df04 /</span><br><span class="line">sr0    iso9660 CentOS 7 x86_64 2020-04-22-00-54-00-00               /run/media/r</span><br></pre></td></tr></table></figure><h3 id="7-3-挂载的经典案例"><a href="#7-3-挂载的经典案例" class="headerlink" title="7.3 挂载的经典案例"></a>7.3 挂载的经典案例</h3><ol><li>虚拟机添加硬盘</li><li>分区 <code>fdisk /dev/sdb</code></li><li>格式化 <code>mkfs -t ext4 /dev/sdb1</code></li><li>挂载先创建一个 <code>/home/newdisk</code>，挂载 <code>mount /dev/sdb1 /home/newdisk</code></li><li>设置可以自动挂载(永久挂载，当你重启系统，仍然可以挂载到 <code>/home/newdisk</code>) 。</li></ol><h3 id="7-4-磁盘情况查询"><a href="#7-4-磁盘情况查询" class="headerlink" title="7.4 磁盘情况查询"></a>7.4 磁盘情况查询</h3><p><code>df -h</code>：查询系统整体磁盘使用情况。</p><p><code>du -h [目录]</code>：查询指定目录的磁盘占用情况。</p><ul><li><code>-s</code> 指定目录占用大小汇总</li><li><code>-h</code> 带计量单位</li><li><code>-a</code> 含文件</li><li><code>--max-depth=1</code> 子目录深度</li><li><code>-c</code> 列出明细的同时，增加汇总值</li></ul><h2 id="第八章-网络配置"><a href="#第八章-网络配置" class="headerlink" title="第八章 网络配置"></a>第八章 网络配置</h2><h3 id="8-1-Linux-网络环境配置"><a href="#8-1-Linux-网络环境配置" class="headerlink" title="8.1 Linux 网络环境配置"></a>8.1 Linux 网络环境配置</h3><p><strong>1）自动获取</strong></p><p>Linux 启动后会自动获取 ip，每次自动获取的 ip 地址<strong>可能不一样</strong>。这个不适用于做服务器，因为我们的服务器的 ip 需要时固定的。</p><p><strong>2）指定固定的 ip</strong></p><p>直接修改配置文件来指定 ip。</p><h3 id="8-2-CentOS6-网络配置"><a href="#8-2-CentOS6-网络配置" class="headerlink" title="8.2 CentOS6 网络配置"></a>8.2 CentOS6 网络配置</h3><p><strong>1）修改配置文件</strong></p><p><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0</code>：CentOS6 修改配置文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 修改前</span><br><span class="line">DEVICE&#x3D;eth0# 接口名（设备，网卡）</span><br><span class="line">HWADDR&#x3D;00:0C:29:8B:B7:47 # MAC地址</span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">UUID&#x3D;c5e56ef8-bbe0-4dbc-bffd-46dd1c23d001</span><br><span class="line">ONBOOT&#x3D;no</span><br><span class="line">NM_CONTROLLED&#x3D;yes</span><br><span class="line">BOOTPROTO&#x3D;dhcp</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 修改后</span><br><span class="line">DEVICE&#x3D;eth0</span><br><span class="line">HWADDR&#x3D;00:0C:29:8B:B7:47</span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">UUID&#x3D;c5e56ef8-bbe0-4dbc-bffd-46dd1c23d001</span><br><span class="line">ONBOOT&#x3D;yes</span><br><span class="line">NM_CONTROLLED&#x3D;yes</span><br><span class="line">BOOTPROTO&#x3D;static</span><br></pre></td></tr></table></figure><p><strong>2）重启服务</strong></p><p>① <code>service network restart</code>：重启网络服务。</p><p>② <code>reboot</code>：重启。</p><h3 id="8-3-CentOS7-网络配置"><a href="#8-3-CentOS7-网络配置" class="headerlink" title="8.3 CentOS7 网络配置"></a>8.3 CentOS7 网络配置</h3><p><code>vim /etc/sysconfig/network-scripts/ifcfg-ens33</code>：CentOS7 修改配置文件。</p><p>将<code>ONBOOT=no</code> 改为``ONBOOT=yes<code>，将</code>BOOTPROTO=dhcp<code>改为</code>BOOTPROTO=static`，并在后面增加几行内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IPADDR&#x3D;192.168.127.128</span><br><span class="line">NETMASK&#x3D;255.255.255.0</span><br><span class="line">GATEWAY&#x3D;192.168.127.2</span><br><span class="line">DNS1&#x3D;119.29.29.29</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 修改前</span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">PROXY_METHOD&#x3D;none</span><br><span class="line">BROWSER_ONLY&#x3D;no</span><br><span class="line">BOOTPROTO&#x3D;dhcp </span><br><span class="line">DEFROUTE&#x3D;yes</span><br><span class="line">IPV4_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6INIT&#x3D;yes</span><br><span class="line">IPV6_AUTOCONF&#x3D;yes</span><br><span class="line">IPV6_DEFROUTE&#x3D;yes</span><br><span class="line">IPV6_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6_ADDR_GEN_MODE&#x3D;stable-privacy</span><br><span class="line">NAME&#x3D;ens33</span><br><span class="line">UUID&#x3D;6fe8a9de-cc48-47a6-a6b8-cf0e63bdc58b</span><br><span class="line">DEVICE&#x3D;ens33</span><br><span class="line">ONBOOT&#x3D;no</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 修改后</span><br><span class="line">TYPE&#x3D;Ethernet</span><br><span class="line">PROXY_METHOD&#x3D;none</span><br><span class="line">BROWSER_ONLY&#x3D;no</span><br><span class="line">BOOTPROTO&#x3D;static</span><br><span class="line">DEFROUTE&#x3D;yes</span><br><span class="line">IPV4_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6INIT&#x3D;yes</span><br><span class="line">IPV6_AUTOCONF&#x3D;yes</span><br><span class="line">IPV6_DEFROUTE&#x3D;yes</span><br><span class="line">IPV6_FAILURE_FATAL&#x3D;no</span><br><span class="line">IPV6_ADDR_GEN_MODE&#x3D;stable-privacy</span><br><span class="line">NAME&#x3D;ens33</span><br><span class="line">UUID&#x3D;6fe8a9de-cc48-47a6-a6b8-cf0e63bdc58b</span><br><span class="line">DEVICE&#x3D;ens33</span><br><span class="line">ONBOOT&#x3D;yes</span><br><span class="line">IPADDR&#x3D;192.168.127.128</span><br><span class="line">NETMASK&#x3D;255.255.255.0</span><br><span class="line">GATEWAY&#x3D;192.168.127.2</span><br><span class="line">DNS1&#x3D;119.29.29.29</span><br></pre></td></tr></table></figure><p><strong>2）重启服务</strong></p><p><code>systemctl restart network.service</code>：来重启网络服务</p><h2 id="第九章-进程管理"><a href="#第九章-进程管理" class="headerlink" title="第九章 进程管理"></a>第九章 进程管理</h2><h2 id="第十章-RPM-和-YUM"><a href="#第十章-RPM-和-YUM" class="headerlink" title="第十章 RPM 和 YUM"></a>第十章 RPM 和 YUM</h2><h3 id="10-1-rpm-包管理"><a href="#10-1-rpm-包管理" class="headerlink" title="10.1 rpm 包管理"></a>10.1 rpm 包管理</h3><h4 id="10-1-1-介绍"><a href="#10-1-1-介绍" class="headerlink" title="10.1.1 介绍"></a>10.1.1 介绍</h4><p>一种用于互联网下载包的打包及安装工具，它包含在某些 Linux 分发版中。它生成具有 <code>.prm</code> 扩展名的文件。PRM 是 RedHat Package Manager（RedHat 软件管理工具）的缩写。</p><h4 id="10-1-2-基本格式"><a href="#10-1-2-基本格式" class="headerlink" title="10.1.2 基本格式"></a>10.1.2 基本格式</h4><p><code>rpm</code> 包名：<code>名称-版本号-适用的操作系统.rpm</code></p><p><code>i686</code>、<code>i386</code> 表示 32 位系统，<code>noarch</code> 表示通用。</p><h4 id="10-1-3-简单查询指令"><a href="#10-1-3-简单查询指令" class="headerlink" title="10.1.3 简单查询指令"></a>10.1.3 简单查询指令</h4><p><code>rpm -qa | grep [软件名]</code>：查看当前是否安装某软件。</p><h4 id="10-1-4-其他查询指令"><a href="#10-1-4-其他查询指令" class="headerlink" title="10.1.4 其他查询指令"></a>10.1.4 其他查询指令</h4><p><code>rpm -qa</code></p><p>`rpm -</p><h3 id="10-2-yum"><a href="#10-2-yum" class="headerlink" title="10.2 yum"></a>10.2 yum</h3><h4 id="10-2-1-介绍"><a href="#10-2-1-介绍" class="headerlink" title="10.2.1 介绍"></a>10.2.1 介绍</h4><h2 id="第十一章-shell-编程"><a href="#第十一章-shell-编程" class="headerlink" title="第十一章 shell 编程"></a>第十一章 shell 编程</h2><h3 id="11-1-shell-编程入门"><a href="#11-1-shell-编程入门" class="headerlink" title="11.1 shell 编程入门"></a>11.1 shell 编程入门</h3><p>Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。</p><p><strong>1）shell 脚本的格式要求</strong></p><p>① 以 <code>#!/bin/bash</code> 开头。</p><p>② 需要有可执行权限。</p><p><strong>2）第一个 shell 脚本</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo "hello,world!"</span><br></pre></td></tr></table></figure><p><strong>3）脚本的常用执行方式</strong></p><p>① 输入脚本的绝对路径或相对路径。</p><p>首先要赋予脚本执行权限。</p><p>② sh + 脚本。（不推荐！）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# chmod 744 hello.sh </span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rwxr--r--. 1 root root 32 12月 25 22:29 hello.sh</span><br><span class="line">[root@localhost test]# ./hello.sh </span><br><span class="line">hello,world!</span><br><span class="line">[root@localhost test]# /test/hello.sh </span><br><span class="line">hello,world!</span><br></pre></td></tr></table></figure><h3 id="11-2-shell-变量"><a href="#11-2-shell-变量" class="headerlink" title="11.2 shell 变量"></a>11.2 shell 变量</h3><p><strong>1）shell 的变量的介绍</strong></p><p>Linux Shell 中的变量分为<strong>系统变量</strong>和<strong>用户自定义变量</strong>。</p><p><strong>系统变量</strong>：<code>$HOME</code>、<code>$PWD</code>、<code>$SHELL</code>、<code>$USER</code> 等等.</p><p><code>set</code>：显示当前 shell 中所有变量。</p><p><strong>2）shell 变量的定义</strong></p><p>定义变量：<code>变量=值</code></p><p>撤销变量：<code>unset 变量</code></p><p>声明<strong>静态变量</strong>：<code>readonly 变量</code>，注意：不能 unset</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo "PATH=$PATH"</span><br><span class="line">echo "user=$USER"</span><br><span class="line"></span><br><span class="line">A=100</span><br><span class="line">ehco "A=$A"</span><br><span class="line">unset A</span><br><span class="line">echo "A=$A"</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# ./hello.sh </span><br><span class="line">PATH=/opt/jdk1.8.0_271/bin:/usr/local/mysql/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/root/bin</span><br><span class="line">user=root</span><br><span class="line">A=100</span><br><span class="line">A=</span><br></pre></td></tr></table></figure><p><strong>3）定义变量的规则</strong></p><ol><li>变量名称可以由字母、数字和下划线组成，但是不能以数字开头。</li><li>等号两侧不能有空格。</li><li>变量名称一般习惯为大写。</li></ol><p><strong>4）将命令的返回值赋给变量（重点）</strong></p><ol><li>A= <code>`ls -la`</code> 反引号，运行里面的命令，并把结果返回给变量 A。</li><li>A=$(ls -la) 等价于反引号</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;学习Linux流程为：&lt;br&gt;第1阶段：Linux环境下的基本操作命令，包括文件操作命令（rm mkdir chmod，chown）编辑工具使用（vi vim）Linux用户管理（useradd userdel usermod）等。&lt;br&gt;第2阶段
      
    
    </summary>
    
    
      <category term="Linux" scheme="https://ActionDing.github.io/categories/Linux/"/>
    
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Linux" scheme="https://ActionDing.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Spring 笔记</title>
    <link href="https://actionding.github.io/2020/08/Spring%20%E7%AC%94%E8%AE%B0/"/>
    <id>https://actionding.github.io/2020/08/Spring%20%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-04T19:02:02.000Z</published>
    <updated>2021-02-18T03:03:26.135Z</updated>
    
    <content type="html"><![CDATA[<h2 id="第1章-简介"><a href="#第1章-简介" class="headerlink" title="第1章 简介"></a>第1章 简介</h2><p><a href="https://spring.io/" target="_blank" rel="noopener">Spring</a> 是轻量级的开源的 JavaEE 框架，可以解决企业应用开发的复杂性。</p><p>Spring 有两个核心部分：IoC 和 AOP</p><ol><li>IoC：Inverse of Control，控制反转</li><li>AOP：Aspect Orient Programming，面向切片</li></ol><a id="more"></a><p><a href="https://spring.io/projects/spring-framework" target="_blank" rel="noopener">Spring 框架</a>的特点：</p><ol><li>方便解耦，简化开发</li><li>支持 AOP 编程</li><li>方便程序测试</li><li>方便和其他框架进行整合</li><li>方便进行事务操作</li><li>降低 API 开发难度</li></ol><h2 id="第2章-入门案例"><a href="#第2章-入门案例" class="headerlink" title="第2章 入门案例"></a>第2章 入门案例</h2><ol><li><p><strong>下载 <a href="https://repo.spring.io/release/org/springframework/spring/" target="_blank" rel="noopener">Spring</a></strong></p></li><li><p><strong>创建普通 Java 工程</strong></p></li><li><p><strong>导入 Spring 相关 jar 包</strong></p></li></ol><p>核心包（容器）：Beans、Core、Context、Expression</p><blockquote><p>日志包：commons-logging-1.1.1.jar</p></blockquote><ol start="4"><li><strong>创建普通类</strong></li></ol><p>POJO(Plain Ordinary Java Object) 类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String id, String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getter 和 setter 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// toString 方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +</span><br><span class="line">                <span class="string">"id='"</span> + id + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(id + <span class="string">" --&gt; add()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li><strong>创建 Spring 配置文件</strong></li></ol><p>在配置文件配置创建的对象</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 Student 对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student01"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.Student"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="6"><li><strong>进行代码测试</strong></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 加载 Spring 配置文件</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"Student.xml"</span>);</span><br><span class="line">        <span class="comment">// 获取配置文件创建的对象</span></span><br><span class="line"><span class="comment">//        Student bean1 = context.getBean(Student.class);</span></span><br><span class="line">        Student bean1 = (Student) context.getBean(<span class="string">"student01"</span>);</span><br><span class="line">        <span class="comment">// 打印 bean</span></span><br><span class="line">        System.out.println(bean1);</span><br><span class="line">        bean1.add();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第3章-IoC"><a href="#第3章-IoC" class="headerlink" title="第3章 IoC"></a>第3章 IoC</h2><h3 id="3-1-IoC-简介"><a href="#3-1-IoC-简介" class="headerlink" title="3.1 IoC  简介"></a>3.1 IoC  简介</h3><p>Inverse of Control，控制反转。把对象创建和对象之间的调用过程，交给 Spring 进行管理。</p><p>IoC 可以降低耦合度</p><p><strong>IoC 的底层原理</strong>：XML 解析、工厂模式、反射</p><p><strong>IoC 容器</strong></p><p>IoC 思想基于 IoC 容器完成，IoC 容器底层就是对象工厂。</p><p>Spring 提供 IoC 容器的两种实现方式（两个接口）：</p><ol><li><strong>BeanFactory 接口</strong>：Spring 内部的使用接口<ul><li>加载配置文件的时候不会创建对象，在获取（使用）对象的时候才去创建对象</li></ul></li><li><strong>ApplicationContext 接口</strong>：BeanFactory 接口的子接口，提供更多、更强大的功能<ul><li>加载配置文件的时候就会把配置文件对象进行创建</li></ul></li></ol><h3 id="3-2-Bean-管理"><a href="#3-2-Bean-管理" class="headerlink" title="3.2 Bean 管理"></a>3.2 Bean 管理</h3><p><strong>两个操作</strong></p><p>Bean 管理指的是两个操作，分别是：</p><ol><li>Spring 创建对象</li><li>Spring 注入属性</li></ol><p><strong>两种方式</strong></p><p>操作的两种方式：</p><ol><li>基于 XML 配置文件方式实现</li><li>基于注解方式实现</li></ol><h3 id="3-3-基于-XML-方式"><a href="#3-3-基于-XML-方式" class="headerlink" title="3.3 基于 XML 方式"></a>3.3 基于 XML 方式</h3><blockquote><p><strong>什么是 XML</strong></p></blockquote><p><strong>1）创建对象</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.User"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li><p>使用 bean 标签创建对象，并在标签里面添加对应的属性</p></li><li><p>常用的属性</p><ul><li>id 属性：唯一标识</li><li>class 属性：类全路径（包类路径）</li></ul></li><li><p>创建对象的时候，默认调用无参构造器方法完成对象创建</p></li></ol><p><strong>2）注入属性</strong></p><p>DI，Dependency Injection，依赖注入，即注入属性。</p><p><strong>① 使用 set 方法进行注入</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--setter 方法注入属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1001"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"黎明"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"25"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>② 使用有参构造器进行注入</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--有参构造器方法注入属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1002"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"白起"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"21"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3）注入其他类型属性</strong></p><p><strong>① null 值</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student03"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.Student"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1003"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入 null 值属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"23"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>② 特殊字符</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student04"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.Student"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1004"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入含特殊符号的值属性</span></span><br><span class="line"><span class="comment">        1 把&lt;&gt;进行转义 &amp;lt; &amp;gt;</span></span><br><span class="line"><span class="comment">        2 把带特殊符号内容写到CDATA</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="symbol">&amp;lt;</span>&lt;![CDATA[包青天&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"23"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>④ 外部 bean</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注入外部 bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentService01"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.service.StudentService"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"serviceId"</span> <span class="attr">value</span>=<span class="string">"service01"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"studenDao"</span> <span class="attr">ref</span>=<span class="string">"studentDaoImpl01"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentDaoImpl01"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.dao.StudentDaoImpl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"daoId"</span> <span class="attr">value</span>=<span class="string">"dao01"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>⑤ 内部 bean</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注入内部 bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentService02"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.service.StudentService"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"serviceId"</span> <span class="attr">value</span>=<span class="string">"service02"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"studenDao"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentDaoImpl02"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.dao.StudentDaoImpl"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"daoId"</span> <span class="attr">value</span>=<span class="string">"dao02"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>⑥ 其他</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">"http://www.springframework.org/schema/util"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"otherTypes"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.OtherTypes"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入数组类型--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"arr"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>王五<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入 List 类型--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>西瓜<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>葡萄<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入 Map 类型--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"Java"</span> <span class="attr">value</span>=<span class="string">"JavaWeb、大数据开发"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"Python"</span> <span class="attr">value</span>=<span class="string">"爬虫"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"C/C++"</span> <span class="attr">value</span>=<span class="string">"内核"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入 Set 类型--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"set"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>《三国演义》<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>《三国演义》<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>《水浒传》<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>《红楼梦》<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>《西游记》<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入 Student 类型的 List--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name="studentList"&gt;</span></span><br><span class="line"><span class="comment">            &lt;list&gt;</span></span><br><span class="line"><span class="comment">                &lt;ref bean="student01"&gt;&lt;/ref&gt;</span></span><br><span class="line"><span class="comment">                &lt;ref bean="student02"&gt;&lt;/ref&gt;</span></span><br><span class="line"><span class="comment">            &lt;/list&gt;</span></span><br><span class="line"><span class="comment">        &lt;/property&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"studentList"</span> <span class="attr">ref</span>=<span class="string">"studentLists"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student01"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1001"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"黎明"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"25"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student02"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1002"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"郭富城"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"26"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--使用 util 标签完成 List 集合注入提取--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">"studentLists"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"student01"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"student02"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>4）FactoryBean</strong></p><ol><li><p>Spring 有两种类型 bean，一种普通 bean，另外一种工厂 bean（FactoryBean）</p></li><li><p>普通 bean：在配置文件中定义 bean 类型就是返回类型</p></li><li><p>工厂 bean：在配置文件定义 bean 类型可以和返回类型不一样</p><ul><li><p>第一步 创建类，让这个类作为工厂 bean，实现接口 FactoryBean</p></li><li><p>第二步 实现接口里面的方法，在实现的方法中定义返回的 bean 类型</p></li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setName(<span class="string">"张学友"</span>);</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5）bean 的作用域</strong></p><ol><li>在 Spring 里面，默认情况下，bean 是单实例对象</li><li>在 Spring 配置文件 bean 标签里面有属性（scope）用于设置单实例还是多实例<ul><li>第一个值 默认值，singleton，表示是单实例对象</li><li>第二个值 prototype，表示是多实例对象</li></ul></li><li>singleton 和 prototype 区别<ul><li>第一 singleton 单实例，prototype 多实例</li><li>第二 设置 scope 值是 singleton 时候，加载 spring 配置文件时候就会创建单实例对象<br>设置 scope 值是 prototype 时候，不是在加载 Spring 配置文件时候创建对象，在调用 getBean 方法时候创建多实例对象</li></ul></li></ol><p><strong>6）bean 的生命周期</strong></p><ol><li>执行无参构造器创建 bean 实例</li><li>调用 set 方法设置属性值</li><li>执行在初始化之前执行的方法（postProcessBeforeInitialization()）</li><li>执行初始化方法（initMethod()）</li><li>执行在初始化之后执行的方法（postProcessAfterInitialization()）</li><li>获取创建 bean 实例对象（getBean()）</li><li>执行销毁的方法（destroyMethod()）</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBeanPost</span> <span class="keyword">implements</span> <span class="title">BeanPostProcessor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在初始化之前执行的方法"</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"在初始化之后执行的方法"</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"orders"</span> <span class="attr">class</span>=<span class="string">"com.ding.bean.Book"</span> <span class="attr">init-method</span>=<span class="string">"initMethod"</span> <span class="attr">destroy-method</span>=<span class="string">"destroyMethod"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>7）XML 自动装配</strong></p><p>根据指定装配规则（属性名称或者属性类型），Spring 自动将匹配的属性值进行注入</p><p><strong>① 根据属性名称自动注入</strong></p><p><strong>② 根据属性类型自动注入</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--实现自动装配 bean 标签属性 autowire，配置自动装配 autowire 属性常用两个值：</span></span><br><span class="line"><span class="comment">    byName 根据属性名称注入 ，注入值 bean 的 id 值和类属性名称一样</span></span><br><span class="line"><span class="comment">    byType 根据属性类型注入 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--根据属性的名称自动注入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentService01"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.service.StudentService"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name="studentDao" ref="studentDao"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--根据属性的类型自动注入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentService02"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.service.StudentService"</span> <span class="attr">autowire</span>=<span class="string">"byType"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name="studentDao" ref="studentDao"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"studentDao"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.dao.StudentDaoImpl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"daoId"</span> <span class="attr">value</span>=<span class="string">"S1001"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-基于注解方式"><a href="#3-4-基于注解方式" class="headerlink" title="3.4 基于注解方式"></a>3.4 基于注解方式</h3><blockquote><p><strong>什么是注解</strong></p><p>注解是代码特殊标记，格式：@注解名称（属性名=属性值，属性名=属性值…）</p><p>可以简化 XML 配置</p></blockquote><p><strong>1）对象创建</strong></p><p><strong>Spring 针对 Bean 管理中创建对象提供的注解</strong></p><ol><li>@Component</li><li>@Service：一般用在业务层</li><li>@Control：一般用在表现层</li><li>@Repository一般用在持久层</li></ol><p>以上四个注解的功能是一样的，都可以用来创建 Bean 实例</p><p><strong>第一步：引入依赖</strong></p><p>spring-aop-5.x.x.RELEASW.jar</p><p><strong>第二步：开启组件扫描</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>第三步：创建类，在类上面添加创建对象注解</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Component(value = "userService")//&lt;bean id="userService" class=".."&gt;&lt;/bean&gt;</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"service add()..."</span> + name);</span><br><span class="line">        userDao.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>注解中的 value 属性值可以省略不写</li><li>默认值是类名称，首字母小写</li></ol><p><strong>开启组件扫描的细节配置</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--示例一</span></span><br><span class="line"><span class="comment">    use-default-filters="false" 表示不使用默认 filter，自己配置 filter</span></span><br><span class="line"><span class="comment">    context:include-filter 设置扫描哪些内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span> <span class="attr">use-default-filters</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--示例二</span></span><br><span class="line"><span class="comment">    context:exclude-filter 设置不扫描哪些内容</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2）注入属性</strong></p><ol><li><strong>@Autowired</strong>：根据属性类型进行自动装配</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要 set 方法</span></span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">// 根据类型注入</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>@Qualifier</strong>：根据名称进行注入</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不需要 set 方法</span></span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">// 根据类型注入</span></span><br><span class="line"><span class="meta">@Qualifier</span>(value = <span class="string">"userDaoImpl_1"</span>) <span class="comment">// 根据名称注入，需要和 @Autowired 一起使用</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>@Resource</strong>：既可以根据类型注入，也可以根据名称注入</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @Resource</span></span><br><span class="line"><span class="meta">@Resource</span>(name = <span class="string">"userDaoImpl_1"</span>)</span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br></pre></td></tr></table></figure><ol start="4"><li><strong>@Value</strong>：注入普通类型属性</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(value = <span class="string">"小王"</span>)</span><br><span class="line"><span class="keyword">private</span> String username;</span><br></pre></td></tr></table></figure><p><strong>3）完全注解开发</strong></p><ol><li>创建配置类，代替 XML 配置文件</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// 配置类</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(basePackages = <span class="string">"com.ding.spring"</span>) <span class="comment">// 开启扫描</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>编写测试类</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUserConfig</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 加载配置类</span></span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(UserConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    UserService userService = context.getBean(<span class="string">"userService"</span>, UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    System.out.println(userService);</span><br><span class="line">    userService.show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第4章-AOP"><a href="#第4章-AOP" class="headerlink" title="第4章 AOP"></a>第4章 AOP</h2><p>Aspect Orient Program，面向切面编程，利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各个部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p><p>简而言之，不通过修改源代码的方式，在主干功能里面添加新功能。</p><h3 id="4-1-底层原理"><a href="#4-1-底层原理" class="headerlink" title="4.1 底层原理"></a>4.1 底层原理</h3><p>使用动态代理</p><p><strong>第一种情况：有接口情况，使用 JDK 动态代理</strong></p><p>创建接口实现类代理对象，增强类的方法</p><p><strong>第二种情况：没有接口情况，使用 CGLIB 动态代理</strong></p><p>创建子类的代理对象，增强类的方法</p><h3 id="4-2-JDK-动态代理"><a href="#4-2-JDK-动态代理" class="headerlink" title="4.2 JDK 动态代理"></a>4.2 JDK 动态代理</h3><ol><li>使用 Proxy 类里面的方法创建代理对象</li></ol><ol start="2"><li>编写 JDK 动态代理代码</li></ol><h3 id="4-3-CGLIB-动态代理"><a href="#4-3-CGLIB-动态代理" class="headerlink" title="4.3 CGLIB 动态代理"></a>4.3 CGLIB 动态代理</h3><p><strong>几个术语</strong></p><ol><li>连接点：类里面哪些方法可以被增强，这些方法称为连接点</li><li>切入点：实际被真正增强的方法，称为切入点</li><li>通知（增强）：实际增强的逻辑部分称为通知（增强）<ul><li>通知的种类：前置通知、后置通知、环绕通知、异常通知、最终通知</li></ul></li><li>切面：一个动作，把通知应用到切入点的过程</li></ol><p><strong>准备工作</strong></p><ol><li><p>Spring 框架一般都是基于 AspectJ 实现 AOP 操作</p><ul><li>AspectJ 不是 Spring 的组成部分，独立于 AOP 框架， 一般把 AspectJ 和 Spring 框架一起使用，进行 AOP 操作</li></ul></li><li><p>基于 AspectJ 实现 AOP 操作</p><ul><li>基于 XML 配置文件实现</li><li>基于注解方式实现</li></ul></li><li><p>在项目工程中引入 AOP 相关依赖</p></li><li><p>切入点表达式</p><ul><li>作用：知道对哪个类里面的哪个方法进行增强</li><li>语法结构：<code>execution([权限修饰符][返回类型][类全路径][方法名称]([参数列表]))</code></li></ul><blockquote><p>举例1：对com.ding.dao.BookDao类里面的 add() 进行增强</p><p>execution(* com.ding.dao.BookDao.add(..))</p><p>举例2：对com.ding.dao.BookDao类里面的所有的方法进行增强</p><p>execution(* com.ding.dao.BookDao.* (..))</p><p>举例3：对com.ding.dao包里面所有类，类里面所有方法进行增强</p><p>execution(* com.ding.dao.<em>.</em> (..))</p></blockquote></li></ol><p><strong>1）AspectJ 注解</strong></p><p><strong>AOP 操作</strong></p><ol><li>创建类，在类里面定义方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"show()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>创建增强类（编写增强逻辑）</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserProxy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>进行通知配置<ul><li>Spring 配置文件</li></ul></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 1 开启注解扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 5 开启 Aspect 生成代理对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>使用注解创建对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">// 2 创建 User 对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"show()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">// 3 创建 UserProxy 对象</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// 4 生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserProxy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><p>配置不同类型的通知</p></li><li><p>相同切入点的抽取</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// 生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserProxy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 相同切入点抽取</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(value = <span class="string">"execution(* com.ding.spring.bean.User.show())"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointDemo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 前置通知</span></span><br><span class="line">    <span class="meta">@Before</span>(value = <span class="string">"execution(* com.ding.spring.bean.User.show())"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 后置通知（返回通知）</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(value = <span class="string">"execution(* com.ding.spring.bean.User.show())"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"afterReturning()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 最终通知</span></span><br><span class="line">    <span class="meta">@After</span>(value = <span class="string">"pointDemo()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"after()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 异常通知</span></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(value = <span class="string">"pointDemo()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"afterThrowing()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 环绕通知</span></span><br><span class="line">    <span class="meta">@Around</span>(value = <span class="string">"pointDemo()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint point)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"around_before()..."</span>);</span><br><span class="line">        point.proceed(); <span class="comment">// 执行被增强的方法</span></span><br><span class="line">        System.out.println(<span class="string">"around_after()..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>设置增强类的优先级</strong></p><p>有多个增强类对同一个方法进行增强时，可以使用 <code>@Order(数字类型值)</code> 设置增强类的优先级,数字类型值越小优先级越高</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">// 生成代理对象</span></span><br><span class="line"><span class="meta">@Order</span>(<span class="number">1</span>) <span class="comment">// 设置优先级</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserProxy</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><strong>完全使用注解开发</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(basePackages = &#123;<span class="string">"com.ding.spring"</span>&#125;)</span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span>(proxyTargetClass = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>执行的结果</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">com.ding.spring.bean.User@1c7a252</span><br><span class="line">around_before()...</span><br><span class="line">before()...</span><br><span class="line">show()...</span><br><span class="line">afterReturning()...</span><br><span class="line">after()...</span><br><span class="line">around_after()...</span><br></pre></td></tr></table></figure><p><strong>2）AspectJ 配置文件</strong></p><p><strong>AOP 操作</strong></p><ol><li><p>创建两个类，被增强类和增强类，创建方法</p></li><li><p>在 Spring 配置文件中创建两个类对象</p></li><li><p>在 Spring 配置文件中配置切入点</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--创建被增强类，Book 类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"book"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.Book"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--创建增强类，BookProxy 类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookProxy"</span> <span class="attr">class</span>=<span class="string">"com.ding.spring.bean.BookProxy"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切入点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"p"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.ding.spring.bean.Book.show())"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"bookProxy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--增强作用在具体的方法上--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"p"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="第5章-JdbcTemplate"><a href="#第5章-JdbcTemplate" class="headerlink" title="第5章 JdbcTemplate"></a>第5章 JdbcTemplate</h2><p>Spring 框架对 JDBC 进行封装，使用 JdbcTemplate 方便实现对数据库操作。</p><h3 id="5-1-准备工作"><a href="#5-1-准备工作" class="headerlink" title="5.1 准备工作"></a>5.1 准备工作</h3><ol><li>引入相关 jar 包</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">com.springsource.net.sf.cglib-2.2.0.jar</span><br><span class="line">com.springsource.org.aopalliance-1.0.0.jar</span><br><span class="line">com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</span><br><span class="line">commons-logging-1.2.jar</span><br><span class="line">druid-1.1.9.jar</span><br><span class="line">mysql-connector-java-5.1.7-bin.jar</span><br><span class="line">spring-aop-5.2.8.RELEASE.jar</span><br><span class="line">spring-aspects-5.2.8.RELEASE.jar</span><br><span class="line">spring-beans-5.2.8.RELEASE.jar</span><br><span class="line">spring-context-5.2.8.RELEASE.jar</span><br><span class="line">spring-core-5.2.8.RELEASE.jar</span><br><span class="line">spring-expression-5.2.8.RELEASE.jar</span><br><span class="line">spring-jdbc-5.2.8.RELEASE.jar</span><br><span class="line">spring-orm-5.2.8.RELEASE.jar</span><br><span class="line">spring-tx-5.2.8.RELEASE.jar</span><br></pre></td></tr></table></figure><ol start="2"><li><p>在 Spring 配置文件配置数据库连接池</p></li><li><p>配置 JdbcTemplate 对象，注入 DataSource</p></li><li><p>创建 service 类和 dao 类，在 dao 类中注入 JdbcTemplate 对象</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title">BookDao</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置数据库连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/JdbcTemplate"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"ding32"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 JdbcTemplate 对象，注入 DataSource --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-2-对数据库的操作"><a href="#5-2-对数据库的操作" class="headerlink" title="5.2 对数据库的操作"></a>5.2 对数据库的操作</h3><p><strong>1）添加</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update(String sql, <span class="meta">@Nullable</span> Object... args)</span><br></pre></td></tr></table></figure><ol><li>对应数据库创建实体类</li><li>编写 service 和 dao 类<ul><li>在 dao 类进行数据库添加操作</li><li>调用 JdbcTemplate 对象里面的 update 方法实现添加操作</li></ul></li><li>测试类</li></ol><p><strong>2）修改</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update(String sql, <span class="meta">@Nullable</span> Object... args)</span><br></pre></td></tr></table></figure><p><strong>3）删除</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update(String sql, <span class="meta">@Nullable</span> Object... args)</span><br></pre></td></tr></table></figure><p><strong>4）查询</strong></p><ol><li>返回值</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryForObject(String sql, Class&lt;T&gt; requiredType)</span><br></pre></td></tr></table></figure><ol start="2"><li>返回对象</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryForObject(String sql, RowMapper&lt;T&gt; rowMapper, <span class="meta">@Nullable</span> Object... args)</span><br></pre></td></tr></table></figure><ol start="3"><li>返回集合</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">query(String sql, RowMapper&lt;T&gt; rowMapper)</span><br></pre></td></tr></table></figure><h3 id="5-4-批量操作"><a href="#5-4-批量操作" class="headerlink" title="5.4 批量操作"></a>5.4 批量操作</h3><p><strong>1）批量添加</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">batchUpdate(String sql, List&lt;Object[]&gt; batchArgs)</span><br></pre></td></tr></table></figure><p><strong>2）批量修改</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">batchUpdate(String sql, List&lt;Object[]&gt; batchArgs)</span><br></pre></td></tr></table></figure><p><strong>3）批量删除</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">batchUpdate(String sql, List&lt;Object[]&gt; batchArgs)</span><br></pre></td></tr></table></figure><h2 id="第6章-事务操作"><a href="#第6章-事务操作" class="headerlink" title="第6章 事务操作"></a>第6章 事务操作</h2><h3 id="6-1-什么是事务"><a href="#6-1-什么是事务" class="headerlink" title="6.1 什么是事务"></a>6.1 什么是事务</h3><p>事务是数据库操作的最基本单元，逻辑上一组操作，要么都成功，如果有一个失败所有操作都失败</p><p><strong>事务的四个特性（ACID）</strong>：原子性、一致性、隔离性、持久性</p><h3 id="6-2-转账实例"><a href="#6-2-转账实例" class="headerlink" title="6.2 转账实例"></a>6.2 转账实例</h3><ol><li><p>创建数据库表 account，添加记录</p><table><thead><tr><th align="center">id</th><th align="center">username</th><th align="center">money</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">lucy</td><td align="center">1000</td></tr><tr><td align="center">2</td><td align="center">mary</td><td align="center">1000</td></tr></tbody></table></li><li><p>创建 service，搭建 dao，完成对象创建和注入关系</p></li><li><p>在 dao 创建两个方法：多钱和少钱；在 service 创建转账方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reduceMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"update account set money=money+? where username=?"</span>;</span><br><span class="line">        jdbcTemplate.update(sql, <span class="number">100</span>, <span class="string">"mary"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"update account set money=money-? where username=?"</span>;</span><br><span class="line">        jdbcTemplate.update(sql, <span class="number">100</span>, <span class="string">"lucy"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">account</span><span class="params">()</span></span>&#123;</span><br><span class="line">        userDao.reduceMoney();</span><br><span class="line"><span class="comment">//        int i = 10 / 0; // 模拟异常</span></span><br><span class="line">        userDao.addMoney();</span><br><span class="line">        System.out.println(<span class="string">"Success..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>执行</p><ul><li><p>正常情况下，没有问题</p></li><li><p>当出现异常时，会出现问题</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        UserService userService = context.getBean(<span class="string">"userService"</span>, UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        userService.account();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置数据库连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"ding32"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 JdbcTemplate 对象，注入 DataSource --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>解决办法</p><ul><li><p>使用事务进行解决</p></li><li><p>事务操作过程</p><p>① 开启事务</p><p>② 进行业务操作</p><p>③ 没有异常，提交事务</p><p>④ 出现异常，事务回滚</p></li></ul></li></ol><h3 id="6-3-Spring-事务管理"><a href="#6-3-Spring-事务管理" class="headerlink" title="6.3 Spring 事务管理"></a>6.3 Spring 事务管理</h3><ol><li>事务添加到 JavaEE 三层结构里面 service 层（业务逻辑层）</li><li>进行事务管理操作的两种方式<ul><li>编程式事务管理 ×</li><li>声明式事务管理 √</li></ul></li><li>声明式事务管理<ul><li>基于注解方式 √</li><li>基于 XML 配置文件方式 ×</li></ul></li><li>在 Spring 进行声明式事务管理，底层使用 AOP 原理</li><li>Spring 事务管理 API：DataSourceTransactionManager 类</li></ol><p><strong>1）注解声明式事务管理</strong></p><ol><li>在 Spring 配置文件中配置事务管理器</li><li>在 Spring 配置文件中开启事务注解<ul><li>引入名称空间 tx</li><li>开启事务注解</li></ul></li><li>在 service 类（或类的方法）上面添加事务注解<ul><li>@Transactional，这个注解添加到类上面，也可以添加方法上面</li><li>如果把这个注解添加类上面，这个类里面所有的方法都添加事务</li><li>如果把这个注解添加方法上面，为这个方法添加事务</li></ul></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置数据库连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"ding32"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 JdbcTemplate 对象，注入 DataSource --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--创建事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启事务注解--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>声明式事务管理参数配置</strong></p><ol><li>propagation：事务传播行为</li><li>ioslation：事务隔离级别</li><li>timeout：超时时间</li><li>readonly：是否只读</li><li>rollbackFor：回滚</li><li>noRollbackFor：不会滚</li></ol><p><strong>2）XML 声明式事务管理</strong></p><p><strong>配置 Spring 配置文件</strong></p><ol><li>配置事务管理器</li><li>配置通知</li><li>配置切入点和切面</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置数据库连接池--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"ding32"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置 JdbcTemplate 对象，注入 DataSource --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ding.spring"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1 创建事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2 配置通知--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txadvice"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置事务参数--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--指定哪种规则的方法上面添加事务--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"account"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;tx:method name="account*"/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3 配置切入点和切面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切入点--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pc"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.ding.spring.service.UserService.*(..))"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txadvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pc"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:advisor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3）完全注解声明式事务管理</strong></p><p><strong>创建配置类，使用配置类代替 XML 配置文件</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;第1章-简介&quot;&gt;&lt;a href=&quot;#第1章-简介&quot; class=&quot;headerlink&quot; title=&quot;第1章 简介&quot;&gt;&lt;/a&gt;第1章 简介&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://spring.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Spring&lt;/a&gt; 是轻量级的开源的 JavaEE 框架，可以解决企业应用开发的复杂性。&lt;/p&gt;
&lt;p&gt;Spring 有两个核心部分：IoC 和 AOP&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;IoC：Inverse of Control，控制反转&lt;/li&gt;
&lt;li&gt;AOP：Aspect Orient Programming，面向切片&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Spring" scheme="https://ActionDing.github.io/categories/Spring/"/>
    
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="Spring" scheme="https://ActionDing.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>MySQL 笔记</title>
    <link href="https://actionding.github.io/2020/08/MySQL%20%E7%AC%94%E8%AE%B0/"/>
    <id>https://actionding.github.io/2020/08/MySQL%20%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-04T19:02:01.000Z</published>
    <updated>2021-02-18T03:01:32.688Z</updated>
    
    <content type="html"><![CDATA[<h2 id="第一章-MySQL概述"><a href="#第一章-MySQL概述" class="headerlink" title="第一章 MySQL概述"></a>第一章 MySQL概述</h2><p>MySQL是一个<strong>关系型数据库管理系统</strong>，由瑞典MySQL AB公司开发，属于Oracle旗下产品。MySQL是最流行的关系型数据库管理系统之一。</p><a id="more"></a><h3 id="1-1-数据库的常见概念"><a href="#1-1-数据库的常见概念" class="headerlink" title="1.1 数据库的常见概念"></a>1.1 数据库的常见概念</h3><h4 id="1-1-1-DB"><a href="#1-1-1-DB" class="headerlink" title="1.1.1 DB"></a>1.1.1 DB</h4><p>Database，数据库，存储数据的容器</p><h4 id="1-1-2-DBMS"><a href="#1-1-2-DBMS" class="headerlink" title="1.1.2 DBMS"></a>1.1.2 DBMS</h4><p>Database Management System，数据库管理系统，又称为数据库软件或数据库产品，用于创建或管理数据库</p><h4 id="1-1-3-SQL"><a href="#1-1-3-SQL" class="headerlink" title="1.1.3 SQL"></a>1.1.3 SQL</h4><p>Structured Query Language，结构化查询语言，用于和数据库通信的语言，不是某个数据库软件特有的，而是几乎所有的主流数据库软件通用的语言</p><blockquote><p>常见的数据库管理系统：MySQL、Oracle、db2、SQLserver</p></blockquote><h3 id="1-2-MySQL的介绍"><a href="#1-2-MySQL的介绍" class="headerlink" title="1.2 MySQL的介绍"></a>1.2 MySQL的介绍</h3><p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，属于Oracle 旗下产品</p><p>08年被SUN公司收购，09年SUN被Oracle收购</p><p>属于<strong>C/S架构</strong>的软件，一般安装服务端</p><p>分为<strong>企业版</strong>和<strong>社区版</strong></p><h3 id="1-3-MySQL的优点"><a href="#1-3-MySQL的优点" class="headerlink" title="1.3 MySQL的优点"></a>1.3 MySQL的优点</h3><p>1、开源、免费、成本低<br>2、性能高、移植性也好<br>3、体积小，便于安装</p><h3 id="1-4-MySQL语言的分类"><a href="#1-4-MySQL语言的分类" class="headerlink" title="1.4 MySQL语言的分类"></a>1.4 MySQL语言的分类</h3><h4 id="1-4-1-DML"><a href="#1-4-1-DML" class="headerlink" title="1.4.1 DML"></a>1.4.1 DML</h4><p>Data Manipulation Language：数据操纵语句，用于添加、删除、修改、查询数据库记录，并检查数据完整性</p><h4 id="1-4-2-DDL"><a href="#1-4-2-DDL" class="headerlink" title="1.4.2 DDL"></a>1.4.2 DDL</h4><p>Data Definition Language：数据定义语句，用于库和表的创建、修改、删除。</p><h4 id="1-4-3-DCL"><a href="#1-4-3-DCL" class="headerlink" title="1.4.3 DCL"></a>1.4.3 DCL</h4><p>Data Control Language：数据控制语句，用于定义用户的访问权限和安全级别。</p><h3 id="1-5-MySQL服务的启动和停止"><a href="#1-5-MySQL服务的启动和停止" class="headerlink" title="1.5 MySQL服务的启动和停止"></a>1.5 MySQL服务的启动和停止</h3><p>方式一：通过命令行</p><p>​    <code>net start [服务名]</code><br>​    <code>net stop [服务名]</code></p><p>方式二：计算机——右击——管理——服务</p><h3 id="1-6-MySQL服务的登录和退出"><a href="#1-6-MySQL服务的登录和退出" class="headerlink" title="1.6 MySQL服务的登录和退出"></a>1.6 MySQL服务的登录和退出</h3><p>登录：<code>mysql [-h 主机名 -P 端口号] -u[用户名] -p[密码]</code></p><p>退出：<code>exit</code> 或 <code>ctrl+C</code></p><hr><h2 id="第二章-DQL语言"><a href="#第二章-DQL语言" class="headerlink" title="第二章 DQL语言"></a>第二章 DQL语言</h2><p>DQL（Data Query Language）：数据查询语言，用来查询记录（数据）</p><h3 id="2-1-基础查询"><a href="#2-1-基础查询" class="headerlink" title="2.1 基础查询"></a>2.1 基础查询</h3><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  查询列表 </span><br><span class="line">FROM</span><br><span class="line">  表名 ;</span><br></pre></td></tr></table></figure><p>查询列表：表中的字段、常量值、表达式、函数</p><p>查询的结果是一个虚拟的表格</p><h4 id="2-1-1-查询表中的单个字段"><a href="#2-1-1-查询表中的单个字段" class="headerlink" title="2.1.1 查询表中的单个字段"></a>2.1.1 查询表中的单个字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name FROM employees;</span><br></pre></td></tr></table></figure><h4 id="2-1-2-查询表中的多个字段"><a href="#2-1-2-查询表中的多个字段" class="headerlink" title="2.1.2 查询表中的多个字段"></a>2.1.2 查询表中的多个字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,salary,email FROM employees;</span><br></pre></td></tr></table></figure><h4 id="2-1-3-查询表中的所有字段"><a href="#2-1-3-查询表中的所有字段" class="headerlink" title="2.1.3 查询表中的所有字段"></a>2.1.3 查询表中的所有字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  &#96;employee_id&#96;,</span><br><span class="line">  &#96;first_name&#96;,</span><br><span class="line">  &#96;last_name&#96;,</span><br><span class="line">  &#96;email&#96;,</span><br><span class="line">  &#96;phone_number&#96;,</span><br><span class="line">  &#96;job_id&#96;,</span><br><span class="line">  &#96;salary&#96;,</span><br><span class="line">  &#96;commission_pct&#96;,</span><br><span class="line">  &#96;manager_id&#96;,</span><br><span class="line">  &#96;department_id&#96;,</span><br><span class="line">  &#96;hiredate&#96; </span><br><span class="line">FROM</span><br><span class="line">  &#96;employees&#96; ;</span><br><span class="line">&#x2F;*</span><br><span class="line"> * F12 格式化</span><br><span class="line"> * 不是引号，是着重号，用来区分字段和关键字</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure><p><strong>或</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees;</span><br><span class="line"># 表中字段顺序固定</span><br></pre></td></tr></table></figure><h4 id="2-1-4-查询常量值"><a href="#2-1-4-查询常量值" class="headerlink" title="2.1.4 查询常量值"></a>2.1.4 查询常量值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100;</span><br><span class="line">SELECT &#39;john&#39;;</span><br><span class="line"># 不区分字符和字符串，都是字符型，用单引号</span><br></pre></td></tr></table></figure><h4 id="2-1-5-查询表达式"><a href="#2-1-5-查询表达式" class="headerlink" title="2.1.5 查询表达式"></a>2.1.5 查询表达式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100%98;</span><br></pre></td></tr></table></figure><h4 id="2-1-6-查询函数"><a href="#2-1-6-查询函数" class="headerlink" title="2.1.6 查询函数"></a>2.1.6 查询函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure><h4 id="2-1-7-起别名"><a href="#2-1-7-起别名" class="headerlink" title="2.1.7 起别名"></a>2.1.7 起别名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 方式一：使用as</span><br><span class="line">SELECT 100%98 AS 结果;</span><br><span class="line">SELECT last_name AS 姓,first_name AS 名 FROM employees;</span><br><span class="line">&#x2F;*</span><br><span class="line"> *1 便于理解</span><br><span class="line"> *2 如果要查询的字段有重名的情况，使用别名可以区分开来</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 方式二：使用空格</span><br><span class="line">SELECT last_name 姓,first_name 名 FROM employees;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询salary，显示结果为 out put</span><br><span class="line">SELECT salary AS &quot;out put&quot; FROM employees;</span><br><span class="line"># 这里建议使用双引号，单引号也可以</span><br></pre></td></tr></table></figure><h4 id="2-1-8-去重"><a href="#2-1-8-去重" class="headerlink" title="2.1.8 去重"></a>2.1.8 去重</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使用DISTINCT关键字</span><br><span class="line">SELECT DISTINCT department_id FROM employees;</span><br></pre></td></tr></table></figure><h4 id="2-1-9-号的使用"><a href="#2-1-9-号的使用" class="headerlink" title="2.1.9 +号的使用"></a>2.1.9 <code>+</code>号的使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line"></span><br><span class="line">java中的+号：</span><br><span class="line">①运算符，两个操作数都为数值型</span><br><span class="line">②连接符，只要有一个操作数为字符串</span><br><span class="line"></span><br><span class="line">mysql中的+号：</span><br><span class="line">仅仅只有一个功能：运算符</span><br><span class="line"></span><br><span class="line">select 100+90; 两个操作数都为数值型，则做加法运算</span><br><span class="line">select &#39;123&#39;+90;只要其中一方为字符型，试图将字符型数值转换成数值型</span><br><span class="line">如果转换成功，则继续做加法运算</span><br><span class="line">select &#39;john&#39;+90;如果转换失败，则将字符型数值转换成0</span><br><span class="line"></span><br><span class="line">select null+10; 只要其中一方为null，则结果肯定为null</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"># 案例:查询员工名和姓连接成一个字段，并显示为 姓名</span><br><span class="line"></span><br><span class="line">SELECT CONCAT(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;) AS 结果;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">  错误的写法</span><br><span class="line">select </span><br><span class="line">  last_name + first_name as 姓名 </span><br><span class="line">from</span><br><span class="line">  employees ;</span><br><span class="line">*&#x2F;</span><br><span class="line"># 正确的写法，使用CONCAT()函数</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(&#96;first_name&#96;, &#96;last_name&#96;) AS 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure><h4 id="附：几个函数"><a href="#附：几个函数" class="headerlink" title="附：几个函数"></a>附：几个函数</h4><p>1）<code>concat()</code>函数</p><p>功能：拼接字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(str1，str2，str3,...);</span><br></pre></td></tr></table></figure><p>2）<code>ifnull()</code> 函数</p><p>功能：判断某字段或表达式是否为<code>null</code>，如果为<code>null</code>返回指定的值，否则返回原本的值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT IFNULL(commission_pct,0) from employees;</span><br></pre></td></tr></table></figure><p>3）<code>isnull()</code> 函数</p><p>功能：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</p><h3 id="2-2-条件查询"><a href="#2-2-条件查询" class="headerlink" title="2.2 条件查询"></a>2.2 条件查询</h3><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  查询列表 </span><br><span class="line">FROM</span><br><span class="line">  表名 </span><br><span class="line">WHERE 筛选条件 ;</span><br></pre></td></tr></table></figure><p>筛选条件的分类：</p><p>1）简单条件运算符</p><p>2）逻辑运算符</p><p>3）模糊查询</p><h4 id="2-2-1-简单条件运算符"><a href="#2-2-1-简单条件运算符" class="headerlink" title="2.2.1 简单条件运算符"></a>2.2.1 简单条件运算符</h4><table><thead><tr><th align="center">&gt;</th><th>&lt;</th><th align="center">=</th><th align="center">!=</th><th align="center">&lt;&gt;</th><th align="center">&gt;=</th><th align="center">&lt;=</th><th align="center">&lt;=&gt;</th></tr></thead><tbody><tr><td align="center">大于</td><td>小于</td><td align="center">等于</td><td align="center">不等于</td><td align="center">不等于</td><td align="center">大于等于</td><td align="center">小于等于</td><td align="center">安全等于</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询工资 &gt; 12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; 12000 ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号不等于90号的员工名和部门编号</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &lt;&gt; 90 ;</span><br></pre></td></tr></table></figure><h4 id="2-2-2-逻辑运算符"><a href="#2-2-2-逻辑运算符" class="headerlink" title="2.2.2 逻辑运算符"></a>2.2.2 逻辑运算符</h4><table><thead><tr><th align="center">&amp;&amp;</th><th align="center">||</th><th align="center">!</th></tr></thead><tbody><tr><td align="center">and</td><td align="center">or</td><td align="center">not</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询工资在10000到20000之间的员工名、工资以及奖金</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; 10000 </span><br><span class="line">  AND salary &lt; 20000 ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号不是在90到100之间，或者工资高于15000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &lt; 90 </span><br><span class="line">  OR department_id &gt; 110 </span><br><span class="line">  OR salary &gt; 15000 ;</span><br><span class="line">&#x2F;*</span><br><span class="line">WHERE not (</span><br><span class="line">    department_id &gt;&#x3D; 90 </span><br><span class="line">    AND department_id &lt;&#x3D; 110</span><br><span class="line">  ) </span><br><span class="line">  OR salary &gt; 15000 ;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure><h4 id="2-2-3-模糊查询"><a href="#2-2-3-模糊查询" class="headerlink" title="2.2.3 模糊查询"></a>2.2.3 模糊查询</h4><p>1）<code>like</code>:一般搭<strong>配通配符</strong>使用，可以判断字符型或数值型</p><p>通配符：</p><ul><li><p>%任意多个字符，，包含0个字符</p></li><li><p>_任意单个字符</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工名中包含字符a的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#39;%a%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询员工名中第三个字符为c，第五个字符为h的员工名和工资</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#39;__c_h%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例三：查询员工名中第二个字符为_的员工名</span><br><span class="line">SELECT </span><br><span class="line">  last_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#39;_\_%&#39; ;</span><br><span class="line"># WHERE last_name LIKE &#39;_$_%&#39; ESCAPE &#39;$&#39;;</span><br><span class="line"># 关键字ESCAPE：转义</span><br></pre></td></tr></table></figure><p>2） <code>between and</code></p><ul><li>使用between and可以提高语句的简洁度</li><li>包含临界值</li><li>两个临界值不要调换顺序</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工编号在100到120之间的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id BETWEEN 100 </span><br><span class="line">  AND 120 ;</span><br><span class="line"># 等价于</span><br><span class="line"># employee_id &gt;&#x3D; 100 AND employee_id &lt;&#x3D; 120;</span><br></pre></td></tr></table></figure><p>3）<code>in</code><br>含义：判断某字段的值是否属于in列表中的某一项<br>特点：</p><ul><li>使用in提高语句简洁度</li><li>in列表的值类型必须统一或兼容</li><li>in列表中不能使用通配符</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询员工的工种编号是 ITPROG、AD_VP、AD_PRES中的一个员工名和工种编号</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id IN (&#39;ITPROG&#39;, &#39;AD_VP&#39;, &#39;AD_PRES&#39;) ;</span><br><span class="line"># WHERE job_id IN (&#39;ITPROG&#39;, &#39;AD_%&#39;) ; # 错误</span><br><span class="line">&#x2F;*</span><br><span class="line">WHERE job_id &#x3D; &#39;ITPROG&#39; </span><br><span class="line">  OR job_id &#x3D; &#39;AD_VP&#39; </span><br><span class="line">  OR job_id &#x3D; &#39;AD_PRES&#39; ;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure><p>4） <code>is null</code> /<code>is not null</code>：用于判断null值</p><blockquote><p>= 或 &lt;&gt; 不能用于判断null值</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NULL ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL ;</span><br></pre></td></tr></table></figure><p><strong>附</strong></p><p><code>IS NULL</code> pk <code>&lt;=&gt;</code><br><code>IS NULL</code>：仅仅可以判断NULL值，可读性较高，建议使用<br><code>&lt;=&gt;</code>：既可以判断NULL值，有可以判断普通的数值，可读性较低</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 安全等于 &lt;&#x3D;&gt;</span><br><span class="line"># 案例1：查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct &lt;&#x3D;&gt; NULL ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询工资为12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt;&#x3D;&gt; 12000 ;</span><br></pre></td></tr></table></figure><h3 id="2-3-排序查询"><a href="#2-3-排序查询" class="headerlink" title="2.3 排序查询"></a>2.3 排序查询</h3><h4 id="2-3-1-语法"><a href="#2-3-1-语法" class="headerlink" title="2.3.1 语法"></a>2.3.1 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  查询列表 </span><br><span class="line">FROM</span><br><span class="line">  表 </span><br><span class="line">WHERE 【筛选条件】 </span><br><span class="line">ORDER BY 排序列表【 ASC | DESC 】</span><br></pre></td></tr></table></figure><h4 id="2-3-2-特点"><a href="#2-3-2-特点" class="headerlink" title="2.3.2 特点"></a>2.3.2 特点</h4><p>​    1 asc表示升序，desc表示降序，如果不写，默认升序<br>​    2 order by 子句中可以支持单个字段、多个字段、表达式、函数、别名<br>​    3 order by 子句一般放在查询语句的最后面，limit子句除外</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工信息，要求工资从高到低排序</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary ASC ;</span><br><span class="line"># ORDER BY salary ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary DESC ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号大于等于90的员工信息，按入职时间的先后进行排序</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &gt;&#x3D; 90 </span><br><span class="line">ORDER BY hiredate ASC ;</span><br><span class="line"></span><br><span class="line"># 案例3：按年薪的高低显示员工的选型和年薪【按表达式排序】</span><br><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1 + IFNULL(commission_pct, 0)) 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary * 12 * (1 + IFNULL(commission_pct, 0)) DESC ;</span><br><span class="line"></span><br><span class="line"># 案例4：按年薪的高低显示员工的选型和年薪【按别名排序】</span><br><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1 + IFNULL(commission_pct, 0)) 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY 年薪 DESC ;</span><br><span class="line"></span><br><span class="line"># 案例5：按姓名的长度显示员工的姓名和工资【按函数排序】</span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(last_name) 字节长度,</span><br><span class="line">  last_name,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY LENGTH(last_name) DESC ;</span><br><span class="line"></span><br><span class="line"># 案例6：查询员工信息，要求先按工资排序，再按员工编号排序【按多个字段排序】</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary ASC,</span><br><span class="line">  employee_id DESC ;</span><br></pre></td></tr></table></figure><h4 id="附：常见函数"><a href="#附：常见函数" class="headerlink" title="附：常见函数"></a>附：常见函数</h4><p>1）字符函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"># 1. length 获取参数值的字节个数</span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(&#39;john&#39;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(&#39;张三丰hhh&#39;) ;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;%char%&#39; ;</span><br><span class="line"></span><br><span class="line"># 2. concat 拼接字符串</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(last_name, &#39;_&#39;, first_name) 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 3. upper、lower </span><br><span class="line">SELECT </span><br><span class="line">  UPPER(&#39;john&#39;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  LOWER(&#39;John&#39;) ;</span><br><span class="line"></span><br><span class="line"># 案例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    UPPER(last_name),</span><br><span class="line">    &#39;_&#39;,</span><br><span class="line">    LOWER(first_name)</span><br><span class="line">  ) 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 4. substr、substring </span><br><span class="line"># 注意：索引从1开始</span><br><span class="line"></span><br><span class="line"># 截取从指定索引处后面所有字符</span><br><span class="line">SELECT </span><br><span class="line">  SUBSTR(</span><br><span class="line">    &#39;李莫愁爱上了陆展元&#39;,</span><br><span class="line">    7</span><br><span class="line">  ) out_put ;</span><br><span class="line"></span><br><span class="line"># 截取从指定索引处指定长度的字符</span><br><span class="line">SELECT </span><br><span class="line">  SUBSTR(</span><br><span class="line">    &#39;李莫愁爱上了陆展元&#39;,</span><br><span class="line">    1,</span><br><span class="line">    3</span><br><span class="line">  ) out_put ;</span><br><span class="line"></span><br><span class="line"># 案例：姓名中首字符大写，其他字符小写，然后用_拼接，显示出来</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    UPPER(SUBSTR(last_name, 1, 1)),</span><br><span class="line">    &#39;_&#39;,</span><br><span class="line">    LOWER(SUBSTR(last_name, 2))</span><br><span class="line">  ) out_put </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 5. instr 返回子串第一次出现的索引，如果找不到，返回0</span><br><span class="line">SELECT </span><br><span class="line">  INSTR(</span><br><span class="line">    &#39;杨不悔爱上了殷六侠&#39;,</span><br><span class="line">    &#39;殷六侠&#39;</span><br><span class="line">  ) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 6. trim</span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(TRIM(&#39;    张翠山    &#39;)) AS out_put ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  TRIM(&#39;a&#39; FROM &#39;aaa张aaa翠aaa山aaa&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 7. lpad 用指定的字符实现左填充指定长度</span><br><span class="line">SELECT </span><br><span class="line">  LPAD(&#39;殷素素&#39;, 10, &#39;*&#39;) AS out_put ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  LPAD(&#39;殷素素&#39;, 2, &#39;*&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 8. rpad 用指定的字符实现做右充指定长度</span><br><span class="line">SELECT </span><br><span class="line">  RPAD(&#39;殷素素&#39;, 10, &#39;*&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 9. replace 替换</span><br><span class="line">SELECT </span><br><span class="line">  REPLACE(</span><br><span class="line">    &#39;张无忌爱上了周芷若&#39;,</span><br><span class="line">    &#39;周芷若&#39;,</span><br><span class="line">    &#39;赵敏&#39;</span><br><span class="line">  ) AS out_put ;</span><br></pre></td></tr></table></figure><p>2）数学函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 1. round 四舍五入</span><br><span class="line">SELECT </span><br><span class="line">  ROUND(1.65) ; # 2</span><br><span class="line"># ROUND(1.45) ; # 1</span><br><span class="line"># ROUND(-1.65) ; # -2</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  ROUND(1.654,2) ; # 1.65</span><br><span class="line">  </span><br><span class="line"># 2. ceil 向上取整，返回 &gt;&#x3D;该参数的最小整数</span><br><span class="line">SELECT </span><br><span class="line">  CEIL(1.002) ;</span><br><span class="line"># CEIL(-1.002); # -1</span><br><span class="line"></span><br><span class="line"># 3. floor 向下取整，，返回 &lt;&#x3D;该参数的最大整数</span><br><span class="line">SELECT </span><br><span class="line">  FLOOR(- 9.99) ; # -10</span><br><span class="line">  </span><br><span class="line"># 4. truncate 截断</span><br><span class="line">SELECT </span><br><span class="line">  TRUNCATE(1.6999, 1) ; # 1.6</span><br><span class="line"># 5. mod 取模、取余</span><br><span class="line"># a mod b --&gt; a-a&#x2F;b*b</span><br><span class="line">SELECT </span><br><span class="line">  MOD(10, 3) ;</span><br><span class="line"> </span><br><span class="line">SELECT </span><br><span class="line">  10 % 3 ;</span><br></pre></td></tr></table></figure><p>3）日期函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># 1. now 返回当前系统日期 + 时间</span><br><span class="line">SELECT </span><br><span class="line">  NOW() ;</span><br><span class="line"></span><br><span class="line"># 2. curdate 返回当前系统日期，不包含时间</span><br><span class="line">SELECT </span><br><span class="line">  CURDATE() ;</span><br><span class="line"></span><br><span class="line"># 3. curtime 返回当前系统时间，不包含日期</span><br><span class="line">SELECT </span><br><span class="line">  CURTIME() ;</span><br><span class="line"></span><br><span class="line"># 4. 可以获取指定的部分，年、月、日、小时、分钟、秒</span><br><span class="line">SELECT </span><br><span class="line">  YEAR(NOW()) 年 ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  YEAR(&#39;1997-1-1&#39;) 年 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  YEAR(hiredate) 年 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MONTH(NOW()) 月 ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  DAY(NOW()) 日 ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  HOUR(NOW()) 时 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MINUTE(NOW()) 分 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  SECOND(NOW()) 秒 ;</span><br><span class="line"></span><br><span class="line"># 5. str_to_date 将日期格式的字符转换为指定格式的日期</span><br><span class="line">SELECT </span><br><span class="line">  STR_TO_DATE(&#39;1997-3-2&#39;, &#39;%Y-%c-%d&#39;) AS out_put ;</span><br><span class="line">  </span><br><span class="line"># 案例：查询入职日期为1992-4-3的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE hiredate &#x3D; &#39;1992-4-3&#39; ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE hiredate &#x3D; STR_TO_DATE(&#39;4-3 1992&#39;, &#39;%c-%d %Y&#39;) ;</span><br><span class="line"></span><br><span class="line"># 6. date_format 将日期转换为字符</span><br><span class="line">SELECT </span><br><span class="line">  DATE_FORMAT(NOW(), &#39;%y年%m月%d日&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 案例：查询有奖金的员工名和入职日期（xx月&#x2F;xx日 xx年）</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  DATE_FORMAT(hiredate, &#39;%m月&#x2F;%d日 %y年&#39;) 入职日期 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL ;</span><br></pre></td></tr></table></figure><p>4）流程控制函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"># 1. if函数：if else 的效果</span><br><span class="line">SELECT </span><br><span class="line">  IF(10 &gt; 5, &#39;大&#39;, &#39;小&#39;) ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct,</span><br><span class="line">  IF(</span><br><span class="line">    commission_pct IS NULL,</span><br><span class="line">    &#39;没奖金，呵呵&#39;,</span><br><span class="line">    &#39;有奖金，嘻嘻&#39;</span><br><span class="line">  ) 备注 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 2. case函数的使用一：switch case 的效果</span><br><span class="line">&#x2F;*</span><br><span class="line">Java中</span><br><span class="line">switch(变量或表达式)&#123;</span><br><span class="line">case 常量1: 语句1; break; </span><br><span class="line">...</span><br><span class="line">default: 语句n; break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MySQL中</span><br><span class="line">case 要判断的字段或表达式</span><br><span class="line">when 常量1 then 要显示的值1 或 语句1;</span><br><span class="line">when 常量2 then 要显示的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">else 要显示的值n 或 语句n;</span><br><span class="line">end</span><br><span class="line">*&#x2F;</span><br><span class="line">&#x2F;*</span><br><span class="line">案例：查询员工的工资，要求</span><br><span class="line"></span><br><span class="line">部门号 &#x3D; 30，显示的工资为1.1倍</span><br><span class="line">部门号 &#x3D; 40，显示的工资为1.2倍</span><br><span class="line">部门号 &#x3D; 50，显示的工资为1.3倍</span><br><span class="line">其他部门，显示的工资为原工资</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  salary 原始工资,</span><br><span class="line">  department_id,</span><br><span class="line">  CASE</span><br><span class="line">    department_id </span><br><span class="line">    WHEN 30 </span><br><span class="line">    THEN salary * 1.1 </span><br><span class="line">    WHEN 40 </span><br><span class="line">    THEN salary * 1.2 </span><br><span class="line">    WHEN 50 </span><br><span class="line">    THEN salary * 1.3 </span><br><span class="line">    ELSE salary </span><br><span class="line">  END AS 新工资 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># case函数的使用二：类似于 多重if</span><br><span class="line">&#x2F;*</span><br><span class="line">java中</span><br><span class="line">if（条件1）&#123;</span><br><span class="line">语句1</span><br><span class="line">&#125; else if（条件2）&#123;</span><br><span class="line">语句2</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">else &#123;</span><br><span class="line">语句n</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MySQL中</span><br><span class="line">case </span><br><span class="line">when 条件1 then 要显示的值1 或 语句1;</span><br><span class="line">when 条件2 then 要显示的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">else 要显示的值n 或 语句n;</span><br><span class="line">end</span><br><span class="line">*&#x2F;</span><br><span class="line">&#x2F;*</span><br><span class="line">案例：查询员工的工资情况</span><br><span class="line">如果工资 &gt; 20000, 显示A级别</span><br><span class="line">如果工资 &gt; 15000, 显示B级别</span><br><span class="line">如果工资 &gt; 10000, 显示C级别</span><br><span class="line">否则，显示D级别</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  salary,</span><br><span class="line">  CASE</span><br><span class="line">    WHEN salary &gt; 20000 </span><br><span class="line">    THEN &#39;A&#39; </span><br><span class="line">    WHEN salary &gt; 15000 </span><br><span class="line">    THEN &#39;B&#39; </span><br><span class="line">    WHEN salary &gt; 10000 </span><br><span class="line">    THEN &#39;C&#39; </span><br><span class="line">    ELSE &#39;D&#39; </span><br><span class="line">  END AS 工资级别 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure><p>5）其他函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 1. version 查看版本号</span><br><span class="line">SELECT </span><br><span class="line">  VERSION() ;</span><br><span class="line"></span><br><span class="line"># 2. database 查看当前数据库</span><br><span class="line">SELECT </span><br><span class="line">  DATABASE() ;</span><br><span class="line"></span><br><span class="line"># 3. user 查看当前用户</span><br><span class="line">SELECT </span><br><span class="line">  USER() ;</span><br></pre></td></tr></table></figure><h3 id="2-4-分组函数"><a href="#2-4-分组函数" class="headerlink" title="2.4 分组函数"></a>2.4 分组函数</h3><h4 id="2-4-1-功能"><a href="#2-4-1-功能" class="headerlink" title="2.4.1 功能"></a>2.4.1 功能</h4><p>​    用作统计使用，又称为<strong>聚合函数</strong> 或 <strong>统计函数</strong> 或 <strong>组函数</strong></p><h4 id="2-4-2-分类"><a href="#2-4-2-分类" class="headerlink" title="2.4.2 分类"></a>2.4.2 分类</h4><p>​    sum 求和、avg 平均值、max 最大值、min 最小值、count 计算个数</p><h4 id="2-4-3-特点"><a href="#2-4-3-特点" class="headerlink" title="2.4.3 特点"></a>2.4.3 特点</h4><ol><li>sum、avg一般用于处理<strong>数值类型</strong>；max、min、count可以处理<strong>任何类型</strong></li><li>以上分组函数都忽略null值</li><li>可以和distinct搭配实现去重的运算</li><li>count函数：一般使用count(*)用作统计行数</li><li>和分组函数一同查询的字段要求是group by后的字段</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># 1 简单使用</span><br><span class="line">SELECT </span><br><span class="line">  SUM(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  COUNT(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  SUM(salary) 和,</span><br><span class="line">  ROUND(AVG(salary), 2) 平均,</span><br><span class="line">  MAX(salary) 最大,</span><br><span class="line">  MIN(salary) 最小,</span><br><span class="line">  COUNT(salary) 个数 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 参数支持哪些类型</span><br><span class="line"># select sum(last_name), avg(last_name) from employees;</span><br><span class="line">SELECT </span><br><span class="line">  SUM(hiredate),</span><br><span class="line">  AVG(hiredate) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(last_name),</span><br><span class="line">  MIN(last_name) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(hiredate),</span><br><span class="line">  MIN(hiredate) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  COUNT(commission_pct) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 3 是否忽略null值</span><br><span class="line">SELECT </span><br><span class="line">  SUM(commission_pct),</span><br><span class="line">  AVG(commission_pct),</span><br><span class="line">  SUM(commission_pct)&#x2F;35,</span><br><span class="line">  SUM(commission_pct)&#x2F;107</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(commission_pct),</span><br><span class="line">  MIN(commission_pct)</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  COUNT(commission_pct)</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line"># 4 和distinct搭配</span><br><span class="line">SELECT </span><br><span class="line">  SUM(DISTINCT salary),</span><br><span class="line">  SUM(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  COUNT(DISTINCT salary),</span><br><span class="line">  COUNT(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 5 count函数的详细介绍</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  COUNT(1) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">效率：</span><br><span class="line">myisam存储引擎下，count(*)的效率高</span><br><span class="line">innodb存储引擎下，COUNT(*)和COUNT(1)的效率差不多，比COUNT(字段)要高一些</span><br><span class="line">*&#x2F;</span><br><span class="line"># 6 和分组函数一同查询的字段有限制</span><br><span class="line"></span><br><span class="line"># select avg(salary),employees_id from employee;</span><br><span class="line"># 和分组函数一同查询的字段要求是group by后的字段</span><br></pre></td></tr></table></figure><h3 id="2-5-分组查询"><a href="#2-5-分组查询" class="headerlink" title="2.5 分组查询"></a>2.5 分组查询</h3><h4 id="2-5-1-语法"><a href="#2-5-1-语法" class="headerlink" title="2.5.1 语法"></a>2.5.1 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 分组函数，列（要求出现在group by的后面）</span><br><span class="line">from 表名</span><br><span class="line">【where 筛选条件】</span><br><span class="line">group by 分组的列表</span><br><span class="line">【order by 子句】</span><br></pre></td></tr></table></figure><blockquote><p>注意：查询列表必须特殊，要求是分组函数和group by后出现的字段</p></blockquote><h4 id="2-5-2-特点"><a href="#2-5-2-特点" class="headerlink" title="2.5.2 特点"></a>2.5.2 特点</h4><ol><li>分组查询中的筛选条件分为两类                </li></ol><table><thead><tr><th align="center"></th><th align="center">数据源</th><th align="center">位置</th><th align="center">关键字</th></tr></thead><tbody><tr><td align="center">分组前筛选</td><td align="center">原始表</td><td align="center">group by 子句的前面</td><td align="center">where</td></tr><tr><td align="center">分组后筛选</td><td align="center">分组后的结果集</td><td align="center">group by 子句的后面</td><td align="center">having</td></tr></tbody></table><blockquote><p>①分组函数做条件肯定是放在having子句中<br>②能用分组前筛选的，就优先考虑使用分组前筛选</p></blockquote><ol start="2"><li>group by子句支持单个字段分组，多个字段分组（多个字段之间用逗号隔开，没有顺序要求），表达式或函数（用得较少）</li><li>也可以添加排序（排序放在整个分组查询的最后）</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询每个工种的最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY job_id ;</span><br><span class="line"></span><br><span class="line"># 案例2： 查询每个位置上部门个数</span><br><span class="line">SELECT COUNT(*),location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line"># 添加筛选条件</span><br><span class="line"># 案例1：查询邮箱中包含a字符的，每个部门的平均工资</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &#39;%a%&#39; </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询有奖金的每个领导手下员工的最高工资</span><br><span class="line">SELECT MAX(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line"># 添加复杂的筛选条件</span><br><span class="line"># 案例1：查询哪个部门的员工数 &gt; 2</span><br><span class="line"># ①查询每个部门的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># ②根据①的结果进行筛选，查询哪个部门的员工数&gt;2</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING COUNT(*)&gt;2;</span><br><span class="line"></span><br><span class="line"># 案例2：查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span><br><span class="line"># ①查询每个工种有奖金的员工的最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">GROUP BY job_id ;</span><br><span class="line"></span><br><span class="line"># ②根据①结果继续筛选，最高工资 &gt; 12000</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">GROUP BY job_id </span><br><span class="line">HAVING MAX(salary) &gt; 12000 ;</span><br><span class="line"></span><br><span class="line"># 案例3：查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资</span><br><span class="line"># ①查询每个领导手下的员工最低工资</span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line"># ②添加筛选条件：编号&gt;102</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  manager_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE manager_id &gt; 102 </span><br><span class="line">GROUP BY manager_id ;</span><br><span class="line"></span><br><span class="line"># ③添加筛选条件：最低工资&gt;5000</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  manager_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE manager_id &gt; 102 </span><br><span class="line">GROUP BY manager_id </span><br><span class="line">HAVING MIN(salary) &gt; 5000 ;</span><br><span class="line"></span><br><span class="line"># 按表达式或函数分组</span><br><span class="line"># 案例：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些</span><br><span class="line"># ①查询每个长度的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  LENGTH(last_name) len_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY LENGTH(last_name) ;</span><br><span class="line"></span><br><span class="line"># ②添加筛选条件</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*) C,</span><br><span class="line">  LENGTH(last_name) len_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY len_name </span><br><span class="line">HAVING C &gt; 5 ;</span><br><span class="line"></span><br><span class="line"># 按多个字段分组</span><br><span class="line"># 案例：查询每个部门每个工种的员工的平均工资</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY job_id,</span><br><span class="line">  department_id ;</span><br><span class="line"></span><br><span class="line"># 添加排序</span><br><span class="line"># 案例：查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id IS NOT NULL </span><br><span class="line">GROUP BY job_id,</span><br><span class="line">  department_id </span><br><span class="line">HAVING AVG(salary) &gt; 10000 </span><br><span class="line">ORDER BY AVG(salary) DESC ;</span><br></pre></td></tr></table></figure><h3 id="2-5-连接查询"><a href="#2-5-连接查询" class="headerlink" title="2.5 连接查询"></a>2.5 连接查询</h3><h4 id="2-5-1-含义"><a href="#2-5-1-含义" class="headerlink" title="2.5.1 含义"></a>2.5.1 含义</h4><p>又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</p><blockquote><p><strong>笛卡尔乘积现象</strong>：表1 有 m 行，表2有 n 行，结果有 m*n 行</p><p>发生原因：没有有效的连接条件<br>如何避免：添加有效的连接条件</p></blockquote><h4 id="2-5-2-分类"><a href="#2-5-2-分类" class="headerlink" title="2.5.2 分类"></a>2.5.2 分类</h4><p>1）按年代分类：<br>    ① sql92标准：仅仅支持内连接<br>    ② sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接<br>2）按功能分类：<br>    ① 内连接：等值连接、非等值连接、自连接<br>    ② 外连接：左外连接、右外连接、全外连接<br>    ③ 交叉连接</p><h4 id="2-5-3-sql92标准"><a href="#2-5-3-sql92标准" class="headerlink" title="2.5.3 sql92标准"></a>2.5.3 sql92标准</h4><p>1）等值连接</p><p>​    ① 多表等值连接的结果为多表的交集部分<br>​    ② n表连接，至少需要n-1个连接条件<br>​    ③ 多表的顺序没有要求<br>​    ④ 一般需要为表起别名<br>​    ⑤ 可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询女神名和对应的男神名</span><br><span class="line">SELECT </span><br><span class="line">  NAME,</span><br><span class="line">  boyName </span><br><span class="line">FROM</span><br><span class="line">  beaupty,</span><br><span class="line">  boys </span><br><span class="line">WHERE beauty.boyfriend_id &#x3D; boys.id ;</span><br><span class="line"></span><br><span class="line">USE myemployees;</span><br><span class="line"># 案例2：查询员工名和对应的部门名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  employees,</span><br><span class="line">  departments </span><br><span class="line">WHERE employees.&#96;department_id&#96; &#x3D; departments.&#96;department_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 2、为表取别名</span><br><span class="line">&#x2F;*</span><br><span class="line">①提高语句的简洁度</span><br><span class="line">②区分多个重名的字段</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"># 查询员工名、工种号、工种名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  e.job_id,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e,</span><br><span class="line">  jobs j</span><br><span class="line">WHERE e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 3、两个表的顺序是否可以调换</span><br><span class="line"># 查询员工名、工种号、工种名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  e.job_id,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  jobs j,</span><br><span class="line">  employees e</span><br><span class="line">WHERE e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 4、可以加筛选吗？</span><br><span class="line"># 案例1：查询有奖金的员工名、部门名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees e,</span><br><span class="line">  departments d </span><br><span class="line">WHERE e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; </span><br><span class="line">  AND e.&#96;commission_pct&#96; IS NOT NULL ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询城市名中第二个字符为o的部门名和城市名</span><br><span class="line">SELECT </span><br><span class="line">  department_name,</span><br><span class="line">  city </span><br><span class="line">FROM</span><br><span class="line">  departments d,</span><br><span class="line">  locations l </span><br><span class="line">WHERE d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96; </span><br><span class="line">  AND city LIKE &#39;_o%&#39; ;</span><br><span class="line"></span><br><span class="line"># 5、可以加分组吗？</span><br><span class="line"># 案例1：查询每个城市的部门个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*) 个数,</span><br><span class="line">  city </span><br><span class="line">FROM</span><br><span class="line">  locations l,</span><br><span class="line">  departments d </span><br><span class="line">WHERE l.&#96;location_id&#96; &#x3D; d.&#96;location_id&#96; </span><br><span class="line">GROUP BY city ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span><br><span class="line">SELECT </span><br><span class="line">  department_name,</span><br><span class="line">  d.manager_id,</span><br><span class="line">  MIN(salary) </span><br><span class="line">FROM</span><br><span class="line">  departments d,</span><br><span class="line">  employees e </span><br><span class="line">WHERE d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">  AND commission_pct IS NOT NULL </span><br><span class="line">GROUP BY department_name,</span><br><span class="line">  d.manager_id ;</span><br><span class="line"></span><br><span class="line"># 6、可以加排序吗？</span><br><span class="line"># 案例：查询每个工种的工种名和员工的个数，并且按员工个数降序</span><br><span class="line">SELECT </span><br><span class="line">  job_title,</span><br><span class="line">  COUNT(*) 个数 </span><br><span class="line">FROM</span><br><span class="line">  jobs j,</span><br><span class="line">  employees e </span><br><span class="line">WHERE e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; </span><br><span class="line">GROUP BY job_title </span><br><span class="line">ORDER BY COUNT(*) DESC ;</span><br><span class="line"></span><br><span class="line"># 7、可以实现三表连接吗？</span><br><span class="line"># 案例：查询员工名、部门名和所在的城市</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  city </span><br><span class="line">FROM</span><br><span class="line">  employees e,</span><br><span class="line">  departments d,</span><br><span class="line">  locations l </span><br><span class="line">WHERE e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; </span><br><span class="line">  AND d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96; ;</span><br><span class="line">#  and city like &#39;s%&#39; </span><br><span class="line"># order by last_name ;</span><br></pre></td></tr></table></figure><p>2）非等值连接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工的工资和工资等级</span><br><span class="line"></span><br><span class="line">SELECT salary, grade_level</span><br><span class="line">FROM employees e, job_grades j</span><br><span class="line">WHERE salary BETWEEN j.&#96;lowest_sal&#96; AND j.&#96;highest_sal&#96;;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">CREATE TABLE job_grades (</span><br><span class="line">  grade_level VARCHAR (3),</span><br><span class="line">  lowest_sal int,</span><br><span class="line">  highest_sal int</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;A&#39;, 1000, 2999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;B&#39;, 3000, 5999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;C&#39;, 6000, 9999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;D&#39;, 10000, 14999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;E&#39;, 15000, 24999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;F&#39;, 25000, 40000);</span><br><span class="line"></span><br><span class="line">select * from job_grades;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure><p>3）自连接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询员工名和上级领导名</span><br><span class="line">SELECT e.employee_id, e.last_name, m.employee_id, m.last_name</span><br><span class="line">FROM employees e, employees m</span><br><span class="line">WHERE e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96;;</span><br></pre></td></tr></table></figure><h4 id="2-5-4-sql99标准"><a href="#2-5-4-sql99标准" class="headerlink" title="2.5.4 sql99标准"></a>2.5.4 sql99标准</h4><p><strong>语法</strong>    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名 【连接类型】</span><br><span class="line">join 表2 别名</span><br><span class="line">on 连接条件</span><br><span class="line">【where 筛选条件】</span><br><span class="line">【group by 分组】</span><br><span class="line">【having 筛选条件】</span><br><span class="line">【order by 排序列表】</span><br></pre></td></tr></table></figure><p><strong>分类</strong></p><p>① 内连接（★）：inner</p><p>② 外连接</p><ul><li>左外（★）：left 【outer】</li><li>右外（★）：right 【outer】</li><li>全外：full 【outer】</li></ul><p>③ 交叉连接：cross</p><p><strong>1） 内连接</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">inner join 表2 别名</span><br><span class="line">on 连接条件</span><br></pre></td></tr></table></figure><p><strong>分类</strong></p><p>① 等值连接<br>② 非等值连接<br>③ 自连接</p><p>特点：<br>① 添加排序、分组、筛选<br>② inner可以省略<br>③ 筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读<br>④ inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 1 等值连接</span><br><span class="line"># 案例1：查询员工名、部门名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  INNER JOIN departments d </span><br><span class="line">    ON e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询名字中包含e的员工名和工种名（添加筛选）</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  INNER JOIN jobs j </span><br><span class="line">    ON e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; </span><br><span class="line">WHERE last_name LIKE &#39;%e%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例3：查询部门个数&gt;3的城市名和部门个数，（添加分组+筛选）</span><br><span class="line">SELECT </span><br><span class="line">  city,</span><br><span class="line">  COUNT(*) 个数</span><br><span class="line">FROM</span><br><span class="line">  locations l </span><br><span class="line">  INNER JOIN departments d </span><br><span class="line">    ON l.&#96;location_id&#96; &#x3D; d.&#96;location_id&#96; </span><br><span class="line">GROUP BY city </span><br><span class="line">HAVING COUNT(*) &gt; 3 ;</span><br><span class="line"></span><br><span class="line"># 案例4：查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序（添加排序）</span><br><span class="line">SELECT </span><br><span class="line">  department_name,</span><br><span class="line">  COUNT(*) 个数</span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">  INNER JOIN employees e </span><br><span class="line">    ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96; </span><br><span class="line">GROUP BY department_name </span><br><span class="line">HAVING COUNT(*) &gt; 3 </span><br><span class="line">ORDER BY COUNT(*) DESC ;</span><br><span class="line"></span><br><span class="line"># 案例5：查询员工名、部门名、工种名，并按部门名降序（添加三表连接）</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  INNER JOIN departments d </span><br><span class="line">    ON e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; </span><br><span class="line">  INNER JOIN jobs j </span><br><span class="line">    ON e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; </span><br><span class="line">ORDER BY department_name DESC ;</span><br><span class="line"></span><br><span class="line"># 2 非等值连接</span><br><span class="line"># 案例1：查询员工的工资级别</span><br><span class="line">SELECT </span><br><span class="line">  salary,</span><br><span class="line">  grade_level </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN job_grades g </span><br><span class="line">    ON e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; </span><br><span class="line">    AND g.&#96;highest_sal&#96; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询工资级别的个数&gt;20的个数，并且按工资级别降序</span><br><span class="line">SELECT </span><br><span class="line">  grade_level,</span><br><span class="line">  COUNT(*) </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN job_grades g </span><br><span class="line">    ON e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; </span><br><span class="line">    AND g.&#96;highest_sal&#96; </span><br><span class="line">GROUP BY grade_level </span><br><span class="line">HAVING COUNT(*) &gt; 20 </span><br><span class="line">ORDER BY grade_level DESC ;</span><br><span class="line"></span><br><span class="line"># 3 自连接</span><br><span class="line"># 案例1：查询员工的名字、上级的名字</span><br><span class="line">SELECT </span><br><span class="line">  e.last_name 员工,</span><br><span class="line">  m.last_name 上级 </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN employees m </span><br><span class="line">    ON e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询姓名中包含字符k的员工的名字、上级的名字</span><br><span class="line">SELECT </span><br><span class="line">  e.last_name 员工,</span><br><span class="line">  m.last_name 上级 </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN employees m </span><br><span class="line">    ON e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96; </span><br><span class="line">WHERE e.&#96;last_name&#96; LIKE &#39;%k%&#39; ;</span><br></pre></td></tr></table></figure><p><strong>2）外连接</strong></p><p> <strong>应用场景</strong>：用于查询一个表中有，另一个表没有的记录</p><p> <strong>特点</strong><br>① 外连接的查询结果为主表中的所有记录，<br>    如果从表中有和它匹配的，则显示匹配的值；<br>    如果从表中没有和它匹配的，则显示null；<br>    外连接查询结果 = 内连接结果 + 主表中有而从表没有的记录</p><p>② 左外连接 ，left join 左边的是主表；<br>    右外连接，right join 右边的是主表</p><p>③ 左外和右外交换两个表的顺序，可以实现同样的效果 </p><p>④ 全外连接 = 内连接的结果 + 表1中有但表2没有的 + 表2中有但表1没有的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"># 引入：查询男朋友不在男神表的女神名</span><br><span class="line">USE girls;</span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line">SELECT * FROM boys;</span><br><span class="line"></span><br><span class="line"># 左外连接</span><br><span class="line">SELECT </span><br><span class="line">  b.name </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  LEFT OUTER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line"># 右外连接</span><br><span class="line">SELECT </span><br><span class="line">  b.name </span><br><span class="line">FROM</span><br><span class="line">  boys bo </span><br><span class="line">  RIGHT OUTER JOIN beauty b </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line"># 案例1：查询哪个部门没有员工</span><br><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 左外</span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  e.employee_id </span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">  LEFT OUTER JOIN employees e </span><br><span class="line">    ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96; </span><br><span class="line">WHERE employee_id IS NULL ;</span><br><span class="line"></span><br><span class="line"># 右外</span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  e.employee_id </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  RIGHT </span><br><span class="line">  OUTER JOIN departments d </span><br><span class="line">    ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96; </span><br><span class="line">WHERE e.&#96;employee_id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line"># 全外</span><br><span class="line">USE girls ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  b.*,</span><br><span class="line">  bo.* </span><br><span class="line">FROM</span><br><span class="line">  beauty b FULL </span><br><span class="line">  OUTER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.id ;</span><br><span class="line"># MySQL不支持全外连接</span><br></pre></td></tr></table></figure><p><strong>3）交叉连接</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  b.*,</span><br><span class="line">  bo.* </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  CROSS JOIN boys bo ;</span><br></pre></td></tr></table></figure><blockquote><p><strong>sql92 vs sql99</strong><br>功能：sql99支持的较多<br>可读性：sql99实现连接条件和筛选条件的分离，可读性较高</p></blockquote><h3 id="2-6-子查询"><a href="#2-6-子查询" class="headerlink" title="2.6 子查询"></a>2.6 子查询</h3><h4 id="2-6-1-含义"><a href="#2-6-1-含义" class="headerlink" title="2.6.1 含义"></a>2.6.1 含义</h4><p>出现在其他语句中的select语句，称为 子查询 或 内查询<br>外部的查询语句，称为 主查询 或 外查询</p><h4 id="2-6-2-分类"><a href="#2-6-2-分类" class="headerlink" title="2.6.2 分类"></a>2.6.2 分类</h4><p>① 按子查询出现的位置：</p><ul><li>select后面：<br>仅仅支持标量子查询</li><li>from后面：<br>支持表子查询</li><li>where 或 having后面：★<br>标量子查询（单行） √<pre><code>列子查询（多行） √    行子查询</code></pre></li><li>exists后面（相关子查询）：<br>表子查询</li></ul><p>②  按结果集的行列数不同：</p><ul><li>标量子查询（结果集中只有一行一列）</li><li>列子查询（结果集有一列多行）</li><li>行子查询（结果集有一行多列）</li><li>表子查询（结果集一般为多行多列）</li></ul><h4 id="2-6-3-where-或-having-后面"><a href="#2-6-3-where-或-having-后面" class="headerlink" title="2.6.3 where 或 having 后面"></a>2.6.3 where 或 having 后面</h4><p><strong>特点</strong><br>① 子查询放在小括号内<br>② 子查询一般放在条件的右侧<br>③ 标量子查询，一般搭配着<strong>单行操作符</strong>使用；<br>     列子查询，一般搭配着<strong>多行操作符</strong>使用</p><blockquote><p><strong>单行操作符</strong>：&gt; 、&lt; 、&gt;=、 &lt;= 、= 、&lt;&gt;</p><p><strong>多行操作符</strong>：in、any/some、all</p></blockquote><p>④ 子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">1、标量子查询（单行子查询）</span><br><span class="line">2、列子查询（多行子查询）</span><br><span class="line"></span><br><span class="line">3、行子查询（多列多行）</span><br><span class="line">*&#x2F;</span><br><span class="line"># 1 标量子查询★</span><br><span class="line"># 案例1：谁的工资比 Abel 高?</span><br><span class="line"># ① 查询Abel的工资</span><br><span class="line">SELECT </span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name &#x3D; &#39;Abel&#39; ;</span><br><span class="line"></span><br><span class="line"># ② 查询员工的信息，满足 salary&gt;① 结果</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE last_name &#x3D; &#39;Abel&#39;) ;</span><br><span class="line"></span><br><span class="line"># 案例2：返回job_id与141号员工相同，salary比143号员工多的员工 姓名，job_id 和工资</span><br><span class="line"># ① 查询141号员工的job_id</span><br><span class="line">SELECT </span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id &#x3D; 141 ;</span><br><span class="line"></span><br><span class="line"># ② 查询143号员工的salary</span><br><span class="line">SELECT </span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id &#x3D; 143 ;</span><br><span class="line"></span><br><span class="line"># ③ 查询员工的姓名，job_id 和工资，要求job_id&#x3D;①并且salary&gt;②</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    job_id </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE employee_id &#x3D; 141) </span><br><span class="line">  AND salary &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE employee_id &#x3D; 143) ;</span><br><span class="line"></span><br><span class="line"># 案例3：返回公司工资最少的员工的last_name,job_id和salary</span><br><span class="line"># ① 查询公司的 最低工资</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line"># ② 查询last_name,job_id和salary，要求salary&#x3D;①</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"># 案例4：查询最低工资大于50号部门最低工资的部门id和其最低工资</span><br><span class="line"># ① 查询50号部门的最低工资</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &#x3D; 50 ;</span><br><span class="line"></span><br><span class="line"># ② 查询每个部门的最低工资</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line">#③ 在②基础上筛选，满足min(salary)&gt;①</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING MIN(salary) &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE department_id &#x3D; 50) ;</span><br><span class="line"></span><br><span class="line"># 非法使用标量子查询</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING MIN(salary) &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(salary) #    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE department_id &#x3D; 50) ;</span><br><span class="line">#  WHERE department_id &#x3D; 250) ;</span><br><span class="line"></span><br><span class="line"># 2 列子查询（多行子查询）</span><br><span class="line"># 案例1：返回location_id是1400或1700的部门中的所有员工姓名</span><br><span class="line"># ① 查询location_id是1400或1700的部门编号</span><br><span class="line">SELECT DISTINCT </span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  departments </span><br><span class="line">WHERE location_id IN (1400, 1700) ;</span><br><span class="line"></span><br><span class="line"># ② 查询员工姓名，要求部门号是①列表中的某一个</span><br><span class="line"> </span><br><span class="line">SELECT </span><br><span class="line">  last_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id IN </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    department_id </span><br><span class="line">  FROM</span><br><span class="line">    departments </span><br><span class="line">  WHERE location_id IN (1400, 1700)</span><br><span class="line"></span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 案例2：返回其它工种中比job_id为‘IT_PROG’工种任一工资低的员工的员工号、姓名、job_id 以及salary</span><br><span class="line"># ① 查询job_id为‘IT_PROG’部门任一工资</span><br><span class="line">SELECT DISTINCT </span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id &#x3D; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># ② 查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; ANY </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># 或</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例3：返回其它部门中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id 以及salary</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; ALL </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># 或</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    MIN(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"># 3 行子查询（结果集一行多列或多行多列）</span><br><span class="line"># 案例：查询员工编号最小并且工资最高的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE (employee_id, salary) &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(employee_id),</span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"># 用前面的知识</span><br><span class="line"># ① 查询最小的员工编号</span><br><span class="line">SELECT </span><br><span class="line">  MIN(employee_id) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># ② 查询最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># ③ 查询员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(employee_id) </span><br><span class="line">  FROM</span><br><span class="line">    employees) </span><br><span class="line">  AND salary &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br></pre></td></tr></table></figure><h4 id="2-6-4-select后面"><a href="#2-6-4-select后面" class="headerlink" title="2.6.4 select后面"></a>2.6.4 select后面</h4><blockquote><p>仅仅支持标量子查询</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询每个部门的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  (SELECT </span><br><span class="line">    COUNT(*) </span><br><span class="line">  FROM</span><br><span class="line">    employees e </span><br><span class="line">  WHERE e.department_id &#x3D; d.&#96;department_id&#96;) 个数</span><br><span class="line">FROM</span><br><span class="line">  departments d ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询员工号&#x3D;102的部门名</span><br><span class="line">SELECT </span><br><span class="line">  (SELECT </span><br><span class="line">    department_name</span><br><span class="line">  FROM</span><br><span class="line">    departments d </span><br><span class="line">    INNER JOIN employees e </span><br><span class="line">      ON d.department_id &#x3D; e.department_id </span><br><span class="line">  WHERE e.employee_id &#x3D; 102) 部门名 ;</span><br></pre></td></tr></table></figure><h4 id="2-6-5-from后面"><a href="#2-6-5-from后面" class="headerlink" title="2.6.5 from后面"></a>2.6.5 from后面</h4><blockquote><p>将子查询结果充当一张表，要求必须起别名</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询每个部门的平均工资的工资等级</span><br><span class="line"># ① 查询每个部门的平均工资</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># ② 连接①的结果集和job_grades表，筛选条件平均工资 between lowest_sal and highest_sal</span><br><span class="line">SELECT </span><br><span class="line">  ag_dep.*,</span><br><span class="line">  g.&#96;grade_level&#96; </span><br><span class="line">FROM</span><br><span class="line">  (SELECT </span><br><span class="line">    AVG(salary) ag,</span><br><span class="line">    department_id </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  GROUP BY department_id) ag_dep </span><br><span class="line">  INNER JOIN job_grades g </span><br><span class="line">    ON ag_dep.ag BETWEEN lowest_sal </span><br><span class="line">    AND highest_sal ;</span><br></pre></td></tr></table></figure><h4 id="2-6-6-exists后面（相关子查询）"><a href="#2-6-6-exists后面（相关子查询）" class="headerlink" title="2.6.6 exists后面（相关子查询）"></a>2.6.6 exists后面（相关子查询）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">exists(完整的查询语句)</span><br><span class="line">结果：</span><br><span class="line">1或0</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  EXISTS </span><br><span class="line">  (SELECT </span><br><span class="line">    employee_id </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE salary &#x3D; 300000) ;</span><br><span class="line"></span><br><span class="line"># 案例1：查询有员工的部门名</span><br><span class="line"># in</span><br><span class="line">SELECT </span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">WHERE d.&#96;department_id&#96; IN </span><br><span class="line">  (SELECT </span><br><span class="line">    department_id </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"># exists</span><br><span class="line">SELECT </span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">WHERE EXISTS </span><br><span class="line">  (SELECT </span><br><span class="line">    * </span><br><span class="line">  FROM</span><br><span class="line">    employees e </span><br><span class="line">  WHERE d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line"></span><br><span class="line"># 案例2：查询没有女朋友的男神信息</span><br><span class="line"># in</span><br><span class="line">  SELECT </span><br><span class="line">    bo.* </span><br><span class="line">  FROM</span><br><span class="line">    boys bo </span><br><span class="line">  WHERE bo.id NOT IN </span><br><span class="line">    (SELECT </span><br><span class="line">      boyfriend_id </span><br><span class="line">    FROM</span><br><span class="line">      beauty) ;</span><br><span class="line"></span><br><span class="line"># exists</span><br><span class="line">SELECT </span><br><span class="line">  bo.* </span><br><span class="line">FROM</span><br><span class="line">  boys bo </span><br><span class="line">WHERE NOT EXISTS </span><br><span class="line">  (SELECT </span><br><span class="line">    boyfriend_id </span><br><span class="line">  FROM</span><br><span class="line">    beauty b </span><br><span class="line">  WHERE bo.&#96;id&#96; &#x3D; b.&#96;boyfriend_id&#96;) ;</span><br></pre></td></tr></table></figure><h3 id="2-7-分页查询"><a href="#2-7-分页查询" class="headerlink" title="2.7 分页查询"></a>2.7 分页查询</h3><h4 id="2-7-1-应用场景"><a href="#2-7-1-应用场景" class="headerlink" title="2.7.1 应用场景"></a>2.7.1 应用场景</h4><p>当要查询的条目数太多，一页显示不全,需要分页提交sql请求</p><h4 id="2-7-2-语法"><a href="#2-7-2-语法" class="headerlink" title="2.7.2 语法"></a>2.7.2 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1</span><br><span class="line">【join type join 表2</span><br><span class="line">on 连接条件</span><br><span class="line">where 筛选条件</span><br><span class="line">group by 分组字段</span><br><span class="line">having 分组后的筛选</span><br><span class="line">order by 排序的字段】</span><br><span class="line">limit offset, size;</span><br></pre></td></tr></table></figure><blockquote><p>offset：要显示条目的起始索引（起始索引从0开始）<br>size：要显示的条目个数</p></blockquote><h4 id="2-7-3-特点"><a href="#2-7-3-特点" class="headerlink" title="2.7.3 特点"></a>2.7.3 特点</h4><p>① limit语句放在查询语句的最后<br>② 公式：<code>limit (page-1)*size,size;</code></p><blockquote><p>要显示的页数 page，没有条目数 size</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 案例1：查询前五条员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">LIMIT 0, 5 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">LIMIT 5 ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询第11-25条员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">LIMIT 11, 15 ;</span><br><span class="line"></span><br><span class="line"># 案例3：有奖金的员工信息，并且工资较高的前10名显示出来</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">ORDER BY salary DESC </span><br><span class="line">LIMIT 10 ;</span><br></pre></td></tr></table></figure><h3 id="2-8-联合查询"><a href="#2-8-联合查询" class="headerlink" title="2.8 联合查询"></a>2.8 联合查询</h3><h4 id="2-8-1-应用场景"><a href="#2-8-1-应用场景" class="headerlink" title="2.8.1 应用场景"></a>2.8.1 应用场景</h4><p>要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</p><h4 id="2-8-2-语法"><a href="#2-8-2-语法" class="headerlink" title="2.8.2 语法"></a>2.8.2 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句1</span><br><span class="line">union</span><br><span class="line">查询语句2</span><br><span class="line">union</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>union</code>: 联合、合并。将多条查询语句的结果合并成一个结果</p><h4 id="2-8-3-特点★"><a href="#2-8-3-特点★" class="headerlink" title="2.8.3 特点★"></a>2.8.3 特点★</h4><p>① 要求多条查询语句的查询列数是一致的！</p><p>② 要求多条查询语句的查询的每一列的类型和顺序最好一致</p><p>③ union关键字默认去重，如果使用union all 可以包含重复项</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 引入：查询部门编号&gt;90 或 邮箱包含a的员工信息</span><br><span class="line"> </span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &#39;%a%&#39; </span><br><span class="line">  OR department_id &gt; 90 ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &#39;%a%&#39; </span><br><span class="line">UNION</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &gt; 90 ;</span><br></pre></td></tr></table></figure><hr><h2 id="第三章-DML语言"><a href="#第三章-DML语言" class="headerlink" title="第三章 DML语言"></a>第三章 DML语言</h2><p>DML（Data Manipulation Language）：数据操作语言，用来定义数据库记录（数据）</p><blockquote><p>插入：insert<br>修改：update<br>删除：delete</p></blockquote><h3 id="3-1-插入语言"><a href="#3-1-插入语言" class="headerlink" title="3.1 插入语言"></a>3.1 插入语言</h3><h4 id="3-1-1-方式一"><a href="#3-1-1-方式一" class="headerlink" title="3.1.1 方式一"></a>3.1.1 方式一</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名（列名，……） value（值1，……）</span><br></pre></td></tr></table></figure><h4 id="3-1-2-方式二"><a href="#3-1-2-方式二" class="headerlink" title="3.1.2 方式二"></a>3.1.2 方式二</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名</span><br><span class="line">set 列名 &#x3D; 值, 列名 &#x3D; 值, ...</span><br></pre></td></tr></table></figure><h4 id="3-1-3-两种方式对比"><a href="#3-1-3-两种方式对比" class="headerlink" title="3.1.3 两种方式对比"></a>3.1.3 两种方式对比</h4><p>① 方式一支持插入多行，方式二不支持</p><p>② 方式一支持子查询，方式二不支持</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"># 1.插入的值的类型要与列的类型一致或兼容</span><br><span class="line"></span><br><span class="line">USE girls;</span><br><span class="line">INSERT INTO beauty(id, NAME, sex, borndate, phone, photo, boyfriend_id)</span><br><span class="line">VALUE(13, &#39;王小虎&#39;, &#39;男&#39;, &#39;1990-4-23&#39;, &#39;18288668899&#39;, NULL, 2);</span><br><span class="line"></span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line"></span><br><span class="line"># 2.不可以为null的列必须插入值，可以为null的列如何插入值？</span><br><span class="line"># 方式一：null</span><br><span class="line">INSERT INTO beauty (</span><br><span class="line">  id,</span><br><span class="line">  NAME,</span><br><span class="line">  sex,</span><br><span class="line">  borndate,</span><br><span class="line">  phone,</span><br><span class="line">  photo,</span><br><span class="line">  boyfriend_id</span><br><span class="line">) VALUE (</span><br><span class="line">  13,</span><br><span class="line">  &#39;王小虎&#39;,</span><br><span class="line">  &#39;男&#39;,</span><br><span class="line">  &#39;1990-4-23&#39;,</span><br><span class="line">  &#39;18288668899&#39;,</span><br><span class="line">  NULL,</span><br><span class="line">  2</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 方式二：省略</span><br><span class="line">INSERT INTO beauty (</span><br><span class="line">  id,</span><br><span class="line">  NAME,</span><br><span class="line">  sex,</span><br><span class="line">  borndate,</span><br><span class="line">  phone,</span><br><span class="line">  boyfriend_id</span><br><span class="line">) VALUE (</span><br><span class="line">  14,</span><br><span class="line">  &#39;金星&#39;,</span><br><span class="line">  &#39;女&#39;,</span><br><span class="line">  &#39;1990-4-23&#39;,</span><br><span class="line">  &#39;18288778899&#39;,</span><br><span class="line">  2</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty (id, NAME, sex, phone) VALUE (15, &#39;娜扎&#39;, &#39;女&#39;, &#39;18288770099&#39;) ;</span><br><span class="line"></span><br><span class="line"># 3.列的顺序能否调换？ # 能，但必须对应</span><br><span class="line">INSERT INTO beauty (NAME, id, sex, phone) VALUE (&#39;蒋欣&#39;, 16, &#39;女&#39;, &#39;18266778899&#39;) ;</span><br><span class="line"></span><br><span class="line"># 4.列数和值的个数必须一致</span><br><span class="line">INSERT INTO beauty (NAME, id, sex, phone) VALUE (&#39;关晓彤&#39;, 17, &#39;女&#39;, &#39;18288778899&#39;) ;</span><br><span class="line"></span><br><span class="line"># 5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span><br><span class="line">INSERT INTO beauty VALUE (</span><br><span class="line">  18,</span><br><span class="line">  &#39;张飞&#39;,</span><br><span class="line">  &#39;男&#39;,</span><br><span class="line">  NULL,</span><br><span class="line">  &#39;110&#39;,</span><br><span class="line">  NULL,</span><br><span class="line">  NULL</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 方式二：</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">insert into 表名</span><br><span class="line">set 列名 &#x3D; 值, 列名 &#x3D; 值, ...</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">INSERT INTO beauty SET id &#x3D; 19,</span><br><span class="line">NAME &#x3D; &#39;刘涛&#39;,</span><br><span class="line">phone &#x3D; &#39;199&#39; ;</span><br><span class="line"></span><br><span class="line"># 两种方式大pk ★</span><br><span class="line"># 1、方式一支持插入多行,方式二不支持</span><br><span class="line">INSERT INTO beauty </span><br><span class="line">VALUES</span><br><span class="line">  (</span><br><span class="line">    23,</span><br><span class="line">    &#39;唐艺昕1&#39;,</span><br><span class="line">    &#39;女&#39;,</span><br><span class="line">    &#39;1990-4-23&#39;,</span><br><span class="line">    &#39;1898888888&#39;,</span><br><span class="line">    NULL,</span><br><span class="line">    2</span><br><span class="line">  ),</span><br><span class="line">  (</span><br><span class="line">    24,</span><br><span class="line">    &#39;唐艺昕2&#39;,</span><br><span class="line">    &#39;女&#39;,</span><br><span class="line">    &#39;1990-4-23&#39;,</span><br><span class="line">    &#39;1898888888&#39;,</span><br><span class="line">    NULL,</span><br><span class="line">    2</span><br><span class="line">  ),</span><br><span class="line">  (</span><br><span class="line">    25,</span><br><span class="line">    &#39;唐艺昕3&#39;,</span><br><span class="line">    &#39;女&#39;,</span><br><span class="line">    &#39;1990-4-23&#39;,</span><br><span class="line">    &#39;1898888888&#39;,</span><br><span class="line">    NULL,</span><br><span class="line">    2</span><br><span class="line">  ) ;</span><br><span class="line"></span><br><span class="line"># 2、方式一支持子查询，方式二不支持</span><br><span class="line">INSERT INTO beauty (id, NAME, phone) </span><br><span class="line">SELECT </span><br><span class="line">  26,</span><br><span class="line">  &#39;宋茜&#39;,</span><br><span class="line">  &#39;11809866&#39; ;</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty (id, NAME, phone) </span><br><span class="line">SELECT </span><br><span class="line">  id,</span><br><span class="line">  boyname,</span><br><span class="line">  &#39;1234567&#39; </span><br><span class="line">FROM</span><br><span class="line">  boys </span><br><span class="line">WHERE id &lt; 3 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  beauty ;</span><br></pre></td></tr></table></figure><h3 id="3-2-修改语句"><a href="#3-2-修改语句" class="headerlink" title="3.2 修改语句"></a>3.2 修改语句</h3><h4 id="3-2-1-修改单表的记录★"><a href="#3-2-1-修改单表的记录★" class="headerlink" title="3.2.1 修改单表的记录★"></a>3.2.1 修改单表的记录★</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update 表名</span><br><span class="line">set 列&#x3D;新值,列&#x3D;新值,...</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-修改多表的记录【补充】"><a href="#3-2-2-修改多表的记录【补充】" class="headerlink" title="3.2.2 修改多表的记录【补充】"></a>3.2.2 修改多表的记录【补充】</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># sql92语法：</span><br><span class="line">update 表1 别名1,表2 别名2</span><br><span class="line">set 列&#x3D;值,...</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99语法：</span><br><span class="line">update 表1 别名1</span><br><span class="line">inner|left|right join 表2 别名2</span><br><span class="line">on 连接条件</span><br><span class="line">set 列&#x3D;值,...</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 1.修改单表的记录</span><br><span class="line"># 案例1：修改beauty表中姓唐的女神的电话为13899888899</span><br><span class="line">UPDATE </span><br><span class="line">  beauty </span><br><span class="line">SET</span><br><span class="line">  phone &#x3D; &#39;13899888899&#39; </span><br><span class="line">WHERE NAME LIKE &#39;唐%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例2：修改boys表中id好为2的名称为张飞，魅力值 10</span><br><span class="line">UPDATE </span><br><span class="line">  boys </span><br><span class="line">SET</span><br><span class="line">  boyname &#x3D; &#39;张飞&#39;,</span><br><span class="line">  usercp &#x3D; 10 </span><br><span class="line">WHERE id &#x3D; 2 ;</span><br><span class="line"></span><br><span class="line"># 2.修改多表的记录</span><br><span class="line"># 案例 1：修改张无忌的女朋友的手机号为114</span><br><span class="line">UPDATE </span><br><span class="line">  boys bo </span><br><span class="line">  INNER JOIN beauty b </span><br><span class="line">    ON bo.&#96;id&#96; &#x3D; b.&#96;id&#96; SET b.&#96;phone&#96; &#x3D; &#39;120&#39;,</span><br><span class="line">  bo.&#96;userCP&#96; &#x3D; 120 </span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;张无忌&#39; ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2：修改没有男朋友的女神的男朋友编号都为2号</span><br><span class="line">UPDATE </span><br><span class="line">  boys bo </span><br><span class="line">  RIGHT JOIN beauty b </span><br><span class="line">    ON bo.&#96;id&#96; &#x3D; b.&#96;boyfriend_id&#96; SET b.&#96;boyfriend_id&#96; &#x3D; 2 </span><br><span class="line">WHERE bo.&#96;id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  boys ;</span><br></pre></td></tr></table></figure><h3 id="3-4-删除语句"><a href="#3-4-删除语句" class="headerlink" title="3.4 删除语句"></a>3.4 删除语句</h3><h4 id="3-4-1-方式一：delete"><a href="#3-4-1-方式一：delete" class="headerlink" title="3.4.1 方式一：delete"></a>3.4.1 方式一：delete</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 1 单表的删除【★】</span><br><span class="line">delete from 表名 where 筛选条件</span><br><span class="line"></span><br><span class="line"># 2 多表的删除【补充】</span><br><span class="line"># sql92语法：</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名,表2 别名</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99语法：</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名</span><br><span class="line">inner|left|right join 表2 别名 on 连接条件</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure><h4 id="3-4-2-方式二：truncate"><a href="#3-4-2-方式二：truncate" class="headerlink" title="3.4.2 方式二：truncate"></a>3.4.2 方式二：truncate</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure><blockquote><p>delete vs truncate【面试题★】</p><ol><li>delete 可以加where 条件，truncate不能加</li><li>truncate删除，效率高一丢丢</li><li>假如要删除的表中有自增长列，如果<br>用delete删除后，再插入数据，自增长列的值从断点开始，<pre><code>而truncate删除后，再插入数据，自增长列的值从1开始。</code></pre></li><li>truncate删除没有返回值，delete删除有返回值</li><li>truncate删除不能回滚，delete删除可以回滚.</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># 方式一：delete</span><br><span class="line"># 1.单表的删除</span><br><span class="line"># 案例1：删除手机号以9结尾的女神信息</span><br><span class="line">DELETE </span><br><span class="line">FROM</span><br><span class="line">  beauty </span><br><span class="line">WHERE phone LIKE &#39;%9&#39; ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  beauty ;</span><br><span class="line"></span><br><span class="line"># 2.多表的删除</span><br><span class="line"># 案例1：删除张无忌的女朋友的信息</span><br><span class="line">DELETE </span><br><span class="line">  b </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  INNER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;张无忌&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例2：删除黄晓明的信息以及他女朋友的信息</span><br><span class="line">DELETE </span><br><span class="line">  b,</span><br><span class="line">  bo </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  INNER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;黄晓明&#39; ;</span><br><span class="line"></span><br><span class="line"># 方式二：truncate语句</span><br><span class="line"># 案例：将魅力值&gt;100的男神信息删除</span><br><span class="line">TRUNCATE TABLE boys ;</span><br><span class="line"># 删除整个表</span><br><span class="line"># delete pk truncate【面试题★】</span><br><span class="line">&#x2F;*</span><br><span class="line">1.delete 可以加where 条件，truncate不能加</span><br><span class="line">2.truncate删除，效率高一丢丢</span><br><span class="line">3.假如要删除的表中有自增长列，</span><br><span class="line">如果用delete删除后，再插入数据，自增长列的值从断点开始，</span><br><span class="line">而truncate删除后，再插入数据，自增长列的值从1开始。</span><br><span class="line">4.truncate删除没有返回值，delete删除有返回值</span><br><span class="line">5.truncate删除不能回滚，delete删除可以回滚.</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  boys ;</span><br><span class="line"></span><br><span class="line">DELETE </span><br><span class="line">FROM</span><br><span class="line">  boys ;</span><br><span class="line"></span><br><span class="line">TRUNCATE TABLE boys ;</span><br><span class="line"></span><br><span class="line">INSERT INTO boys (boyname, usercp) </span><br><span class="line">VALUES</span><br><span class="line">  (&#39;张飞&#39;, 100),</span><br><span class="line">  (&#39;刘备&#39;, 100),</span><br><span class="line">  (&#39;关云长&#39;, 100) ;</span><br></pre></td></tr></table></figure><hr><h2 id="第四章-DDL语言"><a href="#第四章-DDL语言" class="headerlink" title="第四章 DDL语言"></a>第四章 DDL语言</h2><p>DDL（Data Definition Language）：数据定义语言，用来定义数据库对象：库、表、列等</p><h3 id="4-1-库的管理"><a href="#4-1-库的管理" class="headerlink" title="4.1 库的管理"></a>4.1 库的管理</h3><h4 id="4-1-1-库的创建"><a href="#4-1-1-库的创建" class="headerlink" title="4.1.1 库的创建"></a>4.1.1 库的创建</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database [if not exists] 库名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 案例：创建库books</span><br><span class="line"></span><br><span class="line">CREATE DATABASE IF NOT EXISTS books ;</span><br></pre></td></tr></table></figure><h4 id="4-1-2-库的修改"><a href="#4-1-2-库的修改" class="headerlink" title="4.1.2 库的修改"></a>4.1.2 库的修改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RENAME DATABASE books TO 新库名; # 不安全，弃用</span><br><span class="line"></span><br><span class="line"># 更改库的字符集</span><br><span class="line">ALTER DATABASE books </span><br><span class="line">  CHARACTER SET gbk ;</span><br></pre></td></tr></table></figure><h4 id="4-1-3-库的删除"><a href="#4-1-3-库的删除" class="headerlink" title="4.1.3 库的删除"></a>4.1.3 库的删除</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS 库名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 案例：删除库books</span><br><span class="line">DROP DATABASE IF EXISTS books ;</span><br></pre></td></tr></table></figure><h3 id="4-2-表的管理"><a href="#4-2-表的管理" class="headerlink" title="4.2 表的管理"></a>4.2 表的管理</h3><h4 id="4-2-1-表的创建"><a href="#4-2-1-表的创建" class="headerlink" title="4.2.1 表的创建"></a>4.2.1 表的创建</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">...</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：创建表book</span><br><span class="line">CREATE TABLE book (</span><br><span class="line">  id INT,</span><br><span class="line">  # 编号</span><br><span class="line">  bName VARCHAR (20),</span><br><span class="line">  # 书名</span><br><span class="line">  price DOUBLE,</span><br><span class="line">  # 价格</span><br><span class="line">  authorId INT,</span><br><span class="line">  # 作者编号</span><br><span class="line">  publishDate DATETIME#出版日期</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 案例2：创建表author</span><br><span class="line">CREATE TABLE IF NOT EXISTS author (</span><br><span class="line">  id INT,</span><br><span class="line">  au_name VARCHAR (20),</span><br><span class="line">  nation VARCHAR (10)</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-表的修改"><a href="#4-2-2-表的修改" class="headerlink" title="4.2.2 表的修改"></a>4.2.2 表的修改</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add|drop|modify|change column 列名 【列类型 约束】;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ① 修改列名</span><br><span class="line">ALTER TABLE book </span><br><span class="line">  CHANGE COLUMN publishdate pubDate DATETIME ;</span><br><span class="line"></span><br><span class="line"># ② 修改列的类型或约束</span><br><span class="line">ALTER TABLE book </span><br><span class="line">  MODIFY COLUMN pubdate TIMESTAMP ;</span><br><span class="line"></span><br><span class="line"># ③ 添加新列</span><br><span class="line">ALTER TABLE author </span><br><span class="line">  ADD COLUMN annual DOUBLE ;</span><br><span class="line"></span><br><span class="line"># ④ 删除列</span><br><span class="line">ALTER TABLE author </span><br><span class="line">  DROP COLUMN annual ;</span><br><span class="line"></span><br><span class="line"># ⑤ 修改表名</span><br><span class="line">ALTER TABLE author </span><br><span class="line">  RENAME TO book_author ;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-表的删除"><a href="#4-2-3-表的删除" class="headerlink" title="4.2.3 表的删除"></a>4.2.3 表的删除</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE 【IF EXISTS】 表名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 删除表book_author</span><br><span class="line">DROP TABLE IF EXISTS book_author ;</span><br><span class="line"></span><br><span class="line">SHOW TABLES ;</span><br><span class="line"></span><br><span class="line"># 通用的写法：</span><br><span class="line">DROP DATABASE IF EXISTS 旧库名 ;</span><br><span class="line">CREATE DATABASE 新库名;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS 旧表名 ;</span><br><span class="line">CREATE TABLE 表名 ;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-表的复制"><a href="#4-2-4-表的复制" class="headerlink" title="4.2.4 表的复制"></a>4.2.4 表的复制</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO author </span><br><span class="line">VALUES</span><br><span class="line">  (1, &#39;村上春树&#39;, &#39;日本&#39;),</span><br><span class="line">  (2, &#39;莫言&#39;, &#39;中国&#39;),</span><br><span class="line">  (3, &#39;冯唐&#39;, &#39;中国&#39;),</span><br><span class="line">  (4, &#39;金庸&#39;, &#39;中国&#39;) ;</span><br><span class="line"></span><br><span class="line"># 1、仅仅复制表的结构</span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line"></span><br><span class="line"># 2、复制表的结构 + 数据</span><br><span class="line">CREATE TABLE copy1 </span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  author ;</span><br><span class="line">  </span><br><span class="line"># 3、只复制部分数据</span><br><span class="line">CREATE TABLE copy2 </span><br><span class="line">SELECT </span><br><span class="line">  id,</span><br><span class="line">  au_name </span><br><span class="line">FROM</span><br><span class="line">  author </span><br><span class="line">WHERE nation &#x3D; &#39;中国&#39; ;</span><br><span class="line"></span><br><span class="line"># 4、仅仅复制某些字段</span><br><span class="line">CREATE TABLE copy3 </span><br><span class="line">SELECT </span><br><span class="line">  id,</span><br><span class="line">  au_name </span><br><span class="line">FROM</span><br><span class="line">  author </span><br><span class="line">WHERE 0;</span><br></pre></td></tr></table></figure><h3 id="4-3-数据类型"><a href="#4-3-数据类型" class="headerlink" title="4.3 数据类型"></a>4.3 数据类型</h3><h4 id="4-3-1-分类"><a href="#4-3-1-分类" class="headerlink" title="4.3.1 分类"></a>4.3.1 分类</h4><p><strong>数值型</strong></p><ul><li>整型</li><li>小数：<ul><li>定点数</li><li>浮点数</li></ul></li></ul><p><strong>字符型</strong></p><ul><li>较短的文本：char、varchar</li><li>较长的文本：text、blob（较长的二进制数据）    </li></ul><p><strong>日期型</strong></p><h4 id="4-3-2-整型"><a href="#4-3-2-整型" class="headerlink" title="4.3.2 整型"></a>4.3.2 整型</h4><p><strong>1）分类</strong></p><table><thead><tr><th align="center">tinyint</th><th align="center">smallint</th><th align="center">mediumint</th><th align="center">int/integer</th><th align="center">bigint</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">8</td></tr></tbody></table><p><strong>2）特点</strong></p><p>① 如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字</p><p>② 如果插入的数值超出了整型的范围，会报out of range异常，并且插入临界值</p><p>③ 如果不设置长度，会有默认的长度；长度代表显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 如何设置无符号和有符号</span><br><span class="line">DROP TABLE IF EXISTS tab_int ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_int (</span><br><span class="line">  t1 INT (7) ZEROFILL,</span><br><span class="line">  t2 INT (7) UNSIGNED ZEROFILL</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC tab_int ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int </span><br><span class="line">VALUES</span><br><span class="line">  (- 12345, 12345) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int </span><br><span class="line">VALUES</span><br><span class="line">  (24545444, 12345) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  tab_int ;</span><br></pre></td></tr></table></figure><h4 id="4-3-3-小数"><a href="#4-3-3-小数" class="headerlink" title="4.3.3 小数"></a>4.3.3 小数</h4><p><strong>1）分类</strong></p><p>① <strong>定点数</strong>：float(M,D)、double(M,D)</p><p>② <strong>浮点数</strong>：dec((M,D)、decimal(M,D)</p><p><strong>2）特点</strong></p><p>① M和D</p><p>M：整数部位 + 小数部位</p><p>D：小数部位</p><p>如果超过范围，则插入临界值</p><p>② M和D都可以省略</p><p>如果是decimal，则M默认为10，D默认为0</p><p>如果是float和double，则会根据插入的数值的精度来决定精度</p><p>③ 定点型的精度较高，如果要求插入数值的精度较高，如货币运算等，则考虑使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># M和D测试</span><br><span class="line">CREATE TABLE tab_float(</span><br><span class="line">f1 FLOAT(5,2),</span><br><span class="line">f2 DOUBLE(5,2),</span><br><span class="line">f3 DECIMAL(5,2)</span><br><span class="line">);</span><br><span class="line">SELECT * FROM tab_float VALUES(123.4, 123.4, 123.4);</span><br><span class="line">SELECT * FROM tab_float VALUES(123.45, 123.45, 123.45);</span><br><span class="line">SELECT * FROM tab_float VALUES(123.456, 123.456, 123.456);</span><br></pre></td></tr></table></figure><h4 id="4-3-4-字符型"><a href="#4-3-4-字符型" class="headerlink" title="4.3.4 字符型"></a>4.3.4 字符型</h4><p><strong>1）分类</strong></p><p>① 较短的文本：char、varchar</p><p>其他：binary 和 varbinary用于保存较短的二进制、enum用于保存枚举、set用于保存集合</p><p>② 较长的文本：text、blob（较大的二进制）</p><p><strong>2）特点</strong></p><table><thead><tr><th></th><th>写法</th><th>M的意思</th><th>特点</th><th>空间的耗费</th><th>效率</th></tr></thead><tbody><tr><td>char</td><td>char(M)</td><td>最大的字符数，可以省略，默认为1</td><td>固定长度的字符</td><td>比较耗费</td><td>高</td></tr><tr><td>varchar</td><td>varchar(M)</td><td>最大的字符数，不可以省略</td><td>可变长度的字符</td><td>比较节省</td><td>低</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_char (c1 ENUM (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_char VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;b&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;c&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;m&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;A&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_char;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_set (s1 SET (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;)) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;A,B&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a,c,d&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_set;</span><br></pre></td></tr></table></figure><h4 id="4-3-5-日期型"><a href="#4-3-5-日期型" class="headerlink" title="4.3.5 日期型"></a>4.3.5 日期型</h4><p><strong>1）分类</strong></p><p>① date：只保存日期</p><p>② time：只保存时间</p><p>③ year：只保存年</p><p>④ datetime：保存日期 + 时间</p><p>⑤ timestamp：保存日期 + 时间</p><p><strong>2）特点</strong></p><table><thead><tr><th align="center"></th><th align="center">字节</th><th align="center">范围</th><th align="center">时区等的影响</th></tr></thead><tbody><tr><td align="center">datetime</td><td align="center">8</td><td align="center">1000——9999</td><td align="center">不受</td></tr><tr><td align="center">timestamp</td><td align="center">4</td><td align="center">1970-2038</td><td align="center">受</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_date (t1 DATETIME, t2 TIMESTAMP) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_date VALUES(NOW(),NOW());</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_date;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;time_zone&#39;;</span><br><span class="line"></span><br><span class="line">SET time_zone&#x3D;&#39;+9:00&#39;;</span><br></pre></td></tr></table></figure><h3 id="4-4-约束"><a href="#4-4-约束" class="headerlink" title="4.4 约束"></a>4.4 约束</h3><h4 id="4-4-1-含义"><a href="#4-4-1-含义" class="headerlink" title="4.4.1 含义"></a>4.4.1 含义</h4><p>一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p><h4 id="4-4-2-分类"><a href="#4-4-2-分类" class="headerlink" title="4.4.2 分类"></a>4.4.2 分类</h4><p>六大约束：</p><p><strong>1）NOT NULL</strong></p><p>非空，用于保证该字段的值不能为空；比如：姓名、学号等</p><p><strong>2）DEFAULT</strong></p><p>默认，用于保证该字段有默认值；比如：性别</p><p><strong>3）PRIMARY KEY</strong></p><p>主键，用于保证该字段的值具有唯一性，并且非空；比如：学号、员工编号等</p><p><strong>4）UNIQUE</strong></p><p>唯一，用于保证该字段的值具有唯一性，可以为空；比如：座位号</p><p><strong>5）CHECK</strong></p><p>检查约束【mysql中不支持】；比如：年龄、性别</p><p><strong>6）FOREIGN KEY</strong></p><p>外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值；在从表添加外键约束，用于引用主表中某列的值；比如：学生表的专业编号，员工表的部门编号，员工表的工种编号</p><h4 id="4-4-3-约束的添加分类"><a href="#4-4-3-约束的添加分类" class="headerlink" title="4.4.3 约束的添加分类"></a>4.4.3 约束的添加分类</h4><p><strong>1）列级约束</strong></p><p>六大约束语法上都支持，但外键约束没有效果    </p><p><strong>2）表级约束</strong></p><p>除了非空、默认，其他的都支持    </p><p><strong>添加约束的时机</strong>：① 创建表时；② 修改表时</p><p>主键和唯一的大对比：</p><table><thead><tr><th align="center"></th><th align="center">保证唯一性</th><th align="center">是否允许为空</th><th align="center">一个表中可以有多少个</th><th align="center">是否允许组合</th></tr></thead><tbody><tr><td align="center">主键</td><td align="center">√</td><td align="center">×</td><td align="center">至多有1个</td><td align="center">√，但不推荐</td></tr><tr><td align="center">唯一</td><td align="center">√</td><td align="center">√</td><td align="center">可以有多个</td><td align="center">√，但不推荐</td></tr></tbody></table><p><strong>外键</strong></p><p>① 从表设置外键关系</p><p>② 外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</p><p>③ 关联列必须是一个key（一般是主键或唯一）</p><p>④ 插入数据时，先插入主表，再插入从表；删除数据时，先删除从表，再删除主表</p><h4 id="4-4-4-语法"><a href="#4-4-4-语法" class="headerlink" title="4.4.4 语法"></a>4.4.4 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段名 字段类型 列级约束,</span><br><span class="line">字段名 字段类型,</span><br><span class="line">表级约束</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>1）创建表时添加约束</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE students ;</span><br><span class="line"></span><br><span class="line"># 一、创建表时添加约束</span><br><span class="line"># 1.添加列级约束</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">直接在字段名和类型后面追加 约束类型 即可。</span><br><span class="line"></span><br><span class="line">只支持：默认、非空、主键、唯一</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">USE students ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  # 主键</span><br><span class="line">  stuName VARCHAR (20) NOT NULL,</span><br><span class="line">  # 非空</span><br><span class="line">  gender CHAR(1) CHECK (gender &#x3D; &#39;男&#39; </span><br><span class="line">    OR gender &#x3D; &#39;女&#39;),</span><br><span class="line">  # 检查</span><br><span class="line">  seat INT UNIQUE,</span><br><span class="line">  # 唯一</span><br><span class="line">  age INT DEFAULT 18,</span><br><span class="line">  # 默认约束</span><br><span class="line">  majorId INT REFERENCES major (id) # 外键</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE major (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  majorName VARCHAR (20)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC stuinfo ;</span><br><span class="line"># 查看stuinfo表中所有的索引，包括主键、外键、唯一</span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br><span class="line"></span><br><span class="line"># 2.添加表级约束</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：在各个字段的最下面</span><br><span class="line"> 【constraint 约束名】 约束类型(字段名) </span><br><span class="line"> </span><br><span class="line">*&#x2F;</span><br><span class="line">DROP TABLE IF EXISTS stuinfo ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">  id INT,</span><br><span class="line">  stuname VARCHAR (20),</span><br><span class="line">  gender CHAR(1),</span><br><span class="line">  seat INT,</span><br><span class="line">  age INT,</span><br><span class="line">  majorid INT,</span><br><span class="line">  CONSTRAINT pk PRIMARY KEY (id),</span><br><span class="line">  #主键</span><br><span class="line">  CONSTRAINT uq UNIQUE (seat),</span><br><span class="line">  #唯一键</span><br><span class="line">  CONSTRAINT ck CHECK (gender &#x3D; &#39;男&#39; </span><br><span class="line">    OR gender &#x3D; &#39;女&#39;),</span><br><span class="line">  #检查</span><br><span class="line">  CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major (id) #外键</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br><span class="line"></span><br><span class="line"># 通用的写法：★</span><br><span class="line">CREATE TABLE IF NOT EXISTS stuinfo (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  stuname VARCHAR (20),</span><br><span class="line">  sex CHAR(1),</span><br><span class="line">  age INT DEFAULT 18,</span><br><span class="line">  seat INT UNIQUE,</span><br><span class="line">  majorid INT,</span><br><span class="line">  CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major (id)</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure><p><strong>2）修改表时添加约束</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"># 二、修改表时添加约束</span><br><span class="line">&#x2F;*</span><br><span class="line">1、添加列级约束</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 新约束;</span><br><span class="line"></span><br><span class="line">2、添加表级约束</span><br><span class="line">alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">DROP TABLE IF EXISTS stuinfo ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">  id INT,</span><br><span class="line">  stuname VARCHAR (20),</span><br><span class="line">  gender CHAR(1),</span><br><span class="line">  seat INT,</span><br><span class="line">  age INT,</span><br><span class="line">  majorid INT</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC stuinfo ;</span><br><span class="line"></span><br><span class="line"># 1.添加非空约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN stuname VARCHAR (20) NOT NULL ;</span><br><span class="line"></span><br><span class="line">#2.添加默认约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN age INT DEFAULT 18 ;</span><br><span class="line"></span><br><span class="line"># 3.添加主键</span><br><span class="line"># ①列级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN id INT PRIMARY KEY ;</span><br><span class="line"></span><br><span class="line"># ②表级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  ADD PRIMARY KEY (id) ;</span><br><span class="line"></span><br><span class="line"># 4.添加唯一</span><br><span class="line"># ①列级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN seat INT UNIQUE ;</span><br><span class="line"></span><br><span class="line"># ②表级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  ADD UNIQUE (seat) ;</span><br><span class="line"></span><br><span class="line"># 5.添加外键</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major (id) ;</span><br></pre></td></tr></table></figure><p><strong>3）修改表时删除约束</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 三、修改表时删除约束</span><br><span class="line"># 1.删除非空约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN stuname VARCHAR (20) NULL ;</span><br><span class="line"></span><br><span class="line"># 2.删除默认约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN age INT ;</span><br><span class="line"></span><br><span class="line"># 3.删除主键</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  DROP PRIMARY KEY ;</span><br><span class="line"></span><br><span class="line"># 4.删除唯一</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  DROP INDEX seat ;</span><br><span class="line"></span><br><span class="line"># 5.删除外键</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  DROP FOREIGN KEY fk_stuinfo_major ;</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br></pre></td></tr></table></figure><h3 id="4-5-标识列"><a href="#4-5-标识列" class="headerlink" title="4.5 标识列"></a>4.5 标识列</h3><h4 id="4-5-1-含义"><a href="#4-5-1-含义" class="headerlink" title="4.5.1 含义"></a>4.5.1 含义</h4><p>又称为自增长列，可以不用手动的插入值，系统提供默认的序列值</p><p>含义：可以不用手动的插入值，系统提供默认的序列值</p><h4 id="4-5-2-特点"><a href="#4-5-2-特点" class="headerlink" title="4.5.2 特点"></a>4.5.2 特点</h4><p>1）标识列必须和主键搭配吗？不一定，但要求是一个key</p><p>2）一个表可以有几个标识列？至多一个！</p><p>3）标识列的类型只能是数值型</p><p>4）标识列可以通过 <code>SET auto_increment_increment=3;设置步长</code>;可以通过手动插入值，设置起始值</p><h4 id="4-5-3-创建表时设置标识列"><a href="#4-5-3-创建表时设置标识列" class="headerlink" title="4.5.3 创建表时设置标识列"></a>4.5.3 创建表时设置标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 一、创建表时设置标识列</span><br><span class="line">DROP TABLE IF EXISTS tab_identity ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_identity (</span><br><span class="line">  id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">  NAME VARCHAR(20) </span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">TRUNCATE TABLE tab_identity ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_identity(id,NAME) VALUES(NULL,&#39;john&#39;);</span><br><span class="line">INSERT INTO tab_identity(NAME) VALUES(&#39;lucy&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_identity;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;%auto_increment%&#39; ;</span><br><span class="line"></span><br><span class="line">SET auto_increment_increment &#x3D; 3 ;</span><br></pre></td></tr></table></figure><h4 id="4-5-4-修改表时设置标识列"><a href="#4-5-4-修改表时设置标识列" class="headerlink" title="4.5.4 修改表时设置标识列"></a>4.5.4 修改表时设置标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 二、修改表时设置标识列</span><br><span class="line">ALTER TABLE tab_identity </span><br><span class="line">  MODIFY COLUMN id INT PRIMARY KEY AUTO_INCREMENT ;</span><br></pre></td></tr></table></figure><h4 id="4-5-5-修改表时删除标识列"><a href="#4-5-5-修改表时删除标识列" class="headerlink" title="4.5.5 修改表时删除标识列"></a>4.5.5 修改表时删除标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 三、修改表时删除标识列</span><br><span class="line">ALTER TABLE tab_identity </span><br><span class="line">  MODIFY COLUMN id INT ;</span><br></pre></td></tr></table></figure><hr><h2 id="第五章-TCL语言"><a href="#第五章-TCL语言" class="headerlink" title="第五章 TCL语言"></a>第五章 TCL语言</h2><p>TCL（Transmission Control Language）：事务控制语言</p><h3 id="5-1-事务"><a href="#5-1-事务" class="headerlink" title="5.1 事务"></a>5.1 事务</h3><h4 id="5-1-1-概念"><a href="#5-1-1-概念" class="headerlink" title="5.1.1 概念"></a>5.1.1 概念</h4><p>一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p><h4 id="5-1-2特性"><a href="#5-1-2特性" class="headerlink" title="5.1.2特性"></a>5.1.2特性</h4><p><code>ACID</code><br>原子性（Atomicity）：一个事务不可再分割，要么都执行要么都不执行<br>一致性（Consistency）：一个事务执行会使数据从一个一致状态切换到另外一个一致状态<br>隔离性（Isolation）：一个事务的执行不受其他事务的干扰<br>持久性（Durability）：一个事务一旦提交，则会永久的改变数据库的数据.</p><h4 id="5-1-3-分类"><a href="#5-1-3-分类" class="headerlink" title="5.1.3 分类"></a>5.1.3 分类</h4><p><strong>隐式事务</strong>：事务没有明显的开启和结束的标记<br>比如：insert、update、delete语句</p><p><strong>显式事务</strong>：事务具有明显的开启和结束的标记<br>前提：必须先设置自动提交功能为禁用</p><h3 id="5-2-事务的创建"><a href="#5-2-事务的创建" class="headerlink" title="5.2 事务的创建"></a>5.2 事务的创建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 步骤1：开启事务</span><br><span class="line">SET autocommit &#x3D; 0;</span><br><span class="line">START TRANSACTION; # 可选的</span><br><span class="line"># 步骤2：编写事务中的sql语句（select insert update delete）</span><br><span class="line">语句1;</span><br><span class="line">语句2;</span><br><span class="line">...</span><br><span class="line"># 步骤3：结束事务</span><br><span class="line">COMMIT; # 提交事务</span><br><span class="line">ROLLBACK; # 回滚事务</span><br><span class="line">SAVEPOINT 节点名; # 设置保存点</span><br></pre></td></tr></table></figure><h3 id="5-3-并发事务"><a href="#5-3-并发事务" class="headerlink" title="5.3 并发事务"></a>5.3 并发事务</h3><p>1 事务的并发问题是如何发生的？</p><p>多个事务<strong>同时</strong>操作<strong>同一个</strong>数据库的相同数据时</p><p>2 并发问题都有哪些？</p><p><strong>脏读</strong>：一个事务读取了其他事务还没有提交的数据，读到的是其他事务“更新”的数据</p><p><strong>不可重复读</strong>：一个事务多次读取，结果不一样</p><p><strong>幻读</strong>：一个事务读取了其他事务还没有提交的数据，只是读到的是 其他事务“插入”的数据</p><p>3 如何解决并发问题？</p><p>通过设置<strong>隔离级别</strong>来解决</p><table><thead><tr><th align="center">事务的隔离级别</th><th align="center">脏读</th><th align="center">不可重复读</th><th align="center">幻读</th></tr></thead><tbody><tr><td align="center">read uncommitted</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">read committed</td><td align="center">×</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">repeatable read</td><td align="center">×</td><td align="center">×</td><td align="center">√</td></tr><tr><td align="center">serializable</td><td align="center">×</td><td align="center">×</td><td align="center">×</td></tr></tbody></table><blockquote><p><strong>mysql</strong>中默认第三个隔离级别 repeatable read<br><strong>oracle</strong>中默认第二个隔离级别 read committed</p></blockquote><p><strong>查看隔离级别</strong>：<code>select @@tx_isolation;</code></p><p><strong>设置隔离级别</strong>：<code>set session|global transaction isolation level 隔离级别;</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SHOW ENGINES ; # 查看数据库引擎</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;autocommit&#39; ;</span><br><span class="line"></span><br><span class="line">USE test;</span><br><span class="line">CREATE TABLE account (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  username VARCHAR (20),</span><br><span class="line">  balance DOUBLE</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO account VALUE (1, &#39;张无忌&#39;, 1000),</span><br><span class="line">(2, &#39;赵敏&#39;, 1000) ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 演示事务的使用步骤</span><br><span class="line"># 1 开启事务</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line"># 2 编写一组事务的语句</span><br><span class="line">UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;张无忌&#39;;</span><br><span class="line">UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;赵敏&#39;;</span><br><span class="line"></span><br><span class="line"># 3 结束事务</span><br><span class="line">ROLLBACK;</span><br><span class="line"># commit;</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure><p><strong>演示事务对于<code>delete</code>和<code>truncate</code>的处理的区别</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 演示delete--还原，和原来一样</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION ;</span><br><span class="line">DELETE FROM account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 演示truncate--数据删除，只剩表格</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION ;</span><br><span class="line">TRUNCATE TABLE account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><p><strong>演示<code>savepoint</code>的使用</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 演示savepoint 的使用</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id&#x3D;25;</span><br><span class="line">SAVEPOINT a;# 设置保存点</span><br><span class="line">DELETE FROM account WHERE id&#x3D;28;</span><br><span class="line">ROLLBACK TO a;# 回滚到保存点</span><br><span class="line"></span><br><span class="line">SELECT * FROM account</span><br></pre></td></tr></table></figure><hr><h2 id="第六章-其他"><a href="#第六章-其他" class="headerlink" title="第六章 其他"></a>第六章 其他</h2><p>视图、变量、存储过程、函数、流程控制过程</p><h3 id="6-1-视图"><a href="#6-1-视图" class="headerlink" title="6.1 视图"></a>6.1 视图</h3><p><strong>含义</strong>：虚拟表，和普通表一样使用</p><blockquote><p>mysql5.1版本出现的新特性，是通过表动态生成的数据</p></blockquote><table><thead><tr><th></th><th>创建语法的关键字</th><th>是否实际占用物理空间</th><th>使用</th></tr></thead><tbody><tr><td>视图</td><td>create view</td><td>只是保存了sql逻辑</td><td>增删改查，只是一般不能增删改</td></tr><tr><td>表</td><td>create table</td><td>保存了数据</td><td>增删改查</td></tr></tbody></table><h4 id="6-1-1-创建视图"><a href="#6-1-1-创建视图" class="headerlink" title="6.1.1 创建视图"></a>6.1.1 创建视图</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW 视图名 AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 1.查询姓名中包含a字符的员工名、部门名和工种信息</span><br><span class="line"># ① 创建</span><br><span class="line">CREATE VIEW myv1 AS </span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN departments d </span><br><span class="line">    ON e.department_id &#x3D; d.department_id </span><br><span class="line">  JOIN jobs j </span><br><span class="line">    ON j.job_id &#x3D; e.job_id ;</span><br><span class="line"></span><br><span class="line"># ② 使用</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  myv1 </span><br><span class="line">WHERE last_name LIKE &#39;%a%&#39; ;</span><br><span class="line"></span><br><span class="line"># 2.查询各部门的平均工资级别</span><br><span class="line"># ① 创建视图查看每个部门的平均工资</span><br><span class="line">CREATE VIEW myv2 AS </span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary) ag,</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># ② 使用</span><br><span class="line">SELECT </span><br><span class="line">  myv2.&#96;ag&#96;,</span><br><span class="line">  g.grade_level </span><br><span class="line">FROM</span><br><span class="line">  myv2 </span><br><span class="line">  JOIN job_grades g </span><br><span class="line">    ON myv2.&#96;ag&#96; BETWEEN g.&#96;lowest_sal&#96; </span><br><span class="line">    AND g.&#96;highest_sal&#96; ;</span><br><span class="line"></span><br><span class="line"># 3.查询平均工资最低的部门信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  myv2 </span><br><span class="line">ORDER BY ag </span><br><span class="line">LIMIT 1 ;</span><br><span class="line"></span><br><span class="line">#4.查询平均工资最低的部门名和工资</span><br><span class="line">CREATE VIEW myv3 AS </span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  myv2 </span><br><span class="line">ORDER BY ag </span><br><span class="line">LIMIT 1 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  m.ag </span><br><span class="line">FROM</span><br><span class="line">  myv3 m </span><br><span class="line">  JOIN departments d </span><br><span class="line">    ON m.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; ;</span><br></pre></td></tr></table></figure><h4 id="6-1-2-视图的修改"><a href="#6-1-2-视图的修改" class="headerlink" title="6.1.2 视图的修改"></a>6.1.2 视图的修改</h4><p><strong>1）方式一</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW  视图名 AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv3 AS </span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY job_id ;</span><br></pre></td></tr></table></figure><p><strong>2）方式二</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW 视图名 AS </span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW myv3 </span><br><span class="line">  AS </span><br><span class="line">  SELECT </span><br><span class="line">    * </span><br><span class="line">  FROM</span><br><span class="line">    employees ;</span><br></pre></td></tr></table></figure><h4 id="6-1-3-删除视图"><a href="#6-1-3-删除视图" class="headerlink" title="6.1.3 删除视图"></a>6.1.3 删除视图</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW 视图名,视图名,...;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW emp_v1,</span><br><span class="line">emp_v2,</span><br><span class="line">myv3 ;</span><br></pre></td></tr></table></figure><h4 id="6-1-4-查看视图"><a href="#6-1-4-查看视图" class="headerlink" title="6.1.4 查看视图"></a>6.1.4 查看视图</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 视图名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE VIEW myv3 ;</span><br></pre></td></tr></table></figure><h4 id="6-1-5-视图的更新"><a href="#6-1-5-视图的更新" class="headerlink" title="6.1.5 视图的更新"></a>6.1.5 视图的更新</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv1 AS </span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  email </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 1.插入</span><br><span class="line">INSERT INTO myv1 </span><br><span class="line">VALUES</span><br><span class="line">  (&#39;张飞&#39;, &#39;zf@qq.com&#39;) ;</span><br><span class="line"></span><br><span class="line"># 2.修改</span><br><span class="line">UPDATE </span><br><span class="line">  myv1 </span><br><span class="line">SET</span><br><span class="line">  last_name &#x3D; &#39;张无忌&#39; </span><br><span class="line">WHERE last_name &#x3D; &#39;张飞&#39; ;</span><br><span class="line"></span><br><span class="line"># 3.删除</span><br><span class="line">DELETE </span><br><span class="line">FROM</span><br><span class="line">  myv1 </span><br><span class="line">WHERE last_name &#x3D; &#39;张无忌&#39; ;</span><br></pre></td></tr></table></figure><blockquote><p>具备以下特点的视图不允许更新</p><p>① 包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all</p><p>② 常量视图</p><p>③ select中包含子查询</p><p>④ join（不能插入）</p><p>⑤ from一个不能更新的视图</p><p>⑥ where子句的子查询引用了from子句中的表</p></blockquote><h3 id="6-2-变量"><a href="#6-2-变量" class="headerlink" title="6.2 变量"></a>6.2 变量</h3><h4 id="6-2-1-分类"><a href="#6-2-1-分类" class="headerlink" title="6.2.1 分类"></a>6.2.1 分类</h4><table><thead><tr><th align="center">系统变量</th><th align="center">自定义变量</th></tr></thead><tbody><tr><td align="center">全局变量</td><td align="center">用户变量</td></tr><tr><td align="center">会话变量</td><td align="center">局部变量</td></tr></tbody></table><h4 id="6-2-2-系统变量"><a href="#6-2-2-系统变量" class="headerlink" title="6.2.2 系统变量"></a>6.2.2 系统变量</h4><p><strong>说明</strong></p><p>变量有系统提供，不是用户定义，属于服务器层面</p><p><strong>语法</strong></p><p><strong>1）查看所有的系统变量</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|【session】 variables;</span><br></pre></td></tr></table></figure><p><strong>2）查看满足条件的部分系统变量</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|【session】 variables like &#39;%char%&#39;;</span><br></pre></td></tr></table></figure><p><strong>3）查看指定的系统变量的值</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@global|【session】.系统变量名;</span><br></pre></td></tr></table></figure><p><strong>4）为某个系统变量赋值</strong><br><strong>方式一</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global|【session】系统变量名 &#x3D; 值;</span><br></pre></td></tr></table></figure><p><strong>方式二</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @@global|【session】系统变量名 &#x3D; 值;</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong></p><p>如果是全局级别，则需要加global，如果是会话级别，则需要加session，如果不写，则默认session</p></blockquote><p><strong>1）全局变量</strong></p><p><strong>作用域</strong>：服务器每次启动将为所有的全局变量赋初始值，针对于所有会话（连接）有效，但不能跨重启</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ① 查看所有全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES ;</span><br><span class="line"></span><br><span class="line"># ② 查看满足条件的部分系统变量</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &#39;%char%&#39; ;</span><br><span class="line"></span><br><span class="line"># ③ 查看指定的系统变量的值</span><br><span class="line">SELECT </span><br><span class="line">  @@global.autocommit ;</span><br><span class="line"></span><br><span class="line"># ④ 为某个系统变量赋值</span><br><span class="line">SET @@global.autocommit &#x3D; 0 ;</span><br><span class="line"></span><br><span class="line">SET GLOBAL autocommit &#x3D; 0 ;</span><br></pre></td></tr></table></figure><p><strong>2）会话变量</strong></p><p><strong>作用域</strong>：针对于当前会话（连接）有效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ① 查看所有会话变量</span><br><span class="line">SHOW SESSION VARIABLES ;</span><br><span class="line"></span><br><span class="line"># ② 查看满足条件的部分会话变量</span><br><span class="line">SHOW SESSION VARIABLES LIKE &#39;%char%&#39; ;</span><br><span class="line"></span><br><span class="line"># ③ 查看指定的会话变量的值</span><br><span class="line">SELECT </span><br><span class="line">  @@autocommit ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  @@session.tx_isolation ;</span><br><span class="line"></span><br><span class="line"># ④ 为某个会话变量赋值</span><br><span class="line"># 方式一：</span><br><span class="line">SET @@session.tx_isolation &#x3D; &#39;read-uncommitted&#39; ;</span><br><span class="line"></span><br><span class="line"># 方式二：</span><br><span class="line">SET SESSION tx_isolation &#x3D; &#39;read-committed&#39; ;</span><br></pre></td></tr></table></figure><h4 id="6-2-3-自定义变量"><a href="#6-2-3-自定义变量" class="headerlink" title="6.2.3 自定义变量"></a>6.2.3 自定义变量</h4><p><strong>说明</strong></p><p>变量由用户自定义，而不是系统提供的</p><p><strong>使用步骤</strong></p><p>声明 → 赋值 → 使用（查看、比较、运算等）</p><p><strong>1）用户变量</strong></p><p><strong>作用域</strong>：针对于当前会话（连接）有效，作用域同于<strong>会话变量</strong>，应用在任何地方，begin end中 或 begin end的外面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 赋值操作符：&#x3D;或:&#x3D;</span><br><span class="line"># ① 声明并初始化</span><br><span class="line">SET @用户变量名 &#x3D; 值;</span><br><span class="line">SET @用户变量名 :&#x3D; 值;</span><br><span class="line">SELECT @用户变量名 :&#x3D; 值;</span><br><span class="line"></span><br><span class="line"># ② 赋值（更新变量的值）</span><br><span class="line"># 方式一：</span><br><span class="line">SET @用户变量名 &#x3D; 值;</span><br><span class="line">SET @用户变量名 :&#x3D; 值;</span><br><span class="line">SELECT @用户变量名 :&#x3D; 值;</span><br><span class="line"># 方式二：</span><br><span class="line">SELECT 字段 INTO @变量名</span><br><span class="line">FROM 表;</span><br><span class="line"># ③ 使用（查看变量的值）</span><br><span class="line">SELECT @变量名;</span><br><span class="line"></span><br><span class="line"># 案例</span><br><span class="line"># 1、声明并初始化</span><br><span class="line">SET @name &#x3D; &#39;john&#39;;</span><br><span class="line">SET @name &#x3D; 100;</span><br><span class="line">SET @account &#x3D; 1;</span><br><span class="line"></span><br><span class="line"># 2、赋值</span><br><span class="line">SELECT COUNT(*) INTO @count</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line"># 3、查看</span><br><span class="line">SELECT @count;</span><br></pre></td></tr></table></figure><p><strong>2）局部变量</strong></p><p><strong>作用域</strong>：仅仅在定义它的begin end块中有效，应用在 begin end中的第一句话</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ① 声明</span><br><span class="line">DECLARE 变量名 类型;</span><br><span class="line">DECLARE 变量名 类型 DEFAULT 值 ;</span><br><span class="line"></span><br><span class="line"># ② 赋值（更新变量的值）</span><br><span class="line"># 方式一：通过set或select</span><br><span class="line">SET 局部变量名&#x3D;值;</span><br><span class="line">SET 局部变量名:&#x3D;值;</span><br><span class="line">SELECT @局部变量名:&#x3D;值;</span><br><span class="line"># 方式二：通过select into</span><br><span class="line">SELECT 字段 INTO 具备变量名</span><br><span class="line">FROM 表;</span><br><span class="line"># ③ 使用（查看变量的值）</span><br><span class="line">SELECT 局部变量名;</span><br></pre></td></tr></table></figure><p><strong>3）用户变量和局部变量的对比</strong></p><table><thead><tr><th align="center"></th><th align="center">作用域</th><th align="center">定义位置</th><th align="center">语法</th></tr></thead><tbody><tr><td align="center"><strong>用户变量</strong></td><td align="center">当前会话</td><td align="center">会话的任何地方</td><td align="center">加@符号，不用限定类型</td></tr><tr><td align="center"><strong>局部变量</strong></td><td align="center">BEGIN END中</td><td align="center">BEGIN END的第一句话</td><td align="center">一般不用加@,需要限定类型</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 案例：声明两个变量，求和并打印</span><br><span class="line"></span><br><span class="line"># 用户变量</span><br><span class="line">SET @m &#x3D; 1;</span><br><span class="line">SET @n &#x3D; 2;</span><br><span class="line">SET @sum &#x3D; @m + @n;</span><br><span class="line">SELECT @sum;</span><br><span class="line"></span><br><span class="line"># 局部变量</span><br><span class="line">DECLARE m INT DEFAULT 1;</span><br><span class="line">DECLARE n INT DEFAULT 2;</span><br><span class="line">DECLARE SUM INT;</span><br><span class="line">SET SUM &#x3D; m + n;</span><br><span class="line">SELECT SUM;</span><br></pre></td></tr></table></figure><h3 id="6-3-存储过程"><a href="#6-3-存储过程" class="headerlink" title="6.3 存储过程"></a>6.3 存储过程</h3><p><strong>含义</strong></p><p>一组预先编译好的SQL语句的集合，理解成批处理语句</p><p><strong>优点</strong></p><p>1）提高代码的重用性</p><p>2）简化操作</p><p>3）减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p><h4 id="6-3-1-创建语法"><a href="#6-3-1-创建语法" class="headerlink" title="6.3.1 创建语法"></a>6.3.1 创建语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE 存储过程名(参数列表)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">存储过程体（一组合法的SQL语句）</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>1）参数列表包含三部分</p><p><code>参数模式  参数名  参数类型</code></p><p>举例：<code>in stuname varchar(20)</code></p><p><strong>参数模式</strong></p><p><code>in</code>：该参数可以作为输入，也就是该参数需要调用方传入值</p><p><code>out</code>：该参数可以作为输出，也就是该参数可以作为返回值</p><p><code>inout</code>：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p><p>2）如果存储过程体仅仅只有一句话，begin end可以省略</p><p>存储过程体中的每条sql语句的结尾要求必须加分号</p><p>存储过程的结尾可以使用 <code>delimiter</code> 重新设置</p><p>语法：<code>delimiter 结束标记</code></p><p>举例：<code>delimiter $</code></p><h4 id="6-3-2-调用语法"><a href="#6-3-2-调用语法" class="headerlink" title="6.3.2 调用语法"></a>6.3.2 调用语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL 存储过程名(实参列表);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"># 1.空参列表</span><br><span class="line"># 案例：插入到admin表中五条记录</span><br><span class="line">SELECT * FROM admin;</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp1 () </span><br><span class="line">BEGIN</span><br><span class="line">  INSERT INTO admin (username, &#96;password&#96;) </span><br><span class="line">  VALUES</span><br><span class="line">    (&#39;john1&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;lily&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;rose&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;jack&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;tom&#39;, &#39;0000&#39;) ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp1()$</span><br><span class="line"></span><br><span class="line"># 2.创建带in模式参数的存储过程</span><br><span class="line"># 案例1：创建存储过程实现 根据女神名，查询对应的男神信息</span><br><span class="line">CREATE PROCEDURE myp2 (IN beautyName VARCHAR (20)) </span><br><span class="line">BEGIN</span><br><span class="line">  SELECT </span><br><span class="line">    bo.* </span><br><span class="line">  FROM</span><br><span class="line">    boys bo </span><br><span class="line">    RIGHT JOIN beauty b </span><br><span class="line">      ON bo.id &#x3D; b.boyfriend_id </span><br><span class="line">  WHERE b.name &#x3D; beautyName ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp2(&#39;王语嫣&#39;)$</span><br><span class="line">  </span><br><span class="line"># 案例2 ：创建存储过程实现，用户是否登录成功</span><br><span class="line">CREATE PROCEDURE myp3 (</span><br><span class="line">  IN username VARCHAR (20),</span><br><span class="line">  IN PASSWORD VARCHAR (20)</span><br><span class="line">) </span><br><span class="line">BEGIN</span><br><span class="line">  DECLARE result INT DEFAULT 0 ;#声明并初始化</span><br><span class="line">  SELECT </span><br><span class="line">    COUNT(*) INTO result #赋值</span><br><span class="line">  FROM</span><br><span class="line">    admin </span><br><span class="line">  WHERE admin.username &#x3D; username </span><br><span class="line">    AND admin.password &#x3D; PASSWORD ;</span><br><span class="line">  SELECT </span><br><span class="line">    IF(result &gt; 0, &#39;成功&#39;, &#39;失败&#39;) ;#使用</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp3(&#39;张飞&#39;,&#39;8888&#39;)$</span><br><span class="line"></span><br><span class="line"># 3.创建out 模式参数的存储过程</span><br><span class="line"># 案例1：根据输入的女神名，返回对应的男神名</span><br><span class="line">CREATE PROCEDURE myp4 (</span><br><span class="line">  IN beautyName VARCHAR (20),</span><br><span class="line">  OUT boyName VARCHAR (20)</span><br><span class="line">) </span><br><span class="line">BEGIN</span><br><span class="line">  SELECT </span><br><span class="line">    bo.boyname INTO boyname </span><br><span class="line">  FROM</span><br><span class="line">    boys bo </span><br><span class="line">    RIGHT JOIN beauty b </span><br><span class="line">      ON b.boyfriend_id &#x3D; bo.id </span><br><span class="line">  WHERE b.name &#x3D; beautyName ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp4(&#39;小昭&#39;,@name)$</span><br><span class="line">SELECT @name$    </span><br><span class="line">    </span><br><span class="line"># 案例2：根据输入的女神名，返回对应的男神名和魅力值</span><br><span class="line">CREATE PROCEDURE myp5 (</span><br><span class="line">  IN beautyName VARCHAR (20),</span><br><span class="line">  OUT boyName VARCHAR (20),</span><br><span class="line">  OUT usercp INT</span><br><span class="line">) </span><br><span class="line">BEGIN</span><br><span class="line">  SELECT </span><br><span class="line">    boys.boyname,</span><br><span class="line">    boys.usercp INTO boyname,</span><br><span class="line">    usercp </span><br><span class="line">  FROM</span><br><span class="line">    boys </span><br><span class="line">    RIGHT JOIN beauty b </span><br><span class="line">      ON b.boyfriend_id &#x3D; boys.id </span><br><span class="line">  WHERE b.name &#x3D; beautyName ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp5(&#39;小昭&#39;,@name,@cp)$</span><br><span class="line">SELECT @name,@cp$    </span><br><span class="line"></span><br><span class="line"># 4.创建带inout模式参数的存储过程</span><br><span class="line"># 案例1：传入a和b两个值，最终a和b都翻倍并返回</span><br><span class="line">CREATE PROCEDURE myp6 (INOUT a INT, INOUT b INT) </span><br><span class="line">BEGIN</span><br><span class="line">  SET a &#x3D; a * 2 ;</span><br><span class="line">  SET b &#x3D; b * 2 ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">SET @m&#x3D;10$</span><br><span class="line">SET @n&#x3D;20$</span><br><span class="line">CALL myp6(@m,@n)$</span><br><span class="line">SELECT @m,@n$</span><br></pre></td></tr></table></figure><h4 id="6-3-3-删除语法"><a href="#6-3-3-删除语法" class="headerlink" title="6.3.3 删除语法"></a>6.3.3 删除语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop procedure 存储过程名</span><br></pre></td></tr></table></figure><blockquote><p>一次只能删除一个</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE p1 ;</span><br><span class="line">DROP PROCEDURE p2,p3 ; # 错误</span><br></pre></td></tr></table></figure><h4 id="6-3-4-查看存储过程的信息"><a href="#6-3-4-查看存储过程的信息" class="headerlink" title="6.3.4 查看存储过程的信息"></a>6.3.4 查看存储过程的信息</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE PROCEDURE 存储过程名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE PROCEDURE myp2 ;</span><br><span class="line">DESC myp2 ; # 错误</span><br></pre></td></tr></table></figure><h3 id="6-4-函数"><a href="#6-4-函数" class="headerlink" title="6.4 函数"></a>6.4 函数</h3><p><strong>含义</strong></p><p>一组预先编译好的SQL语句的集合，理解成批处理语句</p><p><strong>优点</strong></p><p>1）提高代码的重用性</p><p>2）简化操作</p><p>3）减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p><h4 id="6-4-1-创建语法"><a href="#6-4-1-创建语法" class="headerlink" title="6.4.1 创建语法"></a>6.4.1 创建语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION 函数名 (参数列表) RETURNS 返回类型 </span><br><span class="line">BEGIN</span><br><span class="line">  函数体 </span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>注意：<br>1）参数列表包含两部分：<code>参数名 参数类型</code></p><p>2）函数体：肯定会有return语句，如果没有会报错<br>如果return语句没有放在函数体的最后也不报错，但不建议</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return 值;</span><br></pre></td></tr></table></figure><p>3）函数体中仅有一句话，则可以省略begin end</p><p>4）使用 <code>delimiter</code> 语句设置结束标记</p><h4 id="6-4-2-调用语法"><a href="#6-4-2-调用语法" class="headerlink" title="6.4.2 调用语法"></a>6.4.2 调用语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  函数名 (参数列表) 结束标记&#96;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># 1.无参有返回</span><br><span class="line"># 案例：返回公司的员工个数</span><br><span class="line">  CREATE FUNCTION myf1 () RETURNS INT </span><br><span class="line">  BEGIN</span><br><span class="line">    DECLARE c INT DEFAULT 0 ;</span><br><span class="line"></span><br><span class="line"> # 定义局部变量</span><br><span class="line">SELECT COUNT(*) INTO c # 赋值</span><br><span class="line">FROM employees;</span><br><span class="line">RETURN c;</span><br><span class="line"></span><br><span class="line">END $ </span><br><span class="line">SELECT </span><br><span class="line">myf1 () $ </span><br><span class="line"></span><br><span class="line"># 2.有参有返回</span><br><span class="line"># 案例1：根据员工名，返回它的工资</span><br><span class="line"> CREATE FUNCTION myf2 (empName VARCHAR (20)) RETURNS DOUBLE </span><br><span class="line">BEGIN</span><br><span class="line">  SET @sal &#x3D; 0 ;</span><br><span class="line">  </span><br><span class="line">  #定义用户变量 </span><br><span class="line">SELECT salary INTO @sal   #赋值</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name &#x3D; empName;</span><br><span class="line"></span><br><span class="line">RETURN @sal;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf2(&#39;k_ing&#39;) $</span><br><span class="line"></span><br><span class="line"># 案例2：根据部门名，返回该部门的平均工资</span><br><span class="line"></span><br><span class="line">CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE sal DOUBLE ;</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary) INTO sal </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN departments d </span><br><span class="line">    ON e.department_id &#x3D; d.department_id </span><br><span class="line">WHERE d.department_name &#x3D; deptName ;</span><br><span class="line"></span><br><span class="line">RETURN sal;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf3(&#39;IT&#39;)$</span><br></pre></td></tr></table></figure><h4 id="6-4-3-查看函数"><a href="#6-4-3-查看函数" class="headerlink" title="6.4.3 查看函数"></a>6.4.3 查看函数</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE FUNCTION 函数名</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE FUNCTION myf3;</span><br></pre></td></tr></table></figure><h4 id="6-4-4-删除函数"><a href="#6-4-4-删除函数" class="headerlink" title="6.4.4 删除函数"></a>6.4.4 删除函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP FUNCTION 函数名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP FUNCTION myf3;</span><br></pre></td></tr></table></figure><h4 id="6-4-5-存储过程和函数的区别"><a href="#6-4-5-存储过程和函数的区别" class="headerlink" title="6.4.5 存储过程和函数的区别"></a>6.4.5 存储过程和函数的区别</h4><p><strong>存储过程</strong>：可以有0个返回，也可以有多个返回，适合做<strong>批量插入</strong>、<strong>批量更新</strong><br><strong>函数</strong>：有且仅有1个返回，适合做<strong>处理数据后返回一个结果</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 案例</span><br><span class="line"># 一、创建函数，实现传入两个float，返回二者之和</span><br><span class="line">CREATE FUNCTION test_fun1 (num1 FLOAT, num2 FLOAT) RETURNS FLOAT </span><br><span class="line">BEGIN</span><br><span class="line">  DECLARE SUMFLOAT DEFAULT 0 ;  </span><br><span class="line">  SET SUM &#x3D; num1 + num2;</span><br><span class="line">RETURN SUM;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT test_fun1(1,2)$</span><br></pre></td></tr></table></figure><h3 id="6-5-流程控制过程"><a href="#6-5-流程控制过程" class="headerlink" title="6.5 流程控制过程"></a>6.5 流程控制过程</h3><p><strong>分类</strong></p><p><strong>顺序结构</strong>：程序从上往下依次执行</p><p><strong>分支结构</strong>：程序从两条或多条路径中选择一条去执行</p><p><strong>循环结构</strong>：程序在满足一定条件的基础上，重复执行一段代码</p><h4 id="6-5-1-分支结构"><a href="#6-5-1-分支结构" class="headerlink" title="6.5.1 分支结构"></a>6.5.1 分支结构</h4><p><strong>1）if函数</strong></p><p><strong>功能</strong>：实现简单的双分支</p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(表达式1,表达式2,表达式3)</span><br></pre></td></tr></table></figure><p><strong>执行顺序</strong>：如果表达式1成立，则if函数返回表达式2的值，否则返回表达式3的值</p><p><strong>应用</strong>：任何地方</p><p><strong>2）if结构</strong></p><p><strong>功能</strong>：实现多重分支</p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if 条件1 then 语句1;</span><br><span class="line">ifelse 条件2 then 语句2;</span><br><span class="line">...</span><br><span class="line">【else 语句n;】</span><br></pre></td></tr></table></figure><p><strong>应用</strong>：在begin end中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</span><br><span class="line">CREATE FUNCTION test_if (score INT) RETURNS CHAR </span><br><span class="line">BEGIN</span><br><span class="line">DECLARE ch CHAR DEFAULT &#39;A&#39; ;</span><br><span class="line"></span><br><span class="line">IF score&gt;90 THEN SET ch&#x3D;&#39;A&#39;;</span><br><span class="line">ELSEIF score&gt;80 THEN SET ch&#x3D;&#39;B&#39;;</span><br><span class="line">ELSEIF score &gt; 60 </span><br><span class="line">THEN SET ch &#x3D; &#39;C&#39; ;</span><br><span class="line">ELSE SET ch&#x3D;&#39;D&#39;;</span><br><span class="line">END IF;</span><br><span class="line">RETURN ch;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT test_if(87)$</span><br></pre></td></tr></table></figure><p><strong>3）case结构</strong></p><p><strong>情况1</strong>：类似于java中的switch语句，一般用于实现等值判断</p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE 变量|表达式|字段</span><br><span class="line">WHEN 要判断的值 THEN 返回的值1 或 语句1;</span><br><span class="line">WHEN 要判断的值 THEN 返回的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">ELSE 要返回的值n 或 语句n;</span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure><p><strong>情况2</strong>：类似于java中的多重if语句，一般用于实现区间判断<br>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE </span><br><span class="line">WHEN 要判断的条件1 THEN 返回的值1 或 语句1;</span><br><span class="line">WHEN 要判断的条件2 THEN 返回的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">ELSE 要返回的值n 或 语句n;</span><br><span class="line">END case;</span><br></pre></td></tr></table></figure><p><strong>特点</strong><br>① 可以作为表达式，嵌套在其他语句中使用，可以放在任何地方，begin end中 或 begin end的外面<br>可以作为独立的语句去使用，只能放在begin end中<br>② 如果when中的值满足 或 条件成立，则执行对应的then后面的语句，并且结束case<br>如果不满足，则执行else中的语句或值<br>③ else可以省略，如果else省略了，并且所有when条件都不满足，则返回null</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 案例： 创建存储过程，根据传入的成绩，来显示等级，比如传入的成绩90-100，显示A，80-90，显示B，60-80，显示C，否则，显示D</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE test_case(IN score INT)</span><br><span class="line">BEGIN</span><br><span class="line">CASE </span><br><span class="line">WHEN score &gt;&#x3D; 90 AND score &lt;&#x3D; 100 THEN SELECT &#39;A&#39;;</span><br><span class="line">WHEN score &gt;&#x3D; 80 THEN SELECT &#39;B&#39;;</span><br><span class="line">WHEN score &gt;&#x3D; 60 THEN SELECT &#39;C&#39;;</span><br><span class="line">ELSE SELECT &#39;D&#39;;</span><br><span class="line">END CASE</span><br><span class="line">END $ </span><br><span class="line"></span><br><span class="line">CALL test_case (95) $</span><br></pre></td></tr></table></figure><h4 id="6-5-2-循环结构"><a href="#6-5-2-循环结构" class="headerlink" title="6.5.2 循环结构"></a>6.5.2 循环结构</h4><p><strong>分类</strong>：while、loop、repeat</p><p><strong>循环控制</strong>：<br><code>iterate</code>： 类似于 continue，继续，结束本次循环，继续下一次<br><code>leave</code>：类似于 break，跳出，结束当前所在的循环</p><p><strong>1）while</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【标签:】WHILE 循环条件 DO</span><br><span class="line">循环体;</span><br><span class="line">END WHILE【 标签】;</span><br></pre></td></tr></table></figure><p><strong>2）loop</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【标签:】LOOP</span><br><span class="line">循环体;</span><br><span class="line">END LOOP 【标签】;</span><br></pre></td></tr></table></figure><blockquote><p>可以用来模拟简单的死循环</p></blockquote><p><strong>3）repeat</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【标签：】REPEAT</span><br><span class="line">循环体;</span><br><span class="line">UNTIL 结束循环的条件</span><br><span class="line">END REPEAT 【标签】;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># 没有添加循环控制语句</span><br><span class="line"># 案例：批量插入，根据次数到admin表中多条记录</span><br><span class="line">CREATE PROCEDURE pro_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">DECLARE i INT DEFAULT 1;</span><br><span class="line">WHILE i &lt;&#x3D; insertCount DO</span><br><span class="line">INSERT INTO admin(username, &#96;password&#96;) VALUES(CONCAT(&#39;Rose&#39;,i), &#39;666&#39;);</span><br><span class="line">SET i &#x3D; i + 1;</span><br><span class="line">END WHILE;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL pro_while1(100) $</span><br><span class="line"></span><br><span class="line"># 2、添加leave语句</span><br><span class="line"># 案例：批量插入，根据次数插入到admin表中多条记录，如果次数 &gt; 20则停止</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while2 $</span><br><span class="line">CREATE PROCEDURE test_while2(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 1;</span><br><span class="line">a:WHILE i &lt;&#x3D; insertCount DO</span><br><span class="line">INSERT INTO admin(username, &#96;password&#96;) VALUES(CONCAT(&#39;xiaonhau&#39;,i), &#39;0000&#39;);</span><br><span class="line">IF i &gt; 20 THEN LEAVE a;</span><br><span class="line">END IF;</span><br><span class="line">SET i &#x3D; i + 1;</span><br><span class="line">END WHILE a;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL test_while2(100)$</span><br><span class="line"></span><br><span class="line"># 3、添加iterate语句</span><br><span class="line"># 案例：批量插入，根据次数插入到admin表中多条记录，直插入偶数次</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while2 $</span><br><span class="line">CREATE PROCEDURE test_while3(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line">a:WHILE i &lt;&#x3D; insertCount DO</span><br><span class="line">SET i &#x3D; i + 1;</span><br><span class="line">IF MOD(i, 2) !&#x3D; 0 THEN ITERATE a;</span><br><span class="line">END IF;</span><br><span class="line">INSERT INTO admin(username, &#96;password&#96;) VALUES(CONCAT(&#39;xiaohua&#39;,i), &#39;0000&#39;);</span><br><span class="line">END WHILE a;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL test_while3(100)$</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;第一章-MySQL概述&quot;&gt;&lt;a href=&quot;#第一章-MySQL概述&quot; class=&quot;headerlink&quot; title=&quot;第一章 MySQL概述&quot;&gt;&lt;/a&gt;第一章 MySQL概述&lt;/h2&gt;&lt;p&gt;MySQL是一个&lt;strong&gt;关系型数据库管理系统&lt;/strong&gt;，由瑞典MySQL AB公司开发，属于Oracle旗下产品。MySQL是最流行的关系型数据库管理系统之一。&lt;/p&gt;
    
    </summary>
    
    
      <category term="MySQL" scheme="https://ActionDing.github.io/categories/MySQL/"/>
    
      <category term="MySQL基础" scheme="https://ActionDing.github.io/categories/MySQL/MySQL%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="MySQL" scheme="https://ActionDing.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Java 笔记</title>
    <link href="https://actionding.github.io/2020/08/Java%20%E7%AC%94%E8%AE%B0/"/>
    <id>https://actionding.github.io/2020/08/Java%20%E7%AC%94%E8%AE%B0/</id>
    <published>2020-08-04T19:02:00.000Z</published>
    <updated>2021-02-18T02:59:27.759Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/image%5CJava%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB.png" alt="image-20210202171943966"></p><ul><li><p>编程语言核心结构：变量、基本语法、分支、循环、数组等</p></li><li><p>Java 面向对象的核心逻辑：OOP、封装、继承、多态、接口等</p></li><li><p>开发Java SE 高级应用程序：异常、集合、I/O、多线程、反射机制、网络编程等</p></li><li><p>实训项目</p><blockquote><p>项目一：讲完流程控制时，可以做。</p><p>项目二：讲完面向对象（上），可以做</p><p>项目三：讲完异常处理以后，可以做</p><p>附加项目一：讲完异常处理以后，可以做</p><p>附加项目二：讲完IO流以后，可以做</p></blockquote></li></ul><a id="more"></a><h2 id="第一部分-Java-基础编程"><a href="#第一部分-Java-基础编程" class="headerlink" title="第一部分 Java 基础编程"></a>第一部分 Java 基础编程</h2><h3 id="第1章-Java-语言概述"><a href="#第1章-Java-语言概述" class="headerlink" title="第1章 Java 语言概述"></a>第1章 Java 语言概述</h3><p>Java 是 SUN (Stanford University Network, 斯坦福大学网络公司) 1995 年推出的一门高级编程语言</p><p><a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener"><strong>TIOBE 指数</strong></a></p><h4 id="1-1-Java-简史"><a href="#1-1-Java-简史" class="headerlink" title="1.1 Java 简史"></a>1.1 Java 简史</h4><ul><li>1991 年，Green 项目，开发语言最初命名为 Oak ( 橡树 )</li><li>1994 年，开发组意识到 Oak 非常适合于互联网</li><li>1996 年，发布 JDK 1.0，约 8.3 万个网页应用 Java 技术来制作</li><li>1997 年，发布 JDK 1.1 JavaOne 会议召开，创当时全球同类会议规模之最</li><li>1998 年，发布 JDK 1.2 ，同年发布企业平台 J2EE</li><li>1999 年， Java 分成 J2SE 、 J2EE 和 J2ME JSP/Servlet 技术诞生</li><li><strong>2004 年，发布里程碑式版本： JDK 1.5 为突出此版本的重要性，更名为 JDK 5.0</strong></li><li>2005 年， <code>J2SE --&gt; JavaSE</code>；<code>J2EE --&gt; JavaEE</code>；<code>J2ME --&gt; JavaME</code></li><li>2009 年， Oracle 公司收购 SUN，交易价格 74 亿美元</li><li>2011 年，发布 JDK 7.0</li><li><strong>2014 年，发布 JDK 8.0 ，是继 JDK 5.0 以来变化最大的版本</strong></li><li>2017 年，发布 JDK 9.0 ，最大限度实现模块化</li><li>2018 年 3 月，发布 JDK 10.0 ，版本号也称为 18.3</li><li>2018 年 9 月，发布 JDK 11.0 ，版本号也称为 18.9</li><li>2019 年 3 月，发布 JDK 12.0 ，版本号也称为 19.3</li><li>2019 年 9 月，发布 JDK 13.0 ，版本号也称为 19.9</li><li>2020 年 3 月，发布 JDK 14.0 ，版本号也称为 20.3</li></ul><h4 id="1-2-Java-技术体系平台"><a href="#1-2-Java-技术体系平台" class="headerlink" title="1.2 Java 技术体系平台"></a>1.2 Java 技术体系平台</h4><ol><li><strong>Java SE</strong> (Java Standard Edition): 标准版，支持面向桌面级应用（如Windows 下的应用程序）的 Java 平台，提供了完整的 Java 核心 API ，此版本以前称为 J2SE</li><li><strong>Java EE</strong> (Java Enterprise Edition): 企业版，为开发企业环境下的应用程序提供的一套解决方案。该技术体系中包含的技术如Servlet 、 Jsp 等，主要针对于 Web 应用程序开发。版本以前称为 J2EE</li><li><strong>Java ME</strong>  (Java Micro Edition): 小型版，支持Java 程序运行在移动终端（手机、 PDA ）上的平台，对 Java API 有所精简，并加入了针对移动终端的支持，此版本以前称为 J2ME</li><li><strong>Java Card</strong>：支持一些Java 小程序（ Applets ）运行在小内存设备（如智能卡）上的平台</li></ol><h4 id="1-3-应用领域"><a href="#1-3-应用领域" class="headerlink" title="1.3 应用领域"></a>1.3 应用领域</h4><ol><li><strong>企业级应用</strong>：主要指复杂的大企业的软件系统、各种类型的网站。Java 的安全机制以及它的跨平台的优势，使它在分布式系统领域开发中有广泛应用。应用领域包括金融、电信、交通、电子商务等。</li><li><strong>Android 平台应用</strong>：Android 应用程序使用 Java 语言编写。Android 开发水平的高低很大程度上取决于 Java 语言核心能力是否扎实。</li><li><strong>大数据平台开发</strong>：各类框架有 Hadoop、spark、storm、flink 等，就这类技术生态圈来讲，还有各种中间件如 flume、kafka、sqoop 等等 ，这些框架以及工具大多数是用 Java 编写而成，但提供诸如 Java、scala、Python、R 等各种语言 API 供编程。</li><li><strong>移动领域应用</strong>：主要表现在消费和嵌入式领域，是指在各种小型设备上的应用，包括手机、 PDA 、机顶盒、汽车通信设备等。</li></ol><h4 id="1-4-Java语言运行机制"><a href="#1-4-Java语言运行机制" class="headerlink" title="1.4 Java语言运行机制"></a>1.4 Java语言运行机制</h4><p><strong>1）Java语言的特点</strong></p><ol><li><p>面向对象</p><ul><li>两个基本概念：类、对象</li><li>三大特性：封装、继承、多态</li></ul></li><li><p>健壮性</p></li><li><p>跨平台性</p></li></ol><p><strong>2）Java两种核心机制</strong></p><ol><li>① <strong>Java虚拟机</strong>（Java Virtual Machine）<ul><li>对于不同的平台，有不同的虚拟机。</li><li>Java 虚拟机机制屏蔽了底层运行平台的差别，实现了<strong>“ 一次编译，到处运行“</strong></li></ul></li><li>② <strong>垃圾回收机制</strong>（Garbage Collection）<ul><li>不再使用的内存空间应回收–垃圾回收。</li><li>垃圾回收在 Java 程序运行过程中自动进行，程序员无法精确控制和干预</li></ul></li></ol><p><strong>3） Java语言的环境搭建</strong></p><ol><li><strong>JDK</strong>（Java Development Kit Java，开发工具包）</li><li><strong>JRE</strong>（Java R untime Environment Java，运行环境 ）</li><li><strong>JDK、 JRE 、JVM之间的关系</strong><ul><li>JDK = JRE + 开发工具集（例如 Javac 编译工具 等）</li><li>JRE = JVM + Java SE 标准类库</li></ul></li></ol><h3 id="第2章-第一个Java程序"><a href="#第2章-第一个Java程序" class="headerlink" title="第2章 第一个Java程序"></a>第2章 第一个Java程序</h3><p><strong>知识点</strong>：编译运行过程、三种注释</p><h4 id="2-1-打印-Hello-World"><a href="#2-1-打印-Hello-World" class="headerlink" title="2.1 打印 Hello World"></a>2.1 打印 Hello World</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打印 Hello World</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1）编译运行过程</strong></p><ol><li><p>将 Java 代码编写到扩展名为 <code>.java 的文件</code>（<strong>源文件</strong>）中。</p></li><li><p>通过 javac 命令对该 java 文件进行<strong>编译</strong> 。</p></li><li><p>通过 java 命令对生成的 class 文件（<strong>字节码文件</strong>）进行<strong>运行</strong> 。</p></li></ol><p><strong>2）具体步骤</strong></p><ol><li><p>打开记事本，输入以上代码，保存为 <code>HelloWorld.java</code></p></li><li><p>在保存文件的位置打开命令行，输入<code>javac HelloWorld.java</code>，会生成一个<code>HelloWorld.class</code>文件</p></li><li><p>命令行继续输入<code>java HelloWorld</code></p></li></ol><h4 id="2-2-注释"><a href="#2-2-注释" class="headerlink" title="2.2 注释"></a>2.2 注释</h4><p><strong>1）单行注释</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注释文字</span></span><br></pre></td></tr></table></figure><p><strong>2）多行注释</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">注释文字 </span></span><br><span class="line"><span class="comment">注释文字 </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>3）文档注释</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"><span class="doctag">@author</span> 指定 java 程序的作者</span></span><br><span class="line"><span class="comment"><span class="doctag">@version</span> 指定源文件的版本</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><blockquote><p>注释内容可以被 JDK 提供的工具 javadoc 所解析，生成一套以网页文件形式体现的该程序的说明文档。</p></blockquote><p><strong>操作方式</strong>：<code>javadoc -d [文件夹名] -author -version [源文件名]</code></p><h4 id="2-3-良好的编程风格"><a href="#2-3-良好的编程风格" class="headerlink" title="2.3 良好的编程风格"></a>2.3 良好的编程风格</h4><p><strong>1）正确的注释和注释风格</strong></p><ul><li><p>使用文档注释来注释整个类或整个方法</p></li><li><p>如果注释方法中的某一个步骤，使用单行或多行注释</p></li></ul><p><strong>2）正确的缩进和空白</strong></p><ul><li><p>使用一次 <kbd>Tab</kbd> 操作，实现缩进</p></li><li><p>运算符两边习惯性各加一个空格</p></li></ul><p><strong>3）块的风格</strong></p><ul><li><a href="https://docs.oracle.com/javase/8/docs/api/index.html" target="_blank" rel="noopener">Java API</a> 源代码选择了行尾风格</li></ul><blockquote><p>API：Application Programming Interface。习惯上：将语言提供的类库，都称为API</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Java注释的三种方式：</span></span><br><span class="line"><span class="comment">①单行注释</span></span><br><span class="line"><span class="comment">②多行注释</span></span><br><span class="line"><span class="comment">③文档注释（Java特有）</span></span><br><span class="line"><span class="comment">生成文档：javadoc -d mydoc -author -version HelloJava.java</span></span><br><span class="line"><span class="comment">mydoc为文档目录</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*****这属于多行注释*****</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"><span class="doctag">@author</span> Ding</span></span><br><span class="line"><span class="comment"><span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*****这属于文档注释*****</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloJava</span> </span>&#123;</span><br><span class="line"><span class="comment">//main方法是程序的入口*****这属于单行注释*****</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"><span class="comment">//打印HelloJava</span></span><br><span class="line">System.out.println(<span class="string">"HelloJava"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="附：Tips"><a href="#附：Tips" class="headerlink" title="附：Tips"></a>附：Tips</h4><p><strong>1）常用的 DOS 命令</strong></p><ul><li><p><code>dir</code>：列出当前目录下的文件以及文件夹</p></li><li><p><code>md</code>：创建目录</p></li><li><p><code>rd</code>：删除目录</p></li><li><p><code>cd [path]</code>：进入指定目录</p></li><li><p><code>cd..</code>：退回到上级目录</p></li><li><p><code>cd\</code>：退回到根目录</p></li><li><p><code>del</code>：删除文件</p></li><li><p><code>exit</code>：退出dos命令行</p></li><li><p><code>echo javase&gt;test.txt</code>：新建 test.txt 文件并将 “javase” 写入</p><ul><li>上下键可以查看历史操作</li></ul></li></ul><p><strong>2）文件资源管理器</strong></p><ol><li><kbd>win</kbd> + <kbd>E</kbd> 打开文件资源管理器</li><li>在地址栏输入 <code>cmd</code> 回车即可打开<strong>命令行</strong></li><li>在查看工具栏中，打开<code>隐藏/显示</code>中的 <code>文件扩展名</code></li></ol><h3 id="第3章-变量"><a href="#第3章-变量" class="headerlink" title="第3章 变量"></a>第3章 变量</h3><p><strong>知识点</strong>：关键字、标识符、变量、自动类型转换、强制类型转换</p><h4 id="3-1-关键字与保留字"><a href="#3-1-关键字与保留字" class="headerlink" title="3.1 关键字与保留字"></a>3.1 关键字与保留字</h4><p><strong>1）关键字 (keyword)</strong>：被 Java 语言赋予了特殊含义，用做专门用途的字符串（单词）</p><ul><li><strong>特点</strong>：关键字中所有字母都为<strong>小写</strong></li><li><strong><a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html" target="_blank" rel="noopener">官方地址</a></strong></li></ul><p><strong>2）保留字 (reserved word)</strong>：现有 Java 版本尚未使用,但以后版本可能会作为关键字使用。自己命名标识符时要避免使用这些保留字</p><ul><li><strong>goto</strong> 、 <strong>const</strong></li><li>命名标识符时要避免使用这些保留字</li></ul><h4 id="3-2-标识符-Identifier"><a href="#3-2-标识符-Identifier" class="headerlink" title="3.2 标识符 (Identifier)"></a>3.2 标识符 (Identifier)</h4><p><strong>1）定义</strong>：Java 对各种变量、方法和类等要素命名时使用的字符序列称为<strong>标识符</strong></p><blockquote><p>凡是自己可以起名字的地方都叫<strong>标识符</strong>，如：包名、类名、接口名、变量名、方法名、常量名</p></blockquote><p><strong>2）规则</strong></p><ul><li>由 26 个英文字母大小写， 0-9 或 $ 组成</li><li>数字不可以开头。</li><li>不可以使用关键字和保留字，但能包含关键字和保留字。</li><li>Java 中严格区分大小写，长度无限制。</li><li>标识符不能包含空格。</li></ul><p><strong>3）命名规范</strong></p><ul><li><p>包名：<code>xxxyyyzzz</code></p></li><li><p>类名、接口名：<code>XxxYyyZzz</code></p></li><li><p>变量名、方法名：<code>xxxYyyZzz</code></p></li><li><p>常量名：<code>XXX_YYY_ZZZ</code></p><p><strong>在起名字时，为了提高阅读性，要尽量意义，“见名知意”。</strong></p></li></ul><h4 id="3-3-变量"><a href="#3-3-变量" class="headerlink" title="3.3 变量"></a>3.3 变量</h4><p><strong>1）定义（声明）变量</strong></p><ul><li><p>方式一：<code>数据类型  变量名 = 变量值;</code></p></li><li><p>方式二：<code>数据类型  变量名;</code></p><pre><code>`变量名 = 变量值;`</code></pre></li></ul><blockquote><p>变量必须先声明，后使用</p><p>变量都定义在其<strong>作用域</strong>内，同一个作用域内，不可以声明两个同名的变量</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//变量的定义</span></span><br><span class="line"><span class="keyword">int</span> myAge = <span class="number">22</span>;</span><br><span class="line"><span class="comment">//变量的使用</span></span><br><span class="line">System.out.println(myAge);</span><br><span class="line"></span><br><span class="line"><span class="comment">//变量的声明</span></span><br><span class="line"><span class="keyword">int</span> myNumber;</span><br><span class="line"><span class="comment">//System.out.println(myNnmber);//赋值后才能使用</span></span><br><span class="line"><span class="comment">//变量的赋值</span></span><br><span class="line">myNumber = <span class="number">1001</span>;</span><br><span class="line">System.out.println(myNumber);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span> <span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//作用域不同，可以定义同名变量</span></span><br><span class="line"><span class="comment">//变量的定义</span></span><br><span class="line"><span class="keyword">int</span> myAge = <span class="number">22</span>;</span><br><span class="line"><span class="comment">//变量的使用</span></span><br><span class="line">System.out.println(myAge);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）变量的分类</strong></p><p><strong>① 按数据类型分类</strong></p><p>按数据类型分为<strong>基本数据类型（primitive type）</strong>和<strong>引用数据类型（reference type）</strong></p><ol><li><p>基本数据类型又分为数值型、<strong>字符型（char）</strong>、<strong>布尔型（boolean）</strong></p><ul><li>数值型又分为<strong>整数类型（byte、short、int、long）</strong>和<strong>浮点数类型（float、double）</strong></li></ul></li><li><p>引用数据类型又分为<strong>类（class）</strong>、<strong>接口（interface）</strong>和<strong>数组（[]）</strong></p></li></ol><blockquote><p><strong>字符串属于类</strong></p></blockquote><p><strong>② 按声明的位置分类</strong></p><p>按声明的位置分为<strong>成员变量</strong>和<strong>局部变量</strong></p><ol><li>成员变量又分为<strong>实例变量</strong>（不以static修饰）和<strong>类变量</strong>（以static修饰）</li><li>局部变量又分为<strong>形参</strong>（方法、构造器中定义的变量）、<strong>方法局部变量</strong>（在方法内定义）和<strong>代码块局部变量</strong>（在代码块内定义）</li></ol><p><strong>3）基本数据类型</strong></p><p><strong>① 整型</strong></p><table><thead><tr><th align="center">byte</th><th align="center">short</th><th align="center">int</th><th align="center">long</th></tr></thead><tbody><tr><td align="center">1字节</td><td align="center">2字节</td><td align="center">4字节</td><td align="center">8字节</td></tr></tbody></table><p><strong>说明</strong></p><ol><li>byte范围：-128 ~ 127</li><li>声明long型变量，必须以”l”或”L”结尾</li><li>通常，定义整型变量时，使用int型。</li><li>整型的常量，默认类型是：int型</li></ol><p><strong>② 浮点型</strong></p><table><thead><tr><th align="center">float</th><th align="center">double</th></tr></thead><tbody><tr><td align="center">4字节</td><td align="center">8字节</td></tr></tbody></table><p><strong>说明</strong></p><ol><li>浮点型，表示带小数点的数值</li><li>float表示数值的范围比long还大</li><li>定义float类型变量时，变量要以”f”或”F”结尾</li><li>通常，定义浮点型变量时，使用double型。</li><li>浮点型的常量，默认类型为：double</li></ol><p><strong>③ 字符型</strong></p><table><thead><tr><th align="left">char</th></tr></thead><tbody><tr><td align="left">定义char型变量，通常使用一对’’,内部只能写一个字符</td></tr><tr><td align="left">表示方式：1. 声明一个字符 2. 转义字符 3. 直接使用 Unicode 值来表示字符型常量</td></tr></tbody></table><p><strong>④ 布尔型</strong></p><table><thead><tr><th align="left">boolean</th></tr></thead><tbody><tr><td align="left">只能取两个值之一：true 、 false</td></tr><tr><td align="left">常常在条件判断、循环结构中使用</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest1</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//基本数据类型</span></span><br><span class="line"><span class="comment">//整型：byte 1字节 -128 ~ 127</span></span><br><span class="line"><span class="keyword">byte</span> b1 = <span class="number">12</span>;</span><br><span class="line"><span class="comment">//byte b2 = 128;</span></span><br><span class="line">System.out.println(b1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//整型：short 2字节</span></span><br><span class="line"><span class="comment">//整型：int 4字节</span></span><br><span class="line"><span class="comment">//整型：long 8字节 以'l'或'L'结尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通常，定义整型变量时，使用int型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> l1 = <span class="number">123456789098765432L</span>;</span><br><span class="line"><span class="comment">//long l2 = 987654321012345678;</span></span><br><span class="line">System.out.println(l1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//浮点型：float 4字节 以'f'或'F'结尾</span></span><br><span class="line"><span class="comment">//浮点型：double 8字节</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通常，定义浮点型变量时，使用double型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> f1 = <span class="number">123.45f</span>;</span><br><span class="line"><span class="comment">//float f2 = 678.90;</span></span><br><span class="line">System.out.println(f1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//字符型：char 1字符=2字节 用一对单引号''</span></span><br><span class="line"><span class="comment">//表示方式：</span></span><br><span class="line"><span class="comment">//1.声明一个字符 </span></span><br><span class="line"><span class="comment">//2.转义字符 </span></span><br><span class="line"><span class="comment">//3.直接使用 Unicode 值来表示字符型常量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c1 = <span class="string">'A'</span>;</span><br><span class="line"><span class="comment">//char c2 = 'ab';</span></span><br><span class="line">System.out.println(c1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c3 = <span class="string">'1'</span>;</span><br><span class="line"><span class="keyword">char</span> c4 = <span class="string">'の'</span>;</span><br><span class="line"><span class="keyword">char</span> c5 = <span class="string">'中'</span>;</span><br><span class="line">System.out.println(c3);</span><br><span class="line">System.out.println(c4);</span><br><span class="line">System.out.println(c5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c6 = <span class="string">'\n'</span>;</span><br><span class="line"><span class="keyword">char</span> c7 = <span class="string">'\t'</span>;</span><br><span class="line"><span class="keyword">char</span> c8 = <span class="string">'\u1001'</span>;</span><br><span class="line">System.out.println(<span class="string">"***"</span> + c6 + <span class="string">"***"</span>);</span><br><span class="line">System.out.println(<span class="string">"***"</span> + c7 + <span class="string">"***"</span>);</span><br><span class="line">System.out.println(c8);</span><br><span class="line"></span><br><span class="line"><span class="comment">//布尔型：boolean true/false </span></span><br><span class="line"><span class="comment">//常常在条件判断、循环结构中使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isMale = <span class="keyword">true</span>;</span><br><span class="line">System.out.println(isMale);</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isMarried = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">if</span> (isMarried)&#123;</span><br><span class="line">System.out.println(<span class="string">"Go home"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Go party"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-4-自动类型转换"><a href="#3-4-自动类型转换" class="headerlink" title="3.4 自动类型转换"></a>3.4 自动类型转换</h4><ul><li><p>当容量小的数据类型的变量与容量大的数据类型的变量做运算时，结果自动提升为容量大的数据类型：<strong><code>byte 、char 、short --&gt; int --&gt; long --&gt; float --&gt; double</code></strong>（此时的容量大小指的是，表示数的范围的大和小。比如：float容量要大于long的容量）</p></li><li><p><strong>特别的</strong>：当 byte、char、short 三种类型的变量做运算时，结果为int型</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest2</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> b1 = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> i1 = <span class="number">129</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i2 = b1 + i1;</span><br><span class="line"><span class="keyword">long</span> l = b1 + i1;</span><br><span class="line"><span class="keyword">float</span> f = b1 + i1;</span><br><span class="line">System.out.println(i2);</span><br><span class="line">System.out.println(l);</span><br><span class="line">System.out.println(f);</span><br><span class="line"></span><br><span class="line"><span class="keyword">short</span> s1 = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">double</span> d1 = s1;</span><br><span class="line">System.out.println(d1);<span class="comment">//123.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//***************特别地*********************</span></span><br><span class="line"><span class="keyword">char</span> c1 = <span class="string">'a'</span>;<span class="comment">//97</span></span><br><span class="line"><span class="keyword">int</span> i3 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> i4 = c1 + i3;</span><br><span class="line">System.out.println(i4);</span><br><span class="line"></span><br><span class="line"><span class="keyword">short</span> s2 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">byte</span> b2 = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//char c3 = c1 + b2;//编译不通过</span></span><br><span class="line"><span class="comment">//short s3 = b2 + s2;//编译不通过</span></span><br><span class="line"><span class="comment">//short s4 = b1 + b2;//编译不通过</span></span><br><span class="line"><span class="comment">//****************************************</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-5-强制类型转换"><a href="#3-5-强制类型转换" class="headerlink" title="3.5 强制类型转换"></a>3.5 强制类型转换</h4><ul><li><strong>强转符</strong>：()</li><li><strong>注意</strong>：强制类型转换，可能导致精度损失。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest3</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> d1 = <span class="number">12.9</span>;</span><br><span class="line"><span class="comment">//精度损失举例1</span></span><br><span class="line"><span class="keyword">int</span> i1 = (<span class="keyword">int</span>)d1;<span class="comment">//截断操作</span></span><br><span class="line">System.out.println(i1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//没有精度损失</span></span><br><span class="line"><span class="keyword">long</span> l1 = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">short</span> s2 = (<span class="keyword">short</span>)l1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//精度损失举例2</span></span><br><span class="line"><span class="keyword">int</span> i2 = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">byte</span> b = (<span class="keyword">byte</span>)i2;</span><br><span class="line">System.out.println(b);<span class="comment">//-128</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第4章-运算符"><a href="#第4章-运算符" class="headerlink" title="第4章 运算符"></a>第4章 运算符</h3><p><strong>知识点</strong>：算数运算符、赋值运算符、比较运算符、逻辑运算符、位运算符、三元运算符</p><h4 id="4-1-算术运算符"><a href="#4-1-算术运算符" class="headerlink" title="4.1 算术运算符"></a>4.1 算术运算符</h4><table><thead><tr><th align="center"><code>+</code></th><th align="center"><code>-</code></th><th align="center"><code>+</code></th><th align="center"><code>-</code></th><th align="center"><code>*</code></th><th align="center"><code>/</code></th><th align="center"><code>%</code></th><th align="center"><code>++</code></th><th align="center"><code>--</code></th><th align="center"><code>++</code></th><th align="center"><code>--</code></th><th align="center"><code>+</code></th></tr></thead><tbody><tr><td align="center">正号</td><td align="center">负号</td><td align="center">加</td><td align="center">减</td><td align="center">乘</td><td align="center">除</td><td align="center">取余</td><td align="center">前自增</td><td align="center">前自减</td><td align="center">后自增</td><td align="center">后自减</td><td align="center">字符串连接</td></tr></tbody></table><p><strong>1）自增</strong></p><ul><li>(前)++：先自增1，后运算</li><li>(后)++：先运算，后自增1</li></ul><p><strong>2）自减</strong></p><ul><li>(前)–：先自减1，后运算</li><li>(后)–：先运算，后自减1</li></ul><p><strong>3）连接符</strong>：+（只能使用在String与其他数据类型变量之间使用）</p><h4 id="4-2-赋值运算符"><a href="#4-2-赋值运算符" class="headerlink" title="4.2 赋值运算符"></a>4.2 赋值运算符</h4><ul><li><code>=</code>、<code>+=</code>、<code>-=</code>、<code>*=</code>、<code>/=</code>、<code>%=</code></li><li><strong>注意</strong>：运算的结果不会改变变量本身的数据类型</li></ul><blockquote><p>开发中，如果希望变量实现+2的操作，有几种方法？(前提：int num = 10;)<br>方式一：num = num + 2;<br>方式二：num += 2; (推荐)</p></blockquote><blockquote><p>开发中，如果希望变量实现+1的操作，有几种方法？(前提：int num = 10;)<br>方式一：num = num + 1;<br>方式二：num += 1;<br>方式三：num++; (推荐)</p></blockquote><h4 id="4-3-比较运算符"><a href="#4-3-比较运算符" class="headerlink" title="4.3 比较运算符"></a>4.3 比较运算符</h4><ul><li><p>也叫<strong>关系运算符</strong>，比较运算符运算的结果都是 boolean 型</p></li><li><p><code>==</code>、<code>!=</code>、<code>&lt;</code>、<code>&gt;</code>、<code>&lt;=</code>、<code>&gt;=</code>、<code>instanceof</code></p></li></ul><hr><ol><li><p>&lt;、&gt;=、&lt;= :只能使用在数值类型的数据之间。</p></li><li><p>== 和 !=: 不仅可以使用在数值类型数据之间，还可以使用在其他引用类型变量之间。</p></li></ol><h4 id="4-4-逻辑运算符"><a href="#4-4-逻辑运算符" class="headerlink" title="4.4 逻辑运算符"></a>4.4 逻辑运算符</h4><table><thead><tr><th align="center"><code>&amp;</code></th><th align="center"><code>&amp;&amp;</code></th><th align="center"><code>|</code></th><th align="center"><code>||</code></th><th align="center"><code>!</code></th><th align="center"><code>^</code></th></tr></thead><tbody><tr><td align="center">逻辑与</td><td align="center">短路与</td><td align="center">逻辑或</td><td align="center">短路或</td><td align="center">逻辑非</td><td align="center">逻辑异或</td></tr></tbody></table><ul><li>逻辑运算符操作的都是 boolean 类型的变量，而且结果也是 boolean 类型</li></ul><h4 id="4-5-位运算符"><a href="#4-5-位运算符" class="headerlink" title="4.5 位运算符"></a>4.5 位运算符</h4><p>| <code>&lt;&lt;</code> | <code>&gt;&gt;</code> |   <code>&gt;&gt;&gt;</code>    |  <code>&amp;</code>   |  <code>|</code>   |   <code>^</code>    |   <code>~</code>    |<br>| :–: | :–: | :——–: | :—-: | :—-: | :——: | :——: |<br>| 左移 | 右移 | 无符号右移 | 与运算 | 或运算 | 异或运算 | 取反运算 |</p><ul><li><p>位运算是直接对整数的二进制进行的运算，操作的都是整型的数据（<strong>注</strong>：无<code>&lt;&lt;&lt;</code>）</p></li><li><p>&lt;&lt;：在一定范围内，每向左移1位，相当于 * 2</p></li><li><p>&gt;&gt;：在一定范围内，每向右移1位，相当于 / 2</p></li></ul><h4 id="4-6-三元运算符"><a href="#4-6-三元运算符" class="headerlink" title="4.6 三元运算符"></a>4.6 三元运算符</h4><ul><li><strong>格式</strong>：<code>(条件表达式)?表达式 1 : 表达式 2;</code></li></ul><ol><li><p>条件表达式的结果为 <strong>boolean</strong> 类型 </p></li><li><p>根据条件表达式真或假，决定执行表达式1，还是表达式2</p><ul><li>如果表达式为 true，则执行表达式1。</li><li>如果表达式为 false，则执行表达式2。</li></ul></li><li><p>表达式1 和表达式2 要求是一致的。</p></li><li><p>三元运算符可以嵌套使用</p></li><li><p>凡是可以使用三元运算符的地方，都可以改写为 if-else；反之，不成立。</p></li><li><p>如果程序既可以使用三元运算符，又可以使用 if-else 结构，那么优先选择三元运算符。（原因：简洁、执行效率高。）</p></li></ol><h3 id="第5章-流程控制"><a href="#第5章-流程控制" class="headerlink" title="第5章 流程控制"></a>第5章 流程控制</h3><p><strong>知识点</strong></p><ol><li><p>顺序结构</p></li><li><p>分支结构：if-else 条件判断结构、switch-case 选择结构</p></li><li><p>循环结构：for 循环结构、while 循环结构、do-while 循环结构、嵌套循环</p></li></ol><h4 id="5-1-if-else-条件判断结构"><a href="#5-1-if-else-条件判断结构" class="headerlink" title="5.1 if-else 条件判断结构"></a>5.1 if-else 条件判断结构</h4><p><strong>1）三种形式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种</span></span><br><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">执行表达式</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种：二选一</span></span><br><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">执行表达式<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">执行表达式<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种：n选一</span></span><br><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">执行表达式<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">执行表达式<span class="number">2</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">执行表达式<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">执行表达式n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>产生<strong>随机数</strong>：使用 Math.random() → [0.0 - 1.0)</p></li><li><p>公式：[a,b] → (int)(Math.random() * (b - a + 1) ) + a</p></li></ul><p><strong>2）说明</strong></p><ol><li><p>else 结构是可选的。</p></li><li><p>针对于条件表达式：</p><ul><li>如果多个条件表达式之间是“互斥”关系(或没有交集的关系)，哪个判断和执行语句声明顺序无所谓</li><li>如果多个条件表达式之间有交集的关系，需要根据实际情况，考虑清楚应该将哪个结构先声明</li><li>如果多个条件表达式之间有包含的关系，通常情况下，需要将范围小声明在范围大的前面。否则，范围小的就没机会执行了</li></ul></li><li><p>if-else 结构是可以相互嵌套的。</p></li><li><p>如果 if-else 结构中的执行语句只有一行时，对应的一对{}可以省略的。但是，不建议大家省略。</p></li></ol><h4 id="5-2-switch-case-选择结构"><a href="#5-2-switch-case-选择结构" class="headerlink" title="5.2 switch-case 选择结构"></a>5.2 switch-case 选择结构</h4><p><strong>1）格式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (表达式) &#123;</span><br><span class="line"><span class="keyword">case</span> 常量<span class="number">1</span>:</span><br><span class="line">执行语句<span class="number">1</span>;</span><br><span class="line"><span class="comment">//break;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> 常量<span class="number">2</span>:</span><br><span class="line">执行语句<span class="number">2</span>;</span><br><span class="line"><span class="comment">//break;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">执行语句n;</span><br><span class="line"><span class="comment">//break;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）说明</strong></p><ol><li><p>根据 switch 表达式中的值，依次匹配各个 case 中的常量。一旦匹配成功，则进入相应 case 结构中，调用其执行语句。当调用完执行语句以后，则仍然继续向下执行其他 case 结构中的执行语句，直到遇到 break 关键字或此 switch-case 结构末尾结束为止。</p></li><li><p><code>break</code>：可以使用在 switch-case 结构中，表示一旦执行到此关键字，就跳出 switch-case 结构</p></li><li><p><strong>switch 结构中的表达式，只能是如下的6种数据类型之一：<code>byte 、short、char、int、枚举类型(JDK5.0新增)、String 类型(JDK7.0新增)</code></strong></p></li><li><p>case 之后只能声明常量。不能声明范围。</p></li><li><p>break 关键字是可选的。</p></li><li><p><code>default</code>：相当于 if-else 结构中的else；default 结构是可选的，而且位置是灵活的。</p></li></ol><p><strong>注意</strong></p><ul><li><p>凡是可以使用 switch-case 的结构，都可以转换为 if-else。反之，不成立。</p></li><li><p>我们写分支结构时，当发现既可以使用 switch-case,（同时，switch 中表达式的取值情况不太多），又可以使用 if-els e时，我们优先选择使用 switch-case。原因：switch-case 执行效率稍高。</p></li><li><p>如果 switch-case 结构中的多个 case 的执行语句相同，则可以考虑进行合并。</p></li></ul><h4 id="5-3-for-循环结构"><a href="#5-3-for-循环结构" class="headerlink" title="5.3 for  循环结构"></a>5.3 for  循环结构</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (①; ②; ④) &#123;</span><br><span class="line">③</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>执行过程</strong>：① - ② - ③ - ④ - ② - ③ - ④ - … - ②</p><h4 id="5-4-while-循环结构"><a href="#5-4-while-循环结构" class="headerlink" title="5.4 while 循环结构"></a>5.4 while 循环结构</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">①</span><br><span class="line"><span class="keyword">while</span> (②) &#123;</span><br><span class="line">③;</span><br><span class="line">④;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>执行过程</strong>：① - ② - ③ - ④ - ② - ③ - ④ - … - ②</p><ul><li>写while循环千万小心不要丢了迭代条件。一旦丢了，就可能导致死循环！</li><li>我们写程序，要避免出现死循环。</li><li>for 循环和 while 循环是可以相互转换的！ </li></ul><hr><p><strong>for 循环和 while 循环总结：</strong></p><ul><li><p>开发中，基本上我们都会从 for、while 中进行选择，实现循环结构。</p></li><li><p>for 循环和 while 循环是可以相互转换的！ </p></li><li><p>我们写程序，要避免出现死循环。</p></li><li><p><strong>区别</strong>：for 循环和 while 循环的初始化条件部分的作用范围不同。</p></li></ul><h4 id="5-5-do-while"><a href="#5-5-do-while" class="headerlink" title="5.5 do-while"></a>5.5 do-while</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">①</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">③;</span><br><span class="line">④;</span><br><span class="line">&#125;<span class="keyword">while</span>(②);</span><br></pre></td></tr></table></figure><p><strong>执行过程</strong>：① - ③ - ④ - ② - ③ - ④ - … - ②</p><ul><li>do-while 循环至少会执行一次循环体！</li><li>开发中，使用 for 和 while 更多一些。较少使用 do-while</li></ul><h4 id="5-6-嵌套循环"><a href="#5-6-嵌套循环" class="headerlink" title="5.6 嵌套循环"></a>5.6 嵌套循环</h4><p><strong>1）嵌套循环</strong>：将一个循环结构 A 声明在另一个循环结构 B 的循环体中,就构成了嵌套循环</p><ul><li><strong>外层循环</strong>：循环结构 B</li><li><strong>内层循环</strong>：循环结构 A</li></ul><p><strong>2）说明</strong></p><ul><li><p>内层循环结构遍历一遍，只相当于外层循环循环体执行了一次</p></li><li><p>假设外层循环需要执行 m 次，内层循环需要执行 n 次。此时内层循环的循环体一共执行了 m×n 次</p></li><li><p>外层循环控制行数，内层循环控制列数</p></li></ul><h4 id="5-7-break-和-continue-关键字"><a href="#5-7-break-和-continue-关键字" class="headerlink" title="5.7 break 和 continue 关键字"></a>5.7 break 和 continue 关键字</h4><table><thead><tr><th align="center"></th><th align="center">使用范围</th><th align="center">循环中的作用</th><th align="center">相同点</th></tr></thead><tbody><tr><td align="center">break</td><td align="center">switch-case、循环结构中</td><td align="center">结束当前循环</td><td align="center">关键字后面不能声明执行语句</td></tr><tr><td align="center">continue</td><td align="center">循环结构中</td><td align="center">结束当次循环</td><td align="center">关键字后面不能声明执行语句</td></tr></tbody></table><ul><li><p><strong>“无限循环”结构</strong>：<code>while(true);</code> 或 <code>for(;;)</code></p></li><li><p>如何结束一个循环结构？</p><ul><li>方式一：当循环条件是false时</li><li>方式二：在循环体中，执行break</li></ul></li><li><p><strong>循环结构的四要素</strong>：① 初始化条件；② 循环条件（boolean类型）；③ 循环体；④ 迭代条件</p></li><li><p><strong>说明</strong>：通常情况下，循环结束都是因为②中循环条件返回 <code>false</code>了。</p></li></ul><h3 id="第6章-数组（Array）"><a href="#第6章-数组（Array）" class="headerlink" title="第6章 数组（Array）"></a>第6章 数组（Array）</h3><p><strong>知识点</strong>：数组、一维数组、二维数组</p><h4 id="6-1-数组的概念"><a href="#6-1-数组的概念" class="headerlink" title="6.1 数组的概念"></a>6.1 数组的概念</h4><p><strong>1）数组的理解</strong>：数组是多个相同类型数据按一定顺序排列的集合，并使用一个名字命名，并通过编号的方式对这些数据进行统一管理。</p><p><strong>2）相关的概念</strong></p><ul><li><p>数组名</p></li><li><p>元素</p></li><li><p>索引：角标、下标、</p></li><li><p>数组的长度：元素的个数</p></li></ul><p><strong>3）数组的特点</strong></p><ul><li><p>数组是有序排列的</p></li><li><p>数组属于<strong>引用数据类型</strong>的变量。数组的元素，既可以是基本数据类型，也可以是引用数据类型</p></li><li><p>创建数组对象会在内存中开辟一整块连续的空间</p></li><li><p>数组的长度一旦确定，就不能修改</p></li></ul><p><strong>4）数组的分类</strong></p><ul><li><p>按照维数：一维数组、二维数组……</p></li><li><p>按照数组元素的类型：基本数据类型元素的数组、引用数据类型元素的数组</p></li></ul><h4 id="6-2-一维数组"><a href="#6-2-一维数组" class="headerlink" title="6.2 一维数组"></a>6.2 一维数组</h4><p><strong>1）声明与初始化</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ids;<span class="comment">// 声明</span></span><br><span class="line"><span class="comment">// ① 静态初始化:数组的初始化和数组元素的赋值操作同时进行</span></span><br><span class="line">ids = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>&#125;;</span><br><span class="line"><span class="comment">// ② 动态初始化:数组的初始化和数组元素的赋值操作分开进行</span></span><br><span class="line">String[] names = <span class="keyword">new</span> String[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">int</span>[] arr4 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;<span class="comment">// 类型推断</span></span><br></pre></td></tr></table></figure><p><strong>2）调用数组的指定位置的元素</strong>（通过角标的方式调用）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">names[<span class="number">0</span>] = <span class="string">"王铭"</span>;</span><br><span class="line">names[<span class="number">1</span>] = <span class="string">"王赫"</span>;</span><br><span class="line">names[<span class="number">2</span>] = <span class="string">"张学良"</span>;</span><br><span class="line">names[<span class="number">3</span>] = <span class="string">"孙居龙"</span>;</span><br><span class="line">names[<span class="number">4</span>] = <span class="string">"王宏志"</span>;</span><br></pre></td></tr></table></figure><p><strong>3）数组的长度</strong></p><ul><li>数组一旦初始化，其长度就是确定的，就不可修改。使用<code>.length</code><strong>属性</strong>获取数组的长度。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(names.length);<span class="comment">//5</span></span><br></pre></td></tr></table></figure><p><strong>4）遍历数组</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">System.out.println(names[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5）数组元素的默认初始化值</strong> </p><table><thead><tr><th align="center">数据类型</th><th align="center">整型</th><th align="center">浮点型</th><th align="center">字符型</th><th align="center">布尔型</th><th align="center">引用数据类型</th></tr></thead><tbody><tr><td align="center">默认初始化值</td><td align="center">0</td><td align="center">0.0</td><td align="center">0 或 ‘\u0000’</td><td align="center">false</td><td align="center">null</td></tr></tbody></table><h4 id="6-3-二维数组"><a href="#6-3-二维数组" class="headerlink" title="6.3 二维数组"></a>6.3 二维数组</h4><p><strong>1）理解二维数组</strong>：一个一维数组A的元素如果还是一个一维数组类型的，则，此数组A称为二维数组</p><p><strong>2）声明与初始化</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr1;<span class="comment">// 声明</span></span><br><span class="line"><span class="comment">// 静态初始化</span></span><br><span class="line">arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,&#123;<span class="number">4</span>, <span class="number">5</span>&#125;,&#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;&#125;;</span><br><span class="line"><span class="comment">// 动态初始化1</span></span><br><span class="line">String[][] arr2 = <span class="keyword">new</span> String[<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line"><span class="comment">// 动态初始化2</span></span><br><span class="line">String[][] arr3 = <span class="keyword">new</span> String[<span class="number">3</span>][];</span><br><span class="line"><span class="keyword">int</span>[] arr4[] = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">10</span>&#125;,&#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;&#125;;<span class="comment">// 也是正确的写法</span></span><br><span class="line"><span class="keyword">int</span>[] arr5[] = &#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,&#123;<span class="number">4</span>, <span class="number">5</span>&#125;,&#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;&#125;;<span class="comment">// 类型推断</span></span><br></pre></td></tr></table></figure><p><strong>3）调用数组的指定位置的元素</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(arr1[<span class="number">0</span>][<span class="number">1</span>]);<span class="comment">// 2</span></span><br><span class="line">System.out.println(arr2[<span class="number">1</span>][<span class="number">1</span>]);<span class="comment">// null</span></span><br><span class="line"></span><br><span class="line">arr3[<span class="number">1</span>] = <span class="keyword">new</span> String[<span class="number">4</span>];</span><br><span class="line">System.out.println(arr3[<span class="number">1</span>][<span class="number">0</span>]);<span class="comment">// null</span></span><br><span class="line">System.out.println(arr3[<span class="number">0</span>]);<span class="comment">// null</span></span><br></pre></td></tr></table></figure><p><strong>4）数组的长度</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(arr4.length);<span class="comment">// 3</span></span><br><span class="line">System.out.println(arr4[<span class="number">0</span>].length);<span class="comment">// 3</span></span><br><span class="line">System.out.println(arr4[<span class="number">1</span>].length);<span class="comment">// 4</span></span><br></pre></td></tr></table></figure><p><strong>5）遍历二维数组元素</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr4.length; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; arr4[i].length;j++) &#123;</span><br><span class="line">        System.out.print(arr4[i][j] + <span class="string">"  "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>6）默认初始化值</strong>：二维数组分为外层数组的元素，内层数组的元素</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][<span class="number">3</span>];</span><br><span class="line"><span class="comment">// 外层元素：arr[0],arr[1]等</span></span><br><span class="line"><span class="comment">// 内层元素：arr[0][0],arr[1][2]等</span></span><br></pre></td></tr></table></figure><p><strong>初始化方式一</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][<span class="number">3</span>];</span><br></pre></td></tr></table></figure><ul><li><p>外层元素的初始化值为：<strong>地址值</strong></p></li><li><p>内层元素的初始化值为：与一维数组初始化情况相同</p></li></ul><p><strong>初始化方式二</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][];</span><br></pre></td></tr></table></figure><ul><li><p>外层元素的初始化值为：<strong>null</strong></p></li><li><p>内层元素的初始化值为：不能调用，否则报错。</p></li></ul><h4 id="6-4-数组的常见算法"><a href="#6-4-数组的常见算法" class="headerlink" title="6.4 数组的常见算法"></a>6.4 数组的常见算法</h4><p><strong>1）数组的创建与元素赋值</strong></p><ul><li>杨辉三角（二维数组）、回形数（二维数组）、6个数，1-30之间随机生成且不重复。</li></ul><p><strong>2）对于数值型的数组</strong></p><ul><li>最大值、最小值、总和、平均数</li></ul><p><strong>3）数组的赋值与复制</strong></p><ul><li><strong>赋值</strong>：两个变量指向同一个数组的地址，修改一个数组的元素，另一个也跟着修改。</li><li><strong>复制</strong>：两个独立的数组，数组的元素相同。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr1,arr2;</span><br><span class="line">arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="comment">//赋值</span></span><br><span class="line">arr2 = arr1;</span><br><span class="line"><span class="comment">//复制</span></span><br><span class="line">arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[arr1.length];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr2.length; i++) &#123;</span><br><span class="line">arr2[i] = arr1[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4）反转</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一：</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length / <span class="number">2</span>; i++) &#123;</span><br><span class="line">String temp = arr[i];</span><br><span class="line">arr[i] = arr[arr.length - i -<span class="number">1</span>];</span><br><span class="line">arr[arr.length - i -<span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方法二：</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = arr.length - <span class="number">1</span>; i &lt; j; i++, j--) &#123;</span><br><span class="line">String temp = arr[i];</span><br><span class="line">arr[i] = arr[j];</span><br><span class="line">arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5）查找</strong></p><p><strong>① 线性查找</strong> </p><ul><li><p><strong>实现思路</strong>：通过遍历的方式，一个一个的数据进行比较、查找</p></li><li><p><strong>适用性</strong>：具有普遍适用性。</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isFlag = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (dest.equals(arr[i])) &#123;</span><br><span class="line">System.out.println(<span class="string">"找到了指定的元素，位置为："</span> + i);</span><br><span class="line">isFlag = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (isFlag) &#123;</span><br><span class="line">System.out.println(<span class="string">"很遗憾，没有找到的啦！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>② 二分法查找</strong></p><ul><li><strong>实现思路</strong>：每次比较中间值，折半的方式检索</li><li><strong>适用性</strong>：数组必须有序</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> head = <span class="number">0</span>;<span class="comment">// 初始的首索引</span></span><br><span class="line"><span class="keyword">int</span> end = arr.length - <span class="number">1</span>;<span class="comment">// 初始的末索引</span></span><br><span class="line"><span class="keyword">boolean</span> isFlag = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">while</span> (head &lt;= end) &#123;</span><br><span class="line"><span class="keyword">int</span> middle = (head + end) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (dest == arr[middle]) &#123;</span><br><span class="line">System.out.println(<span class="string">"找到了指定的元素，位置为："</span> + middle);</span><br><span class="line">isFlag = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[middle] &gt; dest1) &#123;</span><br><span class="line">end = middle - <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;<span class="comment">//arr[middle] &lt; dest1</span></span><br><span class="line">head = middle + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (isFlag) &#123;</span><br><span class="line">System.out.println(<span class="string">"很遗憾，没有找到的啦！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>6）排序</strong></p><table><thead><tr><th align="center">排序算法</th><th align="center">平均时间复杂度</th><th align="center">最好情况</th><th align="center">最坏情况</th><th align="center">空间复杂度</th><th align="center">排序方式</th><th align="center">稳定性</th></tr></thead><tbody><tr><td align="center">冒泡排序</td><td align="center">O(n^2^)</td><td align="center">O(n)</td><td align="center">O(n^2^)</td><td align="center">O(1)</td><td align="center">In-place</td><td align="center">稳定</td></tr><tr><td align="center">选择排序</td><td align="center">O(n^2^)</td><td align="center">O(n^2^)</td><td align="center">O(n^2^)</td><td align="center">O(1)</td><td align="center">In-place</td><td align="center">数组不稳定、链表稳定</td></tr><tr><td align="center">插入排序</td><td align="center">O(n^2^)</td><td align="center">O(n)</td><td align="center">O(n^2^)</td><td align="center">O(1)</td><td align="center">In-place</td><td align="center">稳定</td></tr><tr><td align="center">快速排序</td><td align="center">O(n log n)</td><td align="center">O(n log n)</td><td align="center">O(n^2^)</td><td align="center">O(log n)</td><td align="center">In-place</td><td align="center">不稳定</td></tr><tr><td align="center">堆排序</td><td align="center">O(n log n)</td><td align="center">O(n log n)</td><td align="center">O(n log<del>2</del>n)</td><td align="center">O(1)</td><td align="center">In-place</td><td align="center">不稳定</td></tr><tr><td align="center">归并排序</td><td align="center">O(n log n)</td><td align="center">O(n log n)</td><td align="center">O(n log<del>2</del>n)</td><td align="center">O(n)</td><td align="center">Out-place</td><td align="center">稳定</td></tr><tr><td align="center">希尔排序</td><td align="center">O(n log n)</td><td align="center">O(n log^2^ n)</td><td align="center">O(n log^2^ n)</td><td align="center">O(1)</td><td align="center">In-place</td><td align="center">不稳定</td></tr><tr><td align="center">计数排序</td><td align="center">O(n+k)</td><td align="center">O(n+k)</td><td align="center">O(n+k)</td><td align="center">O(k)</td><td align="center">Out-place</td><td align="center">稳定</td></tr><tr><td align="center">桶排序</td><td align="center">O(n+k)</td><td align="center">O(n+k)</td><td align="center">O(n)</td><td align="center">O(n+k)</td><td align="center">Out-place</td><td align="center">稳定</td></tr><tr><td align="center">基数排序</td><td align="center">O(n×k)</td><td align="center">O(n×k)</td><td align="center">O(n×k)</td><td align="center">O(n+k)</td><td align="center">Out-place</td><td align="center">稳定</td></tr></tbody></table><p><strong>① 冒泡排序</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line"><span class="keyword">int</span> temp = arr[j];</span><br><span class="line">arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>② 快速排序</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span> <span class="params">(<span class="keyword">int</span>[] data, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> temp = data[i];</span><br><span class="line">data[i] = data[j];</span><br><span class="line">data[j] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">subSort</span> <span class="params">(<span class="keyword">int</span>[] data, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (start &lt; end) &#123;</span><br><span class="line"><span class="keyword">int</span> base = data[start];</span><br><span class="line"><span class="keyword">int</span> low = start;</span><br><span class="line"><span class="keyword">int</span> high = end + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> (low &lt; end &amp;&amp; data[++low] - base &lt;= <span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="keyword">while</span> (high &gt; start &amp;&amp; data[--high] - base &gt;= <span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">swap(data, low, high);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">swap(data, start, high);</span><br><span class="line">subSort(data, start, high - <span class="number">1</span>);<span class="comment">// 递归调用</span></span><br><span class="line">subSort(data, high + <span class="number">1</span>, end);</span><br><span class="line">&#125;</span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] data)</span></span>&#123;</span><br><span class="line">subSort(data,<span class="number">0</span>,data.length-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-5-Arrays-工具类"><a href="#6-5-Arrays-工具类" class="headerlink" title="6.5 Arrays 工具类"></a>6.5 Arrays 工具类</h4><ul><li><p>Arrays 定义在 <code>java.util</code> 包下，提供了很多操作数组的方法</p></li><li><p>导包：<code>import java.util.Arrays;</code></p></li></ul><p><strong>1）equals()</strong>：<code>boolean equals(int[] a,int[] b)</code>: 判断两个数组是否相等</p><p><strong>2）toString()</strong>：<code>String toString(int[] a)</code>: 输出数组信息</p><p><strong>3）fill()</strong>：<code>void fill(int[] a,int val)</code>: 将指定值填充到数组之中</p><p><strong>4）sort()</strong>：<code>void sort(int[] a)</code>: 对数组进行排序</p><p><strong>5）binarySearch()</strong>：<code>int binarySearch(int[] a,int key)</code>: 二分查找</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.boolean equals(int[] a,int[] b): 判断两个数组是否相等。</span></span><br><span class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">boolean</span> isEquals = Arrays.equals(arr1, arr2);</span><br><span class="line">System.out.println(isEquals);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.String toString(int[] a): 输出数组信息。</span></span><br><span class="line">System.out.println(Arrays.toString(arr1));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.void fill(int[] a,int val): 将指定值填充到数组之中。</span></span><br><span class="line">Arrays.fill(arr1, <span class="number">10</span>);</span><br><span class="line">System.out.println(Arrays.toString(arr1));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.void sort(int[] a): 对数组进行排序。</span></span><br><span class="line">Arrays.sort(arr2);</span><br><span class="line">System.out.println(Arrays.toString(arr2));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.int binarySearch(int[] a,int key)</span></span><br><span class="line"><span class="keyword">int</span>[] arr3 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">98</span>, -<span class="number">34</span>, <span class="number">2</span>, <span class="number">34</span>, <span class="number">54</span>, <span class="number">66</span>, <span class="number">79</span>, <span class="number">105</span>, <span class="number">210</span>, <span class="number">333</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> index = Arrays.binarySearch(arr3, <span class="number">210</span>);</span><br><span class="line"><span class="keyword">if</span> (index &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    System.out.println(index);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">"未找到"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-6-数组的常见异常"><a href="#6-6-数组的常见异常" class="headerlink" title="6.6 数组的常见异常"></a>6.6 数组的常见异常</h4><p><strong>1）数组角标越界异常</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">//System.out.println(arr[-2]);//ArrayIndexOutOfBoundsException</span></span><br></pre></td></tr></table></figure><p><strong>2）空指针异常</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 情况一：</span></span><br><span class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">arr1 = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">// System.out.println(arr1[0]);// NullPointerExceptio</span></span><br><span class="line"><span class="comment">//情况二：</span></span><br><span class="line"><span class="keyword">int</span>[][] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][];</span><br><span class="line"><span class="comment">// System.out.println(arr2[0][0]);// NullPointerException</span></span><br></pre></td></tr></table></figure><h3 id="第7章-面向对象-（OOP）"><a href="#第7章-面向对象-（OOP）" class="headerlink" title="第7章 面向对象 （OOP）"></a>第7章 面向对象 （OOP）</h3><h4 id="7-1-类和对象"><a href="#7-1-类和对象" class="headerlink" title="7.1 类和对象"></a>7.1 类和对象</h4><p><strong>1）面向对象与面向过程</strong></p><ul><li><p>面向过程编程（Procedure Oriented Programming）：强调的是<strong>功能行为</strong>，以函数为最小单位，考虑<strong>怎么做</strong></p></li><li><p>面向对象编程（Object Oriented Programming）：强调具备了功能的<strong>对象</strong>，以类/对象为最小单位，考虑<strong>谁来做</strong></p></li></ul><p><strong>2）面向对象的三大特征</strong>：封装（Encapsulation）、继承（Inheritance）、多态（Polymorphism）</p><p><strong>3）面向对象中两个重要的概念</strong></p><ul><li><p>类（Class）：对一类事物的描述，是抽象的、概念上的定义</p></li><li><p>对象（Object）：是实际存在的该类事物的每个个体，因而也称为实例（instance）</p></li></ul><p><strong>二者的关系</strong>：对象，是由类 new 出来的，派生出来的。</p><p><strong>“万事万物皆对象”</strong></p><ul><li><p>面向对象程序设计的重点是类的设计。设计类，就是设计类的成员</p></li><li><p>创建类的对象 = 类的实例化 = 实例化类</p></li><li><p><strong>匿名对象</strong>是指创建的对象，没显式的赋给一个变量名。匿名对象只能调用一次</p></li></ul><p><strong>4）类的成员</strong>：属性、方法、构造器；代码块、内部类</p><h4 id="7-2-类的属性（Field）"><a href="#7-2-类的属性（Field）" class="headerlink" title="7.2 类的属性（Field）"></a>7.2 类的属性（Field）</h4><p>对应类中的<strong>成员变量</strong>，属性 = 成员变量 = field = 域、字段</p><p><strong>※ 属性与局部变量的对比</strong></p><p><strong>1）相同点</strong></p><ul><li>定义变量的<strong>格式</strong>：数据类型  变量名 = 变量值</li><li>先声明，后使用</li><li>变量都其对应的作用域 </li></ul><p><strong>2）不同点</strong></p><p>① 在类中声明的位置的不同</p><ul><li>属性：直接定义在类的一对 {} 内</li><li>局部变量：声明在方法内、方法形参、代码块内、构造器形参、构造器内部的变量</li></ul><p>② 关于权限修饰符的不同</p><ul><li>属性：可以在声明属性时，指明其权限，使用权限修饰符。<ul><li>常用的权限修饰符：private、public、缺省、protected  —&gt; 封装性</li></ul></li><li>局部变量：不可以使用权限修饰符。</li></ul><p>③ 默认初始化值的情况：</p><ul><li>属性：类的属性，根据其类型，都默认初始化值。<ul><li>整型（byte、short、int、long：0）</li><li>浮点型（float、double：0.0）</li><li>字符型（char：0  （或’\u0000’））</li><li>布尔型（boolean：false）</li><li>引用数据类型（类、数组、接口：null）</li></ul></li><li>局部变量：没默认初始化值。<ul><li>意味着，在调用局部变量之前，一定要显式赋值。</li><li>特别地：形参在调用时，我们赋值即可。</li></ul></li></ul><p>④ 在内存中加载的位置：</p><ul><li>属性：加载到<strong>堆</strong>空间中（非static）</li><li>局部变量：加载到<strong>栈</strong>空间</li></ul><h4 id="7-3-类的方法（Method）"><a href="#7-3-类的方法（Method）" class="headerlink" title="7.3 类的方法（Method）"></a>7.3 类的方法（Method）</h4><p>描述类应该具的功能，方法 = 成员方法 = 函数 = method</p><p><strong>方法的声明</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">权限修饰符 返回值类型 方法名(形参列表)&#123;</span><br><span class="line">方法体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1）权限修饰符</strong></p><ul><li><p>默认方法的权限修饰符先都使用 public</p></li><li><p>Java 规定的4种权限修饰符：private、public、缺省、protected（封装性再细说）</p></li></ul><p><strong>2）返回值类型</strong></p><ul><li><p>如果方法返回值，则必须在方法声明时，指定返回值的类型。同时，方法中，需要使用 return 关键字来返回指定类型的变量或常量：“return 数据”。</p></li><li><p>如果方法没返回值，则方法声明时，使用 void 来表示。通常，没返回值的方法中，就不需要使用return.但是，如果使用的话，只能 “return;” 表示结束此方法的意思。</p></li></ul><p><strong>3）方法名</strong>：属于标识符，遵循标识符的规则和规范。（“见名知意”）</p><p><strong>4） 形参列表**</strong>：方法可以声明0个，1个，或多个形参。</p><ul><li><strong>格式</strong>：数据类型1 形参1, 数据类型2 形参2, …</li></ul><p><strong>5）方法体**</strong>：方法功能的体现。     </p><hr><p><strong>※ 方法的重载</strong></p><ul><li><p>在同一个类中，允许存在一个以上的<strong>同名方法</strong>，只要它们的参数个数或者参数类型不同即可</p></li><li><p><strong>“两同一不同”</strong></p><ol><li>同一个类、相同方法名</li><li>参数列表不同：参数个数不同，参数类型不同</li></ol></li><li><p>严格按照定义判断（两同一不同），跟方法的权限修饰符、返回值类型、形参变量名、方法体都没关系！</p></li></ul><p><strong>※ 可变个数形参的方法</strong></p><ol><li><p>可变个数形参的格式：数据类型 … 变量名</p></li><li><p>当调用可变个数形参的方法时，传入的参数个数可以是：0个，1个，2个…</p></li><li><p>可变个数形参的方法与本类中方法名相同，形参不同的方法之间构成重载</p></li><li><p>可变个数形参的方法与本类中方法名相同，形参类型也相同的数组之间不构成重载。换句话说，二者不能共存</p></li><li><p>可变个数形参在方法的形参中，必须声明在末尾</p></li><li><p>可变个数形参在方法的形参中，最多只能声明一个可变形参</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"show(String)"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(String ... strs)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"show(String ... strs)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; strs.length;i++)&#123;</span><br><span class="line">System.out.println(strs[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不能与上一个方法同时存在</span></span><br><span class="line"><span class="comment">//public void show(String[] strs)&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure><p><strong>※ Java的值传递机制</strong></p><p>① 值传递规则</p><ul><li><p>如果变量是<strong>基本数据类型</strong>，此时赋值的是变量所保存的<strong>数据值</strong></p></li><li><p>如果变量是<strong>引用数据类型</strong>，此时赋值的是变量所保存的<strong>数据的地址值</strong></p></li></ul><p>② 形参和实参</p><ul><li><p>形参：方法定义时，声明的小括号内的参数</p></li><li><p>实参：方法调用时，实际传递给形参的数据</p></li></ul><p>③ Java 中参数传递机制：值传递</p><ul><li><p>如果参数是基本数据类型，此时实参赋给形参的是实参真实存储的数据值</p></li><li><p>如果参数是引用数据类型，此时实参赋给形参的是实参存储数据的地址值</p></li></ul><p><strong>※ 递归方法</strong>：一个方法体内调用自身</p><ul><li><p>方法递归包含了一种隐式的循环，它会重复执行某段代码，但这种重复执行无须循环控制</p></li><li><p>递归一定要向已知方向递归，否则这种递归就变成了无穷递归，类似于死循环</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例1：计算1-n之间所自然数的和</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;<span class="comment">// 3</span></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n + getSum(n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 例2：计算1-n之间所自然数的乘积:n!</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n * getSum1(n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//例3：已知一个数列：f(0) = 1,f(1) = 4,f(n+2)=2*f(n+1) + f(n),</span></span><br><span class="line"><span class="comment">//其中n是大于0的整数，求f(10)的值。</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//return f(n + 2) - 2 * f(n + 1);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*f(n - <span class="number">1</span>) + f(n - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//例4：斐波那契数列</span></span><br><span class="line"><span class="comment">//例5：汉诺塔问题</span></span><br><span class="line"><span class="comment">//例6：快排</span></span><br></pre></td></tr></table></figure><p><strong>※ 方法的重写</strong>（override 或 overwrite）：子类继承父类以后，可以对父类中同名同参数的方法，进行覆盖操作</p><ul><li>重写以后，当创建子类对象以后，通过子类对象调用子父类中的同名同参数的方法时，实际执行的是子类重写父类的方法</li><li>子类中的叫重写的方法，父类中的叫被重写的方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">权限修饰符  返回值类型  方法名(形参列表) <span class="keyword">throws</span> 异常的类型&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法体</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>① 子类重写的方法的方法名和形参列表与父类被重写的方法的<strong>方法名和形参列表相同</strong></p><p>② 子类重写的方法的权限修饰符<strong>不小于</strong>父类被重写的方法的权限修饰符（特殊情况：子类不能重写父类中声明为 private 权限的方法）</p><p>③ 返回值类型</p><ul><li><p>父类被重写的方法的返回值类型是void，则子类重写的方法的返回值类型只能是void</p></li><li><p>父类被重写的方法的返回值类型是A类型，则子类重写的方法的返回值类型可以是A类或A类的子类</p></li><li><p>父类被重写的方法的返回值类型是基本数据类型(比如：double)，则子类重写的方法的返回值类型必须是相同的基本数据类型(必须也是double)</p></li></ul><p>④ 子类重写的方法抛出的异常类型<strong>不大于</strong>父类被重写的方法抛出的异常类型</p><p>⑤ 子类和父类中的同名同参数的方法要么都声明为非 static 的（考虑重写），要么都声明为 static 的（不是重写)。</p><hr><p><strong>面试题</strong></p><p><strong>区分方法的重写和重载？</strong>（① 二者的概念；② 重载和重写的具体规则；③ 重载：不表现为多态性；重写：表现为多态性。）</p><ul><li><strong>重载</strong>，是指允许存在多个同名方法，而这些方法的参数不同。编译器根据方法不同的参数表，对同名方法的名称做修饰。对于编译器而言，这些同名方法就成了不同的方法。它们的调用地址在编译期就绑定了。Java的重载是可以包括父类和子类的，即子类可以重载父类的同名不同参数的方法。所以，对于重载而言，在方法调用之前，编译器就已经确定了所要调用的方法，这称为“早绑定”或“静态绑定”；而对于<strong>多态</strong>，只等到方法调用的那一刻，解释运行器才会确定所要调用的具体方法，这称为“晚绑定”或“动态绑定”。 引用一句Bruce Eckel的话：“不要犯傻，如果它不是晚绑定，它就不是多态。”</li></ul><h4 id="7-4-类的构造器（Constructor）"><a href="#7-4-类的构造器（Constructor）" class="headerlink" title="7.4 类的构造器（Constructor）"></a>7.4 类的构造器（Constructor）</h4><p>构造器（构造方法）的作用：① 创建对象；② 初始化对象的信息</p><ol><li><p>如果没显式的定义类的构造器的话，则系统默认提供一个空参的构造器</p></li><li><p>定义构造器的格式：<code>权限修饰符  类名(形参列表){}</code></p></li><li><p>一个类中定义的多个构造器，彼此构成<strong>重载</strong></p></li><li><p>一旦我们显式的定义了类的构造器之后，系统就不再提供默认的空参构造器</p></li><li><p>一个类中，至少会有一个构造器。</p></li></ol><p><strong>属性赋值的先后顺序</strong>：① 默认初始化；② 显式初始化；③ 构造器中初始化；④ 通过”对象.方法” 或 “对象.属性”的方式，赋值</p><p>所谓<strong>JavaBean</strong>，是指符合如下标准的 Java 类：① 类是公共的；② 一个无参的公共的构造器；③ 属性有对应的 get、set 方法</p><h4 id="7-5-封装性（Encapsulation）"><a href="#7-5-封装性（Encapsulation）" class="headerlink" title="7.5 封装性（Encapsulation）"></a>7.5 封装性（Encapsulation）</h4><p><strong>1）为什么要引入封装性？</strong></p><p>① 我们程序设计追求<strong>“高内聚，低耦合”</strong></p><ul><li><p>高内聚 ：类的内部数据操作细节自己完成，不允许外部干涉</p></li><li><p>低耦合 ：仅对外暴露少量的方法用于使用</p></li></ul><p>② 隐藏对象内部的复杂性，只对外公开简单的接口。便于外界调用，从而提高系统的可扩展性、可维护性。通俗的说，把该隐藏的隐藏起来，该暴露的暴露出来。这就是封装性的设计思想</p><p><strong>2）封装性思想具体的代码体现</strong></p><ul><li><p>体现一：将类的属性 xxx 私化（private），同时，提供公共的（public）方法来获取（getXxx）和设置（setXxx）此属性的值</p></li><li><p>体现二：不对外暴露的私有的方法</p></li><li><p>体现三：单例模式（将构造器私有化）</p></li><li><p>体现四：如果不希望类在包外被调用，可以将类设置为缺省的</p></li></ul><p><strong>3）Java 规定的四种权限修饰符</strong></p><p>① 权限从小到大顺序为：private &lt;  缺省 &lt; protected &lt; public</p><p>② 具体的修饰范围：</p><table><thead><tr><th align="center">修饰符</th><th align="center">类内部</th><th align="center">同一个包</th><th align="center">不同包的子类</th><th align="center">同一个工程</th></tr></thead><tbody><tr><td align="center">private</td><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">（缺省）</td><td align="center">√</td><td align="center">√</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">protected</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center"></td></tr><tr><td align="center">public</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr></tbody></table><p>③ 权限修饰符可用来修饰的结构</p><ul><li>4种权限都可以用来修饰类的内部结构：属性、方法、构造器、内部类</li><li>修饰类的话，只能使用：缺省、public</li></ul><h4 id="7-6-继承性（Inheritance）"><a href="#7-6-继承性（Inheritance）" class="headerlink" title="7.6 继承性（Inheritance）"></a>7.6 继承性（Inheritance）</h4><p><strong>1）为什么要有类的继承性（继承性的好处）</strong></p><ol><li><p>减少了代码的冗余，提高了代码的复用性</p></li><li><p>便于功能的扩展</p></li><li><p>为之后多态性的使用，提供了前提</p></li></ol><p><strong>2）继承性的格式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A:子类、派生类、subclass</span></span><br><span class="line"><span class="comment">// B:父类、超类、基类、superclass</span></span><br><span class="line"><span class="comment">// extends 关键字：延展、扩展</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">B</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><strong>3）子类继承父类以后有哪些不同？</strong></p><ul><li><p>体现：一旦子类 A 继承父类 B 以后，子类 A 中就获取了父类 B 中声明的<strong>所有的</strong>属性和方法</p></li><li><p>特别的，父类中声明为private的属性或方法，子类继承父类以后，仍然认为获取了父类中私有的结构。只因为封装性的影响，使得子类不能直接调用父类的结构而已</p></li><li><p>子类继承父类以后，还可以声明自己特有的属性或方法：实现功能的拓展。子类和父类的关系，不同于子集和集合的关系。（extends：延展、扩展）</p></li></ul><p><strong>4）Java 中继承性的说明</strong></p><ol><li><p>一个类可以被多个子类继承</p></li><li><p>Java 中类的单继承性，即一个类只能有一个（直接）父类</p></li><li><p>子父类是相对的概念</p></li><li><p>子类直接继承的父类，称为：直接父类；间接继承的父类称为：间接父类</p></li><li><p>子类继承父类以后，就获取了直接父类以及所有间接父类中声明的属性和方法</p></li></ol><p><strong>5）java.lang.Object 类的理解</strong></p><ol><li><p>如果我们没显式的声明一个类的父类的话，则此类继承于 java.lang.Object 类</p></li><li><p>所有的 Java 类（除 java.lang.Object 类之外）都直接或间接的继承于 java.lang.Object 类</p></li><li><p>意味着，所有的 Java 类具有 java.lang.Object 类声明的功能</p></li></ol><h4 id="7-7-多态性（Polymorphism）"><a href="#7-7-多态性（Polymorphism）" class="headerlink" title="7.7 多态性（Polymorphism）"></a>7.7 多态性（Polymorphism）</h4><p>多态性可以理解为一个事物的多种形态，对象的<strong>多态性</strong>就是指<strong>父类的引用指向子类的对象</strong>（或子类的对象赋给父类的引用）</p><p><strong>1）多态性的使用 – 虚拟方法调用</strong></p><ul><li><p>有了对象的多态性以后，我们在编译期，只能调用父类中声明的方法，但在运行期，我们实际执行的是子类重写父类的方法</p></li><li><p>总结：编译，看左边；运行，看右边</p></li><li><p><strong>注意点</strong>：对象的多态性，只适用于方法，不适用于属性（编译和运行都看左边）</p></li><li><p>多态是编译时行为还是运行时行为？答：运行时行为</p></li></ul><p><strong>2）多态性的使用前提</strong>：① 类的继承关系 ；② 方法的重写</p><p><strong>3）向上转型</strong>：多态</p><p><strong>4）向下转型</strong></p><p>① 为什么使用向下转型</p><ul><li>有了对象的多态性以后，内存中实际上是加载了子类特有的属性和方法的，但是由于变量声明为父类类型，导致编译时，只能调用父类中声明的属性和方法。子类特有的属性和方法不能调用。使用向下转型才能调用子类特的属性和方法</li></ul><p>② 如何实现向下转型</p><ul><li>使用强制类型转换符：()</li></ul><p><strong>使用时的注意点：</strong></p><ol><li><p>使用强转时，可能出现 ClassCastException 的异常</p></li><li><p>为了避免在向下转型时出现 ClassCastException 的异常，我们在向下转型之前，先进行 instanceof 的判断，一旦返回 true，就进行向下转型。如果返回false，不进行向下转型</p></li></ol><p><strong>5）instanceof 的使用</strong></p><ul><li><p>a instanceof A：<strong>判断对象 a 是否是类 A 的实例</strong>。如果是，返回 true；如果不是，返回 false</p></li><li><p>如果 a instanceof A 返回 true，则 a instanceof B 也返回 true。其中，类 B 是类 A 的父类</p></li><li><p>要求 a 所属的类与类 A <strong>必须</strong>是子类和父类的关系，否则编译错误</p></li></ul><hr><p><strong>面试题</strong></p><p>谈谈你对多态性的理解？</p><ul><li><p>实现代码的通用性</p></li><li><p>Object 类中定义的<code>public boolean equals(Object obj){}</code></p></li><li><p>JDBC：使用java程序操作(获取数据库连接、CRUD)数据库(MySQL、Oracle、DB2、SQL Server)</p></li><li><p>抽象类、接口的使用肯定体现了多态性。（抽象类、接口不能实例化）</p></li></ul><h4 id="7-8-Object-类的使用"><a href="#7-8-Object-类的使用" class="headerlink" title="7.8 Object 类的使用"></a>7.8 Object 类的使用</h4><p><strong>1）java.lang.Object 类的说明</strong></p><ol><li><p>Object 类是所有 Java 类的根父类</p></li><li><p>如果在类的声明中未使用 extends 关键字指明其父类，则默认父类为 java.lang.Object 类 </p></li><li><p>Object 类中的功能（属性、方法）就具通用性</p><ul><li><strong>属性</strong>：无</li><li><strong>方法</strong>：equals()、toString() 、getClass()、hashCode() 、clone()、finalize()；wait() 、 notify()、notifyAll()</li></ul></li><li><p>Object类只声明了一个空参的构造器</p></li></ol><p><strong>2）equals() 方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  Object 类中 equals() 的定义</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="keyword">this</span> == obj);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 说明：Object类中定义的equals()和==的作用是相同的：比较两个对象的地址值是否相同。即两个引用是否指向同一个对象实体</span></span><br></pre></td></tr></table></figure><ul><li><p>equals() 是一个方法，而非运算符</p></li><li><p>只能适用于引用数据类型</p></li><li><p>像 String、Date、File、包装类等都重写了 Object 类中的 equals() 方法。重写以后，比较的不是两个引用的地址是否相同，而是比较两个对象的”实体内容”是否相同</p></li><li><p>通常情况下，我们自定义的类如果使用 equals() 的话，也通常是比较两个对象的”实体内容”是否相同。那么，我们就需要对 Object 类中的 equals() 进行重（重写的原则：比较两个对象的实体内容是否相同）</p></li></ul><p><strong>如何重写equals()</strong>：开发中自动生成的</p><p><strong>回顾 == 运算符的使用：</strong></p><ol><li><p>可以使用在基本数据类型变量和引用数据类型变量中</p></li><li><p>如果比较的是基本数据类型变量：比较两个变量保存的数据是否相等。（不一定类型要相同）</p><p>如果比较的是引用数据类型变量：比较两个对象的地址值是否相同.即两个引用是否指向同一个对象实体</p><p><strong>注意： == 符号使用时，必须保证符号左右两边的变量类型一致</strong></p></li></ol><p><strong>3）toString() 方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object 类中 toString() 的定义</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> getClass().getName() + <span class="string">"@"</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>当我们输出一个对象的引用时，实际上就是调用当前对象的 toString() </li><li>像 String、Date、File、包装类等都重写了 Object 类中的 toString() 方法， 使得在调用对象的 toString() 时，返回”实体内容”信息</li><li>自定义类也可以重写 toString()方 法，当调用此方法时，返回对象的”实体内容”</li></ul><p><strong>如何重写toString()</strong>：开发中如何实现：自动生成的</p><h4 id="7-9-代码块和内部类"><a href="#7-9-代码块和内部类" class="headerlink" title="7.9 代码块和内部类"></a>7.9 代码块和内部类</h4><p><strong>1）代码块</strong></p><ul><li><strong>作用</strong>：用来初始化类、对象的信息</li><li><strong>分类</strong>：代码块要是使用修饰符，只能使用 static，所以分为<strong>静态代码块</strong>和<strong>非静态代码块</strong></li></ul><p><strong>静态代码块</strong></p><ul><li><p>内部可以有输出语句</p></li><li><p>随着类的加载而执行,而且只执行一次</p></li><li><p>作用：初始化类的信息</p></li><li><p>如果一个类中定义了多个静态代码块，则按照声明的先后顺序执行</p></li><li><p><em>静态代码块的执行要优先于非静态代码块的执行</em></p></li><li><p><em>静态代码块内只能调用静态的属性、静态的方法，不能调用非静态的结构</em></p></li></ul><p><strong>非静态代码块</strong></p><ul><li><p>内部可以有输出语句</p></li><li><p>随着对象的创建而执行</p></li><li><p>每创建一个对象，就执行一次非静态代码块</p></li><li><p>作用：可以在创建对象时，对对象的属性等进行初始化</p></li><li><p>如果一个类中定义了多个非静态代码块，则按照声明的先后顺序执行</p></li><li><p>非静态代码块内可以调用静态的属性、静态的方法，或非静态的属性、非静态的方法</p></li></ul><p>实例化子类对象时，涉及到父类、子类中静态代码块、非静态代码块、构造器的加载顺序：<strong>由父及子，静态先行</strong></p><p>执行的先后顺序：①默认初始化；②显式初始化/⑤在代码块中赋值；③构造器中初始化；④有了对象以后，可以通过”对象.属性”或”对象.方法”的方式，进行赋值；</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Root</span></span>&#123;</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Root的静态初始化块"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">System.out.println(<span class="string">"Root的普通初始化块"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Root</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">super</span>();</span><br><span class="line">System.out.println(<span class="string">"Root的无参数的构造器"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mid</span> <span class="keyword">extends</span> <span class="title">Root</span></span>&#123;</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Mid的静态初始化块"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">System.out.println(<span class="string">"Mid的普通初始化块"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Mid</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">super</span>();</span><br><span class="line">System.out.println(<span class="string">"Mid的无参数的构造器"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Mid</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line"><span class="keyword">this</span>();</span><br><span class="line">System.out.println(<span class="string">"Mid的带参数构造器，其参数值："</span></span><br><span class="line">+ msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> <span class="keyword">extends</span> <span class="title">Mid</span></span>&#123;</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Leaf的静态初始化块"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">System.out.println(<span class="string">"Leaf的普通初始化块"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Leaf</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">super</span>(<span class="string">"尚硅谷"</span>);</span><br><span class="line">System.out.println(<span class="string">"Leaf的构造器"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LeafTest</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"><span class="keyword">new</span> Leaf(); </span><br><span class="line">System.out.println(<span class="string">"================================"</span>);</span><br><span class="line"><span class="keyword">new</span> Leaf();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Root的静态初始化块</span><br><span class="line">Mid的静态初始化块</span><br><span class="line">Leaf的静态初始化块</span><br><span class="line">Root的普通初始化块</span><br><span class="line">Root的无参数的构造器</span><br><span class="line">Mid的普通初始化块</span><br><span class="line">Mid的无参数的构造器</span><br><span class="line">Mid的带参数构造器，其参数值：尚硅谷</span><br><span class="line">Leaf的普通初始化块</span><br><span class="line">Leaf的构造器</span><br><span class="line">================================</span><br><span class="line">Root的普通初始化块</span><br><span class="line">Root的无参数的构造器</span><br><span class="line">Mid的普通初始化块</span><br><span class="line">Mid的无参数的构造器</span><br><span class="line">Mid的带参数构造器，其参数值：尚硅谷</span><br><span class="line">Leaf的普通初始化块</span><br><span class="line">Leaf的构造器</span><br></pre></td></tr></table></figure><p><strong>2）内部类</strong></p><ul><li><p><strong>定义</strong>：Java 中允许将一个类 A 声明在另一个类 B 中，则类 A 就是<strong>内部类</strong>，类 B 称为<strong>外部类</strong>。</p></li><li><p><strong>分类</strong>：<strong>成员内部类</strong>（静态、非静态 ）和 <strong>局部内部类</strong>(方法内、代码块内、构造器内)。</p></li><li><p>一方面，作为<strong>外部类的成员</strong>：① 调用外部类的结构；② 可以被 static 修饰；③ 可以被 4 种不同的权限修饰。另一方面，作为<strong>一个类</strong>：① 类内可以定义属性、方法、构造器等；② 可以被 final 修饰，表示此类不能被继承。言外之意，不使用 final，就可以被继承；③ 可以被 abstract 修饰。</p></li></ul><p><strong>成员内部类</strong></p><p>① 如何创建成员内部类的对象？(静态的 &amp; 非静态的)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建静态的 Dog 内部类的实例（静态的成员内部类）</span></span><br><span class="line">Person.Dog dog = <span class="keyword">new</span> Person.Dog();</span><br><span class="line"><span class="comment">// 创建非静态的 Bird 内部类的实例（非静态的成员内部类）</span></span><br><span class="line"><span class="comment">// Person.Bird bird = new Person.Bird();//错误的</span></span><br><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">Person.Bird bird = p.<span class="keyword">new</span> Bird();</span><br></pre></td></tr></table></figure><p>② 如何在成员内部类中调用外部类的结构？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">String name = <span class="string">"小明"</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"><span class="comment">// 非静态成员内部类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span></span>&#123;</span><br><span class="line">String name = <span class="string">"杜鹃"</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">System.out.println(name);<span class="comment">// 方法的形参</span></span><br><span class="line">System.out.println(<span class="keyword">this</span>.name);<span class="comment">// 内部类的属性</span></span><br><span class="line">System.out.println(Person.<span class="keyword">this</span>.name);<span class="comment">// 外部类的属性</span></span><br><span class="line"><span class="comment">// Person.this.eat();</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>局部内部类</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回一个实现了Comparable 接口的类的对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Comparable <span class="title">getComparable</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建一个实现了Comparable接口的类:局部内部类</span></span><br><span class="line">    <span class="comment">// 方式一：</span></span><br><span class="line">    <span class="comment">//class MyComparable implements Comparable&#123;</span></span><br><span class="line">    <span class="comment">//@Override</span></span><br><span class="line">    <span class="comment">//public int compareTo(Object o) &#123;</span></span><br><span class="line">    <span class="comment">//return 0;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">//return new MyComparable();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//方式二：</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Comparable()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：在局部内部类的<strong>方法</strong>中如果调用局部内部类所声明的<strong>方法</strong>中的<strong>局部变量</strong>的话，要求此局部变量声明为 final 的。</p><ul><li>jdk 7 及之前版本：要求此局部变量显式的声明为 final 的</li><li>jdk 8 及之后的版本：可以省略 final 的声明</li></ul><p><strong>总结</strong>：成员内部类和局部内部类，在编译以后，都会生成字节码文件</p><p><strong>格式</strong></p><ul><li><code>成员内部类：外部类$内部类名.class</code></li><li><code>局部内部类：外部类$数字 内部类名.class</code></li></ul><h4 id="7-9-关键字"><a href="#7-9-关键字" class="headerlink" title="7.9 关键字"></a>7.9 关键字</h4><h5 id="7-9-1-return"><a href="#7-9-1-return" class="headerlink" title="7.9.1 return"></a>7.9.1 return</h5><ul><li><p>使用范围：使用在方法体中</p></li><li><p>作用：</p><ul><li>结束方法</li><li>针对于返回值类型的方法，使用”return 数据”方法返回所要的数据</li></ul></li><li><p><strong>注意</strong>：return 关键字后面不可以声明执行语句</p></li></ul><h5 id="7-9-2-this"><a href="#7-9-2-this" class="headerlink" title="7.9.2 this"></a>7.9.2 this</h5><ul><li><p>this 理解为：<strong>当前对象</strong> 或 <strong>当前正在创建的对象</strong></p></li><li><p>可以调用的结构：属性、方法；构造器</p></li></ul><p><strong>this 调用属性、方法：</strong></p><ul><li>在类的方法中，我们可以使用<code>this.属性</code>或<code>this.方法</code>的方式，调用<strong>当前对象</strong>属性或方法。但是，通常情况下，我们都择省略<code>this.</code>。</li><li>特殊情况下，如果方法的形参和类的属性同名时，我们必须显式的使用<code>this.变量</code>的方式，表明此变量是属性，而非形参</li></ul><p><strong>this 调用构造器：</strong></p><ul><li>在类的构造器中，我们可以使用<code>this.属性</code>或<code>this.方法</code>的方式，调用当前<strong>正在创建的对象</strong>属性或方法。但是，通常情况下，我们都择省略<code>this.</code>。</li><li>特殊情况下，如果构造器的形参和类的属性同名时，我们必须显式的使用<code>this.变量</code>的方式，表明此变量是属性，而非形参</li></ul><p><strong>※ 注意</strong></p><ul><li><p>我们在类的构造器中，可以显式的使用”this(形参列表)”方式，调用本类中指定的其他构造器</p></li><li><p>构造器中不能通过<code>this(形参列表)</code>方式调用自己</p></li><li><p>如果一个类中有n个构造器，则最多有 n - 1构造器中使用了<code>this(形参列表)</code></p></li><li><p>规定：<code>this(形参列表)</code>必须声明在当前构造器的<strong>首行</strong></p></li><li><p>构造器内部，<strong>最多只能声明一个</strong><code>this(形参列表)</code>，用来调用其他的构造器</p></li></ul><h5 id="7-9-3-package"><a href="#7-9-3-package" class="headerlink" title="7.9.3 package"></a>7.9.3 package</h5><ul><li><p>为了更好的实现项目中类的管理，提供包的概念</p></li><li><p>使用 package 声明类或接口所属的包，声明在源文件的首行</p></li><li><p>包，属于标识符，遵循标识符的命名规则、规范（xxxyyyzzz）、“见名知意”</p></li><li><p>每”.”一次，就代表一层文件目录。</p></li></ul><p><strong>举例：MVC设计模式</strong></p><p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/MVC%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.png" alt="MVC设计模式"></p><p><strong>JDK中的主要包介绍</strong></p><ol><li>java.lang：包含一些 Java 语言的核心类，如 String、Math、Integer、System 和 Thread，提供常用功能</li><li>java.net：包含执行与网络相关的操作的类和接口</li><li>java.io：包含能提供多种输入/输出功能的类</li><li>java.uti：包含一些实用工具类，如定义系统特性、接口的集合框架类、使用与日期日历相关的函数。</li><li>java.text：包含了一些java格式化相关的类</li><li>java.sql：包含了 Java 进行 JDBC 数据库编程的相关类/接口</li><li>java.awt：包含了构成抽象窗口工具集（abstract window toolkits）的多个类，这些类被用来构建和管理应用程序的图形用户界面（GUl）</li></ol><h5 id="7-9-4-import"><a href="#7-9-4-import" class="headerlink" title="7.9.4 import"></a>7.9.4 import</h5><ul><li><p>在源文件中显式的使用 import 结构导入指定包下的类、接口</p></li><li><p>声明在包的声明和类的声明之间</p></li><li><p>如果需要导入多个结构，则并列写出即可</p></li><li><p>可以使用 “xxx.*” 的方式，表示可以导入 xxx 包下的所结构</p></li><li><p>如果使用的类或接口是 java.lang 包下定义的，则可以省略 import 结构</p></li><li><p>如果使用的类或接口是本包下定义的，则可以省略import结构</p></li><li><p>如果在源文件中，使用了不同包下的同名的类，则必须至少一个类需要以全类名的方式显示。</p></li><li><p>使用 “xxx.*” 方式表明可以调用 xxx 包下的所有结构。但是如果使用的是 xxx 子包下的结构，则仍需要显式导入</p></li><li><p><code>import static</code>：导入指定类或接口中的静态结构（属性或方法） </p></li></ul><h5 id="7-9-5-super"><a href="#7-9-5-super" class="headerlink" title="7.9.5 super"></a>7.9.5 super</h5><ul><li><p>super 关键字可以理解为：父类的</p></li><li><p><strong>可以用来调用的结构</strong>：属性、方法、构造器</p></li></ul><p><strong>super 调用属性、方法</strong></p><ul><li><p>我们可以在子类的方法或构造器中。通过使用”super.属性”或”super.方法”的方式，显式的调用父类中声明的属性或方法。但是，通常情况下，我们习惯省略”super.”</p></li><li><p>特殊情况：当子类和父类中定义了同名的属性时，我们要想在子类中调用父类中声明的属性，则必须显式的使用”super.属性”的方式，表明调用的是父类中声明的属性</p></li><li><p>特殊情况：当子类重写了父类中的方法以后，我们想在子类的方法中调用父类中被重写的方法时，则必须显式的使用”super.方法”的方式，表明调用的是父类中被重写的方法</p></li></ul><p><strong>super 调用构造器</strong></p><ul><li><p>我们可以在子类的构造器中显式的使用”super(形参列表)”的方式，调用父类中声明的指定的构造器</p></li><li><p>“super(形参列表)”的使用，必须声明在子类构造器的首行！</p></li><li><p>我们在类的构造器中，针对于”this(形参列表)”或”super(形参列表)”只能二选一，不能同时出现</p></li><li><p>在构造器的首行，没显式的声明”this(形参列表)”或”super(形参列表)”，则默认调用的是父类中空参的构造器：super()</p></li><li><p>在类的多个构造器中，至少一个类的构造器中使用了”super(形参列表)”，调用父类中的构造器</p></li></ul><p><strong>子类对象实例化全过程</strong></p><p>1）从结果上看：继承性</p><ul><li>子类继承父类以后，就获取了父类中声明的属性或方法。创建子类的对象，在堆空间中，就会加载所父类中声明的属性</li></ul><p>2）从过程上看</p><p>当我们通过子类的构造器创建子类对象时，我们一定会直接或间接的调用其父类的构造器，进而调用父类的父类的构造器，……，直到调用了java.lang.Object类中空参的构造器为止。正因为加载过所的父类的结构，所以才可以看到内存中父类中的结构，子类对象才可以考虑进行调用</p><blockquote><p>强调说明：虽然创建子类对象时，调用了父类的构造器，但是自始至终就创建过一个对象，即为new的子类对象。</p></blockquote><h5 id="7-9-6-static"><a href="#7-9-6-static" class="headerlink" title="7.9.6 static"></a>7.9.6 static</h5><p><strong>可以用来修饰的结构</strong>：主要用来修饰类的内部结构（属性、方法、代码块、内部类）</p><p><strong>※ 属性</strong>按是否使用 static 修饰可分为： <strong>静态属性（类变量）</strong> 和<strong>非静态属性（实例变量）</strong></p><ul><li>类变量：我们创建了类的多个对象，多个对象共享同一个类变量。当通过某一个对象修改类变量时，会导致其他对象调用此类变量时，是修改过了的</li><li>实例变量：我们创建了类的多个对象，每个对象都独立的拥一套类中的实例变量。当修改其中一个对象中的实例变量时，不会导致其他对象中同样的实例变量的修改。</li></ul><hr><ul><li><p>静态属性随着类的加载而加载。可以通过”类.静态属性”的方式进行调用</p></li><li><p>静态属性的加载要早于对象的创建</p></li><li><p>由于类只会加载一次，则静态属性在内存中也只会存在一份：存在方法区的静态域中</p></li><li><p>静态属性举例：System.out; Math.PI;</p></li></ul><table><thead><tr><th align="center"></th><th align="center">类变量</th><th align="center">实例变量</th></tr></thead><tbody><tr><td align="center">类</td><td align="center">√</td><td align="center">×</td></tr><tr><td align="center">对象</td><td align="center">√</td><td align="center">√</td></tr></tbody></table><p><strong>※ 静态方法（类方法）和非静态方法</strong></p><ul><li><p>静态方法随着类的加载而加载，可以通过”类.静态方法”的方式进行调用</p></li><li><p>静态方法中，只能调用静态的方法或属性</p></li><li><p>非静态方法中，既可以调用非静态的方法或属性，也可以调用静态的方法或属性</p></li></ul><hr><ul><li>在静态的方法内，不能使用 this 关键字、super 关键字</li><li>关于静态属性和静态方法的使用，大家都从生命周期的角度去理解</li></ul><table><thead><tr><th align="center"></th><th align="center">静态方法</th><th align="center">非静态方法</th></tr></thead><tbody><tr><td align="center">类</td><td align="center">√</td><td align="center">×</td></tr><tr><td align="center">对象</td><td align="center">√</td><td align="center">√</td></tr></tbody></table><p><strong>如何判定属性和方法是否应该使用 static 关键字</strong></p><p>① 关于属性</p><ul><li><p>属性是可以被多个对象所共享的，不会随着对象的不同而不同的</p></li><li><p>类中的常量也常常声明为 static</p></li></ul><p>② 关于方法</p><ul><li><p>操作静态属性的方法，通常设置为 static 的</p></li><li><p>工具类中的方法，习惯上声明为 static 的。 比如：Math、Arrays、Collections</p></li></ul><p><strong>使用举例</strong></p><ul><li><p>举例一：Arrays、Math、Collections 等工具类</p></li><li><p>举例二：单例模式</p></li></ul><h5 id="7-9-7-final"><a href="#7-9-7-final" class="headerlink" title="7.9.7 final"></a>7.9.7 final</h5><p><strong>可以用来修饰结构</strong>：类、方法、变量</p><p><strong>final 用来修饰一个类</strong>：此类不能被其他类所继承。</p><ul><li>比如：String类、System类、StringBuffer类</li></ul><p><strong>final 用来修饰方法</strong>：表明此方法不可以被重写</p><ul><li>比如：Object 类中getClass();</li></ul><p><strong>final 用来修饰变量</strong>：此时的”变量”就称为是一个常量</p><ul><li><p>final 修饰属性：必须被赋值，可以考虑赋值的位置有显式初始化、代码块中初始化、构造器中初始化</p></li><li><p>final 修饰局部变量：尤其是使用 final 修饰形参时，表明此形参是一个常量。当我们调用此方法时，给常量形参赋一个实参。一旦赋值以后，就只能在方法体内使用此形参，但不能进行重新赋值。</p></li><li><p>static final 用来修饰属性：全局常量</p></li></ul><h5 id="7-9-8-abstract"><a href="#7-9-8-abstract" class="headerlink" title="7.9.8 abstract"></a>7.9.8 abstract</h5><p><strong>可以用来修饰结构</strong>：类、方法</p><p><strong>abstract修饰类：抽象类</strong></p><ul><li><p>此类<strong>不能实例化</strong></p></li><li><p>抽象类中<strong>一定有构造器</strong>，便于子类实例化时调用（涉及：子类对象实例化的全过程）</p></li><li><p>开发中，都会提供抽象类的子类，让子类对象实例化，完成相关的操作（抽象类的使用前提：继承性）</p></li></ul><p><strong>abstract修饰方法：抽象方法</strong></p><ul><li><p>抽象方法只有方法的声明，没方法体</p></li><li><p>包含抽象方法的类，一定是一个抽象类。反之，抽象类中可以没有抽象方法的。</p></li><li><p>若子类重写了父类中的所的抽象方法后，此子类方可实例化</p></li><li><p>若子类没重写父类中的所的抽象方法，则此子类也是一个抽象类，需要使用abstract修饰</p></li></ul><p><strong>注意点</strong></p><ul><li><p>abstract 不能用来修饰：属性、构造器等结构</p></li><li><p>abstract 不能用来修饰私有方法、静态方法、final 的方法、final 的类</p></li></ul><h5 id="7-9-9-interface"><a href="#7-9-9-interface" class="headerlink" title="7.9.9 interface"></a>7.9.9 interface</h5><ul><li><p>接口使用 <code>interface</code> 来定义</p></li><li><p>Java中，接口和类是<strong>并列</strong>的两个结构</p></li></ul><p>如何<strong>定义接口</strong>：定义接口中的成员</p><ol><li>JDK 7及以前：只能定义全局常量和抽象方法<ul><li>全局常量：public static final 的。但是书写时，可以省略不写</li><li>抽象方法：public abstract 的</li></ul></li><li>JDK 8：除了定义全局常量和抽象方法之外，还可以定义静态方法、默认方法（略）</li></ol><hr><ol><li><p>接口中不能定义构造器的！意味着接口不可以实例化</p></li><li><p>Java 开发中，接口通过让类去实现（implements）的方式来使用</p><ul><li>如果实现类覆盖了接口中的所抽象方法，则此实现类就可以实例化</li><li>如果实现类没覆盖接口中所的抽象方法，则此实现类仍为一个抽象类</li></ul></li><li><p>Java类可以实现多个接口（弥补了Java单继承性的局限性）</p><ul><li>格式：<code>class AA extends BB implements CC,DD,EE</code></li></ul></li><li><p>接口与接口之间可以继承，而且可以多继承</p></li><li><p>接口的具体使用，体现多态性</p></li><li><p>接口，实际上可以看做是一种规范</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transferData</span><span class="params">(USB usb)</span></span>&#123;<span class="comment">//USB usb = new Flash();</span></span><br><span class="line">usb.start();</span><br><span class="line">System.out.println(<span class="string">"具体传输数据的细节"</span>);</span><br><span class="line">usb.stop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">USB</span></span>&#123;</span><br><span class="line"><span class="comment">//常量：定义了长、宽、最大最小的传输速度等</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flash</span> <span class="keyword">implements</span> <span class="title">USB</span></span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"U盘开启工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"U盘结束工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printer</span> <span class="keyword">implements</span> <span class="title">USB</span></span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"打印机开启工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"打印机结束工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>接口使用上也满足多态性</p></li><li><p>接口，实际上就是定义了一种规范</p></li><li><p>开发中，体会面向接口编程！    </p></li></ul><p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B.png" alt="image-20200910163721358"></p><p>​                                                    我们在应用程序中，调用的结构都是 JDBC 中定义的接口，不会出现具体某一个数据库厂商的 API</p><p><strong>Java8 中关于接口的新规范</strong></p><ol><li><p>接口中定义的静态方法，只能通过接口来调用</p></li><li><p>通过实现类的对象，可以调用接口中的默认方法</p><ul><li>如果实现类重写了接口中的默认方法，调用时，仍然调用的是重写以后的方法</li></ul></li><li><p>如果子类（或实现类）继承的父类和实现的接口中声明了同名同参数的默认方法，那么子类在没重写此方法的情况下，默认调用的是父类中的同名同参数的方法。（<strong>类优先原则</strong>）</p></li><li><p>如果实现类实现了多个接口，而这多个接口中定义了同名同参数的默认方法，那么在实现类没重写此方法的情况下，报错。（ <strong>接口冲突</strong>）这就需要我们必须在实现类中重写此方法</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在子类（或实现类）的方法中调用父类、接口中被重写的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    method3();<span class="comment">//调用自己定义的重写的方法</span></span><br><span class="line">    <span class="keyword">super</span>.method3();<span class="comment">//调用的是父类中声明的</span></span><br><span class="line">    <span class="comment">//调用接口中的默认方法</span></span><br><span class="line">    CompareA.<span class="keyword">super</span>.method3();</span><br><span class="line">    CompareB.<span class="keyword">super</span>.method3();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>面试题</strong></p><p>抽象类和接口的异同？</p><ul><li><p>相同点：不能实例化；都可以包含抽象方法的</p></li><li><p>不同点：</p><ul><li>把抽象类和接口（Java7，Java8，Java9）的定义、内部结构解释说明</li><li>类：单继承性    接口：多继承      类与接口：多实现</li></ul></li></ul><h4 id="7-10-其他"><a href="#7-10-其他" class="headerlink" title="7.10 其他"></a>7.10 其他</h4><p><strong>1）Java 中的 JUnit 单元测试</strong></p><ol><li><p>在当前工程 - 右键选择：build path - add libraries - JUnit 4 - 下一步</p></li><li><p>创建 Java 类，进行单元测试。</p><ul><li>此时的 Java 类要求：① 此类是 public 的  ② 此类提供公共的无参的构造器</li></ul></li><li><p>此类中声明单元测试方法</p><ul><li>此时的单元测试方法：方法的权限是 public，没返回值，没形参</li></ul></li><li><p>此单元测试方法上需要声明注解：@Test，并在单元测试类中导入：import org.junit.Test;</p></li><li><p>声明好单元测试方法以后，就可以在方法体内测试相关的代码。</p></li><li><p>写完代码以后，左键双击单元测试方法名，右键：run as - JUnit Test</p></li></ol><hr><ul><li>如果执行结果没任何异常：绿条</li><li>如果执行结果出现异常：红条</li></ul><p><strong>2）包装类的使用</strong></p><ul><li>为了使基本数据类型的变量具有类的特征，引入包装类。</li></ul><table><thead><tr><th align="center">基本数据类型</th><th align="center">包装类</th></tr></thead><tbody><tr><td align="center">byte</td><td align="center">Byte</td></tr><tr><td align="center">short</td><td align="center">Short</td></tr><tr><td align="center"><strong>int</strong></td><td align="center"><strong>Integer</strong></td></tr><tr><td align="center">long</td><td align="center">Long</td></tr><tr><td align="center">float</td><td align="center">Float</td></tr><tr><td align="center">double</td><td align="center">Double</td></tr><tr><td align="center">boolean</td><td align="center">Boolean</td></tr><tr><td align="center"><strong>char</strong></td><td align="center"><strong>Character</strong></td></tr></tbody></table><ul><li>Number 类为 Byte、Short、Integer、Long、Float、Double 类的父类</li></ul><p><strong>基本数据类型、包装类、String 类型间的转换</strong></p><p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/%E7%B1%BB%E5%9E%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2.png" alt="类型间的转换"></p><ul><li><code>基本数据类型&lt;---&gt;包装类</code>：JDK 5.0 新特性：自动装箱 与 自动拆箱</li><li><code>基本数据类型、包装类 --&gt; String</code>：调用 String 重载的 valueOf(Xxx xxx)</li><li><code>String --&gt; 基本数据类型、包装类</code>：调用包装类的 parseXxx(String s)</li><li><strong>注意</strong>：转换时，可能会报 NumberFormatException</li></ul><p><strong>2）设计模式</strong>（这里介绍了单例模式、模板方法模式、代理模式和工厂模式）</p><ul><li><strong>设计模式</strong>是<strong>在大量的实践中总结和理论化之后优选的代码结构、编程风格、以及解决问题的思考方式</strong> 。 设计模免去我们自己再思考和摸索 。就像是经典的棋谱，不同的棋局，我们用不同的棋谱。“套路”</li><li><strong>常用的设计模式</strong><ul><li><strong>创建型模式</strong>，共5种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式</li><li><strong>结构型模式</strong>，共7种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式</li><li><strong>行为型模式</strong>，共11种：策略模式、模板方法模式、观察者模式、迭代器模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式</li></ul></li></ul><p><strong>① 单例模式</strong>：所谓<strong>类的单例设计模式</strong>，就是采取一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 饿汉式1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span>&#123;</span><br><span class="line"><span class="comment">//1.私化类的构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Bank</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.内部创建类的对象</span></span><br><span class="line"><span class="comment">//4.要求此对象也必须声明为静态的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Bank instance = <span class="keyword">new</span> Bank();</span><br><span class="line"><span class="comment">//3.提供公共的静态的方法，返回类的对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 饿汉式2：使用了静态代码块</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span></span>&#123;</span><br><span class="line"><span class="comment">//1.私化类的构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Order</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.声明当前类对象，没初始化</span></span><br><span class="line"><span class="comment">//4.此对象也必须声明为static的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Order instance = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">instance = <span class="keyword">new</span> Order();</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">//3.声明public、static的返回当前类对象的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Order <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 懒汉式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span></span>&#123;</span><br><span class="line"><span class="comment">//1.私化类的构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Order</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.声明当前类对象，没初始化</span></span><br><span class="line"><span class="comment">//4.此对象也必须声明为static的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Order instance = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">//3.声明public、static的返回当前类对象的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Order <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">instance = <span class="keyword">new</span> Order();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>两种方式的对比</strong></p><ul><li>饿汉式    <ul><li>坏处：对象加载时间过长。</li><li>好处：饿汉式是线程安全的</li></ul></li><li>懒汉式<ul><li>好处：延迟对象的创建。</li><li>目前的写法坏处：线程不安全。—&gt;到多线程内容时，再修改</li></ul></li></ul><p><strong>② 模板方法模式</strong>：在软件开发中实现一个算法时，整体步骤很固定、通用，这些步骤已经在父类中写好了。但是某些部分易变，易变部分可以抽象出来，供不同子类实现。这就是一种模板模式。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span></span>&#123;</span><br><span class="line"><span class="comment">// 计算某段代码执行所需要花费的时间</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">spendTime</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">this</span>.code();<span class="comment">// 不确定的部分、易变的部分</span></span><br><span class="line"><span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"花费的时间为："</span> + (end - start));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubTemplate</span> <span class="keyword">extends</span> <span class="title">Template</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>;i &lt;= <span class="number">1000</span>;i++)&#123;</span><br><span class="line"><span class="keyword">boolean</span> isFlag = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>;j &lt;= Math.sqrt(i);j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i % j == <span class="number">0</span>)&#123;</span><br><span class="line">isFlag = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(isFlag)&#123;</span><br><span class="line">System.out.println(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>应用场景</strong> – 模板方法设计模式是编程中经常用得到的模式。各个框架、类库中都有他的影子，比如常见的有：</p><ul><li><p>数据库访问的封装</p></li><li><p>Junit 单元测试</p></li><li><p>JavaWeb 的 Servlet 中关于 doGet/doPost 方法调用</p></li><li><p>Hibernate 中模板程序</p></li><li><p>Spring 中 JDBCTemlate、Hibernate Template 等</p></li></ul><p><strong>③ 代理模式</strong>是Java开发中使用较多的一种设计模式。代理设计就是为其他对象提供一种代理以控制对这个对象的访问 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">NetWork</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">browse</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Server</span> <span class="keyword">implements</span> <span class="title">NetWork</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">browse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"真实的服务器访问网络"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyServer</span> <span class="keyword">implements</span> <span class="title">NetWork</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> NetWork work;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ProxyServer</span><span class="params">(NetWork work)</span></span>&#123;</span><br><span class="line"><span class="keyword">this</span>.work = work;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"联网之前的检查工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">browse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">check();</span><br><span class="line"></span><br><span class="line">work.browse();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>应用场景</strong></p><ul><li><p>安全代理：屏蔽对真实角色的直接访问</p></li><li><p>远程代理：通过代理类处理远程方法调用（RMl）</p></li><li><p>延迟加载：先加载轻量级的代理对象，真正需要再加载真实对象</p></li><li><p>比如：你要开发一个大文档查看软件，大文档中有大的图片，有可能一个图片有 100MB，在打开文件时，不可能将所有的图片都显示出来，这样就可以使用代理模式，当需要查看图片时，用 proxy 来进行大图片的打开。</p></li></ul><p><strong>分类</strong></p><ul><li><p>静态代理（静态定义代理类）</p></li><li><p>动态代理（动态生成代理类），JDK 自带的动态代理，需要反射等知识</p></li></ul><p><strong>④ 工厂模式</strong>：实现了创建者与调用者的分离，即将创建对象的具体过程屏蔽隔离起来，达到提高灵活性的目的</p><ul><li>简单工厂模式：用来生产同一等级结构中的任意产品。（对于增加新的产品，需要修改已有代码）</li><li>工厂方法模式：用来生产同一等级结构中的固定产品。（支持增加任意产品)</li><li>抽象工厂模式：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族)</li></ul><h3 id="第8章-异常处理"><a href="#第8章-异常处理" class="headerlink" title="第8章 异常处理"></a>第8章 异常处理</h3><p><strong>知识点</strong>：异常的体系结构、异常处理、手动抛出异常、自定义异常类</p><h4 id="8-1-异常的体系结构"><a href="#8-1-异常的体系结构" class="headerlink" title="8.1 异常的体系结构"></a>8.1 异常的体系结构</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Throwable</span><br><span class="line"> |-----java.lang.Error: 一般不编写针对性的代码进行处理</span><br><span class="line"> |-----java.lang.Exception: 可以进行异常的处理</span><br><span class="line">|------编译时异常(checked)</span><br><span class="line">|------运行时异常(unchecked, RuntimeException)</span><br></pre></td></tr></table></figure><p><strong>1）分类</strong></p><p>从程序执行过程看分为<strong>编译时异常</strong>和<strong>运行时异常</strong></p><ul><li><p>编译时异常：执行<code>javac.exe</code>命名时，可能出现的异常</p></li><li><p>运行时异常：执行<code>java.exe</code>命名时，出现的异常</p></li></ul><p><strong>2）常见的异常类型</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NullPointerException 空指针异常</span><br><span class="line">ArrayIndexOutOfBoundsException 数组角标越界异常</span><br><span class="line">ClassCastException 类型转换异常</span><br><span class="line">NumberFormatException 数字格式异常</span><br><span class="line">InputMismatchException 输入类型不匹配异常</span><br><span class="line">ArithmeticException 算数异常</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见的异常类型，请举例说明：</span></span><br><span class="line"><span class="comment">//******************以下是运行时异常***************************</span></span><br><span class="line"><span class="comment">// ArithmeticException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">System.out.println(a / b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// InputMismatchException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span></span>&#123;</span><br><span class="line">Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"><span class="keyword">int</span> score = scanner.nextInt();</span><br><span class="line">System.out.println(score);</span><br><span class="line"></span><br><span class="line">scanner.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//NumberFormatException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">String str = <span class="string">"123"</span>;</span><br><span class="line">str = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">int</span> num = Integer.parseInt(str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ClassCastException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">Object obj = <span class="keyword">new</span> Date();</span><br><span class="line">String str = (String)obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//IndexOutOfBoundsException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//ArrayIndexOutOfBoundsException</span></span><br><span class="line"><span class="comment">//int[] arr = new int[10];</span></span><br><span class="line"><span class="comment">//System.out.println(arr[10]);</span></span><br><span class="line"><span class="comment">//StringIndexOutOfBoundsException</span></span><br><span class="line">String str = <span class="string">"abc"</span>;</span><br><span class="line">System.out.println(str.charAt(<span class="number">3</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//NullPointerException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int[] arr = null;</span></span><br><span class="line"><span class="comment">//System.out.println(arr[3]);</span></span><br><span class="line"></span><br><span class="line">String str = <span class="string">"abc"</span>;</span><br><span class="line">str = <span class="keyword">null</span>;</span><br><span class="line">System.out.println(str.charAt(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//******************以下是编译时异常***************************</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//File file = new File("hello.txt");</span></span><br><span class="line"><span class="comment">//FileInputStream fis = new FileInputStream(file);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//int data = fis.read();</span></span><br><span class="line"><span class="comment">//while(data != -1)&#123;</span></span><br><span class="line"><span class="comment">//System.out.print((char)data);</span></span><br><span class="line"><span class="comment">//data = fis.read();</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//fis.close();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-2-异常处理"><a href="#8-2-异常处理" class="headerlink" title="8.2 异常处理"></a>8.2 异常处理</h4><p><strong>1）Java异常处理的抓抛模型</strong></p><p><strong>过程一：”抛”</strong></p><ul><li><p>程序在正常执行的过程中，<strong>一旦</strong>出现异常，就会在异常代码处<strong>生成一个对应异常类的对象</strong>，并将此对象抛出。<strong>一旦</strong>抛出对象以后，其后的代码就不再执行</p></li><li><p>关于异常对象的产生：</p><ul><li>系统自动生成的异常对象</li><li>手动的生成一个异常对象，并抛出（throw）</li></ul></li></ul><p><strong>过程二：”抓”</strong></p><ul><li>可以理解为异常的处理方式：<ol><li>try-catch-finally  </li><li>throws</li></ol></li></ul><p><strong>2）异常处理方式一</strong>：try-catch-finally</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 语法格式</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">//可能出现异常的代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">1</span> 变量名<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">//处理异常的方式1</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">2</span> 变量名<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="comment">//处理异常的方式2</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">3</span> 变量名<span class="number">3</span>)&#123;</span><br><span class="line">    <span class="comment">//处理异常的方式3</span></span><br><span class="line">&#125;</span><br><span class="line">....</span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="comment">//一定会执行的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>finally</code> 是可选的。</p></li><li><p>使用 <code>try</code> 将可能出现异常代码包装起来，在执行过程中，一旦出现异常，就会生成一个对应异常类的对象，根据此对象的类型，去 <code>catch</code> 中进行匹配</p></li><li><p>一旦 <code>try</code> 中的异常对象匹配到某一个 <code>catch</code> 时，就进入 <code>catch</code> 中进行异常的处理。一旦处理完成，就跳出当前的 <code>try-catch</code> 结构（在没写 <code>finally</code> 的情况），继续执行其后的代码</p></li><li><p><code>catch</code> 中的异常类型如果没子父类关系，则谁声明在上，谁声明在下无所谓；<code>catch</code> 中的异常类型如果满足子父类关系，则要求子类一定声明在父类的上面。否则，将会报错</p></li><li><p>常用的异常对象处理的方式：① String  getMessage()；② printStackTrace()</p></li><li><p>在 <code>try</code> 结构中声明的变量，再出了 <code>try</code> 结构以后，就不能再被调用</p></li><li><p><code>try-catch-finally</code> 结构可以嵌套</p></li></ul><p><strong>总结</strong></p><p><strong>如何看待代码中的编译时异常和运行时异常？</strong></p><ul><li><p>使用 <code>try-catch-finally</code> 处理编译时异常，是得程序在编译时就不再报错，但是运行时仍可能报错。相当于我们使用 <code>try-catch-finally</code> 将一个编译时可能出现的异常，延迟到运行时出现。</p></li><li><p>开发中，由于运行时异常比较常见，所以我们通常就不针对运行时异常编写 <code>try-catch-finally</code> 了。针对于编译时异常，我们一定要考虑异常的处理。</p></li></ul><p><strong>finally 的再说明</strong></p><ul><li><code>finally</code>是可选的</li><li><code>finally</code> 中声明的是一定会被执行的代码。即使 <code>catch</code> 中又出现异常了，<code>try</code> 中 <code>return</code> 语句，<code>catch</code> 中 <code>return</code> 语句等情况</li><li>像数据库连接、输入输出流、网络编程 Socket 等资源，JVM是不能自动的回收的，我们需要自己手动的进行资源的释放。此时的资源释放，就需要声明在 <code>finally</code> 中</li></ul><hr><p><strong>面试题</strong></p><p>结构相似的：</p><ol><li>final、finally、finalize三者的区别？<ul><li>final 是一个修饰符，用于修饰类、方法或者变量。修饰类时，该类不能被继承；修饰方法时，该方法不能被重写；修饰变量时，该变量变为常量，不能二次赋值；修饰静态变量时，必须在声明时同时赋值（显示赋值或者构造器赋值）。不能修饰抽象类和接口。</li><li>finally 只能用于 try-catch-finally 结构。finally 语句块中的语句是一定会被执行的，并且会在 return，continue，break 关键字之前执行。在数据库连接、处理输入输出流时，一般都在 finally 中写释放资源的代码。</li><li>finalize 是一个方法，属于 java.lang.Object 类。这个方法由 System.gc() 启动，该对象被回收的时候被调用。一个对象的 finalize() 方法只会被调用一次，而且 finalize() 被调用不意味着 GC 会立即回收该对象</li></ul></li><li>throw 和 throws<ul><li>throw 表示抛出一个异常类的对象，生成异常对象的过程。声明在方法体内</li><li>throws 属于异常处理的一种方式，声明在方法的声明处</li></ul></li><li>Collection 和 Collections</li><li>String 、StringBuffer、StringBuilder</li><li>ArrayList 、 LinkedList</li><li>HashMap 、LinkedHashMap</li><li>重写、重载</li></ol><p>结构不相似的：</p><ol><li>抽象类、接口</li><li>== 、 equals()</li><li>sleep()、wait()</li></ol><p><strong>3）异常处理方式二</strong></p><ul><li><p>“throws + 异常类型”写在方法的声明处。指明此方法执行时，可能会抛出的异常类型</p></li><li><p>一旦当方法体执行时，出现异常，仍会在异常代码处生成一个异常类的对象，此对象满足 throws 后异常类型时，就会被抛出。异常代码后续的代码，就不再执行！</p></li></ul><p><strong>对比两种处理方式</strong></p><ul><li><p>try-catch-finally：真正的将异常给处理掉了</p></li><li><p>throws 的方式只是将异常抛给了方法的调用者。并没真正将异常处理掉</p></li></ul><p><strong>体会开发中应该如何选择两种处理方式？</strong></p><ul><li><p>如果父类中被重写的方法没使用 throws 方式处理异常，则子类重写的方法也不能使用 throws，意味着如果子类重写的方法中异常，必须使用 try-catch-finally 方式处理</p></li><li><p>执行的方法 a 中，先后又调用了另外的几个方法，这几个方法是递进关系执行的。我们建议这几个方法使用 throws 的方式进行处理。而执行的方法 a 可以考虑使用 try-catch-finally 方式进行处理</p></li></ul><blockquote><p>方法重写的规则之一：子类重写的方法抛出的异常类型<strong>不大于</strong>父类被重写的方法抛出的异常类型</p></blockquote><h4 id="8-3-手动抛出异常"><a href="#8-3-手动抛出异常" class="headerlink" title="8.3 手动抛出异常"></a>8.3 手动抛出异常</h4><p>在程序执行中，除了自动抛出异常对象的情况之外，我们还可以手动的 throw 一个异常类的对象。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(id &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//手动抛出异常对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//throw new RuntimeException("您输入的数据非法！");</span></span><br><span class="line"><span class="comment">//throw new Exception("您输入的数据非法！");</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"不能输入负数"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Student [id="</span> + id + <span class="string">"]"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-4-自定义异常类"><a href="#8-4-自定义异常类" class="headerlink" title="8.4 自定义异常类"></a>8.4 自定义异常类</h4><ol><li><p>继承于现的异常结构：RuntimeException 、Exception</p></li><li><p>提供全局常量：serialVersionUID</p></li><li><p>提供重载的构造器</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">7034897193246939L</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line"><span class="keyword">super</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第二部分-Java-高级编程"><a href="#第二部分-Java-高级编程" class="headerlink" title="第二部分 Java 高级编程"></a>第二部分 Java 高级编程</h2><h3 id="第9章-多线程"><a href="#第9章-多线程" class="headerlink" title="第9章 多线程"></a>第9章 多线程</h3><h4 id="9-1-基本概念"><a href="#9-1-基本概念" class="headerlink" title="9.1 基本概念"></a>9.1 基本概念</h4><ul><li><p><strong>程序（Program）</strong>：为完成特定任务、用某种语言编写的一组指令的集合。即指一段静态的代码。</p></li><li><p><strong>进程（Process）</strong>：程序的一次执行过程，或是正在运行的一个程序。（<strong>进程作为资源分配的单位</strong>，系统在运行时会为每个进程分配不同的内存区域）</p></li><li><p><strong>线程（Thread）</strong>：进程可进一步细化为线程，是一个程序内部的一条执行路径。（线程作为调度和执行的单位，每个线程拥独立的运行栈和程序计数器（PC），线程切换的开销小）</p></li><li><p><strong>并行（Parallelism）</strong>：多个 CPU 同时执行多个任务。比如：多个人同时做不同的事。</p></li><li><p><strong>并发（Concurrency）</strong>：一个 CPU（采用时间片）同时执行多个任务。比如：秒杀、多个人做同一件事。</p></li></ul><h4 id="9-2-创建多线程的四种方式"><a href="#9-2-创建多线程的四种方式" class="headerlink" title="9.2 创建多线程的四种方式"></a>9.2 创建多线程的四种方式</h4><h5 id="9-2-1-继承-Thread-类"><a href="#9-2-1-继承-Thread-类" class="headerlink" title="9.2.1 继承 Thread 类"></a>9.2.1 继承 Thread 类</h5><ol><li>创建一个继承于 Thread 类的子类<ol start="2"><li>重写 Thread 类的 run()，并将此线程执行的操作声明在 run() 中</li><li>创建 Thread 类的子类的对象</li><li>通过此对象调用 start()：① 启动当前线程 ② 调用当前线程的 run()<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个继承于Thread类的子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 2. 重写Thread类的run() --&gt; 将此线程执行的操作声明在run()中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">": "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewThread_1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 3. 创建Thread类的子类的对象</span></span><br><span class="line">        MyThread myThread = <span class="keyword">new</span> MyThread();</span><br><span class="line">        <span class="comment">// 4. 通过此对象调用start()：①启动当前线程 ② 调用当前线程的run()</span></span><br><span class="line">        myThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><blockquote><p>启动一个线程，必须调用 start()，不能调用 run() 的方式启动线程。</p><p>如果再启动一个线程，必须重新创建一个Thread 子类的对象，调用此对象的 start()。</p></blockquote><h5 id="9-2-2-实现-Runnable-接口"><a href="#9-2-2-实现-Runnable-接口" class="headerlink" title="9.2.2 实现 Runnable 接口"></a>9.2.2 实现 Runnable 接口</h5><ol><li>创建一个实现了 Runnable 接口的类。<ol start="2"><li>实现类去实现 Runnable 中的抽象方法 run()。</li><li>创建实现类的对象。</li><li>将此对象作为参数传递到 Thread 类的构造器中，创建 Thread 类的对象。</li><li>通过 Thread 类的对象调用 start()。</li></ol></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个实现了Runnable接口的类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 2. 实现类去实现Runnable中的抽象方法：run()</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">": "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewThread_2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 3. 创建实现类的对象</span></span><br><span class="line">        HelloThread thread = <span class="keyword">new</span> HelloThread();</span><br><span class="line">        <span class="comment">// 4. 将此对象作为参数传递到Thread类的构造器中，创建Thread类的对象</span></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(thread);</span><br><span class="line">        <span class="comment">// 5. 通过Thread类的对象调用start()</span></span><br><span class="line">        thread1.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>两种方式的对比</strong></p><p>开发中：优先选择<strong>实现 Runnable 接口</strong>的方式</p><p>原因：① 实现的方式没类的单继承性的局限性</p><p>​           ② 实现的方式更适合来处理多个线程共享数据的情况。</p><p>联系：public class Thread implements Runnable</p><p>相同点：两种方式都需要重写 run()，将线程要执行的逻辑声明在 run() 中。</p><p>​              目前两种方式，要想启动线程，都是调用的 Thread 类中的 start()。</p></blockquote><h5 id="9-2-3-实现-Callable-接口-（JDK-5-0-新增）"><a href="#9-2-3-实现-Callable-接口-（JDK-5-0-新增）" class="headerlink" title="9.2.3 实现 Callable 接口 （JDK 5.0 新增）"></a>9.2.3 实现 Callable 接口 （JDK 5.0 新增）</h5><ol><li>创建一个实现 Callable 的实现类。</li><li>实现 call() 方法，将此线程需要执行的操作声明在 call() 中。</li><li>创建 Callable 接口实现类的对象。</li><li>将此 Callable 接口实现类的对象作为传递到 FutureTask 构造器中，创建 FutureTask 的对象。</li><li>将 FutureTask 的对象作为参数传递到 Thread 类的构造器中，创建 Thread 对象，并调用 start()。</li><li>获取 Callable 中 call() 方法的返回值。</li></ol><p>![FutureTask](C:\Dvenotes== Java 学习路线  ==\image\FutureTask.png)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FutureTask 类的构造器方法</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Creates a &#123;<span class="doctag">@code</span> FutureTask&#125; that will, upon running, execute the given &#123;<span class="doctag">@code</span> Callable&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  callable the callable task</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if the callable is null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">FutureTask</span><span class="params">(Callable&lt;V&gt; callable)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (callable == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    <span class="keyword">this</span>.callable = callable;</span><br><span class="line">    <span class="keyword">this</span>.state = NEW;       <span class="comment">// ensure visibility of callable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建一个实现Callable的实现类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumThread</span> <span class="keyword">implements</span> <span class="title">Callable</span></span>&#123;</span><br><span class="line">    <span class="comment">// 2.实现call方法，将此线程需要执行的操作声明在call()中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">                sum += i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadNew</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 3.创建Callable接口实现类的对象</span></span><br><span class="line">        NumThread numThread = <span class="keyword">new</span> NumThread();</span><br><span class="line">        <span class="comment">// 4.将此Callable接口实现类的对象作为传递到FutureTask构造器中，创建FutureTask的对象</span></span><br><span class="line">        FutureTask futureTask = <span class="keyword">new</span> FutureTask(numThread);</span><br><span class="line">        <span class="comment">// 5.将FutureTask的对象作为参数传递到Thread类的构造器中，创建Thread对象，并调用start()</span></span><br><span class="line">        <span class="keyword">new</span> Thread(futureTask).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 6.获取Callable中call方法的返回值</span></span><br><span class="line">            <span class="comment">// get()返回值即为FutureTask构造器参数Callable实现类重写的call()的返回值。</span></span><br><span class="line">            Object sum = futureTask.get();</span><br><span class="line">            System.out.println(<span class="string">"总和为："</span> + sum);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>如何理解实现 Callable 接口的方式创建多线程比实现 Runnable 接口创建多线程方式强大？</strong></p><ol><li>call() 可以返回值的。</li><li>call() 可以抛出异常，被外面的操作捕获，获取异常的信息。</li><li>Callable 是支持泛型的。</li></ol><h5 id="9-2-4-使用线程池（JDK-5-0-新增）"><a href="#9-2-4-使用线程池（JDK-5-0-新增）" class="headerlink" title="9.2.4 使用线程池（JDK 5.0 新增）"></a>9.2.4 使用线程池（JDK 5.0 新增）</h5><ol><li>提供指定线程数量的线程池。</li><li>执行指定的线程的操作。需要提供实现 Runnable 接口或 Callable 接口实现类的对象。</li><li>关闭连接池。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumberThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;= <span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">": "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumberThread1</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;= <span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">": "</span> + i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadPool</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. 提供指定线程数量的线程池</span></span><br><span class="line">        ExecutorService service = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        ThreadPoolExecutor service1 = (ThreadPoolExecutor) service;</span><br><span class="line">        <span class="comment">//设置线程池的属性</span></span><br><span class="line"><span class="comment">//        System.out.println(service.getClass());</span></span><br><span class="line"><span class="comment">//        service1.setCorePoolSize(15);</span></span><br><span class="line"><span class="comment">//        service1.setKeepAliveTime();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.执行指定的线程的操作。需要提供实现Runnable接口或Callable接口实现类的对象</span></span><br><span class="line">        service.execute(<span class="keyword">new</span> NumberThread());<span class="comment">//适合适用于Runnable</span></span><br><span class="line">        service.execute(<span class="keyword">new</span> NumberThread1());<span class="comment">//适合适用于Runnable</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        service.submit(Callable callable);//适合适用于Callable</span></span><br><span class="line">        <span class="comment">//3.关闭连接池</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>好处</strong></p><ol><li>提高响应速度（减少了创建新线程的时间）</li><li>降低资源消耗（重复利用线程池中线程，不需要每次都创建）</li><li>便于线程管理<ul><li><code>corePoolSize</code>：核心池的大小</li><li><code>maximumPoolSize</code>：最大线程数</li><li><code>keepAliveTime</code>：线程没任务时最多保持多长时间后会终止</li></ul></li></ol><hr><p><strong>面试题</strong></p><ul><li>Java 中多线程的创建有几种方式？<strong>四种</strong>。</li></ul><h4 id="9-3-Thread-类中的常用方法"><a href="#9-3-Thread-类中的常用方法" class="headerlink" title="9.3 Thread 类中的常用方法"></a>9.3 Thread 类中的常用方法</h4><ul><li><p><code>start()</code>：启动当前线程；调用当前线程的 run()</p></li><li><p><code>run()</code>： 通常需要重写 Thread 类中的此方法，将创建的线程要执行的操作声明在此方法中</p></li><li><p><code>currentThread()</code>：静态方法，返回执行当前代码的线程</p></li><li><p><code>getName()</code>：获取当前线程的名字</p></li><li><p><code>setName()</code>：设置当前线程的名字</p></li><li><p><code>yield()</code>：线程让步，释放当前 CPU 的执行权</p></li><li><p><code>join()</code>：在线程 a 中调用线程 b 的 join()，此时线程 a 就进入阻塞状态，直到线程 b 完全执行完以后，线程 a 才结束阻塞状态。</p></li><li><p><del><code>stop()</code>：已过时。当执行此方法时，强制结束当前线程。</del></p></li><li><p><code>sleep(long millitime)</code>：让当前线程“睡眠”指定的 millitime 毫秒。在指定的 millitime 毫秒时间内，当前线程是阻塞状态。</p></li><li><p><code>isAlive()</code>：判断当前线程是否存活</p></li></ul><hr><ol><li><p><strong>线程的优先级</strong></p><ul><li>MAX_PRIORITY：10</li><li>MIN _PRIORITY：1</li><li>NORM_PRIORITY：5  （默认优先级）</li></ul></li><li><p><strong>如何获取和设置当前线程的优先级</strong></p><ul><li><code>getPriority()</code>：获取线程的优先级</li><li><code>setPriority(int p)</code>：设置线程的优先级</li></ul><p><strong>说明</strong>：高优先级的线程要抢占低优先级线程 CPU 的执行权。但是只是<strong>从概率上</strong>讲，高优先级的线程高概率的情况下被执行。并不意味着只当高优先级的线程执行完以后，低优先级的线程才执行。</p><p>线程通信：<code>wait()</code> / <code>notify()</code> / <code>notifyAll()</code>：:此三个方法定义在 Object 类中的。</p></li><li><p><strong>线程的分类</strong>：一种是<strong>守护线程</strong>，一种是<strong>用户线程</strong>。</p></li></ol><h4 id="9-4-线程的生命周期"><a href="#9-4-线程的生命周期" class="headerlink" title="9.4 线程的生命周期"></a>9.4 线程的生命周期</h4><p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/image%5C%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="线程的生命周期"></p><p><strong>说明</strong></p><ol><li><p>生命周期关注两个概念：状态、相应的方法</p></li><li><p>关注：<code>状态 a --&gt; 状态 b</code>哪些方法执行了（回调方法）；某个方法主动调用使<code>状态 a--&gt;状态 b</code></p></li><li><p>阻塞：临时状态，不可以作为最终状态；死亡：最终状态。</p></li></ol><h4 id="9-5-线程的同步机制"><a href="#9-5-线程的同步机制" class="headerlink" title="9.5 线程的同步机制"></a>9.5 线程的同步机制</h4><p>在 Java 中，我们通过<strong>同步机制</strong>，来解决线程的安全问题。</p><h5 id="9-5-1-同步代码块"><a href="#9-5-1-同步代码块" class="headerlink" title="9.5.1 同步代码块"></a>9.5.1 同步代码块</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(同步监视器)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要被同步的代码</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>说明</strong></p><ol><li>操作共享数据的代码，即为需要被同步的代码。不能包含代码多了，也不能包含代码少了。</li><li>共享数据：多个线程共同操作的变量。</li><li>同步监视器，俗称：锁。任何一个类的对象，都可以充当锁。</li></ol><p>要求：多个线程必须要共用同一把锁。</p><ul><li><p>在实现 Runnable 接口创建多线程的方式中，我们可以考虑使用 this 充当同步监视器。</p></li><li><p>在继承 Thread 类创建多线程的方式中，<strong>慎用</strong> this 充当同步监视器，考虑使用当前类充当同步监视器。</p></li></ul><h5 id="9-5-2-同步方法"><a href="#9-5-2-同步方法" class="headerlink" title="9.5.2 同步方法"></a>9.5.2 同步方法</h5><p>如果操作共享数据的代码完整的声明在一个方法中，我们不妨将此方法声明同步的。（用 <strong><code>synchronized</code></strong> 修饰方法）</p><ol><li>同步方法仍然涉及到同步监视器，只是不需要我们显式的声明。</li><li>非静态的同步方法，同步监视器是：this</li><li>静态的同步方法，同步监视器是：当前类本身</li></ol><h5 id="9-5-3-Lock-锁（JDK-5-0-新增）"><a href="#9-5-3-Lock-锁（JDK-5-0-新增）" class="headerlink" title="9.5.3 Lock 锁（JDK 5.0 新增）"></a>9.5.3 Lock 锁（JDK 5.0 新增）</h5><ol><li>实例化 ReentrantLock</li><li>调用锁定方法 lock()</li><li>调用解锁方法unlock()</li></ol><p><strong>使用的优先顺序</strong></p><p><code>Lock ---&gt; 同步代码块（已经进入了方法体，分配了相应资源 ) ---&gt; 同步方法（在方法体之外)</code></p><p><strong>死锁问题</strong>：不同的线程分别占用对方需要的同步资源不放弃，都在等待对方放弃自己需要的同步资源，就形成了线程的死锁</p><ul><li>出现死锁后，不会出现异常，不会出现提示，只是所的线程都处于阻塞状态，无法继续</li><li>在使用同步时，要避免出现死锁。</li></ul><p><strong>解决方法</strong>：① 专门的算法、原则；② 尽量减少同步资源的定义</p><hr><p><strong>面试题</strong></p><p>Java是如何解决线程安全问题的，有几种方式？并对比几种方式的不同</p><ul><li>使用同步机制来解决线程安全问题</li><li>共有三种方式</li></ul><p>synchronized 和 Lock 方式解决线程安全问题的对比（synchronized 与 Lock 的异同？）</p><ul><li><p>相同：二者都可以解决线程安全问题</p></li><li><p>不同：synchronized 机制在执行完相应的同步代码以后，自动的释放同步监视器</p><p>​           Lock 需要手动的启动同步（lock()，同时结束同步也需要手动的实现（unlock()）</p></li></ul><p><strong>利弊</strong>：同步的方式，<strong>解决了线程的安全问题</strong>。操作同步代码时，只能一个线程参与，其他线程等待。相当于是一个单线程的过程，<strong>效率低</strong>。</p><h4 id="9-6-线程通信"><a href="#9-6-线程通信" class="headerlink" title="9.6 线程通信"></a>9.6 线程通信</h4><p><strong>1）线程通信涉及到的三个方法</strong></p><ul><li><p><code>wait()</code>：一旦执行此方法，当前线程就进入<strong>阻塞状态</strong>，并释放同步监视器。</p></li><li><p><code>notify()</code>：一旦执行此方法，就会唤醒被 wait 的一个线程。如果有多个线程被 wait，就唤醒优先级高的那个。</p></li><li><p><code>notifyAll()</code>：一旦执行此方法，就会唤醒所有被 wait 的线程。</p></li></ul><p><strong>2）说明</strong></p><ul><li><p>这三个方法必须使用在<strong>同步代码块或同步方法</strong>中。</p></li><li><p>这三个方法的调用者必须是同步代码块或同步方法中的<strong>同步监视器</strong>。否则，会出现 <code>IllegalMonitorStateException</code> 异常</p></li><li><p>这三个方法是定义在 java.lang.Object 类中。</p></li></ul><p><strong>3）会释放锁的操作</strong></p><ol><li>当前线程的同步代码块、同步方法<strong>执行结束</strong>。</li><li>当前线程在同步代码块、同步方法中遇到 break、return <strong>终止</strong>了该代码块、该方法的继续执行。</li><li>当前线程在同步代码块、同步方法中出现了未处理的 Error 或 Exception，导致<strong>异常</strong>结束。</li><li>当前线程在同步代码块、同步方法中执行了线程对象的 <strong>wait()</strong>，当前线程暂停，并释放锁</li></ol><p><strong>4）不会释放锁的操作</strong></p><ol><li><p>线程执行同步代码块或同步方法时，程序调用 Thread.sleep()、Thread.yield() 方法暂停当前线程的执行。</p></li><li><p>线程执行同步代码块时，其他线程调用了该线程的 suspend() 方法将该线程挂起，该线程不会释放锁（同步监视器）。（应尽量避免使用 suspend() 和 resume() 来控制线程。）</p></li></ol><hr><p><strong>面试题</strong></p><p>sleep() 和 wait()的异同？</p><ol><li>相同点：一旦执行方法，都可以使得当前的线程进入阻塞状态。</li><li>不同点：<ul><li>两个方法声明的位置不同：Thread类中声明sleep() , Object类中声明wait()</li><li>调用的要求不同：sleep()可以在任何需要的场景下调用。 wait()必须使用在同步代码块或同步方法中</li><li>关于是否释放同步监视器：如果两个方法都使用在同步代码块或同步方法中，sleep()不会释放锁，wait()会释放锁。</li></ul></li></ol><h3 id="第10章-Java-常用类"><a href="#第10章-Java-常用类" class="headerlink" title="第10章 Java 常用类"></a>第10章 Java 常用类</h3><h4 id="10-1-String-类"><a href="#10-1-String-类" class="headerlink" title="10.1 String 类"></a>10.1 String 类</h4><p><strong>1）概述</strong></p><ul><li><p>String（字符串）使用一对<code>&quot;&quot;</code>引起来表示。</p></li><li><p>String 内部定义了 private final char value[] 用于存储字符串数据；String 声明为 final 的，不可被继承</p></li><li><p>String 实现了 Serializable 接口：表示字符串是支持序列化的；实现了 Comparable 接口：表示 String 可以比较大小。</p></li><li><p>通过字面量的方式（区别于 new 给一个字符串赋值，此时的字符串值声明在字符串常量池中）。</p></li><li><p>字符串常量池中是不会存储相同内容（使用 String 类的 equals() 比较，返回 true）的字符串的。</p></li></ul><p><strong>2）String 的不可变性</strong></p><ul><li>当对字符串重新赋值时，需要重写指定内存区域赋值，不能使用原有的 value 进行赋值。</li><li>当对现的字符串进行连接操作时，也需要重新指定内存区域赋值，不能使用原有的 value 进行赋值。</li><li>当调用 String 的 replace() 方法修改指定字符或字符串时，也需要重新指定内存区域赋值，不能使用原有的 value 进行赋值。</li></ul><p><strong>3）String 实例化的不同方式</strong></p><ul><li><p>方式一：通过字面量定义的方式</p></li><li><p>方式二：通过 new + 构造器的方式</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过字面量定义的方式：此时的 str1 和 str2 的数据 JavaEE 声明在方法区中的字符串常量池中。</span></span><br><span class="line">String str1 = <span class="string">"JavaEE"</span>;</span><br><span class="line">String str2 = <span class="string">"JavaEE"</span>;</span><br><span class="line"><span class="comment">// 通过 new + 构造器的方式:此时的 str3 和 str4 保存的地址值，是数据在堆空间中开辟空间以后对应的地址值。</span></span><br><span class="line">String str3 = <span class="keyword">new</span> String(<span class="string">"JavaEE"</span>);</span><br><span class="line">String str4 = <span class="keyword">new</span> String(<span class="string">"JavaEE"</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(str1 == str2);<span class="comment">// true</span></span><br><span class="line">System.out.println(str1 == str3);<span class="comment">// false</span></span><br><span class="line">System.out.println(str1 == str4);<span class="comment">// false</span></span><br><span class="line">System.out.println(str3 == str4);<span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><strong>面试题</strong></p><p><code>String s = new String(&quot;abc&quot;);</code>方式创建对象，在内存中创建了几个对象？</p><ul><li>两个：一个是堆空间中 new 结构，另一个是 char[] 对应的常量池中的数据：”abc”</li></ul><p><strong>4）字符串拼接方式赋值的对比</strong></p><ol><li><p>常量与常量的拼接结果在<strong>常量池</strong>。且常量池中不会存在相同内容的常量。</p></li><li><p>只要其中一个是变量，结果就在<strong>堆</strong>中。</p></li><li><p>如果拼接的结果调用 <strong>intern()</strong> 方法，返回值就在<strong>常量池</strong>中</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">String s1 = <span class="string">"javaEE"</span>;</span><br><span class="line">String s2 = <span class="string">"hadoop"</span>;</span><br><span class="line"></span><br><span class="line">String s3 = <span class="string">"javaEEhadoop"</span>;</span><br><span class="line">String s4 = <span class="string">"javaEE"</span> + <span class="string">"hadoop"</span>;</span><br><span class="line">String s5 = s1 + <span class="string">"hadoop"</span>;</span><br><span class="line">String s6 = <span class="string">"javaEE"</span> + s2;</span><br><span class="line">String s7 = s1 + s2;</span><br><span class="line"></span><br><span class="line">System.out.println(s3 == s4);<span class="comment">// true</span></span><br><span class="line">System.out.println(s3 == s5);<span class="comment">// false</span></span><br><span class="line">System.out.println(s3 == s6);<span class="comment">// false</span></span><br><span class="line">System.out.println(s3 == s7);<span class="comment">// false</span></span><br><span class="line">System.out.println(s5 == s6);<span class="comment">// false</span></span><br><span class="line">System.out.println(s5 == s7);<span class="comment">// false</span></span><br><span class="line">System.out.println(s6 == s7);<span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">String s8 = s6.intern();<span class="comment">// 返回值得到的 s8 使用的常量值中已经存在的 “javaEEhadoop”</span></span><br><span class="line">System.out.println(s3 == s8);<span class="comment">// true</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String s1 = <span class="string">"javaEEhadoop"</span>;</span><br><span class="line">String s2 = <span class="string">"javaEE"</span>;</span><br><span class="line">String s3 = s2 + <span class="string">"hadoop"</span>;</span><br><span class="line">System.out.println(s1 == s3);<span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> String s4 = <span class="string">"javaEE"</span>;<span class="comment">// s4: 常量</span></span><br><span class="line">String s5 = s4 + <span class="string">"hadoop"</span>;</span><br><span class="line">System.out.println(s1 == s5);<span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><strong>5）常用方法</strong></p><ul><li><p><code>int length()</code>：返回字符串的长度： return value.length</p></li><li><p><code>char charAt(int index)</code>： 返回某索引处的字符 return value[index]</p></li><li><p><code>boolean isEmpty()</code>：判断<strong>是否为空</strong>字符串：return value.length == 0</p></li><li><p><code>String toLowerCase()</code>：使用默认语言环境，将 String 中的所字符<strong>转换为小写</strong></p></li><li><p><code>String toUpperCase()</code>：使用默认语言环境，将 String 中的所字符<strong>转换为大写</strong></p></li><li><p><code>String trim()</code>：返回字符串的副本，忽略前导空白和尾部空白</p></li><li><p><code>boolean equals(Object obj)</code>：比较字符串的<strong>内容</strong>是否相同</p></li><li><p><code>boolean equalsIgnoreCase(String anotherString)</code>：与equals方法类似，忽略大小写</p></li><li><p><code>String concat(String str)</code>：将指定字符串连接到此字符串的结尾。 等价于用 “+”</p></li><li><p><code>int compareTo(String anotherString)</code>：比较两个字符串的大小</p></li><li><p><code>String substring(int beginIndex)</code>：返回一个新的字符串，它是此字符串的从<code>beginIndex</code>开始截取到最后的一个子字符串。</p></li><li><p><code>String substring(int beginIndex, int endIndex)</code>：返回一个新字符串，它是此字符串从<code>beginIndex</code>开始截取到<code>endIndex</code><strong>(不包含)</strong> 的一个子字符串。</p></li><li><p><code>boolean endsWith(String suffix)</code>：测试此字符串是否以指定的<strong>后缀</strong>结束</p></li><li><p><code>boolean startsWith(String prefix)</code>：测试此字符串是否以指定的<strong>前缀</strong>开始</p></li><li><p><code>boolean startsWith(String prefix, int toffset)</code>：测试此字符串从指定索引开始的子字符串是否以指定前缀开始</p></li><li><p><code>boolean contains(CharSequence s)</code>：当且仅当此字符串包含指定的 char 值序列时，返回 true</p></li><li><p><code>int indexOf(String str)</code>：返回指定子字符串在此字符串中第一次出现处的索引</p></li><li><p><code>int indexOf(String str, int fromIndex)</code>：返回指定子字符串在此字符串中第一次出现处的索引，从指定的索引开始</p></li><li><p><code>int lastIndexOf(String str)</code>：返回指定子字符串在此字符串中最右边出现处的索引</p></li><li><p><code>int lastIndexOf(String str, int fromIndex)</code>：返回指定子字符串在此字符串中最后一次出现处的索引，从指定的索引开始反向搜索</p></li><li><p>注：<code>indexOf</code> 和 <code>lastIndexOf</code> 方法如果未找到都是返回 -1</p></li></ul><p><strong>替换：</strong></p><ul><li><p><code>String replace(char oldChar, char newChar)</code>：返回一个新的字符串，它是通过用 newChar 替换此字符串中出现的所 oldChar 得到的。</p></li><li><p><code>String replace(CharSequence target, CharSequence replacement)</code>：使用指定的字面值替换序列替换此字符串所匹配字面值目标序列的子字符串。</p></li><li><p><code>String replaceAll(String regex, String replacement)</code>：使用给定的 replacement 替换此字符串所匹配给定的正则表达式的子字符串。</p></li><li><p><code>String replaceFirst(String regex, String replacement)</code>：使用给定的 replacement 替换此字符串匹配给定的正则表达式的第一个子字符串。</p></li></ul><p><strong>匹配:</strong></p><ul><li><code>boolean matches(String regex)：告知此字符串是否匹配给定的正则表达式。</code></li></ul><p><strong>切片：</strong></p><ul><li><p><code>String[] split(String regex)</code>：根据给定正则表达式的匹配拆分此字符串。</p></li><li><p><code>String[] split(String regex, int limit)</code>：根据匹配给定的正则表达式来拆分此字符串，最多不超过limit个，如果超过了，剩下的全部都放到最后一个元素中。</p></li></ul><p><strong>6）String 与其它结构的转换</strong></p><ul><li><code>String --&gt; 基本数据类型、包装类</code>：调用包装类的<strong>静态方法</strong> parseXxx(str)</li><li><code>基本数据类型、包装类 --&gt; String</code>：调用 String 重载的 valueOf(xxx)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String str1 = <span class="string">"123"</span>;</span><br><span class="line"><span class="keyword">int</span> num = Integer.parseInt(str1);</span><br><span class="line"></span><br><span class="line">String str2 = String.valueOf(num);</span><br><span class="line">String str3 = num + <span class="string">""</span>;</span><br></pre></td></tr></table></figure><ul><li><code>String --&gt; char[]</code>：调用 String 的 toCharArray()</li><li><code>char[] --&gt; String</code>：调用 String 的构造器</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String str1 = <span class="string">"abc123"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>[] charArray = str1.toCharArray();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; charArray.length; i++) &#123;</span><br><span class="line">System.out.println(charArray[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>[] arr = &#123;<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>&#125;;</span><br><span class="line">String str2 = <span class="keyword">new</span> String(arr);</span><br><span class="line">System.out.println(str2);</span><br></pre></td></tr></table></figure><ul><li><p>编码：<code>String --&gt; byte[]</code>：调用 String 的 getBytes()</p></li><li><p>解码：<code>byte[] --&gt; String</code>：调用 String 的构造器</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">String str1 = <span class="string">"abc123中国"</span>;</span><br><span class="line"><span class="keyword">byte</span>[] bytes = str1.getBytes();<span class="comment">// 使用默认的字符集进行编码。</span></span><br><span class="line">System.out.println(Arrays.toString(bytes));</span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span>[] gbks = str1.getBytes(<span class="string">"gbk"</span>);<span class="comment">// 使用gbk字符集进行编码。</span></span><br><span class="line">System.out.println(Arrays.toString(gbks));</span><br><span class="line"></span><br><span class="line">String str2 = <span class="keyword">new</span> String(bytes);<span class="comment">// 使用默认的字符集，进行解码。</span></span><br><span class="line">System.out.println(str2);</span><br><span class="line"></span><br><span class="line">String str3 = <span class="keyword">new</span> String(gbks);</span><br><span class="line">System.out.println(str3);<span class="comment">// 出现乱码。原因：编码集和解码集不一致！</span></span><br><span class="line"></span><br><span class="line">String str4 = <span class="keyword">new</span> String(gbks, <span class="string">"gbk"</span>);</span><br><span class="line">System.out.println(str4);<span class="comment">// 没出现乱码。原因：编码集和解码集一致！</span></span><br></pre></td></tr></table></figure><p>说明：解码时，要求解码使用的字符集必须与编码时使用的<strong>字符集一致</strong>，否则会出现乱码。</p><ul><li><code>String --&gt; StringBuffer、StringBuilder</code>：调用 StringBuffer、StringBuilder 构造器</li><li><code>StringBuffer、StringBuilder --&gt;S tring</code>：① 调用 String 构造器；② StringBuffer、StringBuilder 的 toString()</li></ul><p><strong>7）JVM 中字符串常量池存放位置说明</strong></p><ul><li><p>jdk 1.6：字符串常量池存储在<strong>方法区（永久区）</strong></p></li><li><p>jdk 1.7：字符串常量池存储在<strong>堆空间</strong></p></li><li><p>jdk 1.8：字符串常量池存储在<strong>方法区（元空间）</strong></p></li></ul><p><strong>8）常见算法题目</strong></p><ol><li><p>模拟一个 trim 方法，去除字符串两端的空格。</p></li><li><p>将一个字符串进行反转。将字符串中指定部分进行反转。比如 “abcdefg” 反转为 ”abfedcg”</p></li><li><p>获取一个字符串在另一个字符串中出现的次数。比如：获取 “ab” 在 “abkkcadkabkebfkabkskab” 中出现的次数</p></li><li><p>获取两个字符串中最大相同子串。比如：   str1 = “abcwerthelloyuiodef“，str2 = “cvhellobnm”</p><ul><li>提示：将短的那个串进行长度依次递减的子串与较长的串比较。</li></ul></li><li><p>对字符串中字符进行自然顺序排序。</p><ul><li>提示：字符串变成字符数组；对数组排序，择，冒泡，Arrays.sort()；将排序后的数组变成字符串。</li></ul></li></ol><h4 id="10-2-StringBuffer、StringBuilder-类"><a href="#10-2-StringBuffer、StringBuilder-类" class="headerlink" title="10.2 StringBuffer、StringBuilder 类"></a>10.2 StringBuffer、StringBuilder 类</h4><p><strong>1）String、StringBuffer、StringBuilder 三者的对比</strong></p><ul><li><p>String：<strong>不可变</strong>的字符序列；底层使用 char[] 存储</p></li><li><p>StringBuffer：<strong>可变</strong>的字符序列；<strong>线程安全</strong>的，效率低；底层使用 char[] 存储</p></li><li><p>StringBuilder：<strong>可变</strong>的字符序列；JDK 5.0 新增的，<strong>线程不安全</strong>的，效率高；底层使用 char[] 存储</p></li></ul><p><strong>2）StringBuffer 与 StringBuilder 的内存解析</strong></p><p>以 StringBuffer 为例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">new</span> String();<span class="comment">//char[] value = new char[0];</span></span><br><span class="line">String str1 = <span class="keyword">new</span> String(<span class="string">"abc"</span>);<span class="comment">//char[] value = new char[]&#123;'a','b','c'&#125;;</span></span><br><span class="line"></span><br><span class="line">StringBuffer sb1 = <span class="keyword">new</span> StringBuffer();<span class="comment">//char[] value = new char[16]; 底层创建了一个长度是16的数组。</span></span><br><span class="line">System.out.println(sb1.length());<span class="comment">//</span></span><br><span class="line">sb1.append(<span class="string">'a'</span>);<span class="comment">//value[0] = 'a';</span></span><br><span class="line">sb1.append(<span class="string">'b'</span>);<span class="comment">//value[1] = 'b';</span></span><br><span class="line"></span><br><span class="line">StringBuffer sb2 = <span class="keyword">new</span> StringBuffer(<span class="string">"abc"</span>);<span class="comment">//char[] value = new char["abc".length() + 16];</span></span><br></pre></td></tr></table></figure><p>问题1：<code>System.out.println(sb2.length());</code>// 3</p><p>问题2：扩容问题：如果要添加的数据底层数组盛不下了，那就需要扩容底层的数组。</p><ul><li><p>默认情况下，扩容为原来容量的2倍 + 2，同时将原数组中的元素复制到新的数组中。</p></li><li><p>指导意义：开发中建议大家使用：<code>StringBuffer(int capacity)</code> 或 <code>StringBuilder(int capacity)</code></p></li></ul><p><strong>3）对比String、StringBuffer、StringBuilder 三者的执行效率</strong>从高到低排列：<code>StringBuilder &gt; StringBuffer &gt; String</code></p><p><strong>4）StringBuffer、StringBuilder中的常用方法</strong></p><ul><li><p>增：append(xxx)</p></li><li><p>删：delete(int start,int end)</p></li><li><p>改：setCharAt(int n ,char ch) / replace(int start, int end, String str)</p></li><li><p>查：charAt(int n )</p></li><li><p>插：insert(int offset, xxx)</p></li><li><p>长度：length();</p></li><li><p>遍历：① for() + charAt()；② toString()</p></li></ul><h4 id="10-3-JDK-8-之前的日期时间-API"><a href="#10-3-JDK-8-之前的日期时间-API" class="headerlink" title="10.3 JDK 8 之前的日期时间 API"></a>10.3 JDK 8 之前的日期时间 API</h4><p><strong>1）获取系统当前时间</strong>：System 类中的 <code>currentTimeMillis()</code></p><p><strong>2）java.util.Date 类 与 java.sql.Date 类</strong></p><ul><li>java.sql.Date 类是 java.util.Date 类</li></ul><p><strong>两个构造器的使用</strong></p><ol><li><code>Date()</code>：创建一个对应当前时间的 Date 对象</li><li>创建指定毫秒数的Date对象</li></ol><p><strong>两个方法的使用</strong></p><ol><li><code>toString()</code>：显示当前的年、月、日、时、分、秒</li><li><code>getTime()</code>：获取当前Date对象对应的毫秒数。（时间戳）</li></ol><p><strong>java.sql.Date 对应着数据库中的日期类型的变量</strong></p><ul><li>如何实例化</li><li>如何将 java.util.Date 对象转换为 java.sql.Date 对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dateTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建一个 Date 对象</span></span><br><span class="line">    <span class="comment">// 构造器一</span></span><br><span class="line">    Date date1 = <span class="keyword">new</span> Date();</span><br><span class="line">    System.out.println(date1.toString());</span><br><span class="line">    System.out.println(date1.getTime());</span><br><span class="line">    <span class="comment">// 构造器二</span></span><br><span class="line">    Date date2 = <span class="keyword">new</span> Date(<span class="number">84739232874L</span>);</span><br><span class="line">    System.out.println(date2.toString());</span><br><span class="line">    <span class="comment">// 创建 java.sql.Date 对象</span></span><br><span class="line">    java.sql.Date date3 = <span class="keyword">new</span> java.sql.Date(<span class="number">739742938429L</span>);</span><br><span class="line">    System.out.println(date3);</span><br><span class="line">    <span class="comment">// 将java.util.Date对象转换为java.sql.Date对象</span></span><br><span class="line">    <span class="comment">// 方法一</span></span><br><span class="line">    Date date4 = <span class="keyword">new</span> java.sql.Date(<span class="number">342342342L</span>);</span><br><span class="line">    java.sql.Date date5 = (java.sql.Date)date4;</span><br><span class="line">    <span class="comment">// 方法二</span></span><br><span class="line">    Date date6 = <span class="keyword">new</span> Date();</span><br><span class="line">    java.sql.Date date7 = <span class="keyword">new</span> java.sql.Date(date6.getTime());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3）java.text.SimpleDataFormat类</strong></p><ul><li>对日期 Date 类的格式化和解析</li><li>格式化：<code>日期 --&gt; 字符串</code></li><li>解析：格式化的逆过程，<code>字符串 --&gt; 日期</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">simpleDateFormatTest</span><span class="params">()</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    System.out.println(date);</span><br><span class="line">    <span class="comment">// 格式化</span></span><br><span class="line">    SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</span><br><span class="line">    String format = simpleDateFormat.format(date);</span><br><span class="line">    System.out.println(format);</span><br><span class="line">    <span class="comment">// 解析：要求字符串必须是符合 SimpleDateFormat 识别的格式（通过构造器参数体现），否则，报 java.text.ParseException</span></span><br><span class="line">    Date parse = simpleDateFormat.parse(<span class="string">"2021-02-06 04:39:35"</span>);</span><br><span class="line">    System.out.println(parse);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4）Calendar 类（抽象类）</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calendarTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">java    <span class="comment">// 1.实例化</span></span><br><span class="line">    <span class="comment">// 方法一：创建其子类 GregorianCalendar 的对象</span></span><br><span class="line"><span class="comment">//        GregorianCalendar gregorianCalendar = new GregorianCalendar();</span></span><br><span class="line">    <span class="comment">// 方法二：调用其静态方法 getInstance()</span></span><br><span class="line">    Calendar calendar = Calendar.getInstance();</span><br><span class="line">    <span class="comment">// 2.常用方法</span></span><br><span class="line">    <span class="comment">// get()</span></span><br><span class="line">    <span class="keyword">int</span> days = calendar.get(Calendar.DAY_OF_MONTH);</span><br><span class="line">    System.out.println(days);</span><br><span class="line">    <span class="comment">// set()：Calendar 的可变性</span></span><br><span class="line">    calendar.set(Calendar.DAY_OF_MONTH, <span class="number">23</span>);</span><br><span class="line">    System.out.println(calendar.get(Calendar.DAY_OF_MONTH));</span><br><span class="line">    <span class="comment">// add()</span></span><br><span class="line">    calendar.add(Calendar.DAY_OF_MONTH, -<span class="number">3</span>);</span><br><span class="line">    System.out.println(calendar.get(Calendar.DAY_OF_MONTH));</span><br><span class="line">    <span class="comment">// getTime(): Calendar --&gt; Date</span></span><br><span class="line">    Date date = calendar.getTime();</span><br><span class="line">    System.out.println(date);</span><br><span class="line">    <span class="comment">// setTime(): Date --&gt; Calender</span></span><br><span class="line">    Date now = <span class="keyword">new</span> Date();</span><br><span class="line">    calendar.setTime(now);</span><br><span class="line">    System.out.println(calendar.get(Calendar.DAY_OF_MONTH));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-4-JDK-8-中新时间日期-API"><a href="#10-4-JDK-8-中新时间日期-API" class="headerlink" title="10.4 JDK 8 中新时间日期 API"></a>10.4 JDK 8 中新时间日期 API</h4><p><strong>1）日期时间 API 的迭代</strong></p><ul><li>第一代：JDK 1.0 Date 类</li><li>第二代：JDK 1.1 Calenda r类，一定程度上替换 Date 类</li><li>第三代：JDK 1.8 提出了新的一套 API</li></ul><p><strong>2）前两代存在的问题</strong></p><ul><li>可变性：像日期和时间这样的类应该是不可变的。</li><li>偏移性：Date 中的年份是从1900开始的，而月份都从 0 开始。</li><li>格式化：格式化只对 Date 用，Calendar 则不行。</li><li>不是线程安全的；不能处理闰秒等。</li></ul><p><strong>3）新的日期时间 API 涉及到的包</strong></p><ul><li><strong>java.time</strong>：包含值对象的基础包</li><li>java.time.chrono：提供对不同的日历系统的访问</li><li><strong>java.time.format</strong>：格式化和解析时间和日期</li><li>java.time.temporal：包括底层框架和扩展特性</li><li>java.time.zone：包含时区支持的类</li></ul><p><strong>4）本地日期（LocalDate ）、本地时间（LocalTime）、本地日期时间（LocalDateTime）的使用</strong></p><h4 id="10-5-Java-比较器"><a href="#10-5-Java-比较器" class="headerlink" title="10.5 Java 比较器"></a>10.5 Java 比较器</h4><p>Java 中的对象，正常情况下，只能进行比较：==  或  != 。不能使用 &gt; 或 &lt; 的。但是，在开发场景中，我们需要对多个对象进行排序，言外之意，就需要比较对象的大小。使用两个接口中的任何一个：Comparable 或 Comparator</p><p><strong>1）自然排序：使用 Comparable 接口</strong></p><ol><li>像 String、包装类等实现了 Comparable 接口，重写了 compareTo(obj) 方法，给出了比较两个对象大小的方式，进行了从小到大的排列。</li><li>重写 compareTo(obj) 的<strong>规则</strong>：<ul><li>如果当前对象 this 大于形参对象 obj，则返回正整数；</li><li>如果当前对象 this 小于形参对象 obj，则返回负整数；</li><li>如果当前对象 this 等于形参对象 obj，则返回 0。</li></ul></li><li>对于自定义类来说，如果需要排序，我们可以让自定义类实现 Comparable 接口，重写 compareTo(obj) 方法，在 compareTo(obj) 方法中指明如何排序</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Goods</span> <span class="keyword">implements</span> <span class="title">Comparable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Goods) &#123;</span><br><span class="line">            Goods goods = (Goods)o;</span><br><span class="line">            <span class="comment">// 方法一</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.price &gt; goods.price) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.price &lt; goods.price) &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//                return 0;</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.name.compareTo(goods.name);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 方法二</span></span><br><span class="line"><span class="comment">//            return Double.compare(this.price, goods.price);</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"传入数据类型不一致！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// getter、setter、toString()、构造器：省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）定制排序：使用 Comparator 接口</strong></p><ol><li>当元素的类型没实现 java.lang.Comparable 接口而又不方便修改代码，或者实现了 java.lang.Comparable 接口的排序规则不适合当前的操作，那么可以考虑使用 Comparator 的对象来排序</li><li>重写 compare(Object o1, Object o2) 方法，比较 o1 和 o2 的大小：<ul><li>如果方法返回正整数，表示 o1 大于 o2；</li><li>如果方法返回负整数，表示 o1 小于 o2；</li><li>如果方法返回 0，表示相等。</li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Goods&gt; goods = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    goods.add(<span class="keyword">new</span> Goods(<span class="string">"rice"</span>, <span class="number">34</span>));</span><br><span class="line">    goods.add(<span class="keyword">new</span> Goods(<span class="string">"apple"</span>, <span class="number">5</span>));</span><br><span class="line">    goods.add(<span class="keyword">new</span> Goods(<span class="string">"meat"</span>, <span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//        Comparator comparator = new Comparator() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public int compare(Object o1, Object o2) &#123;</span></span><br><span class="line"><span class="comment">//                if (o1 instanceof Goods &amp;&amp; o2 instanceof Goods) &#123;</span></span><br><span class="line"><span class="comment">//                    Goods g1 = (Goods)o1;</span></span><br><span class="line"><span class="comment">//                    Goods g2 = (Goods)o2;</span></span><br><span class="line"><span class="comment">//                    if (g1.getName().equals(g2.getName())) &#123;</span></span><br><span class="line"><span class="comment">//                        return Double.compare(g1.getPrice(), g2.getPrice());</span></span><br><span class="line"><span class="comment">//                    &#125; else &#123;</span></span><br><span class="line"><span class="comment">//                        return g1.getName().compareTo(g2.getName());</span></span><br><span class="line"><span class="comment">//                    &#125;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                throw new RuntimeException("输入的数据类型不一致！");</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;;</span></span><br><span class="line"></span><br><span class="line">    Comparator comparator = (o1, o2) -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (o1 <span class="keyword">instanceof</span> Goods &amp;&amp; o2 <span class="keyword">instanceof</span> Goods) &#123;</span><br><span class="line">            Goods g1 = (Goods)o1;</span><br><span class="line">            Goods g2 = (Goods)o2;</span><br><span class="line">            <span class="keyword">if</span> (g1.getName().equals(g2.getName())) &#123;</span><br><span class="line">                <span class="keyword">return</span> Double.compare(g1.getPrice(), g2.getPrice());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> g1.getName().compareTo(g2.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的数据类型不一致！"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用</span></span><br><span class="line">    Arrays.sort(goods.toArray(), comparator);</span><br><span class="line">    Collections.sort(goods, comparator);</span><br><span class="line">    Set&lt;Goods&gt; set = <span class="keyword">new</span> TreeSet&lt;Goods&gt;(comparator);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="10-6-其他"><a href="#10-6-其他" class="headerlink" title="10.6 其他"></a>10.6 其他</h4><p><strong>1）System 类</strong></p><ul><li>System 类代表系统，系统级的很多属性和控制方法都放置在该类的内部。该类位于 java.lang 包。</li><li>由于该类的构造器是 private 的，所以无法创建该类的对象，也就是无法实例化该类。其内部的成员变量和成员方法都是 static 的，所以也可以很方便的进行调用。</li><li>方法：<ul><li><code>native long currentTimeMillis()</code></li><li><code>void exit(int status)</code></li><li><code>void gc()</code></li><li><code>String getProperty(String key)</code></li></ul></li></ul><p><strong>2）Math类</strong></p><ul><li>java.lang.Math 提供了一系列静态方法用于科学计算。其方法的参数和返回值类型一般为 double 型。</li></ul><p><strong>3）BigInteger 类、BigDecimal 类</strong></p><ul><li>java.math 包的 BigInteger 可以表示不可变的任意精度的整数。</li><li>要求数字精度比较高，用到 java.math.BigDecimal 类</li></ul><h3 id="第11章-Java-集合"><a href="#第11章-Java-集合" class="headerlink" title="第11章 Java 集合"></a>第11章 Java 集合</h3><h4 id="11-1-数组和集合"><a href="#11-1-数组和集合" class="headerlink" title="11.1 数组和集合"></a>11.1 数组和集合</h4><p><strong>1）集合与数组存储数据概述</strong></p><ul><li><p>集合、数组都是对多个数据进行存储操作的结构，简称 <strong>Java 容器</strong>。</p></li><li><p>说明：此时的存储，主要指的是内存层面的存储，不涉及到持久化的存储（.txt，.jpg，.avi，数据库中)</p></li></ul><p><strong>2）数组存储的特点</strong></p><ul><li>数组一旦初始化以后，其长度就确定了。一旦定义好，其元素的类型也就确定了，只能操作指定类型的数据了。</li></ul><p><strong>3）数组存储的弊端</strong></p><ol><li>一旦初始化以后，其长度就不可修改。</li><li>数组中提供的方法非常有限，对于添加、删除、插入数据等操作，非常不便，同时效率不高。</li><li>获取数组中实际元素的个数的需求，数组没有现成的属性或方法可用。</li><li>数组存储数据的特点：有序、可重复。对于无序、不可重复的需求，不能满足。</li></ol><p><strong>4）集合存储的优点</strong></p><ul><li>解决数组存储数据方面的弊端。</li></ul><h4 id="11-2-Collection-接口"><a href="#11-2-Collection-接口" class="headerlink" title="11.2 Collection 接口"></a>11.2 Collection 接口</h4><p><strong>1）集合框架结构</strong></p><p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/image%5CJava%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.gif" alt="集合框架"></p><p><strong>2）Collection 接口常用方法</strong></p><ul><li><code>add(Object obj)</code>：添加一个元素</li><li><code>addAll(Collection coll)</code>：添加集合元素</li><li><code>size()</code>：集合元素个数</li><li><code>isEmpty()</code>：是否为空</li><li><code>clear()</code>：清空</li><li><code>contains(Object obj)</code>：是否包含某个元素</li><li><code>containsAll(Collection coll)</code>：是否包含某个集合元素</li><li><code>remove(Object obj)</code>：删除某个元素</li><li><code>removeAll(Collection coll)</code>：删除所有属于某个集合中的元素</li><li><code>retainsAll(Collection coll)</code>：删除所有不属于某集合中的元素</li><li><code>equals(Object obj)</code>：是否相等</li><li><code>toArray()</code>：转换为数组</li><li><code>iterator()</code>：生成迭代器</li></ul><p><strong>3）Collection 集合与数组间的转换</strong></p><ul><li><code>集合 ---&gt; 数组：toArray()</code></li><li><code>数组 ---&gt; 集合：调用 Arrays 类的静态方法 asList(T ... t)</code></li></ul><p><strong>使用 Collection 集合存储对象，要求对象所属的类满足：向 Collection 接口的实现类的对象中添加数据 obj 时，要求 obj 所在类要重写 equals()。</strong></p><p><strong>要求</strong></p><ul><li><p>层次一：选择合适的集合类去实现数据的保存，调用其内部的相关方法。</p></li><li><p>层次二：不同的集合类底层的数据结构为何？如何实现数据的操作的：增删改查等。</p></li></ul><h4 id="11-3-Iterator-接口"><a href="#11-3-Iterator-接口" class="headerlink" title="11.3 Iterator 接口"></a>11.3 Iterator 接口</h4><p><strong>1）遍历 Collection 的两种方式</strong></p><ul><li>使用迭代器 Iterator</li><li>使用 foreach 循环（增强 for 循环）</li></ul><p><strong>2）迭代器接口 Iterator</strong></p><ul><li>java.utils 包下定义的迭代器接口：Iterator</li><li>Iterator 对象称为迭代器（设计模式的一种），主要用于<strong>遍历 Collection 集合中的元素</strong>（作用）</li><li>方法<ul><li><code>hasNext()</code>：判断是否还下一个元素</li><li><code>next()</code>：① 指针下移 ② 将下移以后集合位置上的元素返回</li><li><code>remove()</code>：删除集合中的元素（如果还未调用 next() 或在上一次调用 next() 方法之后已经调用了 remove() 方法，再调用 remove() 就会报IllegalStateException）</li></ul></li></ul><p><strong>3）增强 for 循环（JDK5.0 新特性）</strong></p><ul><li><code>for(集合元素的类型 局部变量 : 集合对象){}</code></li><li>内部仍然调用了迭代器。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">12</span>, <span class="number">34</span>, <span class="number">43</span>, <span class="number">93</span>, <span class="number">32</span>);</span><br><span class="line"><span class="comment">// 使用迭代器遍历</span></span><br><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    System.out.println(iterator.next());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用增强 for 循环遍历</span></span><br><span class="line"><span class="keyword">for</span> (Integer num : list) &#123;</span><br><span class="line">    System.out.println(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="11-4-List-接口"><a href="#11-4-List-接口" class="headerlink" title="11.4 List 接口"></a>11.4 List 接口</h4><p>存储有序的、可重复的数据</p><p><strong>1）常用方法</strong></p><ul><li>增：<code>add(Object obj)</code></li><li>删：<code>remove(int index)</code> / <code>remove(Object obj)</code></li><li>改：<code>set(int index, Object ele)</code></li><li>查：<code>get(int index)</code></li><li>插：<code>add(int index, Object ele)</code></li><li>长度：<code>size()</code></li><li>遍历：① Iterator 迭代器方式；② 增强 for 循环；③ 普通的循环</li></ul><p><strong>2）常用的实现类</strong></p><ul><li>ArrayList：作为 List 接口的主要实现类；线程不安全的，效率高；底层使用 Object[] elementData 存储</li><li>LinkedList：对于频繁的插入、删除操作，使用此类效率比 ArrayList 高；底层使用双向链表存储</li><li>Vector：作为List接口的古老实现类；线程安全的，效率低；底层使用 Object[] elementData 存储</li></ul><p><strong>3）源码分析</strong></p><p><strong>ArrayList</strong></p><ul><li>JDK 7 情况下<ul><li><code>ArrayList list = new ArrayList();</code>// 底层创建了<strong>长度为10</strong> 的 Object[] elementData 数组</li><li><code>list.add(123);</code> // elementData[0] = new Integer(123);</li><li>如果此次的添加导致底层 elementData 数组容量不够，则扩容。</li><li>默认情况下，扩容为<strong>原来的容量的 1.5 倍</strong>，同时需要将原有数组中的数据复制到新的数组中。</li><li>结论：建议开发中使用带参的构造器：<code>ArrayList list = new ArrayList(int capacity)</code></li></ul></li><li>JDK 8 中的变化：<ul><li><code>ArrayList list = new ArrayList();</code>// 底层 Object[] elementData 初始化为 {}，并没创建长度为10 的数组</li><li><code>list.add(123);</code>// 第一次调用 add() 时，底层才创建了长度 10 的数组，并将数据 123 添加到 elementData[0]</li><li>后续的添加和扩容操作与 JDK 7 无异。</li></ul></li><li><strong>小结</strong>：JDK 7 中的 ArrayList 的对象的创建类似于单例的饿汉式，而 JDK 8 中的 ArrayList 的对象的创建类似于单例的懒汉式，延迟了数组的创建，节省内存。</li></ul><p><strong>LinkedList</strong></p><ul><li><p><code>LinkedList list = new LinkedList();</code> 内部声明了 Node 类型的 first 和 last 属性，默认值为 null</p></li><li><p><code>list.add(123);</code>// 将 123 封装到 Node 中，创建了 Node 对象。</p></li><li><p>其中，Node 定义为：体现了 LinkedList 的双向链表的说法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.item = element;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">        <span class="keyword">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>Vector</strong></p><ul><li>JDK 7 和 JDK 8 中通过Vector()构造器创建对象时，底层都创建了*<em>长度为 10 *</em>的数组。</li><li>在扩容方面，默认扩容为原来的数组长度的2倍。</li></ul><p><strong>在添加的对象时，所在的类要重写 equals() 方法</strong></p><p>面试题：ArrayList、LinkedList、Vector 者的异同？</p><h4 id="11-5-Set-接口"><a href="#11-5-Set-接口" class="headerlink" title="11.5 Set 接口"></a>11.5 Set 接口</h4><p>无序的、不可重复的元素</p><p><strong>1）常用方法</strong></p><p>Set 接口中没额外定义新的方法，使用的都是 Collection 中声明过的方法。</p><p><strong>2）常用的实现类</strong></p><ul><li>HashSet：作为 Set 接口的主要实现类；线程不安全的；可以存储 null 值<ul><li>LinkedHashSet：作为 HashSet 的子类；遍历其内部数据时，可以按照添加的顺序遍历。在添加数据的同时，每个数据还维护了两个引用，记录此数据前一个数据和后一个数据。对于频繁的遍历操作，LinkedHashSet 效率高于 HashSet。</li></ul></li><li>TreeSet：可以照添加对象的指定属性，进行排序。</li></ul><p><strong>3）元素添加过程（以 HashSet 为例）</strong></p><p>我们向 HashSet 中添加元素 a，首先调用元素 a 所在类的 hashCode() 方法，计算元素 a 的哈希值，此哈希值接着通过某种算法计算出在 HashSet 底层数组中的存放位置（即索引位置），判断数组此位置上是否已经元素：</p><ul><li>如果此位置上没其他元素，则元素 a 添加成功。（情况1）</li><li>如果此位置上其他元素 b（或以链表形式存在的多个元素），则比较元素 a 与元素 b 的 hash 值：<ul><li>如果 hash 值不相同，则元素 a 添加成功。（情况2）</li><li>如果 hash 值相同，进而需要调用元素 a 所在类的 equals() 方法：<ul><li>equals() 返回 true,元素 a 添加失败</li><li>equals() 返回 false,则元素 a 添加成功。（情况3）</li></ul></li></ul></li></ul><p>对于添加成功的情况 2 和情况 3 而言：元素 a 与已经存在指定索引位置上数据以链表的方式存储。</p><ul><li>JDK 7：元素 a 放到数组中，指向原来的元素。</li><li>JDK 8：原来的元素在数组中，指向元素 a</li><li>总结：七上八下</li></ul><p>HashSet 底层：数组 + 链表的结构。（前提：JDK 7）</p><p><strong>4）存储对象所在类的要求</strong></p><p><strong>HashSet/LinkedHashSet</strong></p><ul><li>向 Set（主要指 HashSet、LinkedHashSet）中添加的数据，其所在的类<strong>一定要重写 hashCode() 和 equals()</strong><ul><li>重写的 hashCode() 和 equals() 尽可能保持一致性：相等的对象必须具有相等的散列码</li><li>重写两个方法的小技巧：对象中用作 equals() 方法比较的 Field，都应该用来计算 hashCode 值。</li></ul></li></ul><p><strong>TreeSet</strong></p><ul><li>自然排序中，比较两个对象是否相同的标准为：compareTo() 返回0，不再是equals()。</li><li>定制排序中，比较两个对象是否相同的标准为：compare() 返回0，不再是equals()。</li></ul><p><strong>5）TreeSet的使用</strong></p><ul><li>向 TreeSet 中添加的数据，要求是相同类的对象。</li><li>两种排序方式：自然排序（实现 Comparable 接口）和定制排序（实现 Comparator 接口）</li></ul><p><strong>常用的排序方式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">comparableTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Set&lt;User&gt; set = <span class="keyword">new</span> TreeSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        traverseSet(set);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">comparatorTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Comparator&lt;User&gt; comparator = Comparator.comparingInt(User::getAge);</span><br><span class="line"><span class="comment">//        Comparator&lt;User&gt; comparator = new Comparator&lt;User&gt;() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public int compare(User o1, User o2) &#123;</span></span><br><span class="line"><span class="comment">//                return Integer.compare(o1.getAge(), o2.getAge())</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;;</span></span><br><span class="line"></span><br><span class="line">        TreeSet&lt;User&gt; set = <span class="keyword">new</span> TreeSet&lt;&gt;(comparator);</span><br><span class="line"></span><br><span class="line">        traverseSet(set);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">traverseSet</span><span class="params">(Set set)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Mary"</span>, <span class="number">24</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Jerry"</span>, <span class="number">34</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Arthur"</span>, <span class="number">32</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Jerry"</span>, <span class="number">45</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Zoom"</span>, <span class="number">28</span>));</span><br><span class="line"></span><br><span class="line">        Iterator&lt;User&gt; iterator = set.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Comparable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        User user = (User) o;</span><br><span class="line">        <span class="keyword">return</span> age == user.age &amp;&amp;</span><br><span class="line">                Objects.equals(name, user.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name, age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> User) &#123;</span><br><span class="line">            User user = (User) o;</span><br><span class="line">            <span class="keyword">int</span> compare = <span class="keyword">this</span>.name.compareTo(user.name);</span><br><span class="line">            <span class="keyword">if</span> (compare != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> compare;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.compare(<span class="keyword">this</span>.age, user.age);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="11-6-Map-接口"><a href="#11-6-Map-接口" class="headerlink" title="11.6 Map 接口"></a>11.6 Map 接口</h4><p>双列数据，存储 key-value 对的数据</p><p><strong>1）常用实现类</strong></p><ul><li><p>HashMap：作为 Map 的主要实现类；线程不安全的，效率高；可以存储 null 的 key 和 value</p><ul><li>LinkedHashMap：保证在遍历 map 元素时，可以照添加的顺序实现遍历。<ul><li>原因：在原的 HashMap 底层结构基础上，添加了一对指针，指向前一个和后一个元素。</li><li>对于频繁的遍历操作，此类执行效率高于 HashMap。</li></ul></li></ul></li><li><p>TreeMap：保证照添加的 key-value 对进行排序，实现排序遍历。此时考虑 key 的自然排序或定制排序</p></li><li><p>Hashtable：作为古老的实现类；线程安全的，效率低；不能存储 null 的 key 和 value</p><ul><li>Properties：常用来处理配置文件。key 和 value 都是 String 类型</li></ul><p><strong>HashMap 的底层</strong></p></li><li><p>数组+链表（JDK 7 及之前)</p></li><li><p>数组+链表+红黑树（JDK 8)</p></li></ul><p><strong>2）存储结构的理解</strong></p><ul><li>Map 中的 key：无序的、不可重复的，使用 Set 存储所有的 key  <code>--&gt;</code> key 所在的类要重写 equals() 和 hashCode() （以 HashMap 为例)</li><li>Map 中的 value：无序的、可重复的，使用 Collection 存储所的 value <code>--&gt;</code> value 所在的类要重写 equals()</li><li>一个键值对 key-value 构成了一个 Entry 对象。</li><li>Map 中的 entry：无序的、不可重复的，使用 Set 存储所的 entry</li></ul><p><strong>3）常用方法</strong></p><ul><li>添加：<code>put(Object key, Object value)</code></li><li>删除：<code>remove(Object key)</code></li><li>修改：<code>put(Object key, Object value)</code></li><li>查询：<code>get(Object key)</code></li><li>长度：<code>size()</code></li><li>遍历：<code>keySet()</code> / <code>values()</code> /<code>entrySet()</code></li></ul><p><strong>4）内存结构说明</strong></p><p><strong>HashMap</strong></p><p><strong>① 在 JDK 7 中实现原理</strong></p><ul><li><code>HashMap map = new HashMap()</code>：在实例化以后，底层创建了<strong>长度为16</strong> 的一维数组 Entry[] table。</li><li><code>map.put(key1, value1)</code>：<strong>首先</strong>，调用 key1 所在类的 hashCode() 计算 key1 哈希值，此哈希值经过某种算法计算以后，得到在 Entry 数组中的存放位置。<ul><li>如果此位置上的数据为空，此时的 key1-value1 添加成功。（情况1）</li><li>如果此位置上的数据不为空（意味着此位置上存在一个或多个数据（以链表形式存在）），比较 key1 和已经存在的一个或多个数据的哈希值：<ul><li>如果 key1 的哈希值与已经存在的数据的哈希值都不相同，此时 key1-value1 添加成功。（情况2）</li><li>如果 key1 的哈希值和已经存在的某一个数据（key2-value2）的哈希值相同，继续比较：调用 key1.equals(key2) 方法，比较：</li><li>如果 equals() 返回 false：此时 key1-value1 添加成功。（情况3）</li><li>如果 equals() 返回 true：使用 value1 替换 value2。</li></ul></li></ul></li></ul><p>关于情况2和情况3：此时 key1-value1 和原来的数据以链表的方式存储。</p><p>在不断的添加过程中，会涉及到扩容问题，当超出临界值（且要存放的位置非空）时，扩容。默认的扩容方式：扩容为原来容量的2倍，并将原的数据复制过来。</p><p><strong>② 在 JDK 8 中相较于 JDK 7 在底层实现方面的不同：</strong></p><ol><li>new HashMap()：底层没创建一个长度为 16 的数组</li><li>JDK 8底层的数组是：Node[]，而非 Entry[]</li><li>首次调用 put() 方法时，底层创建长度为 16 的数组</li><li>JDK 7 中底层结构：数组+链表；JDK 8 中底层结构：数组+链表+红黑树。</li><li>形成链表时，七上八下（JDK 7：新的元素指向旧的元素；JDK 8：旧的元素指向新的元素）</li><li>当数组的某一个索引位置上的元素（以链表形式存在的数据个数 &gt; 8）且（当前数组的长度 &gt; 64）时，此时此索引位置上的所数据改为使用红黑树存储</li></ol><p><strong>③ HashMap 底层典型属性的属性的说明</strong></p><ul><li>DEFAULT_INITIAL_CAPACITY : HashMap 的默认容量，16</li><li>DEFAULT_LOAD_FACTOR：HashMap 的默认加载因子，0.75</li><li>threshold：扩容的临界值 = 容量 * 填充因子 = 16 * 0.75 = 12</li><li>TREEIFY_THRESHOLD：Bucket 中链表长度大于该默认值，转化为红黑树，8</li><li>MIN_TREEIFY_CAPACITY：桶中的 Node 被树化时最小的 hash 表容量，64</li></ul><p><strong>LinkedHashMap</strong></p><ul><li>LinkedHashMap 底层使用的结构与 HashMap 相同，因为 LinkedHashMap 继承于 HashMap。区别就在于：LinkedHashMap 内部提供了 Entry，替换 HashMap 中的 Node</li></ul><p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/image%5Cimage-20210206140413853.png" alt="image-20210206140413853"></p><p><strong>TreeMap</strong></p><ul><li>TreeMap 中添加 key-value，要求 key 必须是由同一个类创建的对象</li><li>因为要按照 key 进行排序：自然排序 、定制排序</li></ul><p><strong>Properties</strong></p><ul><li>常用来处理配置文件。key 和 value 都是 String 类型</li></ul><h4 id="11-7-Collections-工具类"><a href="#11-7-Collections-工具类" class="headerlink" title="11.7 Collections 工具类"></a>11.7 Collections 工具类</h4><ul><li>操作 Collection 和 Map 的工具类</li></ul><p><strong>常用方法</strong></p><ul><li><code>reverse(List)</code>：反转 List 中元素的顺序</li><li><code>shuffle(List)</code>：对 List 集合元素进行随机排序</li><li><code>sort(List)</code>：根据元素的自然顺序对指定 List 集合元素升序排序</li><li><code>sort(List，Comparator)</code>：根据指定的 Comparator 产生的顺序对 List 集合元素进行排序</li><li><code>swap(List，int， int)</code>：将指定 list 集合中的 i 处元素和 j 处元素进行交换</li><li><code>Object max(Collection)</code>：根据元素的自然顺序，返回给定集合中的最大元素</li><li><code>Object max(Collection，Comparator)</code>：根据 Comparator 指定的顺序，返回给定集合中的最大元素</li><li><code>Object min(Collection)</code></li><li><code>Object min(Collection，Comparator)</code></li><li><code>int frequency(Collection，Object)</code>：返回指定集合中指定元素的出现次数</li><li><code>void copy(List dest,List src)</code>：将src中的内容复制到dest中</li><li><code>boolean replaceAll(List list，Object oldVal，Object newVal)</code>：使用新值替换 List 对象的所旧值</li></ul><p><strong>ArrayList 和 HashMap 都是线程不安全的，如果程序要求线程安全，我们可以使用 synchronizedList(List list) 和 synchronizedMap(Map map) 将 ArrayList、HashMap 转换为线程安全的。</strong></p><h3 id="第12章-泛型（Generics）"><a href="#第12章-泛型（Generics）" class="headerlink" title="第12章 泛型（Generics）"></a>第12章 泛型（Generics）</h3><h4 id="12-1-概念"><a href="#12-1-概念" class="headerlink" title="12.1 概念"></a>12.1 概念</h4><ul><li>所谓泛型，就是允许在定义类、接口时通过一个<strong>标识</strong>表示类中某个属性的类型或者是某个方法的返回值及参数类型。这个类型参数将在使用时（例如，继承或实现这个接口，用这个类型声明变量、创建对象时）确定（即传入实际的类型参数，也称为类型实参）。</li></ul><p><strong>泛型的引入背景</strong></p><ul><li>集合容器类在设计阶段和声明阶段不能确定这个容器到底实际存的是什么类型的对象，所以在 JDK1.5 之前只能把元素类型设计为 Object，JDK1.5 之后使用泛型来解决。因为这个时候除了元素的类型不确定，其他的部分是确定的，例如关于这个元素如何保存，如何管理等是确定的，因此此时把元素的类型设计成一个参数，这个类型参数叫做<strong>泛型</strong>。<code>Collection&lt;E&gt;</code>，<code>List&lt;E&gt;</code>，<code>ArrayList&lt;E&gt;</code>   这个 <code>&lt;E&gt;</code> 就是<strong>类型参数</strong>，即<strong>泛型</strong>。</li></ul><h4 id="12-2-泛型在集合中的使用"><a href="#12-2-泛型在集合中的使用" class="headerlink" title="12.2 泛型在集合中的使用"></a>12.2 泛型在集合中的使用</h4><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/没有泛型的集合.png" alt="没有泛型的集合" style="zoom:200%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="comment">// 需求：存放学生的成绩</span></span><br><span class="line">    list.add(<span class="number">78</span>);</span><br><span class="line">    list.add(<span class="number">76</span>);</span><br><span class="line">    <span class="comment">// 问题一：类型不安全</span></span><br><span class="line">    <span class="comment">// list.add("Tom");</span></span><br><span class="line">    <span class="keyword">for</span>(Object score : list)&#123;</span><br><span class="line">        <span class="comment">// 问题二：强转时，可能出现 ClassCastException</span></span><br><span class="line">        <span class="keyword">int</span> stuScore = (Integer) score;</span><br><span class="line">        System.out.println(stuScore);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/有泛型的集合.png" alt="有泛型的集合" style="zoom:200%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ArrayList&lt;Integer&gt; list =  <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">// 需求：存放学生的成绩</span></span><br><span class="line">    list.add(<span class="number">78</span>);</span><br><span class="line">    list.add(<span class="number">87</span>);</span><br><span class="line">    <span class="comment">// 编译时，就会进行类型检查，保证数据的安全</span></span><br><span class="line">    <span class="comment">// list.add("Tom");</span></span><br><span class="line">    <span class="comment">// 方式一：</span></span><br><span class="line">    <span class="comment">//for(Integer score : list)&#123;</span></span><br><span class="line">    <span class="comment">//        // 避免了强转操作</span></span><br><span class="line">    <span class="comment">//        System.out.println(score);</span></span><br><span class="line">    <span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">// 方式二：</span></span><br><span class="line">    Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        <span class="keyword">int</span> stuScore = iterator.next();</span><br><span class="line">        System.out.println(stuScore);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// Map&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();</span></span><br><span class="line">    <span class="comment">// jdk7 新特性：类型推断</span></span><br><span class="line">    Map&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    map.put(<span class="string">"Tom"</span>,<span class="number">87</span>);</span><br><span class="line">    map.put(<span class="string">"Jerry"</span>,<span class="number">87</span>);</span><br><span class="line">    map.put(<span class="string">"Jack"</span>,<span class="number">67</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// map.put(123,"ABC");</span></span><br><span class="line">    <span class="comment">// 泛型的嵌套</span></span><br><span class="line">    Set&lt;Map.Entry&lt;String,Integer&gt;&gt; entry = map.entrySet();</span><br><span class="line">    Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = entry.iterator();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        Map.Entry&lt;String, Integer&gt; e = iterator.next();</span><br><span class="line">        String key = e.getKey();</span><br><span class="line">        Integer value = e.getValue();</span><br><span class="line">        System.out.println(key + <span class="string">"----"</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>集合中使用泛型总结</strong></p><ul><li><p>集合接口或集合类在 JDK 5.0 时都修改为带泛型的结构。</p></li><li><p>在实例化集合类时，可以指明具体的泛型类型</p></li><li><p>指明完以后，在集合类或接口中凡是定义类或接口时，内部结构（比如：方法、构造器、属性等）使用到类的泛型的位置，都指定为实例化的泛型类型。</p><ul><li>比如：<code>add(E e)  --&gt; 实例化以后：add(Integer e)</code></li></ul></li><li><p>注意点：泛型的类型必须是<strong>类</strong>，不能是基本数据类型。需要用到基本数据类型的位置，拿<strong>包装类</strong>替换。</p></li><li><p>如果实例化时，没指明泛型的类型。默认类型为 <code>java.lang.Object</code> 类型。</p></li></ul><h4 id="12-3-自定义泛型类、泛型接口、泛型方法"><a href="#12-3-自定义泛型类、泛型接口、泛型方法" class="headerlink" title="12.3 自定义泛型类、泛型接口、泛型方法"></a>12.3 自定义泛型类、泛型接口、泛型方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsClass</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 类的内部结构就可以使用类的泛型</span></span><br><span class="line">    T field;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"><span class="comment">//        T a = new T(); // Type parameter 'T' cannot be instantiated directly</span></span><br><span class="line">        T a = (T)<span class="keyword">new</span> Object();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenericsClass</span><span class="params">(T field)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.field = field;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getField</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> field;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setField</span><span class="params">(T field)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.field = field;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 静态方法中不能使用类的泛型</span></span><br><span class="line">    <span class="comment">// 'com.ding.generics.GenericsClass.this' cannot be referenced from a static context</span></span><br><span class="line"><span class="comment">//    public static void staticMethod(T field) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(field);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GenericsInterface</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 'com.ding.generics.GenericsInterface.this' cannot be referenced from a static context</span></span><br><span class="line"><span class="comment">//    T field;</span></span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>; <span class="comment">// public static final </span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">(T t)</span></span>; <span class="comment">// public abstract</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticMethod</span><span class="params">()</span></span>&#123;&#125;; <span class="comment">// public</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">genericsMethod</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line"><span class="comment">//   return new T();// Type parameter 'T' cannot be instantiated directly</span></span><br><span class="line">    <span class="keyword">return</span> (T)<span class="keyword">new</span> Object();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>泛型方法：在方法中出现了泛型的结构，泛型参数与类的泛型参数没任何关系。换句话说，泛型方法所属的类是不是泛型类都没关系。</p></li><li><p>泛型方法可以声明为静态的。原因：泛型参数是在调用方法时确定的。并非在实例化类时确定。</p></li></ul><h4 id="12-4-泛型在继承上的体现"><a href="#12-4-泛型在继承上的体现" class="headerlink" title="12.4 泛型在继承上的体现"></a>12.4 泛型在继承上的体现</h4><ul><li>虽然类 A 是类 B 的父类，但是 <code>G&lt;A&gt;</code> 和 <code>G&lt;B&gt;</code> 二者不具备子父类关系，二者是并列关系。类 A 是类 B 的父类，<code>A&lt;G&gt;</code> 是 <code>B&lt;G&gt;</code> 的父类.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Object obj = <span class="keyword">null</span>;</span><br><span class="line">    String str = <span class="keyword">null</span>;</span><br><span class="line">    obj = str;</span><br><span class="line"></span><br><span class="line">    Object[] arr1 = <span class="keyword">null</span>;</span><br><span class="line">    String[] arr2 = <span class="keyword">null</span>;</span><br><span class="line">    arr1 = arr2;</span><br><span class="line">    <span class="comment">// 编译不通过</span></span><br><span class="line">    <span class="comment">//        Date date = new Date();</span></span><br><span class="line">    <span class="comment">//        str = date;</span></span><br><span class="line">    List&lt;Object&gt; list1 = <span class="keyword">null</span>;</span><br><span class="line">    List&lt;String&gt; list2 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    <span class="comment">// 此时的list1和list2的类型不具子父类关系</span></span><br><span class="line">    <span class="comment">// 编译不通过</span></span><br><span class="line">    <span class="comment">//        list1 = list2;</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        反证法：</span></span><br><span class="line"><span class="comment">        假设 list1 = list2;</span></span><br><span class="line"><span class="comment">           list1.add(123);导致混入非 String 的数据。出错。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    show(list1);</span><br><span class="line">    show1(list2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show1</span><span class="params">(List&lt;String&gt; list)</span></span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(List&lt;Object&gt; list)</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    AbstractList&lt;String&gt; list1 = <span class="keyword">null</span>;</span><br><span class="line">    List&lt;String&gt; list2 = <span class="keyword">null</span>;</span><br><span class="line">    ArrayList&lt;String&gt; list3 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    list1 = list3;</span><br><span class="line">    list2 = list3;</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; list4 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="12-5-通配符"><a href="#12-5-通配符" class="headerlink" title="12.5 通配符 ?"></a>12.5 通配符 ?</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    通配符的使用  </span></span><br><span class="line"><span class="comment">       1. 类 A 是类 B 的父类，G&lt;A&gt; 和 G&lt;B&gt; 是没关系的，二者共同的父类是：G&lt;?&gt;</span></span><br><span class="line"><span class="comment">       2. 涉及通配符的集合的数据的写入和读取</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    List&lt;Object&gt; list1 = <span class="keyword">null</span>;</span><br><span class="line">    List&lt;String&gt; list2 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;?&gt; list = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    list = list1;</span><br><span class="line">    list = list2;</span><br><span class="line">    <span class="comment">//编译通过</span></span><br><span class="line">    <span class="comment">//        print(list1);</span></span><br><span class="line">    <span class="comment">//        print(list2);</span></span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; list3 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list3.add(<span class="string">"AA"</span>);</span><br><span class="line">    list3.add(<span class="string">"BB"</span>);</span><br><span class="line">    list3.add(<span class="string">"CC"</span>);</span><br><span class="line">    list = list3;</span><br><span class="line">    <span class="comment">// 添加(写入)：对于 List&lt;?&gt; 就不能向其内部添加数据。</span></span><br><span class="line">    <span class="comment">// 除了添加null之外。</span></span><br><span class="line">    <span class="comment">// list.add("DD");</span></span><br><span class="line">    <span class="comment">// list.add('?');</span></span><br><span class="line"></span><br><span class="line">    list.add(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取(读取)：允许读取数据，读取的数据类型为Object。</span></span><br><span class="line">    Object o = list.get(<span class="number">0</span>);</span><br><span class="line">    System.out.println(o);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(List&lt;?&gt; list)</span></span>&#123;</span><br><span class="line">    Iterator&lt;?&gt; iterator = list.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        Object obj = iterator.next();</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">限制条件的通配符的使用：</span></span><br><span class="line"><span class="comment">        ? extends A:  G&lt;? extends A&gt; 可以作为G&lt;A&gt;和G&lt;B&gt;的父类，其中B是A的子类</span></span><br><span class="line"><span class="comment">        ? super A: G&lt;? super A&gt; 可以作为G&lt;A&gt;和G&lt;B&gt;的父类，其中B是A的父类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    List&lt;? extends Person&gt; list1 = <span class="keyword">null</span>;</span><br><span class="line">    List&lt;? <span class="keyword">super</span> Person&gt; list2 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;Student&gt; list3 = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</span><br><span class="line">    List&lt;Person&gt; list4 = <span class="keyword">new</span> ArrayList&lt;Person&gt;();</span><br><span class="line">    List&lt;Object&gt; list5 = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line"></span><br><span class="line">    list1 = list3;</span><br><span class="line">    list1 = list4;</span><br><span class="line">    <span class="comment">//        list1 = list5;</span></span><br><span class="line">    <span class="comment">//        list2 = list3;</span></span><br><span class="line">    list2 = list4;</span><br><span class="line">    list2 = list5;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取数据：</span></span><br><span class="line">    list1 = list3;</span><br><span class="line">    Person p = list1.get(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 编译不通过</span></span><br><span class="line">    <span class="comment">// Student s = list1.get(0);</span></span><br><span class="line"></span><br><span class="line">    list2 = list4;</span><br><span class="line">    Object obj = list2.get(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 编译不通过</span></span><br><span class="line">    <span class="comment">//        Person obj = list2.get(0);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入数据：</span></span><br><span class="line">    <span class="comment">// 编译不通过</span></span><br><span class="line">    <span class="comment">//        list1.add(new Student());</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//编译通过</span></span><br><span class="line">    list2.add(<span class="keyword">new</span> Person());</span><br><span class="line">    list2.add(<span class="keyword">new</span> Student());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第13章-IO-流"><a href="#第13章-IO-流" class="headerlink" title="第13章 IO 流"></a>第13章 IO 流</h3><h4 id="13-1-File-类的使用"><a href="#13-1-File-类的使用" class="headerlink" title="13.1 File 类的使用"></a>13.1 File 类的使用</h4><p><strong>1）File 类的理解</strong></p><ol><li><p>File 类的一个对象，代表一个<strong>文件</strong>或一个<strong>文件目录</strong>（俗称：文件夹）。</p></li><li><p>File 类声明在 java.io 包下。</p></li><li><p>File 类中涉及到关于文件或文件目录的创建、删除、重命名、修改时间和文件大小等方法，并<strong>未涉及到写入或读取文件内容的操作</strong>。如果需要读取或写入文件内容，必须使用IO流来完成。</p></li><li><p>File 类的对象常会作为参数传递到流的构造器中，指明读取或写入的 “终点”。</p></li></ol><p><strong>2）File 的实例化</strong></p><p><strong>常用构造器</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File(String filePath)</span><br><span class="line">File(String parentPath, String childPath)</span><br><span class="line">File(File parentFile, String childPath)</span><br></pre></td></tr></table></figure><blockquote><p><strong>路径的分类</strong></p><p><strong>相对路径</strong>：相较于某个路径下，指明的路径。</p><p><strong>绝对路径</strong>：包含盘符在内的文件或文件目录的路径。</p><p><strong>路径分隔符</strong></p><p><strong>windows 和 DOS</strong> 系统默认使用 “\” 来表示</p><p><strong>UNIX 和 URL</strong> 使用 “/” 来表示</p></blockquote><p><strong>说明</strong></p><p><strong>IDEA 中</strong>：使用 <strong>JUnit</strong> 中的单元测试方法测试，相对路径即为当前 <strong>Module</strong> 下；使用 <strong>main()</strong> 测试，相对路径即为当前的 <strong>Project</strong> 下。</p><p><strong>Eclipse 中</strong>：不管使用单元测试方法还是使用 main() 测试，相对路径都是当前的 Project 下。</p><p><strong>3）File 类的常用方法</strong></p><p><strong>获取功能</strong><br><strong><code>public String getAbsolutePath()</code>：获取绝对路径。</strong></p><p><code>public String getPath()</code>：获取路径。</p><p><code>public String getName()</code>：获取名称。</p><p><strong><code>public String getParent()</code>：获取上层文件目录路径。若无，返回 null。</strong></p><p><code>public long length()</code>：获取文件长度（即，字节数）。不能获取目录的长度。</p><p><code>public long lastModified()</code>：获取最后一次修改的时间（毫秒值）。</p><p><code>public String list[]</code>：获取指定目录下的所有文件或者文件目录的名称数组。</p><p><code>public File[] listFiles()</code>：获取指定目录下的所有文件或者文件目录的 File 数组。</p><p><strong>重命名功能</strong><br><code>public boolean renameTo(File dest)</code>：把文件重命名为指定的文件路径。</p><p><strong>判断功能</strong></p><p><strong><code>public boolean isDirectory()</code>：判断是否为文件目录。</strong></p><p><strong><code>public boolean isFile()</code>：判断是否为文件。</strong></p><p><strong><code>public boolean existst()</code>：判断是否存在。</strong></p><p><code>public boolean canRead()</code>：判断是否可读。</p><p><code>public boolean canWrite()</code>：判断是否可写。</p><p><code>public boolean isHidden()</code>：判断是否隐藏。</p><p><strong>创建功能</strong></p><p><strong><code>public boolean createNewFile()</code>：创建文件。若文件存在，则不创建，返回 false。</strong></p><p><code>public boolean mkdir()</code>：创建文件目录。如果此文件存在，就不创建了。如果此文件目录的上层目录不存在，也不创建。</p><p><strong><code>public boolean mkdirs()</code>：创建文件目录。如果上层文件目录不存在，一并创建。</strong></p><p><strong>删除功能</strong><br><strong><code>public boolean delete()</code>：删除文件或文件夹。一经删除，不可恢复。不能删除包含文件或者文件目录的文件目录。</strong></p><h4 id="13-2-IO-流概述"><a href="#13-2-IO-流概述" class="headerlink" title="13.2 IO 流概述"></a>13.2 IO 流概述</h4><p><strong>1）流的分类</strong></p><p>按操作数据单位：字节流、字符流。</p><p>按数据的流向：输入流、输出流。</p><p>按流的角色：节点流、处理流。</p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/流的分类.png" alt="流的分类" style="zoom:200%;"><p><strong>2）流的体系结构</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/流的体系结构.png" alt="流的体系结构" style="zoom:200%;"><p><strong>重点流结构</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/重点流结构.png" alt="重点流结构" style="zoom:200%;"><p><strong>3）输入输出的标准化过程</strong></p><p><strong>输入过程</strong></p><p>① 创建 File 类的对象，指明读取的数据的来源。（要求此文件一定要存在）</p><p>② 创建<strong>相应的</strong>输入流，将 File 类的对象作为参数，传入流的构造器中。</p><p>③ 具体的读入过程：    创建相应的 <strong>byte[]</strong> 或 <strong>char[]</strong>。</p><p>④ <strong>关闭流资源</strong></p><p><strong>说明</strong>：程序中出现的异常需要使用 try-catch-finally 处理。</p><p><strong>输出过程</strong></p><p>① 创建File类的对象，指明写出的数据的位置。（不要求此文件一定要存在）。</p><p>② 创建相应的输出流，将File类的对象作为参数，传入流的构造器中。</p><p>③ 具体的写出过程：    write(char[] / byte[] buffer, 0, len)。</p><p>④ <strong>关闭流资源</strong></p><p><strong>说明</strong>：程序中出现的异常需要使用 try-catch-finally 处理。</p><h4 id="13-3-节点流（文件流）"><a href="#13-3-节点流（文件流）" class="headerlink" title="13.3 节点流（文件流）"></a>13.3 节点流（文件流）</h4><p><strong>1）FileReader / FileWriter 的使用</strong></p><p><strong>FileReader 的使用</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">将 hello.txt 文件内容读入程序中，并输出到控制台</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">说明点：</span></span><br><span class="line"><span class="comment">1. read()的理解：返回读入的一个字符。如果达到文件末尾，返回-1</span></span><br><span class="line"><span class="comment">2. 异常的处理：为了保证流资源一定可以执行关闭操作。需要使用 try-catch-finally 处理</span></span><br><span class="line"><span class="comment">3. 读入的文件一定要存在，否则就会报FileNotFoundException。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFileReader1</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">    FileReader fr = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.File类的实例化</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"hello.txt"</span>);</span><br><span class="line">        <span class="comment">//2.FileReader流的实例化</span></span><br><span class="line">        fr = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">        <span class="comment">//3.读入的操作</span></span><br><span class="line">        <span class="comment">//read(char[] cbuf):返回每次读入cbuf数组中的字符的个数。如果达到文件末尾，返回-1</span></span><br><span class="line">        <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fr.read(cbuf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">//方式一：</span></span><br><span class="line">            <span class="comment">//错误的写法</span></span><br><span class="line">            <span class="comment">//                for(int i = 0;i &lt; cbuf.length;i++)&#123;</span></span><br><span class="line">            <span class="comment">//                    System.out.print(cbuf[i]);</span></span><br><span class="line">            <span class="comment">//                &#125;</span></span><br><span class="line">            <span class="comment">//正确的写法</span></span><br><span class="line">            <span class="comment">//                for(int i = 0;i &lt; len;i++)&#123;</span></span><br><span class="line">            <span class="comment">//                    System.out.print(cbuf[i]);</span></span><br><span class="line">            <span class="comment">//                &#125;</span></span><br><span class="line">            <span class="comment">//方式二：</span></span><br><span class="line">            <span class="comment">//错误的写法,对应着方式一的错误的写法</span></span><br><span class="line">            <span class="comment">//                String str = new String(cbuf);</span></span><br><span class="line">            <span class="comment">//                System.out.print(str);</span></span><br><span class="line">            <span class="comment">//正确的写法</span></span><br><span class="line">            String str = <span class="keyword">new</span> String(cbuf,<span class="number">0</span>,len);</span><br><span class="line">            System.out.print(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(fr != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//4.资源的关闭</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>FileWriter 的使用</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">从内存中写出数据到硬盘的文件里。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">说明：</span></span><br><span class="line"><span class="comment">1. 输出操作，对应的File可以不存在的。并不会报异常</span></span><br><span class="line"><span class="comment">2.</span></span><br><span class="line"><span class="comment">     File对应的硬盘中的文件如果不存在，在输出的过程中，会自动创建此文件。</span></span><br><span class="line"><span class="comment">     File对应的硬盘中的文件如果存在：</span></span><br><span class="line"><span class="comment">           如果流使用的构造器是：FileWriter(file,false) / FileWriter(file):对原文件的覆盖</span></span><br><span class="line"><span class="comment">           如果流使用的构造器是：FileWriter(file,true):不会对原文件覆盖，而是在原文件基础上追加内容</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFileWriter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.提供File类的对象，指明写出到的文件</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"hello1.txt"</span>);</span><br><span class="line">        <span class="comment">//2.提供FileWriter的对象，用于数据的写出</span></span><br><span class="line">        fw = <span class="keyword">new</span> FileWriter(file,<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//3.写出的操作</span></span><br><span class="line">        fw.write(<span class="string">"I have a dream!\n"</span>);</span><br><span class="line">        fw.write(<span class="string">"you need to have a dream!"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.流资源的关闭</span></span><br><span class="line">        <span class="keyword">if</span>(fw != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>文本文件的复制</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFileReaderFileWriter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FileReader fr = <span class="keyword">null</span>;</span><br><span class="line">    FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建File类的对象，指明读入和写出的文件</span></span><br><span class="line">        File srcFile = <span class="keyword">new</span> File(<span class="string">"hello.txt"</span>);</span><br><span class="line">        File destFile = <span class="keyword">new</span> File(<span class="string">"hello2.txt"</span>);</span><br><span class="line">        <span class="comment">//不能使用字符流来处理图片等字节数据</span></span><br><span class="line">        <span class="comment">//            File srcFile = new File("爱情与友情.jpg");</span></span><br><span class="line">        <span class="comment">//            File destFile = new File("爱情与友情1.jpg");</span></span><br><span class="line">        <span class="comment">//2.创建输入流和输出流的对象</span></span><br><span class="line">        fr = <span class="keyword">new</span> FileReader(srcFile);</span><br><span class="line">        fw = <span class="keyword">new</span> FileWriter(destFile);</span><br><span class="line">        <span class="comment">//3.数据的读入和写出操作</span></span><br><span class="line">        <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">int</span> len;<span class="comment">//记录每次读入到cbuf数组中的字符的个数</span></span><br><span class="line">        <span class="keyword">while</span>((len = fr.read(cbuf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">//每次写出len个字符</span></span><br><span class="line">            fw.write(cbuf,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.关闭流资源</span></span><br><span class="line">        <span class="comment">//方式一：</span></span><br><span class="line">        <span class="comment">//            try &#123;</span></span><br><span class="line">        <span class="comment">//                if(fw != null)</span></span><br><span class="line">        <span class="comment">//                    fw.close();</span></span><br><span class="line">        <span class="comment">//            &#125; catch (IOException e) &#123;</span></span><br><span class="line">        <span class="comment">//                e.printStackTrace();</span></span><br><span class="line">        <span class="comment">//            &#125;finally&#123;</span></span><br><span class="line">        <span class="comment">//                try &#123;</span></span><br><span class="line">        <span class="comment">//                    if(fr != null)</span></span><br><span class="line">        <span class="comment">//                        fr.close();</span></span><br><span class="line">        <span class="comment">//                &#125; catch (IOException e) &#123;</span></span><br><span class="line">        <span class="comment">//                    e.printStackTrace();</span></span><br><span class="line">        <span class="comment">//                &#125;</span></span><br><span class="line">        <span class="comment">//            &#125;</span></span><br><span class="line">        <span class="comment">//方式二：</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fw != <span class="keyword">null</span>)</span><br><span class="line">                fw.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fr != <span class="keyword">null</span>)</span><br><span class="line">                fr.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）FileInputStream / FileOutputStream 的使用</strong></p><p>对于<strong>文本文件</strong>（.txt,.java,.c,.cpp），使用<strong>字符流处理</strong>。</p><p>对于<strong>非文本文件</strong>（.jpg,.mp3,.mp4,.avi,.doc,.ppt,…），使用<strong>字节流处理</strong>。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">实现对图片的复制操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFileInputOutputStream</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">    FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.造文件</span></span><br><span class="line">        File srcFile = <span class="keyword">new</span> File(<span class="string">"爱情与友情.jpg"</span>);</span><br><span class="line">        File destFile = <span class="keyword">new</span> File(<span class="string">"爱情与友情1.jpg"</span>);</span><br><span class="line">        <span class="comment">//2.造流</span></span><br><span class="line">        fis = <span class="keyword">new</span> FileInputStream(srcFile);</span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(destFile);</span><br><span class="line">        <span class="comment">//3.复制的过程</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(fos != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//4.关闭流</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fis != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：相对路径在IDEA和Eclipse中使用的区别？</p><p>IDEA:</p><p>如果使用单元测试方法，相对路径基于当前的 Module 的。</p><p>如果使用 main() 测试，相对路径基于当前 Project 的。</p><p>Eclipse:</p><p>单元测试方法还是 main()，相对路径都是基于当前 Project 的。</p></blockquote><h4 id="13-4-缓冲流"><a href="#13-4-缓冲流" class="headerlink" title="13.4 缓冲流"></a>13.4 缓冲流</h4><p><strong>1）缓冲流介绍</strong></p><p>涉及到的类：BufferedInputStream、BufferedOutputStream、BufferedReader、BufferedWriter。</p><p>作用：提供流的读取、写入的速度。</p><p>提高读写速度的原因：内部提供了一个<strong>缓冲区</strong>。默认情况下是 8kb。</p><p><strong>2）典型代码</strong></p><p><strong>使用 BufferedInputStream 和 BufferedOutputStream 处理非文本文件</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现文件复制的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyFileWithBuffered</span><span class="params">(String srcPath,String destPath)</span></span>&#123;</span><br><span class="line">    BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line">    BufferedOutputStream bos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.造文件</span></span><br><span class="line">        File srcFile = <span class="keyword">new</span> File(srcPath);</span><br><span class="line">        File destFile = <span class="keyword">new</span> File(destPath);</span><br><span class="line">        <span class="comment">//2.造流</span></span><br><span class="line">        <span class="comment">//2.1 造节点流</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream((srcFile));</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(destFile);</span><br><span class="line">        <span class="comment">//2.2 造缓冲流</span></span><br><span class="line">        bis = <span class="keyword">new</span> BufferedInputStream(fis);</span><br><span class="line">        bos = <span class="keyword">new</span> BufferedOutputStream(fos);</span><br><span class="line">        <span class="comment">//3.复制的细节：读取、写入</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = bis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.资源关闭</span></span><br><span class="line">        <span class="comment">//要求：先关闭外层的流，再关闭内层的流</span></span><br><span class="line">        <span class="keyword">if</span>(bos != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(bis != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//说明：关闭外层流的同时，内层流也会自动的进行关闭。关于内层流的关闭，我们可以省略.</span></span><br><span class="line">        <span class="comment">//        fos.close();</span></span><br><span class="line">        <span class="comment">//        fis.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用 BufferedReader 和 BufferedWriter 处理文本文件</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBufferedReaderBufferedWriter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">    BufferedWriter bw = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建文件和相应的流</span></span><br><span class="line">        br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="keyword">new</span> File(<span class="string">"dbcp.txt"</span>)));</span><br><span class="line">        bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="keyword">new</span> File(<span class="string">"dbcp1.txt"</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.读写操作</span></span><br><span class="line">        <span class="comment">//方式一：使用char[]数组</span></span><br><span class="line">        <span class="comment">//            char[] cbuf = new char[1024];</span></span><br><span class="line">        <span class="comment">//            int len;</span></span><br><span class="line">        <span class="comment">//            while((len = br.read(cbuf)) != -1)&#123;</span></span><br><span class="line">        <span class="comment">//                bw.write(cbuf,0,len);</span></span><br><span class="line">        <span class="comment">//    //            bw.flush();</span></span><br><span class="line">        <span class="comment">//            &#125;</span></span><br><span class="line">        <span class="comment">//方式二：使用String</span></span><br><span class="line">        String data;</span><br><span class="line">        <span class="keyword">while</span>((data = br.readLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//方法一：</span></span><br><span class="line">            <span class="comment">//                bw.write(data + "\n");//data中不包含换行符</span></span><br><span class="line">            <span class="comment">//方法二：</span></span><br><span class="line">            bw.write(data);<span class="comment">//data中不包含换行符</span></span><br><span class="line">            bw.newLine();<span class="comment">//提供换行的操作</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//3.关闭资源</span></span><br><span class="line">        <span class="keyword">if</span>(bw != <span class="keyword">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(br != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                br.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="13-5-转换流"><a href="#13-5-转换流" class="headerlink" title="13.5 转换流"></a>13.5 转换流</h4><p><strong>1）转换流介绍</strong></p><p>转换流属于字符流。</p><p>涉及到的类：</p><p>InputStreamReader（将一个字节的输入流转换为字符的输入流）。</p><p>解码：<code>字节、字节数组  ---&gt; 字符数组、字符串</code>。</p><p>OutputStreamWriter（将一个字符的输出流转换为字节的输出流）。</p><p>编码：<code>字符数组、字符串 ---&gt; 字节、字节数组。</code></p><p>说明：编码决定了解码的方式。</p><p><strong>作用</strong>：提供字节流与字符流之间的转换。</p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/转换流.png" alt="转换流" style="zoom:200%;"><p><strong>2）典型实现</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"dbcp.txt"</span>);</span><br><span class="line">    <span class="comment">//        InputStreamReader isr = new InputStreamReader(fis);//使用系统默认的字符集</span></span><br><span class="line">    <span class="comment">//参数2指明了字符集，具体使用哪个字符集，取决于文件dbcp.txt保存时使用的字符集</span></span><br><span class="line">    InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(fis,<span class="string">"UTF-8"</span>);<span class="comment">//使用系统默认的字符集</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = isr.read(cbuf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        String str = <span class="keyword">new</span> String(cbuf,<span class="number">0</span>,len);</span><br><span class="line">        System.out.print(str);</span><br><span class="line">    &#125;</span><br><span class="line">    isr.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">此时处理异常的话，仍然应该使用try-catch-finally</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">综合使用InputStreamReader和OutputStreamWriter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1.造文件、造流</span></span><br><span class="line">    File file1 = <span class="keyword">new</span> File(<span class="string">"dbcp.txt"</span>);</span><br><span class="line">    File file2 = <span class="keyword">new</span> File(<span class="string">"dbcp_gbk.txt"</span>);</span><br><span class="line"></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(file1);</span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file2);</span><br><span class="line"></span><br><span class="line">    InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(fis,<span class="string">"utf-8"</span>);</span><br><span class="line">    OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(fos,<span class="string">"gbk"</span>);</span><br><span class="line">    <span class="comment">//2.读写过程</span></span><br><span class="line">    <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = isr.read(cbuf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        osw.write(cbuf,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.关闭资源</span></span><br><span class="line">    isr.close();</span><br><span class="line">    osw.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>常见的编码表</strong></p><p>ASCII：美国标准信息交换码。用一个字节的 7 位可以表示。</p><p>ISO8859-1：拉丁码表。欧洲码表，用一个字节的 8 位表示。</p><p>GB2312：中国的中文编码表。<strong>最多两个字节</strong>编码所有字符。</p><p>GBK：中国的中文编码表升级，融合了更多的中文文字符号。<strong>最多两个字节</strong>编码。</p><p>Unicode：国际标准码，融合了目前人类使用的所字符。为每个字符分配唯一的字符码。所有的文字都用<strong>两个字节</strong>来表示。</p><p>UTF-8：<strong>变长</strong>的编码方式，可用 1-4 个字节来表示一个字符。</p></blockquote><h4 id="13-6-对象流"><a href="#13-6-对象流" class="headerlink" title="13.6 对象流"></a>13.6 对象流</h4><p><strong>1）对象流介绍</strong></p><p><strong>ObjectInputStream 和 ObjectOutputStream</strong></p><ul><li><p>ObjectOutputStream：<code>内存中的对象 --&gt; 存储中的文件、通过网络传输出去</code>（序列化过程）。</p></li><li><p>ObjectInputStream：<code>存储中的文件、通过网络接收过来 --&gt; 内存中的对象</code>（反序列化过程）。</p></li></ul><p><strong>对象的序列化机制</strong></p><p>对象序列化机制允许把内存中的 <strong>Java 对象</strong>转换成平台无关的<strong>二进制流</strong>，从而允许把这种二进制流持久地保存在磁盘上，或通过网络将这种二进制流传输到另一个网络节点。当其它程序获取了这种二进制流，就可以恢复成原来的 Java 对象。</p><p><strong>2）序列化代码实现</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testObjectOutputStream</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ObjectOutputStream oos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.</span></span><br><span class="line">        oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"object.dat"</span>));</span><br><span class="line">        <span class="comment">//2.</span></span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> String(<span class="string">"我爱北京天安门"</span>));</span><br><span class="line">        oos.flush();<span class="comment">//刷新操作</span></span><br><span class="line"></span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> Person(<span class="string">"王铭"</span>,<span class="number">23</span>));</span><br><span class="line">        oos.flush();</span><br><span class="line"></span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> Person(<span class="string">"张学良"</span>,<span class="number">23</span>,<span class="number">1001</span>,<span class="keyword">new</span> Account(<span class="number">5000</span>)));</span><br><span class="line">        oos.flush();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(oos != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//3.</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                oos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3）反序列化代码实现</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testObjectInputStream</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ObjectInputStream ois = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"object.dat"</span>));</span><br><span class="line"></span><br><span class="line">        Object obj = ois.readObject();</span><br><span class="line">        String str = (String) obj;</span><br><span class="line"></span><br><span class="line">        Person p = (Person) ois.readObject();</span><br><span class="line">        Person p1 = (Person) ois.readObject();</span><br><span class="line"></span><br><span class="line">        System.out.println(str);</span><br><span class="line">        System.out.println(p);</span><br><span class="line">        System.out.println(p1);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(ois != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ois.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>实现序列化的对象所属的类需要满足：</p><ol><li>需要实现接口：Serializable</li><li>当前类提供一个全局常量：serialVersionUID</li><li>除了当前Person类需要实现 Serializable 接口之外，还必须保证其内部所属性也必须是可序列化的。（默认情况下，基本数据类型可序列化）</li></ol><p><strong>ObjectOutputStream 和 ObjectInputStream 不能序列化 static 和 transient 修饰的成员变量。</strong></p></blockquote><h4 id="13-7-其他流"><a href="#13-7-其他流" class="headerlink" title="13.7 其他流"></a>13.7 其他流</h4><p><strong>1）标准的输入输出流</strong></p><p><code>System.in</code>：标准的输入流，默认从键盘输入。</p><p><code>System.out</code>：标准的输出流，默认从控制台输出。</p><p><strong>修改默认的输入和输出行为</strong>：System 类的 setIn(InputStream is) / setOut(PrintStream ps) 方式重新指定输入和输出的流。</p><p><strong>2）打印流</strong></p><p><strong>PrintStream 和 PrintWriter</strong></p><p>提供了一系列重载的 print() 和 println() 方法，用于多种数据类型的输出。</p><p>System.out 返回的是 PrintStream 的实例。</p><p><strong>3）数据流</strong></p><p><strong>DataInputStream 和 DataOutputStream</strong></p><p>用于读取或写出基本数据类型的变量或字符串。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">练习：将内存中的字符串、基本数据类型的变量写出到文件中。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">注意：处理异常的话，仍然应该使用try-catch-finally.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">// 1.</span></span><br><span class="line">    DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"data.txt"</span>));</span><br><span class="line">    <span class="comment">// 2.</span></span><br><span class="line">    dos.writeUTF(<span class="string">"刘建辰"</span>);</span><br><span class="line">    dos.flush();<span class="comment">//刷新操作，将内存中的数据写入文件</span></span><br><span class="line">    dos.writeInt(<span class="number">23</span>);</span><br><span class="line">    dos.flush();</span><br><span class="line">    dos.writeBoolean(<span class="keyword">true</span>);</span><br><span class="line">    dos.flush();</span><br><span class="line">    <span class="comment">// 3.</span></span><br><span class="line">    dos.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    将文件中存储的基本数据类型变量和字符串读取到内存中，保存在变量中。</span></span><br><span class="line"><span class="comment">    注意点：读取不同类型的数据的顺序要与当初写入文件时，保存的数据的顺序一致！</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    DataInputStream dis = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"data.txt"</span>));</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    String name = dis.readUTF();</span><br><span class="line">    <span class="keyword">int</span> age = dis.readInt();</span><br><span class="line">    <span class="keyword">boolean</span> isMale = dis.readBoolean();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"name = "</span> + name);</span><br><span class="line">    System.out.println(<span class="string">"age = "</span> + age);</span><br><span class="line">    System.out.println(<span class="string">"isMale = "</span> + isMale);</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    dis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4）随机存储流</strong></p><p><strong>RandomAccessFile</strong></p><ol><li><p>RandomAccessFile直接继承于 java.lang.Object 类，实现了 DataInput 和 DataOutput 接口</p></li><li><p>RandomAccessFile 既可以作为一个输入流，又可以作为一个输出流</p></li><li><p>如果 RandomAccessFile 作为输出流时，写出到的文件。如果不存在，则在执行过程中自动创建。如果写出到的文件存在，则会对原文件内容进行覆盖。（默认情况下，从头覆盖）</p></li><li><p>可以通过相关的操作，实现 RandomAccessFile “插入”数据的效果。seek(int pos)</p></li></ol><p><strong>典型代码1</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    RandomAccessFile raf1 = <span class="keyword">null</span>;</span><br><span class="line">    RandomAccessFile raf2 = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.</span></span><br><span class="line">        raf1 = <span class="keyword">new</span> RandomAccessFile(<span class="keyword">new</span> File(<span class="string">"爱情与友情.jpg"</span>),<span class="string">"r"</span>);</span><br><span class="line">        raf2 = <span class="keyword">new</span> RandomAccessFile(<span class="keyword">new</span> File(<span class="string">"爱情与友情1.jpg"</span>),<span class="string">"rw"</span>);</span><br><span class="line">        <span class="comment">//2.</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = raf1.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            raf2.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//3.</span></span><br><span class="line">        <span class="keyword">if</span>(raf1 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                raf1.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(raf2 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                raf2.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>典型代码2</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">使用RandomAccessFile实现数据的插入效果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    RandomAccessFile raf1 = <span class="keyword">new</span> RandomAccessFile(<span class="string">"hello.txt"</span>,<span class="string">"rw"</span>);</span><br><span class="line"></span><br><span class="line">    raf1.seek(<span class="number">3</span>);<span class="comment">//将指针调到角标为3的位置</span></span><br><span class="line">    <span class="comment">//保存指针3后面的所数据到StringBuilder中</span></span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder((<span class="keyword">int</span>) <span class="keyword">new</span> File(<span class="string">"hello.txt"</span>).length());</span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = raf1.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        builder.append(<span class="keyword">new</span> String(buffer,<span class="number">0</span>,len)) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//调回指针，写入“xyz”</span></span><br><span class="line">    raf1.seek(<span class="number">3</span>);</span><br><span class="line">    raf1.write(<span class="string">"xyz"</span>.getBytes());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将StringBuilder中的数据写入到文件中</span></span><br><span class="line">    raf1.write(builder.toString().getBytes());</span><br><span class="line"></span><br><span class="line">    raf1.close();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//思考：将StringBuilder替换为ByteArrayOutputStream</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="13-8-Path、Paths、Files-的使用"><a href="#13-8-Path、Paths、Files-的使用" class="headerlink" title="13.8 Path、Paths、Files 的使用"></a>13.8 Path、Paths、Files 的使用</h4><p><strong>1）Path的使用（jdk7 提供）</strong></p><p>Path 替换原有的 File 类。</p><p><strong>实例化</strong></p><p>Paths 类提供的静态 get() 方法用来获取 Path 对象。</p><p><code>static Path get(String first, String ... more)</code>：用于将多个字符串串连成路径。</p><p><code>static Path get(URI uri)</code>：返回指定 uri 对应的 Path 路径。</p><p><strong>常用方法</strong></p><p><code>String toString()</code>：返回调用 Path 对象的字符串表示形式。</p><p><code>boolean startsWith(String path)</code>：判断是否以 path 路径开始。</p><p><code>boolean endsWith(String path)</code>：判断是否以 path 路径结束。</p><p><code>boolean isAbsolute()</code>：判断是否为绝对路径。</p><p><code>Path getParent()</code>：返回 Path 对象包含整个路径，不包含 Path 对象指定的文件路径。</p><p><code>Path getRoot()</code>：返回调用 Path 对象的根路径。</p><p><code>Path getFileName()</code>：返回与调用 Path 对象关联的文件名。</p><p><code>int getNameCount()</code>：返回 Path 根目录后面元素的数量。</p><p><code>Path getName(int idx)</code>：返回指定所有位置 idx 的路径名称。</p><p><code>Path toAbsolutePath()</code>：作为绝对路径返回调用 Path 对象。</p><p><code>Path resolve(Path p)</code>：合并两个路径，返回合并后的路径对应的 Path 对象。</p><p><code>File toFile()</code>：将 Path 转化为 File 类的对象。</p><p><strong>2）Files 工具类（jdk7提供）</strong></p><p>操作文件或文件目录的工具类。</p><p><strong>常用方法</strong></p><p><code>Path copy(Path src, Path dest, CopyOption … how)</code>：文件的复制。</p><p><code>Path createDirectory(Path path, FileAttribute&lt;?&gt; … attr)</code>：创建一个目录。</p><p><code>Path createFile(Path path, FileAttribute&lt;?&gt; … arr)</code>：创建一个文件。</p><p><code>void delete(Path path)</code> ：删除一个文件 目录，如果不存在，执行报错。</p><p><code>void deleteIfExists(Path path)</code>：Path 对应的文件 目录如果存在，执行删除。</p><p><code>Path move(Path src, Path dest, CopyOption…how)</code>·： 将 src 移动到 dest 位置。</p><p><code>long size(Path path)</code>： 返回 path 指定文件的大小。</p><p><strong>用于判断</strong></p><p><code>boolean exists(Path path, LinkOption … opts)</code> ：判断文件是否存在。</p><p><code>boolean isDirectory(Path path, LinkOption … opts)</code> ：判断是否是目录。</p><p><code>boolean isRegularFile(Path path, LinkOption … opts)</code>：判断是否是文件。</p><p><code>boolean isHidden(Path path)</code>：判断是否是隐藏文件。</p><p><code>boolean isReadable(Path path)</code>：判断文件是否可读。</p><p><code>boolean isWritable(Path path)</code>：判断文件是否可写。</p><p><code>boolean notExists(Path path, LinkOption … opts)</code>：判断文件是否不存在。</p><p><strong>用于操作内容</strong></p><p><code>SeekableByteChannel newByteChannel(Path path, OpenOption…how)</code>：获取与指定文件的连接，how 指定打开方式。</p><p><code>DirectoryStream&lt;Path&gt; newDirectoryStream(Path path)</code>：打开 path 指定的目录。</p><p><code>InputStream newInputStream(Path path, OpenOption…how)</code>：获取 InputStream 对象。</p><p><code>OutputStream newOutputStream(Path path, OpenOption…how)</code>：获取 OutputStream 对象。</p><h3 id="第14章-反射（Reflection）"><a href="#第14章-反射（Reflection）" class="headerlink" title="第14章 反射（Reflection）"></a>第14章 反射（Reflection）</h3><h4 id="14-1-反射的概念"><a href="#14-1-反射的概念" class="headerlink" title="14.1 反射的概念"></a>14.1 反射的概念</h4><p>反射是被视为动态语言的关键，反射机制允许程序在执行期借助于 Reflection API 取得任何类的内部信息，并能直接操作任意对象的内部属性及方法。</p><p><strong>框架 = 反射 + 注解 + 设计模式。</strong></p><p><strong>1）反射机制的“动态性”</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//体会反射的动态性</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">100</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="keyword">new</span> Random().nextInt(<span class="number">3</span>);<span class="comment">//0,1,2</span></span><br><span class="line">        String classPath = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">switch</span>(num)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                classPath = <span class="string">"java.util.Date"</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                classPath = <span class="string">"java.lang.Object"</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                classPath = <span class="string">"com.atguigu.java.Person"</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Object obj = getInstance(classPath);</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">创建一个指定类的对象。</span></span><br><span class="line"><span class="comment">classPath: 指定类的全类名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getInstance</span><span class="params">(String classPath)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   Class clazz =  Class.forName(classPath);</span><br><span class="line">   <span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）功能</strong></p><ol><li>在运行时判断任意一个对象所属的类。</li><li>在运行时构造任意一个类的对象。</li><li>在运行时判断任意一个类所具有的成员变量和方法。</li><li>在运行时获取泛型信息。</li><li>在运行时调用任意一个对象的成员变量和方法。</li><li>在运行时处理注解。</li><li>生成动态代理。</li></ol><p><strong>3）相关API</strong></p><p>java.lang.Class: 反射的源头</p><p>java.lang.reflect.Method</p><p>java.lang.reflect.Field</p><p>java.lang.reflect.Constructor</p><p>….</p><h4 id="14-2-Class-类"><a href="#14-2-Class-类" class="headerlink" title="14.2 Class 类"></a>14.2 Class 类</h4><p><strong>1）Class 类的理解</strong></p><p><strong>类的加载过程</strong></p><p>程序经过 javac.ex e命令以后，会生成一个或多个字节码文件(.class结尾);接着我们使用 java.exe 命令对某个字节码文件进行解释运行。相当于将某个字节码文件<br>加载到内存中。此过程就称为<strong>类的加载</strong>。加载到内存中的类，我们就称为<strong>运行时类</strong>，此运行时类，就作为 Class 的一个实例。换句话说，<strong>Class 的实例就对应着一个运行时类。</strong>加载到内存中的运行时类，会缓存一定的时间。在此时间之内，我们可以通过不同的方式来获取此运行时类。</p><p><strong>2）获取 Class 实例的方式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一：调用运行时类的属性：.class</span></span><br><span class="line">Class clazz1 = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">System.out.println(clazz1);</span><br><span class="line"><span class="comment">//方式二：通过运行时类的对象,调用getClass()</span></span><br><span class="line">Person p1 = <span class="keyword">new</span> Person();</span><br><span class="line">Class clazz2 = p1.getClass();</span><br><span class="line">System.out.println(clazz2);</span><br><span class="line"><span class="comment">//方式三：调用Class的静态方法：forName(String classPath)</span></span><br><span class="line">Class clazz3 = Class.forName(<span class="string">"com.atguigu.java.Person"</span>);</span><br><span class="line"><span class="comment">// clazz3 = Class.forName("java.lang.String");</span></span><br><span class="line">System.out.println(clazz3);</span><br><span class="line"></span><br><span class="line">System.out.println(clazz1 == clazz2);</span><br><span class="line">System.out.println(clazz1 == clazz3);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式四：使用类的加载器：ClassLoader  (了解)</span></span><br><span class="line">ClassLoader classLoader = ReflectionTest<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">Class clazz4 = classLoader.loadClass(<span class="string">"com.atguigu.java.Person"</span>);</span><br><span class="line">System.out.println(clazz4);</span><br><span class="line"></span><br><span class="line">System.out.println(clazz1 == clazz4);</span><br></pre></td></tr></table></figure><p><strong>Class 实例可以是：</strong></p><ol><li>class：内部类，成员（成员内部类，静态内部类），局部内部类，匿名内部类。</li><li>interface：接口。</li><li>[]：数组。</li><li>enum：枚举。</li><li>annotation：注解。</li><li>primitive type：基本数据类型。</li><li>void</li></ol><blockquote><p><strong>创建类的对象的方式</strong></p><p>方式一：new + 构造器</p><p>方式二：要创建 Xxx 类的对象，可以考虑：Xxx、Xxxs、XxxFactory、XxxBuilder 类中查看是否有静态方法的存在。可以调用其静态方法，创建 Xxx 对象。</p><p>方式三：通过反射</p></blockquote><h4 id="14-3-类加载器"><a href="#14-3-类加载器" class="headerlink" title="14.3 类加载器"></a>14.3 类加载器</h4><p><strong>1）类的加载过程</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/类的加载过程.png" alt="类的加载过程" style="zoom:200%;"><p><strong>2）类的加载器的作用</strong></p><p><strong>3）类的加载器的分类</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/类的加载器的分类.png" alt="类的加载器的分类" style="zoom:200%;"><p><strong>4）Java 类编译、运行的执行的流程</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/执行的流程.png" alt="执行的流程" style="zoom:200%;"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用Classloader加载src目录下的配置文件</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    Properties pros =  <span class="keyword">new</span> Properties();</span><br><span class="line">    <span class="comment">//此时的文件默认在当前的module下。</span></span><br><span class="line">    <span class="comment">//读取配置文件的方式一：</span></span><br><span class="line">    <span class="comment">//        FileInputStream fis = new FileInputStream("jdbc.properties");</span></span><br><span class="line">    <span class="comment">//        FileInputStream fis = new FileInputStream("src\\jdbc1.properties");</span></span><br><span class="line">    <span class="comment">//        pros.load(fis);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取配置文件的方式二：使用ClassLoader</span></span><br><span class="line">    <span class="comment">//配置文件默认识别为：当前module的src下</span></span><br><span class="line">    ClassLoader classLoader = ClassLoaderTest<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">    InputStream is = classLoader.getResourceAsStream(<span class="string">"jdbc1.properties"</span>);</span><br><span class="line">    pros.load(is);</span><br><span class="line"></span><br><span class="line">    String user = pros.getProperty(<span class="string">"user"</span>);</span><br><span class="line">    String password = pros.getProperty(<span class="string">"password"</span>);</span><br><span class="line">    System.out.println(<span class="string">"user = "</span> + user + <span class="string">",password = "</span> + password);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="14-4-反射的应用"><a href="#14-4-反射的应用" class="headerlink" title="14.4 反射的应用"></a>14.4 反射的应用</h4><p><strong>1）创建运行时类的对象</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;Person&gt; clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">Person obj = clazz.newInstance();</span><br><span class="line">System.out.println(obj);</span><br></pre></td></tr></table></figure><p><code>newInstance()</code>：调用此方法，创建对应的运行时类的对象。内部调用了运行时类的空参的构造器。</p><p>要想此方法正常的创建运行时类的对象，要求：</p><ol><li>运行时类必须提供空参的构造器.</li><li>空参的构造器的访问权限得够。通常，设置为public。</li></ol><p>在 JavaBean 中要求提供一个 public 的空参构造器。原因：</p><ol><li>便于通过反射，创建运行时类的对象.</li><li>便于子类继承此运行时类时，默认调用super()时，保证父类此构造器.</li></ol><p><strong>2）获取运行时类的完整结构</strong></p><p>通过反射，获取对应的运行时类中所有的属性、方法、构造器、父类、接口、父类的泛型、包、注解、异常等。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取属性结构</span></span><br><span class="line">    <span class="comment">//getFields():获取当前运行时类及其父类中声明为public访问权限的属性</span></span><br><span class="line">    Field[] fields = clazz.getFields();</span><br><span class="line">    <span class="keyword">for</span>(Field f : fields)&#123;</span><br><span class="line">        System.out.println(f);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getDeclaredFields():获取当前运行时类中声明的所属性。（不包含父类中声明的属性</span></span><br><span class="line">    Field[] declaredFields = clazz.getDeclaredFields();</span><br><span class="line">    <span class="keyword">for</span>(Field f : declaredFields)&#123;</span><br><span class="line">        System.out.println(f);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getMethods():获取当前运行时类及其所父类中声明为public权限的方法</span></span><br><span class="line">    Method[] methods = clazz.getMethods();</span><br><span class="line">    <span class="keyword">for</span>(Method m : methods)&#123;</span><br><span class="line">        System.out.println(m);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">    <span class="comment">//getDeclaredMethods():获取当前运行时类中声明的所方法。（不包含父类中声明的方法</span></span><br><span class="line">    Method[] declaredMethods = clazz.getDeclaredMethods();</span><br><span class="line">    <span class="keyword">for</span>(Method m : declaredMethods)&#123;</span><br><span class="line">        System.out.println(m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取构造器结构</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    <span class="comment">//getConstructors():获取当前运行时类中声明为public的构造器</span></span><br><span class="line">    Constructor[] constructors = clazz.getConstructors();</span><br><span class="line">    <span class="keyword">for</span>(Constructor c : constructors)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line">    <span class="comment">//getDeclaredConstructors():获取当前运行时类中声明的所的构造器</span></span><br><span class="line">    Constructor[] declaredConstructors = clazz.getDeclaredConstructors();</span><br><span class="line">    <span class="keyword">for</span>(Constructor c : declaredConstructors)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取运行时类的父类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    Class superclass = clazz.getSuperclass();</span><br><span class="line">    System.out.println(superclass);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取运行时类的带泛型的父类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    Type genericSuperclass = clazz.getGenericSuperclass();</span><br><span class="line">    System.out.println(genericSuperclass);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取运行时类的带泛型的父类的泛型</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    代码：逻辑性代码  vs 功能性代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    Type genericSuperclass = clazz.getGenericSuperclass();</span><br><span class="line">    ParameterizedType paramType = (ParameterizedType) genericSuperclass;</span><br><span class="line">    <span class="comment">//获取泛型类型</span></span><br><span class="line">    Type[] actualTypeArguments = paramType.getActualTypeArguments();</span><br><span class="line">    <span class="comment">//        System.out.println(actualTypeArguments[0].getTypeName());</span></span><br><span class="line">    System.out.println(((Class)actualTypeArguments[<span class="number">0</span>]).getName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取运行时类实现的接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    Class[] interfaces = clazz.getInterfaces();</span><br><span class="line">    <span class="keyword">for</span>(Class c : interfaces)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line">    <span class="comment">//获取运行时类的父类实现的接口</span></span><br><span class="line">    Class[] interfaces1 = clazz.getSuperclass().getInterfaces();</span><br><span class="line">    <span class="keyword">for</span>(Class c : interfaces1)&#123;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    获取运行时类所在的包</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    Package pack = clazz.getPackage();</span><br><span class="line">    System.out.println(pack);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">获取运行时类声明的注解</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    Annotation[] annotations = clazz.getAnnotations();</span><br><span class="line">    <span class="keyword">for</span>(Annotation annos : annotations)&#123;</span><br><span class="line">        System.out.println(annos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3）调用运行时类的指定结构</strong></p><p><strong>调用指定的属性</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testField1</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建运行时类的对象</span></span><br><span class="line">    Person p = (Person) clazz.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. getDeclaredField(String fieldName):获取运行时类中指定变量名的属性</span></span><br><span class="line">    Field name = clazz.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.保证当前属性是可访问的</span></span><br><span class="line">    name.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">//3.获取、设置指定对象的此属性值</span></span><br><span class="line">    name.set(p,<span class="string">"Tom"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(name.get(p));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>调用指定的方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMethod</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建运行时类的对象</span></span><br><span class="line">    Person p = (Person) clazz.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1.获取指定的某个方法</span></span><br><span class="line"><span class="comment">        getDeclaredMethod():参数1 ：指明获取的方法的名称  参数2：指明获取的方法的形参列表</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    Method show = clazz.getDeclaredMethod(<span class="string">"show"</span>, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    <span class="comment">//2.保证当前方法是可访问的</span></span><br><span class="line">    show.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        3. 调用方法的invoke():参数1：方法的调用者  参数2：给方法形参赋值的实参</span></span><br><span class="line"><span class="comment">        invoke()的返回值即为对应类中调用的方法的返回值。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    Object returnValue = show.invoke(p,<span class="string">"CHN"</span>); <span class="comment">//String nation = p.show("CHN");</span></span><br><span class="line">    System.out.println(returnValue);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"*************如何调用静态方法*****************"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// private static void showDesc()</span></span><br><span class="line"></span><br><span class="line">    Method showDesc = clazz.getDeclaredMethod(<span class="string">"showDesc"</span>);</span><br><span class="line">    showDesc.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">//如果调用的运行时类中的方法没返回值，则此invoke()返回null</span></span><br><span class="line">    <span class="comment">//        Object returnVal = showDesc.invoke(null);</span></span><br><span class="line">    Object returnVal = showDesc.invoke(Person<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    System.out.println(returnVal);<span class="comment">//null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>调用指定的构造器</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testConstructor</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Class clazz = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//private Person(String name)</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1.获取指定的构造器</span></span><br><span class="line"><span class="comment">    getDeclaredConstructor():参数：指明构造器的参数列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    Constructor constructor = clazz.getDeclaredConstructor(String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.保证此构造器是可访问的</span></span><br><span class="line">    constructor.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.调用此构造器创建运行时类的对象</span></span><br><span class="line">    Person per = (Person) constructor.newInstance(<span class="string">"Tom"</span>);</span><br><span class="line">    System.out.println(per);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4）动态代理</strong></p><p>代理模式的原理：使用一个代理将对象包装起来, 然后用该代理对象取代原始对象。任何对原始对象的调用都要通过代理。代理对象决定是否以及何时将方法调用转到原始对象上。 </p><p><strong>静态代理</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现Runnable接口的方法创建多线程。</span></span><br><span class="line">Class MyThread implements Runnable&#123;&#125; <span class="comment">//相当于被代理类</span></span><br><span class="line">Class Thread implements Runnable&#123;&#125; <span class="comment">//相当于代理类</span></span><br><span class="line">main()&#123;</span><br><span class="line">    MyThread t = <span class="keyword">new</span> MyThread();</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(t);</span><br><span class="line">    thread.start();<span class="comment">//启动线程；调用线程的run()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>静态代理的缺点</strong></p><p>① 代理类和目标对象的类都是在编译期间确定下来，不利于程序的扩展。</p><p>② 每一个代理类只能为一个接口服务，这样一来程序开发中必然产生过多的代理。</p><p><strong>动态代理</strong></p><p>动态代理是指客户通过代理类来调用其它对象的方法，并且是在程序运行时根据需要动态创建目标类的代理对象。</p><p><strong>需要解决的两个主要问题</strong></p><p>问题一：如何根据加载到内存中的被代理类，动态的创建一个代理类及其对象。 （<strong>通过 Proxy.newProxyInstance() 实现</strong>）</p><p>问题二：当通过代理类的对象调用方法a时，如何动态的去调用被代理类中的同名方法a。(<strong>通过 InvocationHandler 接口的实现类及其方法 invoke()</strong>)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 动态代理的举例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Human</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">getBelief</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">(String food)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperMan</span> <span class="keyword">implements</span> <span class="title">Human</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getBelief</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"I believe I can fly!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">(String food)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我喜欢吃"</span> + food);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanUtil</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"====================通用方法一===================="</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"====================通用方法二===================="</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span></span>&#123;</span><br><span class="line">    <span class="comment">//调用此方法，返回一个代理类的对象。解决问题一</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getProxyInstance</span><span class="params">(Object obj)</span></span>&#123;<span class="comment">//obj:被代理类的对象</span></span><br><span class="line">        MyInvocationHandler handler = <span class="keyword">new</span> MyInvocationHandler();</span><br><span class="line"></span><br><span class="line">        handler.bind(obj);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(obj.getClass().getClassLoader(),obj.getClass().getInterfaces(),handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object obj;<span class="comment">//需要使用被代理类的对象进行赋值</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bind</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当我们通过代理类的对象，调用方法a时，就会自动的调用如下的方法：invoke()</span></span><br><span class="line">    <span class="comment">//将被代理类要执行的方法a的功能就声明在invoke()中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"></span><br><span class="line">        HumanUtil util = <span class="keyword">new</span> HumanUtil();</span><br><span class="line">        util.method1();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//method:即为代理类对象调用的方法，此方法也就作为了被代理类对象要调用的方法</span></span><br><span class="line">        <span class="comment">//obj:被代理类的对象</span></span><br><span class="line">        Object returnValue = method.invoke(obj,args);</span><br><span class="line"></span><br><span class="line">        util.method2();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上述方法的返回值就作为当前类中的invoke()的返回值。</span></span><br><span class="line">        <span class="keyword">return</span> returnValue;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SuperMan superMan = <span class="keyword">new</span> SuperMan();</span><br><span class="line">        <span class="comment">//proxyInstance:代理类的对象</span></span><br><span class="line">        Human proxyInstance = (Human) ProxyFactory.getProxyInstance(superMan);</span><br><span class="line">        <span class="comment">//当通过代理类对象调用方法时，会自动的调用被代理类中同名的方法</span></span><br><span class="line">        String belief = proxyInstance.getBelief();</span><br><span class="line">        System.out.println(belief);</span><br><span class="line">        proxyInstance.eat(<span class="string">"四川麻辣烫"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"*****************************"</span>);</span><br><span class="line"></span><br><span class="line">        NikeClothFactory nikeClothFactory = <span class="keyword">new</span> NikeClothFactory();</span><br><span class="line"></span><br><span class="line">        ClothFactory proxyClothFactory = (ClothFactory) ProxyFactory.getProxyInstance(nikeClothFactory);</span><br><span class="line"></span><br><span class="line">        proxyClothFactory.produceCloth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第15章-网络编程"><a href="#第15章-网络编程" class="headerlink" title="第15章 网络编程"></a>第15章 网络编程</h3><h4 id="15-1-InetAddress-类的使用"><a href="#15-1-InetAddress-类的使用" class="headerlink" title="15.1 InetAddress 类的使用"></a>15.1 InetAddress 类的使用</h4><p><strong>1）网络通信的实现</strong></p><ol><li><p>准确地定位网络上一台或多台主机；定位主机上的特定的应用：<strong>IP 和端口号</strong>。</p></li><li><p>找到主机后可靠高效地进行数据传输：<strong>提供网络通信协议</strong>（TCP/IP参考模型（应用层、传输层、网络层、物理+数据链路层））。</p></li></ol><p><strong>2）IP 和端口号</strong></p><p><strong>IP</strong>：<strong>唯一的标识</strong>，Internet 上的计算机（通信实体）。</p><ol><li>在 Java 中使用 InetAddress 类代表 IP。</li><li>IP分类：IPv4 和 IPv6；万维网 和 局域网。</li><li>域名:   <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>   <a href="http://www.mi.com" target="_blank" rel="noopener">www.mi.com</a>  <a href="http://www.sina.com" target="_blank" rel="noopener">www.sina.com</a>  <a href="http://www.jd.com" target="_blank" rel="noopener">www.jd.com</a></li><li>域名解析：域名容易记忆，当在连接网络时输入一个主机的域名后，域名服务器（DNS）负责将域名转化成IP地址，这样才能和主机建立连接。</li><li>本地回路地址：127.0.0.1 对应 localhost</li></ol><p><strong>端口号</strong>：正在计算机上运行的进程。</p><ul><li>要求：不同的进程不同的端口号。</li><li>范围：被规定为一个 16 位的整数 0~65535。</li></ul><p><strong>套接字</strong>：端口号与 IP 地址的组合得出一个网络套接字（Socket）。</p><p><strong>3）InetAddress 类</strong></p><ul><li><p>此类的一个对象就代表着一个具体的 IP 地址。</p></li><li><p><strong>实例化</strong>：getByName(String host) 、 getLocalHost()。</p></li><li><p><strong>常用方法</strong>：getHostName() / getHostAddress()。</p></li></ul><p><strong>4）网络通信协议</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/参考模型.png" alt="参考模型" style="zoom:150%;"><p><strong>TCP 和 UDP 的区别</strong></p><p><strong>TCP 协议</strong></p><ol><li>使用 TCP 协议前，须先建立 TCP 连接，形成传输数据通道。</li><li>传输前，采用“三次握手”方式，<strong>点对点</strong>通信，是<strong>可靠的</strong>。</li><li>TCP 协议进行通信的两个应用进程：客户端、服务器。</li><li>在连接中可<strong>进行大数据量的传输</strong>。</li><li>传输完毕，<strong>须释放已建立的连接，效率低</strong>。</li></ol><p><strong>UDP 协议</strong></p><ol><li>将数据、源、目的封装成数据包，不需要建立连接。</li><li>每个数据报的大小限制在 64k 内。</li><li>发送不管对方是否准备好，接收方收到也不确认，故是不可靠的。</li><li>可以广播发送。</li><li>发送数据结束时无需是否资源，开销小，速度快。</li></ol><p><strong>TCP 三次握手和四次挥手</strong></p><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/TCP 三次握手.png" alt="TCP 三次握手" style="zoom: 200%;"><img src="/2020/08/Java%20%E7%AC%94%E8%AE%B0/TCP 四次握手.png" alt="TCP 四次握手" style="zoom: 200%;"><h4 id="15-2-TCP-网络编程"><a href="#15-2-TCP-网络编程" class="headerlink" title="15.2 TCP 网络编程"></a>15.2 TCP 网络编程</h4><p><strong>1）代码示例1</strong>：客户端发送信息给服务端，服务端将数据显示在控制台上。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//客户端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">    Socket socket = <span class="keyword">null</span>;</span><br><span class="line">    OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建Socket对象，指明服务器端的ip和端口号</span></span><br><span class="line">        InetAddress inet = InetAddress.getByName(<span class="string">"192.168.14.100"</span>);</span><br><span class="line">        socket = <span class="keyword">new</span> Socket(inet,<span class="number">8899</span>);</span><br><span class="line">        <span class="comment">//2.获取一个输出流，用于输出数据</span></span><br><span class="line">        os = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//3.写出数据的操作</span></span><br><span class="line">        os.write(<span class="string">"你好，我是客户端mm"</span>.getBytes());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.资源的关闭</span></span><br><span class="line">        <span class="keyword">if</span>(os != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(socket != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//服务端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span>  </span>&#123;</span><br><span class="line"></span><br><span class="line">    ServerSocket ss = <span class="keyword">null</span>;</span><br><span class="line">    Socket socket = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    ByteArrayOutputStream baos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.创建服务器端的ServerSocket，指明自己的端口号</span></span><br><span class="line">        ss = <span class="keyword">new</span> ServerSocket(<span class="number">8899</span>);</span><br><span class="line">        <span class="comment">//2.调用accept()表示接收来自于客户端的socket</span></span><br><span class="line">        socket = ss.accept();</span><br><span class="line">        <span class="comment">//3.获取输入流</span></span><br><span class="line">        is = socket.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//不建议这样写，可能会乱码</span></span><br><span class="line">        <span class="comment">//        byte[] buffer = new byte[1024];</span></span><br><span class="line">        <span class="comment">//        int len;</span></span><br><span class="line">        <span class="comment">//        while((len = is.read(buffer)) != -1)&#123;</span></span><br><span class="line">        <span class="comment">//            String str = new String(buffer,0,len);</span></span><br><span class="line">        <span class="comment">//            System.out.print(str);</span></span><br><span class="line">        <span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//4.读取输入流中的数据</span></span><br><span class="line">        baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            baos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(baos.toString());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"收到了来自于："</span> + socket.getInetAddress().getHostAddress() + <span class="string">"的数据"</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(baos != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//5.关闭资源</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                baos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(socket != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ss != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ss.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）代码示例2</strong>：客户端发送文件给服务端，服务端将文件保存在本地。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这里涉及到的异常，应该使用try-catch-finally处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(InetAddress.getByName(<span class="string">"127.0.0.1"</span>),<span class="number">9090</span>);</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    OutputStream os = socket.getOutputStream();</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"beauty.jpg"</span>));</span><br><span class="line">    <span class="comment">//4.</span></span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = fis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//5.</span></span><br><span class="line">    fis.close();</span><br><span class="line">    os.close();</span><br><span class="line">    socket.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这里涉及到的异常，应该使用try-catch-finally处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">9090</span>);</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Socket socket = ss.accept();</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    InputStream is = socket.getInputStream();</span><br><span class="line">    <span class="comment">//4.</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"beauty1.jpg"</span>));</span><br><span class="line">    <span class="comment">//5.</span></span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//6.</span></span><br><span class="line">    fos.close();</span><br><span class="line">    is.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    ss.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">代码示例<span class="number">3</span>：从客户端发送文件给服务端，服务端保存到本地。并返回“发送成功”给客户端。并关闭相应的连接。</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    这里涉及到的异常，应该使用try-catch-finally处理</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">client</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(InetAddress.getByName(<span class="string">"127.0.0.1"</span>),<span class="number">9090</span>);</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    OutputStream os = socket.getOutputStream();</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"beauty.jpg"</span>));</span><br><span class="line">    <span class="comment">//4.</span></span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = fis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭数据的输出</span></span><br><span class="line">    socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.接收来自于服务器端的数据，并显示到控制台上</span></span><br><span class="line">    InputStream is = socket.getInputStream();</span><br><span class="line">    ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">    <span class="keyword">byte</span>[] bufferr = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">int</span> len1;</span><br><span class="line">    <span class="keyword">while</span>((len1 = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        baos.write(buffer,<span class="number">0</span>,len1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(baos.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.</span></span><br><span class="line">    fis.close();</span><br><span class="line">    os.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    baos.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这里涉及到的异常，应该使用try-catch-finally处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">server</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">9090</span>);</span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line">    Socket socket = ss.accept();</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    InputStream is = socket.getInputStream();</span><br><span class="line">    <span class="comment">//4.</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"beauty2.jpg"</span>));</span><br><span class="line">    <span class="comment">//5.</span></span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">while</span>((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"图片传输完成"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6.服务器端给予客户端反馈</span></span><br><span class="line">    OutputStream os = socket.getOutputStream();</span><br><span class="line">    os.write(<span class="string">"你好，美女，照片我已收到，非常漂亮！"</span>.getBytes());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7.</span></span><br><span class="line">    fos.close();</span><br><span class="line">    is.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    ss.close();</span><br><span class="line">    os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="15-3-UDP-网络编程"><a href="#15-3-UDP-网络编程" class="headerlink" title="15.3 UDP 网络编程"></a>15.3 UDP 网络编程</h4><p><strong>代码示例</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sender</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    DatagramSocket socket = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line"></span><br><span class="line">    String str = <span class="string">"我是UDP方式发送的导弹"</span>;</span><br><span class="line">    <span class="keyword">byte</span>[] data = str.getBytes();</span><br><span class="line">    InetAddress inet = InetAddress.getLocalHost();</span><br><span class="line">    DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(data,<span class="number">0</span>,data.length,inet,<span class="number">9090</span>);</span><br><span class="line"></span><br><span class="line">    socket.send(packet);</span><br><span class="line"></span><br><span class="line">    socket.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//接收端</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiver</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    DatagramSocket socket = <span class="keyword">new</span> DatagramSocket(<span class="number">9090</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">    DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buffer,<span class="number">0</span>,buffer.length);</span><br><span class="line"></span><br><span class="line">    socket.receive(packet);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(packet.getData(),<span class="number">0</span>,packet.getLength()));</span><br><span class="line"></span><br><span class="line">    socket.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="15-4-URL-编程"><a href="#15-4-URL-编程" class="headerlink" title="15.4  URL 编程"></a>15.4  URL 编程</h4><p><strong>1）URL（Uniform Resource Locator）</strong>：统一资源定位符，对应着互联网的某一资源地址。</p><p><strong>URL 的5个基本结构</strong>     </p><table><thead><tr><th>http://</th><th>localhost:</th><th>8080</th><th>/examples/beauty.jpg</th><th>?username=Tom</th></tr></thead><tbody><tr><td>协议</td><td>主机名</td><td>端口号</td><td>资源地址</td><td>参数列表</td></tr></tbody></table><p><strong>实例化</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL url = <span class="keyword">new</span> URL(<span class="string">"http://localhost:8080/examples/beauty.jpg?username=Tom"</span>);</span><br></pre></td></tr></table></figure><p><strong>2）常用方法</strong></p><p><code>public String getProtocol()</code>：获取该 URL 的协议名。</p><p><code>public String getHost()</code>：获取该 URL 的主机名。</p><p><code>public String getPort()</code>：获取该 URL 的端口号。</p><p><strong><code>public String getPath()</code>：获取该 URL 的文件路径。</strong></p><p><code>public String getFile()</code>：获取该 URL 的文件名。</p><p><strong><code>public String getQuery()</code>：获取该 URL 的查询名。</strong></p><p><strong>3）读取、下载对应的 url 资源</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    HttpURLConnection urlConnection = <span class="keyword">null</span>;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">"http://localhost:8080/examples/beauty.jpg"</span>);</span><br><span class="line"></span><br><span class="line">        urlConnection = (HttpURLConnection) url.openConnection();</span><br><span class="line"></span><br><span class="line">        urlConnection.connect();</span><br><span class="line"></span><br><span class="line">        is = urlConnection.getInputStream();</span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"day10\\beauty3.jpg"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"下载完成"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭资源</span></span><br><span class="line">        <span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(fos != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(urlConnection != <span class="keyword">null</span>)&#123;</span><br><span class="line">            urlConnection.disconnect();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第16章-注解（Annotation）"><a href="#第16章-注解（Annotation）" class="headerlink" title="第16章 注解（Annotation）"></a>第16章 注解（Annotation）</h3><h4 id="16-1-注解的理解"><a href="#16-1-注解的理解" class="headerlink" title="16.1 注解的理解"></a>16.1 注解的理解</h4><ul><li><p>JDK 5.0 新增的功能</p></li><li><p>注解其实就是代码里的<strong>特殊标记</strong>，这些标记可以在编译，类加载，运行时被读取，并执行相应的处理。通过使用注解，程序员可以在不改变原逻辑的情况下，在源文件中嵌入一些补充信息。</p></li><li><p>在 Java SE 中，注解的使用目的比较简单，例如标记过时的功能，忽略警告等。在 JavaEE 和 Android 中注解占据了更重要的角色，例如用来配置应用程序的任何切面，代替 Java EE 旧版中所遗留的繁冗代码和 XML 配置等。</p></li><li><p><strong>框架 = 注解 + 反射机制 + 设计模式</strong></p></li></ul><h4 id="16-2-使用示例"><a href="#16-2-使用示例" class="headerlink" title="16.2 使用示例"></a>16.2 使用示例</h4><ol><li>生成文档相关的注解</li><li>在编译时进行格式检查（JDK 内置的基本注解）<ul><li>@Override：限定重写父类方法, 该注解只能用于方法。</li><li>@Deprecated：用于表示所修饰的元素（类, 方法等）已过时。通常是因为所修饰的结构危险或存在更好的选择。</li><li>@SuppressWarnings：抑制编译器警告。</li></ul></li></ol><h4 id="16-3-自定义注解"><a href="#16-3-自定义注解" class="headerlink" title="16.3 自定义注解"></a>16.3 自定义注解</h4><p><strong>参照 @SuppressWarnings 定义</strong></p><ol><li><p>注解声明为：@interface。</p></li><li><p>内部定义成员，通常使用 value 表示。</p></li><li><p>可以指定成员的默认值，使用 default 定义。</p></li><li><p>如果自定义注解没成员，表明是一个标识作用。</p></li></ol><p><strong>说明</strong></p><ul><li><p>如果注解有成员，在使用注解时，需要指明成员的值。</p></li><li><p>自定义注解必须配上注解的信息处理流程(使用反射)才意义。</p></li><li><p>自定义注解通过都会指明两个元注解：Retention、Target。</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Repeatable</span>(MyAnnotations<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Retention</span>(<span class="title">RetentionPolicy</span>.<span class="title">RUNTIME</span>)</span></span><br><span class="line"><span class="class">@<span class="title">Target</span>(</span>&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE,TYPE_PARAMETER,TYPE_USE&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> "hello"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="16-4-元注解"><a href="#16-4-元注解" class="headerlink" title="16.4 元注解"></a>16.4 元注解</h4><ul><li>对现有的注解进行解释说明的注解。 </li></ul><p><strong>JDK 提供的 4 种元注解</strong></p><ol><li>Retention：指定所修饰的 Annotation 的生命周期：SOURCE\CLASS（默认行为 RUNTIME 只声明为 RUNTIME 生命周期的注解，才能通过反射获取。）</li><li>Target：用于指定被修饰的 Annotation 能用于修饰哪些程序元素</li><li>Documented：表示所修饰的注解在被 javadoc 解析时，保留下来。</li><li>Inherited：被它修饰的 Annotation 将具继承性。</li></ol><h4 id="16-5-获取注解信息"><a href="#16-5-获取注解信息" class="headerlink" title="16.5 获取注解信息"></a>16.5 获取注解信息</h4><p><strong>1）通过反射来进行获取、调用。</strong></p><ul><li>要求此注解的元注解 Retention 中声明的生命周期状态为：RUNTIME.</li></ul><p><strong>2）JDK8中注解的新特性</strong></p><ol><li><strong>可重复注解</strong><ul><li>在 MyAnnotation 上声明 @Repeatable，成员值为 MyAnnotations.class。</li><li>MyAnnotation 的 Target 和 Retention 等元注解与 MyAnnotations 相同。</li></ul></li><li><strong>类型注解</strong><ul><li><code>ElementType.TYPE_PARAMETER</code> 表示该注解能写在类型变量的<strong>声明语句</strong>中，如：泛型声明。</li><li><code>ElementType.TYPE_USE</code> 表示该注解能写在使用类型的<strong>任何语句</strong>中。</li></ul></li></ol><h3 id="第17章-枚举类（Enumeration）"><a href="#第17章-枚举类（Enumeration）" class="headerlink" title="第17章 枚举类（Enumeration）"></a>第17章 枚举类（Enumeration）</h3><h4 id="17-1-枚举类的说明"><a href="#17-1-枚举类的说明" class="headerlink" title="17.1 枚举类的说明"></a>17.1 枚举类的说明</h4><ol><li><p>枚举类的理解：类的对象只有有限个，确定的。我们称此类为枚举类</p></li><li><p>当需要定义一组常量时，强烈建议使用枚举类</p></li><li><p>如果枚举类中只一个对象，则可以作为单例模式的实现方式。</p></li></ol><h4 id="17-2-自定义枚举类"><a href="#17-2-自定义枚举类" class="headerlink" title="17.2 自定义枚举类"></a>17.2 自定义枚举类</h4><ol><li>声明对象的属性：<code>private final</code> 修饰。</li><li>私化类的构造器,并给对象属性赋值。</li><li>提供当前枚举类的多个对象：<code>public static final</code> 的。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义枚举类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Season</span></span>&#123;</span><br><span class="line">     <span class="comment">//1.声明Season对象的属性:private final修饰</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">final</span> String seasonName;</span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">final</span> String seasonDesc;</span><br><span class="line">     <span class="comment">//2.私化类的构造器,并给对象属性赋值</span></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Season</span><span class="params">(String seasonName,String seasonDesc)</span></span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.seasonName = seasonName;</span><br><span class="line">         <span class="keyword">this</span>.seasonDesc = seasonDesc;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">//3.提供当前枚举类的多个对象：public static final的</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season SPRING = <span class="keyword">new</span> Season(<span class="string">"春天"</span>,<span class="string">"春暖花开"</span>);</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season SUMMER = <span class="keyword">new</span> Season(<span class="string">"夏天"</span>,<span class="string">"夏日炎炎"</span>);</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season AUTUMN = <span class="keyword">new</span> Season(<span class="string">"秋天"</span>,<span class="string">"秋高气爽"</span>);</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season WINTER = <span class="keyword">new</span> Season(<span class="string">"冬天"</span>,<span class="string">"冰天雪地"</span>);</span><br><span class="line">     <span class="comment">//4.其他诉求1：获取枚举类对象的属性</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> seasonName;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> seasonDesc;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="comment">//4.其他诉求1：提供toString()</span></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">"Season&#123;"</span> +</span><br><span class="line">                 <span class="string">"seasonName='"</span> + seasonName + <span class="string">'\''</span> +</span><br><span class="line">                 <span class="string">", seasonDesc='"</span> + seasonDesc + <span class="string">'\''</span> +</span><br><span class="line">                 <span class="string">'&#125;'</span>;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="17-3-使用-enum-定义枚举类"><a href="#17-3-使用-enum-定义枚举类" class="headerlink" title="17.3 使用 enum 定义枚举类"></a>17.3 使用 enum 定义枚举类</h4><p><strong>1）使用 enum 定义枚举类（ jdk 5.0 新增）</strong></p><ol><li>提供当前枚举类的对象，多个对象之间用 “,” 隔开，末尾对象 “;” 结束。</li><li>声明对象的属性：<code>private final</code> 修饰。</li><li>私化类的构造器,并给对象属性赋值。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用enum关键字枚举类</span></span><br><span class="line"><span class="keyword">enum</span> Season &#123;</span><br><span class="line">     <span class="comment">//1.提供当前枚举类的对象，多个对象之间用","隔开，末尾对象";"结束</span></span><br><span class="line">     SPRING(<span class="string">"春天"</span>,<span class="string">"春暖花开"</span>),</span><br><span class="line">     SUMMER(<span class="string">"夏天"</span>,<span class="string">"夏日炎炎"</span>),</span><br><span class="line">     AUTUMN(<span class="string">"秋天"</span>,<span class="string">"秋高气爽"</span>),</span><br><span class="line">     WINTER(<span class="string">"冬天"</span>,<span class="string">"冰天雪地"</span>);</span><br><span class="line"></span><br><span class="line">     <span class="comment">//2.声明Season对象的属性:private final修饰</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">final</span> String seasonName;</span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">final</span> String seasonDesc;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//3.私化类的构造器,并给对象属性赋值</span></span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Season</span><span class="params">(String seasonName,String seasonDesc)</span></span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.seasonName = seasonName;</span><br><span class="line">         <span class="keyword">this</span>.seasonDesc = seasonDesc;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//4.其他诉求1：获取枚举类对象的属性</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> seasonName;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> seasonDesc;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）枚举类常用方法（继承于 java.lang.Enum 类）</strong></p><ul><li><code>toString()</code>：返回枚举类对象的名称</li><li><code>values()</code>：返回所有的枚举类对象构成的数组</li><li><code>valueOf(String objName)</code>：返回枚举类中对象名是 objName 的对象。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用enum定义枚举类之后，枚举类常用方法：</span></span><br><span class="line">Season1 summer = Season.SUMMER;</span><br><span class="line"><span class="comment">// toString():返回枚举类对象的名称</span></span><br><span class="line">System.out.println(summer.toString());</span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(Season1.class.getSuperclass());</span></span><br><span class="line">System.out.println(<span class="string">"****************"</span>);</span><br><span class="line"><span class="comment">// values():返回所的枚举类对象构成的数组</span></span><br><span class="line">Season1[] values = Season.values();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; values.length;i++)&#123;</span><br><span class="line">    System.out.println(values[i]);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">"****************"</span>);</span><br><span class="line">Thread.State[] values1 = Thread.State.values();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; values1.length; i++) &#123;</span><br><span class="line">    System.out.println(values1[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//valueOf(String objName):返回枚举类中对象名是objName的对象。</span></span><br><span class="line">Season1 winter = Season1.valueOf(<span class="string">"WINTER"</span>);</span><br><span class="line"><span class="comment">//如果没objName的枚举类对象，则抛异常：IllegalArgumentException</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        Season1 winter = Season1.valueOf("WINTER1");</span></span><br><span class="line">System.out.println(winter);</span><br></pre></td></tr></table></figure><p><strong>3）枚举类对象分别实现接口</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用enum定义枚举类之后，如何让枚举类对象分别实现接口：</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Info</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用enum关键字枚举类</span></span><br><span class="line"><span class="keyword">enum</span> Season1 implements Info&#123;</span><br><span class="line">    <span class="comment">//1.提供当前枚举类的对象，多个对象之间用","隔开，末尾对象";"结束</span></span><br><span class="line">    SPRING(<span class="string">"春天"</span>,<span class="string">"春暖花开"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"春天在哪里？"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    SUMMER(<span class="string">"夏天"</span>,<span class="string">"夏日炎炎"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"宁夏"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    AUTUMN(<span class="string">"秋天"</span>,<span class="string">"秋高气爽"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"秋天不回来"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    WINTER(<span class="string">"冬天"</span>,<span class="string">"冰天雪地"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"大约在冬季"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第18章-新特性"><a href="#第18章-新特性" class="headerlink" title="第18章 新特性"></a>第18章 新特性</h3><h4 id="18-1-Java8-的新特性"><a href="#18-1-Java8-的新特性" class="headerlink" title="18.1 Java8 的新特性"></a>18.1 Java8 的新特性</h4><p><strong>1）Lambda 表达式</strong></p><p><strong>2）函数式接口</strong></p><p><strong>3）方法引用</strong></p><p><strong>4）构造器引用和数组引用</strong></p><p><strong>5）Stream API</strong></p><p><strong>6）Optional 类的使用</strong></p><p><strong>7）其他新特性</strong></p><h4 id="18-2-Java9-新特性"><a href="#18-2-Java9-新特性" class="headerlink" title="18.2 Java9 新特性"></a>18.2 Java9 新特性</h4><h4 id="18-3-Java10-新特性"><a href="#18-3-Java10-新特性" class="headerlink" title="18.3 Java10 新特性"></a>18.3 Java10 新特性</h4><h4 id="18-4-Java11-新特性"><a href="#18-4-Java11-新特性" class="headerlink" title="18.4 Java11 新特性"></a>18.4 Java11 新特性</h4>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/2020/08/Java%20%E7%AC%94%E8%AE%B0/image%5CJava%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB.png&quot; alt=&quot;image-20210202171943966&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;编程语言核心结构：变量、基本语法、分支、循环、数组等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Java 面向对象的核心逻辑：OOP、封装、继承、多态、接口等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;开发Java SE 高级应用程序：异常、集合、I/O、多线程、反射机制、网络编程等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;实训项目&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;项目一：讲完流程控制时，可以做。&lt;/p&gt;
&lt;p&gt;项目二：讲完面向对象（上），可以做&lt;/p&gt;
&lt;p&gt;项目三：讲完异常处理以后，可以做&lt;/p&gt;
&lt;p&gt;附加项目一：讲完异常处理以后，可以做&lt;/p&gt;
&lt;p&gt;附加项目二：讲完IO流以后，可以做&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>MySQL笔记</title>
    <link href="https://actionding.github.io/2020/07/MySQL%E7%AC%94%E8%AE%B0/"/>
    <id>https://actionding.github.io/2020/07/MySQL%E7%AC%94%E8%AE%B0/</id>
    <published>2020-07-05T19:02:02.000Z</published>
    <updated>2020-09-24T11:13:42.602Z</updated>
    
    <content type="html"><![CDATA[<p>我的MySQL笔记</p><a id="more"></a><hr><h2 id="第1章-MySQL概述"><a href="#第1章-MySQL概述" class="headerlink" title="第1章 MySQL概述"></a>第1章 MySQL概述</h2><p>MySQL是一个<strong>关系型数据库管理系统</strong>，由瑞典MySQL AB公司开发，属于Oracle旗下产品。MySQL是最流行的关系型数据库管理系统之一。</p><h3 id="1-1-数据库的常见概念"><a href="#1-1-数据库的常见概念" class="headerlink" title="1.1 数据库的常见概念"></a>1.1 数据库的常见概念</h3><h4 id="1-1-1-DB"><a href="#1-1-1-DB" class="headerlink" title="1.1.1 DB"></a>1.1.1 DB</h4><p>Database，数据库，存储数据的容器</p><h4 id="1-1-2-DBMS"><a href="#1-1-2-DBMS" class="headerlink" title="1.1.2 DBMS"></a>1.1.2 DBMS</h4><p>Database Management System，数据库管理系统，又称为数据库软件或数据库产品，用于创建或管理数据库</p><h4 id="1-1-3-SQL"><a href="#1-1-3-SQL" class="headerlink" title="1.1.3 SQL"></a>1.1.3 SQL</h4><p>Structured Query Language，结构化查询语言，用于和数据库通信的语言，不是某个数据库软件特有的，而是几乎所有的主流数据库软件通用的语言</p><blockquote><p>常见的数据库管理系统：MySQL、Oracle、db2、SQLserver</p></blockquote><h3 id="1-2-MySQL的介绍"><a href="#1-2-MySQL的介绍" class="headerlink" title="1.2 MySQL的介绍"></a>1.2 MySQL的介绍</h3><p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，属于Oracle 旗下产品</p><p>08年被SUN公司收购，09年SUN被Oracle收购</p><p>属于<strong>C/S架构</strong>的软件，一般安装服务端</p><p>分为<strong>企业版</strong>和<strong>社区版</strong></p><h3 id="1-3-MySQL的优点"><a href="#1-3-MySQL的优点" class="headerlink" title="1.3 MySQL的优点"></a>1.3 MySQL的优点</h3><p>1、开源、免费、成本低<br>2、性能高、移植性也好<br>3、体积小，便于安装</p><h3 id="1-4-MySQL语言的分类"><a href="#1-4-MySQL语言的分类" class="headerlink" title="1.4 MySQL语言的分类"></a>1.4 MySQL语言的分类</h3><h4 id="1-4-1-DML"><a href="#1-4-1-DML" class="headerlink" title="1.4.1 DML"></a>1.4.1 DML</h4><p>Data Manipulation Language：数据操纵语句，用于添加、删除、修改、查询数据库记录，并检查数据完整性</p><h4 id="1-4-2-DDL"><a href="#1-4-2-DDL" class="headerlink" title="1.4.2 DDL"></a>1.4.2 DDL</h4><p>Data Definition Language：数据定义语句，用于库和表的创建、修改、删除。</p><h4 id="1-4-3-DCL"><a href="#1-4-3-DCL" class="headerlink" title="1.4.3 DCL"></a>1.4.3 DCL</h4><p>Data Control Language：数据控制语句，用于定义用户的访问权限和安全级别。</p><h3 id="1-5-MySQL服务的启动和停止"><a href="#1-5-MySQL服务的启动和停止" class="headerlink" title="1.5 MySQL服务的启动和停止"></a>1.5 MySQL服务的启动和停止</h3><p>方式一：通过命令行</p><p>​    <code>net start [服务名]</code><br>​    <code>net stop [服务名]</code></p><p>方式二：计算机——右击——管理——服务</p><h3 id="1-6-MySQL服务的登录和退出"><a href="#1-6-MySQL服务的登录和退出" class="headerlink" title="1.6 MySQL服务的登录和退出"></a>1.6 MySQL服务的登录和退出</h3><p>登录：<code>mysql [-h 主机名 -P 端口号] -u[用户名] -p[密码]</code></p><p>退出：<code>exit</code> 或 <code>ctrl+C</code></p><hr><h2 id="第2章-DQL语言"><a href="#第2章-DQL语言" class="headerlink" title="第2章 DQL语言"></a>第2章 DQL语言</h2><p>DQL（Data Query Language）：数据查询语言，用来查询记录（数据）</p><h3 id="2-1-基础查询"><a href="#2-1-基础查询" class="headerlink" title="2.1 基础查询"></a>2.1 基础查询</h3><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  查询列表 </span><br><span class="line">FROM</span><br><span class="line">  表名 ;</span><br></pre></td></tr></table></figure><p>查询列表：表中的字段、常量值、表达式、函数</p><p>查询的结果是一个虚拟的表格</p><h4 id="2-1-1-查询表中的单个字段"><a href="#2-1-1-查询表中的单个字段" class="headerlink" title="2.1.1 查询表中的单个字段"></a>2.1.1 查询表中的单个字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name FROM employees;</span><br></pre></td></tr></table></figure><h4 id="2-1-2-查询表中的多个字段"><a href="#2-1-2-查询表中的多个字段" class="headerlink" title="2.1.2 查询表中的多个字段"></a>2.1.2 查询表中的多个字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,salary,email FROM employees;</span><br></pre></td></tr></table></figure><h4 id="2-1-3-查询表中的所有字段"><a href="#2-1-3-查询表中的所有字段" class="headerlink" title="2.1.3 查询表中的所有字段"></a>2.1.3 查询表中的所有字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  &#96;employee_id&#96;,</span><br><span class="line">  &#96;first_name&#96;,</span><br><span class="line">  &#96;last_name&#96;,</span><br><span class="line">  &#96;email&#96;,</span><br><span class="line">  &#96;phone_number&#96;,</span><br><span class="line">  &#96;job_id&#96;,</span><br><span class="line">  &#96;salary&#96;,</span><br><span class="line">  &#96;commission_pct&#96;,</span><br><span class="line">  &#96;manager_id&#96;,</span><br><span class="line">  &#96;department_id&#96;,</span><br><span class="line">  &#96;hiredate&#96; </span><br><span class="line">FROM</span><br><span class="line">  &#96;employees&#96; ;</span><br><span class="line">&#x2F;*</span><br><span class="line"> * F12 格式化</span><br><span class="line"> * 不是引号，是着重号，用来区分字段和关键字</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure><p><strong>或</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM employees;</span><br><span class="line"># 表中字段顺序固定</span><br></pre></td></tr></table></figure><h4 id="2-1-4-查询常量值"><a href="#2-1-4-查询常量值" class="headerlink" title="2.1.4 查询常量值"></a>2.1.4 查询常量值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100;</span><br><span class="line">SELECT &#39;john&#39;;</span><br><span class="line"># 不区分字符和字符串，都是字符型，用单引号</span><br></pre></td></tr></table></figure><h4 id="2-1-5-查询表达式"><a href="#2-1-5-查询表达式" class="headerlink" title="2.1.5 查询表达式"></a>2.1.5 查询表达式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 100%98;</span><br></pre></td></tr></table></figure><h4 id="2-1-6-查询函数"><a href="#2-1-6-查询函数" class="headerlink" title="2.1.6 查询函数"></a>2.1.6 查询函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure><h4 id="2-1-7-起别名"><a href="#2-1-7-起别名" class="headerlink" title="2.1.7 起别名"></a>2.1.7 起别名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 方式一：使用as</span><br><span class="line">SELECT 100%98 AS 结果;</span><br><span class="line">SELECT last_name AS 姓,first_name AS 名 FROM employees;</span><br><span class="line">&#x2F;*</span><br><span class="line"> *1 便于理解</span><br><span class="line"> *2 如果要查询的字段有重名的情况，使用别名可以区分开来</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 方式二：使用空格</span><br><span class="line">SELECT last_name 姓,first_name 名 FROM employees;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询salary，显示结果为 out put</span><br><span class="line">SELECT salary AS &quot;out put&quot; FROM employees;</span><br><span class="line"># 这里建议使用双引号，单引号也可以</span><br></pre></td></tr></table></figure><h4 id="2-1-8-去重"><a href="#2-1-8-去重" class="headerlink" title="2.1.8 去重"></a>2.1.8 去重</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使用DISTINCT关键字</span><br><span class="line">SELECT DISTINCT department_id FROM employees;</span><br></pre></td></tr></table></figure><h4 id="2-1-9-号的使用"><a href="#2-1-9-号的使用" class="headerlink" title="2.1.9 +号的使用"></a>2.1.9 <code>+</code>号的使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line"></span><br><span class="line">java中的+号：</span><br><span class="line">①运算符，两个操作数都为数值型</span><br><span class="line">②连接符，只要有一个操作数为字符串</span><br><span class="line"></span><br><span class="line">mysql中的+号：</span><br><span class="line">仅仅只有一个功能：运算符</span><br><span class="line"></span><br><span class="line">select 100+90; 两个操作数都为数值型，则做加法运算</span><br><span class="line">select &#39;123&#39;+90;只要其中一方为字符型，试图将字符型数值转换成数值型</span><br><span class="line">如果转换成功，则继续做加法运算</span><br><span class="line">select &#39;john&#39;+90;如果转换失败，则将字符型数值转换成0</span><br><span class="line"></span><br><span class="line">select null+10; 只要其中一方为null，则结果肯定为null</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"># 案例:查询员工名和姓连接成一个字段，并显示为 姓名</span><br><span class="line"></span><br><span class="line">SELECT CONCAT(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;) AS 结果;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">  错误的写法</span><br><span class="line">select </span><br><span class="line">  last_name + first_name as 姓名 </span><br><span class="line">from</span><br><span class="line">  employees ;</span><br><span class="line">*&#x2F;</span><br><span class="line"># 正确的写法，使用CONCAT()函数</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(&#96;first_name&#96;, &#96;last_name&#96;) AS 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure><h4 id="附：几个函数"><a href="#附：几个函数" class="headerlink" title="附：几个函数"></a>附：几个函数</h4><p>1）<code>concat()</code>函数</p><p>功能：拼接字符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(str1，str2，str3,...);</span><br></pre></td></tr></table></figure><p>2）<code>ifnull()</code> 函数</p><p>功能：判断某字段或表达式是否为<code>null</code>，如果为<code>null</code>返回指定的值，否则返回原本的值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT IFNULL(commission_pct,0) from employees;</span><br></pre></td></tr></table></figure><p>3）<code>isnull()</code> 函数</p><p>功能：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</p><h3 id="2-2-条件查询"><a href="#2-2-条件查询" class="headerlink" title="2.2 条件查询"></a>2.2 条件查询</h3><p>语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  查询列表 </span><br><span class="line">FROM</span><br><span class="line">  表名 </span><br><span class="line">WHERE 筛选条件 ;</span><br></pre></td></tr></table></figure><p>筛选条件的分类：</p><p>1）简单条件运算符</p><p>2）逻辑运算符</p><p>3）模糊查询</p><h4 id="2-2-1-简单条件运算符"><a href="#2-2-1-简单条件运算符" class="headerlink" title="2.2.1 简单条件运算符"></a>2.2.1 简单条件运算符</h4><table><thead><tr><th align="center">&gt;</th><th>&lt;</th><th align="center">=</th><th align="center">!=</th><th align="center">&lt;&gt;</th><th align="center">&gt;=</th><th align="center">&lt;=</th><th align="center">&lt;=&gt;</th></tr></thead><tbody><tr><td align="center">大于</td><td>小于</td><td align="center">等于</td><td align="center">不等于</td><td align="center">不等于</td><td align="center">大于等于</td><td align="center">小于等于</td><td align="center">安全等于</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询工资 &gt; 12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; 12000 ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号不等于90号的员工名和部门编号</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &lt;&gt; 90 ;</span><br></pre></td></tr></table></figure><h4 id="2-2-2-逻辑运算符"><a href="#2-2-2-逻辑运算符" class="headerlink" title="2.2.2 逻辑运算符"></a>2.2.2 逻辑运算符</h4><table><thead><tr><th align="center">&amp;&amp;</th><th align="center">||</th><th align="center">!</th></tr></thead><tbody><tr><td align="center">and</td><td align="center">or</td><td align="center">not</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询工资在10000到20000之间的员工名、工资以及奖金</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; 10000 </span><br><span class="line">  AND salary &lt; 20000 ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号不是在90到100之间，或者工资高于15000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &lt; 90 </span><br><span class="line">  OR department_id &gt; 110 </span><br><span class="line">  OR salary &gt; 15000 ;</span><br><span class="line">&#x2F;*</span><br><span class="line">WHERE not (</span><br><span class="line">    department_id &gt;&#x3D; 90 </span><br><span class="line">    AND department_id &lt;&#x3D; 110</span><br><span class="line">  ) </span><br><span class="line">  OR salary &gt; 15000 ;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure><h4 id="2-2-3-模糊查询"><a href="#2-2-3-模糊查询" class="headerlink" title="2.2.3 模糊查询"></a>2.2.3 模糊查询</h4><p>1）<code>like</code>:一般搭<strong>配通配符</strong>使用，可以判断字符型或数值型</p><p>通配符：</p><ul><li><p>%任意多个字符，，包含0个字符</p></li><li><p>_任意单个字符</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工名中包含字符a的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#39;%a%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询员工名中第三个字符为c，第五个字符为h的员工名和工资</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#39;__c_h%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例三：查询员工名中第二个字符为_的员工名</span><br><span class="line">SELECT </span><br><span class="line">  last_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name LIKE &#39;_\_%&#39; ;</span><br><span class="line"># WHERE last_name LIKE &#39;_$_%&#39; ESCAPE &#39;$&#39;;</span><br><span class="line"># 关键字ESCAPE：转义</span><br></pre></td></tr></table></figure><p>2） <code>between and</code></p><ul><li>使用between and可以提高语句的简洁度</li><li>包含临界值</li><li>两个临界值不要调换顺序</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工编号在100到120之间的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id BETWEEN 100 </span><br><span class="line">  AND 120 ;</span><br><span class="line"># 等价于</span><br><span class="line"># employee_id &gt;&#x3D; 100 AND employee_id &lt;&#x3D; 120;</span><br></pre></td></tr></table></figure><p>3）<code>in</code><br>含义：判断某字段的值是否属于in列表中的某一项<br>特点：</p><ul><li>使用in提高语句简洁度</li><li>in列表的值类型必须统一或兼容</li><li>in列表中不能使用通配符<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询员工的工种编号是 ITPROG、AD_VP、AD_PRES中的一个员工名和工种编号</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id IN (&#39;ITPROG&#39;, &#39;AD_VP&#39;, &#39;AD_PRES&#39;) ;</span><br><span class="line"># WHERE job_id IN (&#39;ITPROG&#39;, &#39;AD_%&#39;) ; # 错误</span><br><span class="line">&#x2F;*</span><br><span class="line">WHERE job_id &#x3D; &#39;ITPROG&#39; </span><br><span class="line">  OR job_id &#x3D; &#39;AD_VP&#39; </span><br><span class="line">  OR job_id &#x3D; &#39;AD_PRES&#39; ;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure></li></ul><p>4） <code>is null</code> /<code>is not null</code>：用于判断null值</p><blockquote><p>= 或 &lt;&gt; 不能用于判断null值</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NULL ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL ;</span><br></pre></td></tr></table></figure><p><strong>附</strong></p><p>``IS NULL<code>pk</code>&lt;=&gt;<code></code>IS NULL<code>：仅仅可以判断NULL值，可读性较高，建议使用</code>&lt;=&gt; `：既可以判断NULL值，有可以判断普通的数值，可读性较低</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 安全等于 &lt;&#x3D;&gt;</span><br><span class="line"># 案例1：查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct &lt;&#x3D;&gt; NULL ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询工资为12000的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  salary</span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt;&#x3D;&gt; 12000 ;</span><br></pre></td></tr></table></figure><h3 id="2-3-排序查询"><a href="#2-3-排序查询" class="headerlink" title="2.3 排序查询"></a>2.3 排序查询</h3><h4 id="2-3-1-语法"><a href="#2-3-1-语法" class="headerlink" title="2.3.1 语法"></a>2.3.1 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  查询列表 </span><br><span class="line">FROM</span><br><span class="line">  表 </span><br><span class="line">WHERE 【筛选条件】 </span><br><span class="line">ORDER BY 排序列表【 ASC | DESC 】</span><br></pre></td></tr></table></figure><h4 id="2-3-2-特点"><a href="#2-3-2-特点" class="headerlink" title="2.3.2 特点"></a>2.3.2 特点</h4><p>​    1 asc表示升序，desc表示降序，如果不写，默认升序<br>​    2 order by 子句中可以支持单个字段、多个字段、表达式、函数、别名<br>​    3 order by 子句一般放在查询语句的最后面，limit子句除外</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工信息，要求工资从高到低排序</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary ASC ;</span><br><span class="line"># ORDER BY salary ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary DESC ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号大于等于90的员工信息，按入职时间的先后进行排序</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &gt;&#x3D; 90 </span><br><span class="line">ORDER BY hiredate ASC ;</span><br><span class="line"></span><br><span class="line"># 案例3：按年薪的高低显示员工的选型和年薪【按表达式排序】</span><br><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1 + IFNULL(commission_pct, 0)) 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary * 12 * (1 + IFNULL(commission_pct, 0)) DESC ;</span><br><span class="line"></span><br><span class="line"># 案例4：按年薪的高低显示员工的选型和年薪【按别名排序】</span><br><span class="line">SELECT </span><br><span class="line">  *,</span><br><span class="line">  salary * 12 * (1 + IFNULL(commission_pct, 0)) 年薪 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY 年薪 DESC ;</span><br><span class="line"></span><br><span class="line"># 案例5：按姓名的长度显示员工的姓名和工资【按函数排序】</span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(last_name) 字节长度,</span><br><span class="line">  last_name,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY LENGTH(last_name) DESC ;</span><br><span class="line"></span><br><span class="line"># 案例6：查询员工信息，要求先按工资排序，再按员工编号排序【按多个字段排序】</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">ORDER BY salary ASC,</span><br><span class="line">  employee_id DESC ;</span><br></pre></td></tr></table></figure><h4 id="附：常见函数"><a href="#附：常见函数" class="headerlink" title="附：常见函数"></a>附：常见函数</h4><p>1）字符函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"># 1. length 获取参数值的字节个数</span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(&#39;john&#39;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(&#39;张三丰hhh&#39;) ;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;%char%&#39; ;</span><br><span class="line"></span><br><span class="line"># 2. concat 拼接字符串</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(last_name, &#39;_&#39;, first_name) 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 3. upper、lower </span><br><span class="line">SELECT </span><br><span class="line">  UPPER(&#39;john&#39;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  LOWER(&#39;John&#39;) ;</span><br><span class="line"></span><br><span class="line"># 案例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    UPPER(last_name),</span><br><span class="line">    &#39;_&#39;,</span><br><span class="line">    LOWER(first_name)</span><br><span class="line">  ) 姓名 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 4. substr、substring </span><br><span class="line"># 注意：索引从1开始</span><br><span class="line"></span><br><span class="line"># 截取从指定索引处后面所有字符</span><br><span class="line">SELECT </span><br><span class="line">  SUBSTR(</span><br><span class="line">    &#39;李莫愁爱上了陆展元&#39;,</span><br><span class="line">    7</span><br><span class="line">  ) out_put ;</span><br><span class="line"></span><br><span class="line"># 截取从指定索引处指定长度的字符</span><br><span class="line">SELECT </span><br><span class="line">  SUBSTR(</span><br><span class="line">    &#39;李莫愁爱上了陆展元&#39;,</span><br><span class="line">    1,</span><br><span class="line">    3</span><br><span class="line">  ) out_put ;</span><br><span class="line"></span><br><span class="line"># 案例：姓名中首字符大写，其他字符小写，然后用_拼接，显示出来</span><br><span class="line">SELECT </span><br><span class="line">  CONCAT(</span><br><span class="line">    UPPER(SUBSTR(last_name, 1, 1)),</span><br><span class="line">    &#39;_&#39;,</span><br><span class="line">    LOWER(SUBSTR(last_name, 2))</span><br><span class="line">  ) out_put </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 5. instr 返回子串第一次出现的索引，如果找不到，返回0</span><br><span class="line">SELECT </span><br><span class="line">  INSTR(</span><br><span class="line">    &#39;杨不悔爱上了殷六侠&#39;,</span><br><span class="line">    &#39;殷六侠&#39;</span><br><span class="line">  ) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 6. trim</span><br><span class="line">SELECT </span><br><span class="line">  LENGTH(TRIM(&#39;    张翠山    &#39;)) AS out_put ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  TRIM(&#39;a&#39; FROM &#39;aaa张aaa翠aaa山aaa&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 7. lpad 用指定的字符实现左填充指定长度</span><br><span class="line">SELECT </span><br><span class="line">  LPAD(&#39;殷素素&#39;, 10, &#39;*&#39;) AS out_put ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  LPAD(&#39;殷素素&#39;, 2, &#39;*&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 8. rpad 用指定的字符实现做右充指定长度</span><br><span class="line">SELECT </span><br><span class="line">  RPAD(&#39;殷素素&#39;, 10, &#39;*&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 9. replace 替换</span><br><span class="line">SELECT </span><br><span class="line">  REPLACE(</span><br><span class="line">    &#39;张无忌爱上了周芷若&#39;,</span><br><span class="line">    &#39;周芷若&#39;,</span><br><span class="line">    &#39;赵敏&#39;</span><br><span class="line">  ) AS out_put ;</span><br></pre></td></tr></table></figure><p>2）数学函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 1. round 四舍五入</span><br><span class="line">SELECT </span><br><span class="line">  ROUND(1.65) ; # 2</span><br><span class="line"># ROUND(1.45) ; # 1</span><br><span class="line"># ROUND(-1.65) ; # -2</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  ROUND(1.654,2) ; # 1.65</span><br><span class="line">  </span><br><span class="line"># 2. ceil 向上取整，返回 &gt;&#x3D;该参数的最小整数</span><br><span class="line">SELECT </span><br><span class="line">  CEIL(1.002) ;</span><br><span class="line"># CEIL(-1.002); # -1</span><br><span class="line"></span><br><span class="line"># 3. floor 向下取整，，返回 &lt;&#x3D;该参数的最大整数</span><br><span class="line">SELECT </span><br><span class="line">  FLOOR(- 9.99) ; # -10</span><br><span class="line">  </span><br><span class="line"># 4. truncate 截断</span><br><span class="line">SELECT </span><br><span class="line">  TRUNCATE(1.6999, 1) ; # 1.6</span><br><span class="line"># 5. mod 取模、取余</span><br><span class="line"># a mod b --&gt; a-a&#x2F;b*b</span><br><span class="line">SELECT </span><br><span class="line">  MOD(10, 3) ;</span><br><span class="line"> </span><br><span class="line">SELECT </span><br><span class="line">  10 % 3 ;</span><br></pre></td></tr></table></figure><p>3）日期函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># 1. now 返回当前系统日期 + 时间</span><br><span class="line">SELECT </span><br><span class="line">  NOW() ;</span><br><span class="line"></span><br><span class="line"># 2. curdate 返回当前系统日期，不包含时间</span><br><span class="line">SELECT </span><br><span class="line">  CURDATE() ;</span><br><span class="line"></span><br><span class="line"># 3. curtime 返回当前系统时间，不包含日期</span><br><span class="line">SELECT </span><br><span class="line">  CURTIME() ;</span><br><span class="line"></span><br><span class="line"># 4. 可以获取指定的部分，年、月、日、小时、分钟、秒</span><br><span class="line">SELECT </span><br><span class="line">  YEAR(NOW()) 年 ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  YEAR(&#39;1997-1-1&#39;) 年 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  YEAR(hiredate) 年 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MONTH(NOW()) 月 ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  DAY(NOW()) 日 ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  HOUR(NOW()) 时 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MINUTE(NOW()) 分 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  SECOND(NOW()) 秒 ;</span><br><span class="line"></span><br><span class="line"># 5. str_to_date 将日期格式的字符转换为指定格式的日期</span><br><span class="line">SELECT </span><br><span class="line">  STR_TO_DATE(&#39;1997-3-2&#39;, &#39;%Y-%c-%d&#39;) AS out_put ;</span><br><span class="line">  </span><br><span class="line"># 案例：查询入职日期为1992-4-3的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE hiredate &#x3D; &#39;1992-4-3&#39; ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE hiredate &#x3D; STR_TO_DATE(&#39;4-3 1992&#39;, &#39;%c-%d %Y&#39;) ;</span><br><span class="line"></span><br><span class="line"># 6. date_format 将日期转换为字符</span><br><span class="line">SELECT </span><br><span class="line">  DATE_FORMAT(NOW(), &#39;%y年%m月%d日&#39;) AS out_put ;</span><br><span class="line"></span><br><span class="line"># 案例：查询有奖金的员工名和入职日期（xx月&#x2F;xx日 xx年）</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  DATE_FORMAT(hiredate, &#39;%m月&#x2F;%d日 %y年&#39;) 入职日期 </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL ;</span><br></pre></td></tr></table></figure><p>4）流程控制函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"># 1. if函数：if else 的效果</span><br><span class="line">SELECT </span><br><span class="line">  IF(10 &gt; 5, &#39;大&#39;, &#39;小&#39;) ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  commission_pct,</span><br><span class="line">  IF(</span><br><span class="line">    commission_pct IS NULL,</span><br><span class="line">    &#39;没奖金，呵呵&#39;,</span><br><span class="line">    &#39;有奖金，嘻嘻&#39;</span><br><span class="line">  ) 备注 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 2. case函数的使用一：switch case 的效果</span><br><span class="line">&#x2F;*</span><br><span class="line">Java中</span><br><span class="line">switch(变量或表达式)&#123;</span><br><span class="line">case 常量1: 语句1; break; </span><br><span class="line">...</span><br><span class="line">default: 语句n; break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MySQL中</span><br><span class="line">case 要判断的字段或表达式</span><br><span class="line">when 常量1 then 要显示的值1 或 语句1;</span><br><span class="line">when 常量2 then 要显示的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">else 要显示的值n 或 语句n;</span><br><span class="line">end</span><br><span class="line">*&#x2F;</span><br><span class="line">&#x2F;*</span><br><span class="line">案例：查询员工的工资，要求</span><br><span class="line"></span><br><span class="line">部门号 &#x3D; 30，显示的工资为1.1倍</span><br><span class="line">部门号 &#x3D; 40，显示的工资为1.2倍</span><br><span class="line">部门号 &#x3D; 50，显示的工资为1.3倍</span><br><span class="line">其他部门，显示的工资为原工资</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  salary 原始工资,</span><br><span class="line">  department_id,</span><br><span class="line">  CASE</span><br><span class="line">    department_id </span><br><span class="line">    WHEN 30 </span><br><span class="line">    THEN salary * 1.1 </span><br><span class="line">    WHEN 40 </span><br><span class="line">    THEN salary * 1.2 </span><br><span class="line">    WHEN 50 </span><br><span class="line">    THEN salary * 1.3 </span><br><span class="line">    ELSE salary </span><br><span class="line">  END AS 新工资 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># case函数的使用二：类似于 多重if</span><br><span class="line">&#x2F;*</span><br><span class="line">java中</span><br><span class="line">if（条件1）&#123;</span><br><span class="line">语句1</span><br><span class="line">&#125; else if（条件2）&#123;</span><br><span class="line">语句2</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">else &#123;</span><br><span class="line">语句n</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MySQL中</span><br><span class="line">case </span><br><span class="line">when 条件1 then 要显示的值1 或 语句1;</span><br><span class="line">when 条件2 then 要显示的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">else 要显示的值n 或 语句n;</span><br><span class="line">end</span><br><span class="line">*&#x2F;</span><br><span class="line">&#x2F;*</span><br><span class="line">案例：查询员工的工资情况</span><br><span class="line">如果工资 &gt; 20000, 显示A级别</span><br><span class="line">如果工资 &gt; 15000, 显示B级别</span><br><span class="line">如果工资 &gt; 10000, 显示C级别</span><br><span class="line">否则，显示D级别</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  salary,</span><br><span class="line">  CASE</span><br><span class="line">    WHEN salary &gt; 20000 </span><br><span class="line">    THEN &#39;A&#39; </span><br><span class="line">    WHEN salary &gt; 15000 </span><br><span class="line">    THEN &#39;B&#39; </span><br><span class="line">    WHEN salary &gt; 10000 </span><br><span class="line">    THEN &#39;C&#39; </span><br><span class="line">    ELSE &#39;D&#39; </span><br><span class="line">  END AS 工资级别 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br></pre></td></tr></table></figure><p>5）其他函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 1. version 查看版本号</span><br><span class="line">SELECT </span><br><span class="line">  VERSION() ;</span><br><span class="line"></span><br><span class="line"># 2. database 查看当前数据库</span><br><span class="line">SELECT </span><br><span class="line">  DATABASE() ;</span><br><span class="line"></span><br><span class="line"># 3. user 查看当前用户</span><br><span class="line">SELECT </span><br><span class="line">  USER() ;</span><br></pre></td></tr></table></figure><h3 id="2-4-分组函数"><a href="#2-4-分组函数" class="headerlink" title="2.4 分组函数"></a>2.4 分组函数</h3><h4 id="2-4-1-功能"><a href="#2-4-1-功能" class="headerlink" title="2.4.1 功能"></a>2.4.1 功能</h4><p>​    用作统计使用，又称为<strong>聚合函数</strong> 或 <strong>统计函数</strong> 或 <strong>组函数</strong></p><h4 id="2-4-2-分类"><a href="#2-4-2-分类" class="headerlink" title="2.4.2 分类"></a>2.4.2 分类</h4><p>​    sum 求和、avg 平均值、max 最大值、min 最小值、count 计算个数</p><h4 id="2-4-3-特点"><a href="#2-4-3-特点" class="headerlink" title="2.4.3 特点"></a>2.4.3 特点</h4><ol><li>sum、avg一般用于处理<strong>数值类型</strong>；max、min、count可以处理<strong>任何类型</strong></li><li>以上分组函数都忽略null值</li><li>可以和distinct搭配实现去重的运算</li><li>count函数：一般使用count(*)用作统计行数</li><li>和分组函数一同查询的字段要求是group by后的字段</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># 1 简单使用</span><br><span class="line">SELECT </span><br><span class="line">  SUM(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  COUNT(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  SUM(salary) 和,</span><br><span class="line">  ROUND(AVG(salary), 2) 平均,</span><br><span class="line">  MAX(salary) 最大,</span><br><span class="line">  MIN(salary) 最小,</span><br><span class="line">  COUNT(salary) 个数 </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 参数支持哪些类型</span><br><span class="line"># select sum(last_name), avg(last_name) from employees;</span><br><span class="line">SELECT </span><br><span class="line">  SUM(hiredate),</span><br><span class="line">  AVG(hiredate) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(last_name),</span><br><span class="line">  MIN(last_name) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(hiredate),</span><br><span class="line">  MIN(hiredate) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  COUNT(commission_pct) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 3 是否忽略null值</span><br><span class="line">SELECT </span><br><span class="line">  SUM(commission_pct),</span><br><span class="line">  AVG(commission_pct),</span><br><span class="line">  SUM(commission_pct)&#x2F;35,</span><br><span class="line">  SUM(commission_pct)&#x2F;107</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  MAX(commission_pct),</span><br><span class="line">  MIN(commission_pct)</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  COUNT(commission_pct)</span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line"># 4 和distinct搭配</span><br><span class="line">SELECT </span><br><span class="line">  SUM(DISTINCT salary),</span><br><span class="line">  SUM(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  COUNT(DISTINCT salary),</span><br><span class="line">  COUNT(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 5 count函数的详细介绍</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line">  </span><br><span class="line">SELECT </span><br><span class="line">  COUNT(1) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">效率：</span><br><span class="line">myisam存储引擎下，count(*)的效率高</span><br><span class="line">innodb存储引擎下，COUNT(*)和COUNT(1)的效率差不多，比COUNT(字段)要高一些</span><br><span class="line">*&#x2F;</span><br><span class="line"># 6 和分组函数一同查询的字段有限制</span><br><span class="line"></span><br><span class="line"># select avg(salary),employees_id from employee;</span><br><span class="line"># 和分组函数一同查询的字段要求是group by后的字段</span><br></pre></td></tr></table></figure><h3 id="2-5-分组查询"><a href="#2-5-分组查询" class="headerlink" title="2.5 分组查询"></a>2.5 分组查询</h3><h4 id="2-5-1-语法"><a href="#2-5-1-语法" class="headerlink" title="2.5.1 语法"></a>2.5.1 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 分组函数，列（要求出现在group by的后面）</span><br><span class="line">from 表名</span><br><span class="line">【where 筛选条件】</span><br><span class="line">group by 分组的列表</span><br><span class="line">【order by 子句】</span><br></pre></td></tr></table></figure><blockquote><p>注意：查询列表必须特殊，要求是分组函数和group by后出现的字段</p></blockquote><h4 id="2-5-2-特点"><a href="#2-5-2-特点" class="headerlink" title="2.5.2 特点"></a>2.5.2 特点</h4><ol><li>分组查询中的筛选条件分为两类                </li></ol><table><thead><tr><th align="center"></th><th align="center">数据源</th><th align="center">位置</th><th align="center">关键字</th></tr></thead><tbody><tr><td align="center">分组前筛选</td><td align="center">原始表</td><td align="center">group by 子句的前面</td><td align="center">where</td></tr><tr><td align="center">分组后筛选</td><td align="center">分组后的结果集</td><td align="center">group by 子句的后面</td><td align="center">having</td></tr></tbody></table><blockquote><p>①分组函数做条件肯定是放在having子句中<br>②能用分组前筛选的，就优先考虑使用分组前筛选</p></blockquote><ol start="2"><li>group by子句支持单个字段分组，多个字段分组（多个字段之间用逗号隔开，没有顺序要求），表达式或函数（用得较少）</li><li>也可以添加排序（排序放在整个分组查询的最后）</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询每个工种的最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY job_id ;</span><br><span class="line"></span><br><span class="line"># 案例2： 查询每个位置上部门个数</span><br><span class="line">SELECT COUNT(*),location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line"># 添加筛选条件</span><br><span class="line"># 案例1：查询邮箱中包含a字符的，每个部门的平均工资</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &#39;%a%&#39; </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询有奖金的每个领导手下员工的最高工资</span><br><span class="line">SELECT MAX(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line"># 添加复杂的筛选条件</span><br><span class="line"># 案例1：查询哪个部门的员工数 &gt; 2</span><br><span class="line"># ①查询每个部门的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># ②根据①的结果进行筛选，查询哪个部门的员工数&gt;2</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING COUNT(*)&gt;2;</span><br><span class="line"></span><br><span class="line"># 案例2：查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span><br><span class="line"># ①查询每个工种有奖金的员工的最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">GROUP BY job_id ;</span><br><span class="line"></span><br><span class="line"># ②根据①结果继续筛选，最高工资 &gt; 12000</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">GROUP BY job_id </span><br><span class="line">HAVING MAX(salary) &gt; 12000 ;</span><br><span class="line"></span><br><span class="line"># 案例3：查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资</span><br><span class="line"># ①查询每个领导手下的员工最低工资</span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line"># ②添加筛选条件：编号&gt;102</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  manager_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE manager_id &gt; 102 </span><br><span class="line">GROUP BY manager_id ;</span><br><span class="line"></span><br><span class="line"># ③添加筛选条件：最低工资&gt;5000</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  manager_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE manager_id &gt; 102 </span><br><span class="line">GROUP BY manager_id </span><br><span class="line">HAVING MIN(salary) &gt; 5000 ;</span><br><span class="line"></span><br><span class="line"># 按表达式或函数分组</span><br><span class="line"># 案例：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些</span><br><span class="line"># ①查询每个长度的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*),</span><br><span class="line">  LENGTH(last_name) len_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY LENGTH(last_name) ;</span><br><span class="line"></span><br><span class="line"># ②添加筛选条件</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*) C,</span><br><span class="line">  LENGTH(last_name) len_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY len_name </span><br><span class="line">HAVING C &gt; 5 ;</span><br><span class="line"></span><br><span class="line"># 按多个字段分组</span><br><span class="line"># 案例：查询每个部门每个工种的员工的平均工资</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY job_id,</span><br><span class="line">  department_id ;</span><br><span class="line"></span><br><span class="line"># 添加排序</span><br><span class="line"># 案例：查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id,</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id IS NOT NULL </span><br><span class="line">GROUP BY job_id,</span><br><span class="line">  department_id </span><br><span class="line">HAVING AVG(salary) &gt; 10000 </span><br><span class="line">ORDER BY AVG(salary) DESC ;</span><br></pre></td></tr></table></figure><h3 id="2-5-连接查询"><a href="#2-5-连接查询" class="headerlink" title="2.5 连接查询"></a>2.5 连接查询</h3><h4 id="2-5-1-含义"><a href="#2-5-1-含义" class="headerlink" title="2.5.1 含义"></a>2.5.1 含义</h4><p>又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</p><blockquote><p><strong>笛卡尔乘积现象</strong>：表1 有 m 行，表2有 n 行，结果有 m*n 行</p><p>发生原因：没有有效的连接条件<br>如何避免：添加有效的连接条件</p></blockquote><h4 id="2-5-2-分类"><a href="#2-5-2-分类" class="headerlink" title="2.5.2 分类"></a>2.5.2 分类</h4><p>1）按年代分类：<br>    ① sql92标准：仅仅支持内连接<br>    ② sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接<br>2）按功能分类：<br>    ① 内连接：等值连接、非等值连接、自连接<br>    ② 外连接：左外连接、右外连接、全外连接<br>    ③ 交叉连接</p><h4 id="2-5-3-sql92标准"><a href="#2-5-3-sql92标准" class="headerlink" title="2.5.3 sql92标准"></a>2.5.3 sql92标准</h4><p>1）等值连接</p><p>​    ① 多表等值连接的结果为多表的交集部分<br>​    ② n表连接，至少需要n-1个连接条件<br>​    ③ 多表的顺序没有要求<br>​    ④ 一般需要为表起别名<br>​    ⑤ 可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询女神名和对应的男神名</span><br><span class="line">SELECT </span><br><span class="line">  NAME,</span><br><span class="line">  boyName </span><br><span class="line">FROM</span><br><span class="line">  beaupty,</span><br><span class="line">  boys </span><br><span class="line">WHERE beauty.boyfriend_id &#x3D; boys.id ;</span><br><span class="line"></span><br><span class="line">USE myemployees;</span><br><span class="line"># 案例2：查询员工名和对应的部门名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  employees,</span><br><span class="line">  departments </span><br><span class="line">WHERE employees.&#96;department_id&#96; &#x3D; departments.&#96;department_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 2、为表取别名</span><br><span class="line">&#x2F;*</span><br><span class="line">①提高语句的简洁度</span><br><span class="line">②区分多个重名的字段</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"># 查询员工名、工种号、工种名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  e.job_id,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e,</span><br><span class="line">  jobs j</span><br><span class="line">WHERE e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 3、两个表的顺序是否可以调换</span><br><span class="line"># 查询员工名、工种号、工种名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  e.job_id,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  jobs j,</span><br><span class="line">  employees e</span><br><span class="line">WHERE e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 4、可以加筛选吗？</span><br><span class="line"># 案例1：查询有奖金的员工名、部门名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  commission_pct </span><br><span class="line">FROM</span><br><span class="line">  employees e,</span><br><span class="line">  departments d </span><br><span class="line">WHERE e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; </span><br><span class="line">  AND e.&#96;commission_pct&#96; IS NOT NULL ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询城市名中第二个字符为o的部门名和城市名</span><br><span class="line">SELECT </span><br><span class="line">  department_name,</span><br><span class="line">  city </span><br><span class="line">FROM</span><br><span class="line">  departments d,</span><br><span class="line">  locations l </span><br><span class="line">WHERE d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96; </span><br><span class="line">  AND city LIKE &#39;_o%&#39; ;</span><br><span class="line"></span><br><span class="line"># 5、可以加分组吗？</span><br><span class="line"># 案例1：查询每个城市的部门个数</span><br><span class="line">SELECT </span><br><span class="line">  COUNT(*) 个数,</span><br><span class="line">  city </span><br><span class="line">FROM</span><br><span class="line">  locations l,</span><br><span class="line">  departments d </span><br><span class="line">WHERE l.&#96;location_id&#96; &#x3D; d.&#96;location_id&#96; </span><br><span class="line">GROUP BY city ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span><br><span class="line">SELECT </span><br><span class="line">  department_name,</span><br><span class="line">  d.manager_id,</span><br><span class="line">  MIN(salary) </span><br><span class="line">FROM</span><br><span class="line">  departments d,</span><br><span class="line">  employees e </span><br><span class="line">WHERE d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">  AND commission_pct IS NOT NULL </span><br><span class="line">GROUP BY department_name,</span><br><span class="line">  d.manager_id ;</span><br><span class="line"></span><br><span class="line"># 6、可以加排序吗？</span><br><span class="line"># 案例：查询每个工种的工种名和员工的个数，并且按员工个数降序</span><br><span class="line">SELECT </span><br><span class="line">  job_title,</span><br><span class="line">  COUNT(*) 个数 </span><br><span class="line">FROM</span><br><span class="line">  jobs j,</span><br><span class="line">  employees e </span><br><span class="line">WHERE e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; </span><br><span class="line">GROUP BY job_title </span><br><span class="line">ORDER BY COUNT(*) DESC ;</span><br><span class="line"></span><br><span class="line"># 7、可以实现三表连接吗？</span><br><span class="line"># 案例：查询员工名、部门名和所在的城市</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  city </span><br><span class="line">FROM</span><br><span class="line">  employees e,</span><br><span class="line">  departments d,</span><br><span class="line">  locations l </span><br><span class="line">WHERE e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; </span><br><span class="line">  AND d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96; ;</span><br><span class="line">#  and city like &#39;s%&#39; </span><br><span class="line"># order by last_name ;</span><br></pre></td></tr></table></figure><p>2）非等值连接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：查询员工的工资和工资等级</span><br><span class="line"></span><br><span class="line">SELECT salary, grade_level</span><br><span class="line">FROM employees e, job_grades j</span><br><span class="line">WHERE salary BETWEEN j.&#96;lowest_sal&#96; AND j.&#96;highest_sal&#96;;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">CREATE TABLE job_grades (</span><br><span class="line">  grade_level VARCHAR (3),</span><br><span class="line">  lowest_sal int,</span><br><span class="line">  highest_sal int</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;A&#39;, 1000, 2999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;B&#39;, 3000, 5999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;C&#39;, 6000, 9999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;D&#39;, 10000, 14999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;E&#39;, 15000, 24999);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES(&#39;F&#39;, 25000, 40000);</span><br><span class="line"></span><br><span class="line">select * from job_grades;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure><p>3）自连接</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询员工名和上级领导名</span><br><span class="line">SELECT e.employee_id, e.last_name, m.employee_id, m.last_name</span><br><span class="line">FROM employees e, employees m</span><br><span class="line">WHERE e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96;;</span><br></pre></td></tr></table></figure><h4 id="2-5-4-sql99标准"><a href="#2-5-4-sql99标准" class="headerlink" title="2.5.4 sql99标准"></a>2.5.4 sql99标准</h4><p><strong>语法</strong>    </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名 【连接类型】</span><br><span class="line">join 表2 别名</span><br><span class="line">on 连接条件</span><br><span class="line">【where 筛选条件】</span><br><span class="line">【group by 分组】</span><br><span class="line">【having 筛选条件】</span><br><span class="line">【order by 排序列表】</span><br></pre></td></tr></table></figure><p><strong>分类</strong></p><p>① 内连接（★）：inner</p><p>② 外连接</p><ul><li>左外（★）：left 【outer】</li><li>右外（★）：right 【outer】</li><li>全外：full 【outer】</li></ul><p>③ 交叉连接：cross</p><p><strong>1） 内连接</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">inner join 表2 别名</span><br><span class="line">on 连接条件</span><br></pre></td></tr></table></figure><p><strong>分类</strong></p><p>① 等值连接<br>② 非等值连接<br>③ 自连接</p><p>特点：<br>① 添加排序、分组、筛选<br>② inner可以省略<br>③ 筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读<br>④ inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 1 等值连接</span><br><span class="line"># 案例1：查询员工名、部门名</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  INNER JOIN departments d </span><br><span class="line">    ON e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询名字中包含e的员工名和工种名（添加筛选）</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  INNER JOIN jobs j </span><br><span class="line">    ON e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; </span><br><span class="line">WHERE last_name LIKE &#39;%e%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例3：查询部门个数&gt;3的城市名和部门个数，（添加分组+筛选）</span><br><span class="line">SELECT </span><br><span class="line">  city,</span><br><span class="line">  COUNT(*) 个数</span><br><span class="line">FROM</span><br><span class="line">  locations l </span><br><span class="line">  INNER JOIN departments d </span><br><span class="line">    ON l.&#96;location_id&#96; &#x3D; d.&#96;location_id&#96; </span><br><span class="line">GROUP BY city </span><br><span class="line">HAVING COUNT(*) &gt; 3 ;</span><br><span class="line"></span><br><span class="line"># 案例4：查询哪个部门的员工个数&gt;3的部门名和员工个数，并按个数降序（添加排序）</span><br><span class="line">SELECT </span><br><span class="line">  department_name,</span><br><span class="line">  COUNT(*) 个数</span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">  INNER JOIN employees e </span><br><span class="line">    ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96; </span><br><span class="line">GROUP BY department_name </span><br><span class="line">HAVING COUNT(*) &gt; 3 </span><br><span class="line">ORDER BY COUNT(*) DESC ;</span><br><span class="line"></span><br><span class="line"># 案例5：查询员工名、部门名、工种名，并按部门名降序（添加三表连接）</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  INNER JOIN departments d </span><br><span class="line">    ON e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; </span><br><span class="line">  INNER JOIN jobs j </span><br><span class="line">    ON e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96; </span><br><span class="line">ORDER BY department_name DESC ;</span><br><span class="line"></span><br><span class="line"># 2 非等值连接</span><br><span class="line"># 案例1：查询员工的工资级别</span><br><span class="line">SELECT </span><br><span class="line">  salary,</span><br><span class="line">  grade_level </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN job_grades g </span><br><span class="line">    ON e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; </span><br><span class="line">    AND g.&#96;highest_sal&#96; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询工资级别的个数&gt;20的个数，并且按工资级别降序</span><br><span class="line">SELECT </span><br><span class="line">  grade_level,</span><br><span class="line">  COUNT(*) </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN job_grades g </span><br><span class="line">    ON e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; </span><br><span class="line">    AND g.&#96;highest_sal&#96; </span><br><span class="line">GROUP BY grade_level </span><br><span class="line">HAVING COUNT(*) &gt; 20 </span><br><span class="line">ORDER BY grade_level DESC ;</span><br><span class="line"></span><br><span class="line"># 3 自连接</span><br><span class="line"># 案例1：查询员工的名字、上级的名字</span><br><span class="line">SELECT </span><br><span class="line">  e.last_name 员工,</span><br><span class="line">  m.last_name 上级 </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN employees m </span><br><span class="line">    ON e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96; ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询姓名中包含字符k的员工的名字、上级的名字</span><br><span class="line">SELECT </span><br><span class="line">  e.last_name 员工,</span><br><span class="line">  m.last_name 上级 </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN employees m </span><br><span class="line">    ON e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96; </span><br><span class="line">WHERE e.&#96;last_name&#96; LIKE &#39;%k%&#39; ;</span><br></pre></td></tr></table></figure><p><strong>2）外连接</strong></p><p> <strong>应用场景</strong>：用于查询一个表中有，另一个表没有的记录</p><p> <strong>特点</strong><br>① 外连接的查询结果为主表中的所有记录，<br>    如果从表中有和它匹配的，则显示匹配的值；<br>    如果从表中没有和它匹配的，则显示null；<br>    外连接查询结果 = 内连接结果 + 主表中有而从表没有的记录</p><p>② 左外连接 ，left join 左边的是主表；<br>    右外连接，right join 右边的是主表</p><p>③ 左外和右外交换两个表的顺序，可以实现同样的效果 </p><p>④ 全外连接 = 内连接的结果 + 表1中有但表2没有的 + 表2中有但表1没有的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"># 引入：查询男朋友不在男神表的女神名</span><br><span class="line">USE girls;</span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line">SELECT * FROM boys;</span><br><span class="line"></span><br><span class="line"># 左外连接</span><br><span class="line">SELECT </span><br><span class="line">  b.name </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  LEFT OUTER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line"># 右外连接</span><br><span class="line">SELECT </span><br><span class="line">  b.name </span><br><span class="line">FROM</span><br><span class="line">  boys bo </span><br><span class="line">  RIGHT OUTER JOIN beauty b </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line"># 案例1：查询哪个部门没有员工</span><br><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 左外</span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  e.employee_id </span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">  LEFT OUTER JOIN employees e </span><br><span class="line">    ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96; </span><br><span class="line">WHERE employee_id IS NULL ;</span><br><span class="line"></span><br><span class="line"># 右外</span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  e.employee_id </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  RIGHT </span><br><span class="line">  OUTER JOIN departments d </span><br><span class="line">    ON d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96; </span><br><span class="line">WHERE e.&#96;employee_id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line"># 全外</span><br><span class="line">USE girls ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  b.*,</span><br><span class="line">  bo.* </span><br><span class="line">FROM</span><br><span class="line">  beauty b FULL </span><br><span class="line">  OUTER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.id ;</span><br><span class="line"># MySQL不支持全外连接</span><br></pre></td></tr></table></figure><p><strong>3）交叉连接</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  b.*,</span><br><span class="line">  bo.* </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  CROSS JOIN boys bo ;</span><br></pre></td></tr></table></figure><blockquote><p><strong>sql92 vs sql99</strong><br>功能：sql99支持的较多<br>可读性：sql99实现连接条件和筛选条件的分离，可读性较高</p></blockquote><h3 id="2-6-子查询"><a href="#2-6-子查询" class="headerlink" title="2.6 子查询"></a>2.6 子查询</h3><h4 id="2-6-1-含义"><a href="#2-6-1-含义" class="headerlink" title="2.6.1 含义"></a>2.6.1 含义</h4><p>出现在其他语句中的select语句，称为 子查询 或 内查询<br>外部的查询语句，称为 主查询 或 外查询</p><h4 id="2-6-2-分类"><a href="#2-6-2-分类" class="headerlink" title="2.6.2 分类"></a>2.6.2 分类</h4><p>① 按子查询出现的位置：</p><ul><li>select后面：<pre><code>仅仅支持标量子查询</code></pre></li><li>from后面：<pre><code>支持表子查询</code></pre></li><li>where 或 having后面：★<pre><code>标量子查询（单行） √  列子查询（多行） √      行子查询</code></pre></li><li>exists后面（相关子查询）：<pre><code>表子查询</code></pre></li></ul><p>②  按结果集的行列数不同：</p><ul><li>标量子查询（结果集中只有一行一列）</li><li>列子查询（结果集有一列多行）</li><li>行子查询（结果集有一行多列）</li><li>表子查询（结果集一般为多行多列）</li></ul><h4 id="2-6-3-where-或-having-后面"><a href="#2-6-3-where-或-having-后面" class="headerlink" title="2.6.3 where 或 having 后面"></a>2.6.3 where 或 having 后面</h4><p><strong>特点</strong><br>① 子查询放在小括号内<br>② 子查询一般放在条件的右侧<br>③ 标量子查询，一般搭配着<strong>单行操作符</strong>使用；<br>     列子查询，一般搭配着<strong>多行操作符</strong>使用</p><blockquote><p><strong>单行操作符</strong>：&gt; 、&lt; 、&gt;=、 &lt;= 、= 、&lt;&gt;</p><p><strong>多行操作符</strong>：in、any/some、all</p></blockquote><p>④ 子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">1、标量子查询（单行子查询）</span><br><span class="line">2、列子查询（多行子查询）</span><br><span class="line"></span><br><span class="line">3、行子查询（多列多行）</span><br><span class="line">*&#x2F;</span><br><span class="line"># 1 标量子查询★</span><br><span class="line"># 案例1：谁的工资比 Abel 高?</span><br><span class="line"># ① 查询Abel的工资</span><br><span class="line">SELECT </span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE last_name &#x3D; &#39;Abel&#39; ;</span><br><span class="line"></span><br><span class="line"># ② 查询员工的信息，满足 salary&gt;① 结果</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE last_name &#x3D; &#39;Abel&#39;) ;</span><br><span class="line"></span><br><span class="line"># 案例2：返回job_id与141号员工相同，salary比143号员工多的员工 姓名，job_id 和工资</span><br><span class="line"># ① 查询141号员工的job_id</span><br><span class="line">SELECT </span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id &#x3D; 141 ;</span><br><span class="line"></span><br><span class="line"># ② 查询143号员工的salary</span><br><span class="line">SELECT </span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id &#x3D; 143 ;</span><br><span class="line"></span><br><span class="line"># ③ 查询员工的姓名，job_id 和工资，要求job_id&#x3D;①并且salary&gt;②</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    job_id </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE employee_id &#x3D; 141) </span><br><span class="line">  AND salary &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE employee_id &#x3D; 143) ;</span><br><span class="line"></span><br><span class="line"># 案例3：返回公司工资最少的员工的last_name,job_id和salary</span><br><span class="line"># ① 查询公司的 最低工资</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line"># ② 查询last_name,job_id和salary，要求salary&#x3D;①</span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"># 案例4：查询最低工资大于50号部门最低工资的部门id和其最低工资</span><br><span class="line"># ① 查询50号部门的最低工资</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &#x3D; 50 ;</span><br><span class="line"></span><br><span class="line"># ② 查询每个部门的最低工资</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line">#③ 在②基础上筛选，满足min(salary)&gt;①</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING MIN(salary) &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE department_id &#x3D; 50) ;</span><br><span class="line"></span><br><span class="line"># 非法使用标量子查询</span><br><span class="line">SELECT </span><br><span class="line">  MIN(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id </span><br><span class="line">HAVING MIN(salary) &gt; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(salary) #    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE department_id &#x3D; 50) ;</span><br><span class="line">#  WHERE department_id &#x3D; 250) ;</span><br><span class="line"></span><br><span class="line"># 2 列子查询（多行子查询）</span><br><span class="line"># 案例1：返回location_id是1400或1700的部门中的所有员工姓名</span><br><span class="line"># ① 查询location_id是1400或1700的部门编号</span><br><span class="line">SELECT DISTINCT </span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  departments </span><br><span class="line">WHERE location_id IN (1400, 1700) ;</span><br><span class="line"></span><br><span class="line"># ② 查询员工姓名，要求部门号是①列表中的某一个</span><br><span class="line"> </span><br><span class="line">SELECT </span><br><span class="line">  last_name </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id IN </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    department_id </span><br><span class="line">  FROM</span><br><span class="line">    departments </span><br><span class="line">  WHERE location_id IN (1400, 1700)</span><br><span class="line"></span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 案例2：返回其它工种中比job_id为‘IT_PROG’工种任一工资低的员工的员工号、姓名、job_id 以及salary</span><br><span class="line"># ① 查询job_id为‘IT_PROG’部门任一工资</span><br><span class="line">SELECT DISTINCT </span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE job_id &#x3D; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># ② 查询员工号、姓名、job_id 以及salary，salary&lt;(①)的任意一个</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; ANY </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># 或</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例3：返回其它部门中比job_id为‘IT_PROG’部门所有工资都低的员工的员工号、姓名、job_id 以及salary</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; ALL </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    salary </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line"></span><br><span class="line"># 或</span><br><span class="line">SELECT </span><br><span class="line">  employee_id,</span><br><span class="line">  last_name,</span><br><span class="line">  job_id,</span><br><span class="line">  salary </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE salary &lt; </span><br><span class="line">  (SELECT DISTINCT </span><br><span class="line">    MIN(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE job_id &#x3D; &#39;IT_PROG&#39;) </span><br><span class="line">  AND job_id &lt;&gt; &#39;IT_PROG&#39; ;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"># 3 行子查询（结果集一行多列或多行多列）</span><br><span class="line"># 案例：查询员工编号最小并且工资最高的员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE (employee_id, salary) &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(employee_id),</span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"># 用前面的知识</span><br><span class="line"># ① 查询最小的员工编号</span><br><span class="line">SELECT </span><br><span class="line">  MIN(employee_id) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># ② 查询最高工资</span><br><span class="line">SELECT </span><br><span class="line">  MAX(salary) </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># ③ 查询员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE employee_id &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MIN(employee_id) </span><br><span class="line">  FROM</span><br><span class="line">    employees) </span><br><span class="line">  AND salary &#x3D; </span><br><span class="line">  (SELECT </span><br><span class="line">    MAX(salary) </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br></pre></td></tr></table></figure><h4 id="2-6-4-select后面"><a href="#2-6-4-select后面" class="headerlink" title="2.6.4 select后面"></a>2.6.4 select后面</h4><blockquote><p>仅仅支持标量子查询</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 案例1：查询每个部门的员工个数</span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  (SELECT </span><br><span class="line">    COUNT(*) </span><br><span class="line">  FROM</span><br><span class="line">    employees e </span><br><span class="line">  WHERE e.department_id &#x3D; d.&#96;department_id&#96;) 个数</span><br><span class="line">FROM</span><br><span class="line">  departments d ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询员工号&#x3D;102的部门名</span><br><span class="line">SELECT </span><br><span class="line">  (SELECT </span><br><span class="line">    department_name</span><br><span class="line">  FROM</span><br><span class="line">    departments d </span><br><span class="line">    INNER JOIN employees e </span><br><span class="line">      ON d.department_id &#x3D; e.department_id </span><br><span class="line">  WHERE e.employee_id &#x3D; 102) 部门名 ;</span><br></pre></td></tr></table></figure><h4 id="2-6-5-from后面"><a href="#2-6-5-from后面" class="headerlink" title="2.6.5 from后面"></a>2.6.5 from后面</h4><blockquote><p>将子查询结果充当一张表，要求必须起别名</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 案例：查询每个部门的平均工资的工资等级</span><br><span class="line"># ① 查询每个部门的平均工资</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># ② 连接①的结果集和job_grades表，筛选条件平均工资 between lowest_sal and highest_sal</span><br><span class="line">SELECT </span><br><span class="line">  ag_dep.*,</span><br><span class="line">  g.&#96;grade_level&#96; </span><br><span class="line">FROM</span><br><span class="line">  (SELECT </span><br><span class="line">    AVG(salary) ag,</span><br><span class="line">    department_id </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  GROUP BY department_id) ag_dep </span><br><span class="line">  INNER JOIN job_grades g </span><br><span class="line">    ON ag_dep.ag BETWEEN lowest_sal </span><br><span class="line">    AND highest_sal ;</span><br></pre></td></tr></table></figure><h4 id="2-6-6-exists后面（相关子查询）"><a href="#2-6-6-exists后面（相关子查询）" class="headerlink" title="2.6.6 exists后面（相关子查询）"></a>2.6.6 exists后面（相关子查询）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">exists(完整的查询语句)</span><br><span class="line">结果：</span><br><span class="line">1或0</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  EXISTS </span><br><span class="line">  (SELECT </span><br><span class="line">    employee_id </span><br><span class="line">  FROM</span><br><span class="line">    employees </span><br><span class="line">  WHERE salary &#x3D; 300000) ;</span><br><span class="line"></span><br><span class="line"># 案例1：查询有员工的部门名</span><br><span class="line"># in</span><br><span class="line">SELECT </span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">WHERE d.&#96;department_id&#96; IN </span><br><span class="line">  (SELECT </span><br><span class="line">    department_id </span><br><span class="line">  FROM</span><br><span class="line">    employees) ;</span><br><span class="line"></span><br><span class="line"># exists</span><br><span class="line">SELECT </span><br><span class="line">  department_name </span><br><span class="line">FROM</span><br><span class="line">  departments d </span><br><span class="line">WHERE EXISTS </span><br><span class="line">  (SELECT </span><br><span class="line">    * </span><br><span class="line">  FROM</span><br><span class="line">    employees e </span><br><span class="line">  WHERE d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line"></span><br><span class="line"># 案例2：查询没有女朋友的男神信息</span><br><span class="line"># in</span><br><span class="line">  SELECT </span><br><span class="line">    bo.* </span><br><span class="line">  FROM</span><br><span class="line">    boys bo </span><br><span class="line">  WHERE bo.id NOT IN </span><br><span class="line">    (SELECT </span><br><span class="line">      boyfriend_id </span><br><span class="line">    FROM</span><br><span class="line">      beauty) ;</span><br><span class="line"></span><br><span class="line"># exists</span><br><span class="line">SELECT </span><br><span class="line">  bo.* </span><br><span class="line">FROM</span><br><span class="line">  boys bo </span><br><span class="line">WHERE NOT EXISTS </span><br><span class="line">  (SELECT </span><br><span class="line">    boyfriend_id </span><br><span class="line">  FROM</span><br><span class="line">    beauty b </span><br><span class="line">  WHERE bo.&#96;id&#96; &#x3D; b.&#96;boyfriend_id&#96;) ;</span><br></pre></td></tr></table></figure><h3 id="2-7-分页查询"><a href="#2-7-分页查询" class="headerlink" title="2.7 分页查询"></a>2.7 分页查询</h3><h4 id="2-7-1-应用场景"><a href="#2-7-1-应用场景" class="headerlink" title="2.7.1 应用场景"></a>2.7.1 应用场景</h4><p>当要查询的条目数太多，一页显示不全,需要分页提交sql请求</p><h4 id="2-7-2-语法"><a href="#2-7-2-语法" class="headerlink" title="2.7.2 语法"></a>2.7.2 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1</span><br><span class="line">【join type join 表2</span><br><span class="line">on 连接条件</span><br><span class="line">where 筛选条件</span><br><span class="line">group by 分组字段</span><br><span class="line">having 分组后的筛选</span><br><span class="line">order by 排序的字段】</span><br><span class="line">limit offset, size;</span><br></pre></td></tr></table></figure><blockquote><p>offset：要显示条目的起始索引（起始索引从0开始）<br>size：要显示的条目个数</p></blockquote><h4 id="2-7-3-特点"><a href="#2-7-3-特点" class="headerlink" title="2.7.3 特点"></a>2.7.3 特点</h4><p>① limit语句放在查询语句的最后<br>② 公式：<code>limit (page-1)*size,size;</code></p><blockquote><p>要显示的页数 page，没有条目数 size</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 案例1：查询前五条员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">LIMIT 0, 5 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">LIMIT 5 ;</span><br><span class="line"></span><br><span class="line"># 案例2：查询第11-25条员工信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">LIMIT 11, 15 ;</span><br><span class="line"></span><br><span class="line"># 案例3：有奖金的员工信息，并且工资较高的前10名显示出来</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE commission_pct IS NOT NULL </span><br><span class="line">ORDER BY salary DESC </span><br><span class="line">LIMIT 10 ;</span><br></pre></td></tr></table></figure><h3 id="2-8-联合查询"><a href="#2-8-联合查询" class="headerlink" title="2.8 联合查询"></a>2.8 联合查询</h3><h4 id="2-8-1-应用场景"><a href="#2-8-1-应用场景" class="headerlink" title="2.8.1 应用场景"></a>2.8.1 应用场景</h4><p>要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</p><h4 id="2-8-2-语法"><a href="#2-8-2-语法" class="headerlink" title="2.8.2 语法"></a>2.8.2 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句1</span><br><span class="line">union</span><br><span class="line">查询语句2</span><br><span class="line">union</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>union</code>: 联合、合并。将多条查询语句的结果合并成一个结果</p><h4 id="2-8-3-特点★"><a href="#2-8-3-特点★" class="headerlink" title="2.8.3 特点★"></a>2.8.3 特点★</h4><p>① 要求多条查询语句的查询列数是一致的！</p><p>② 要求多条查询语句的查询的每一列的类型和顺序最好一致</p><p>③ union关键字默认去重，如果使用union all 可以包含重复项</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"># 引入：查询部门编号&gt;90 或 邮箱包含a的员工信息</span><br><span class="line"> </span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &#39;%a%&#39; </span><br><span class="line">  OR department_id &gt; 90 ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE email LIKE &#39;%a%&#39; </span><br><span class="line">UNION</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">WHERE department_id &gt; 90 ;</span><br></pre></td></tr></table></figure><hr><h2 id="第3章-DML语言"><a href="#第3章-DML语言" class="headerlink" title="第3章 DML语言"></a>第3章 DML语言</h2><p>DML（Data Manipulation Language）：数据操作语言，用来定义数据库记录（数据）</p><blockquote><p>插入：insert<br>修改：update<br>删除：delete</p></blockquote><h3 id="3-1-插入语言"><a href="#3-1-插入语言" class="headerlink" title="3.1 插入语言"></a>3.1 插入语言</h3><h4 id="3-1-1-方式一"><a href="#3-1-1-方式一" class="headerlink" title="3.1.1 方式一"></a>3.1.1 方式一</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名（列名，……） value（值1，……）</span><br></pre></td></tr></table></figure><h4 id="3-1-2-方式二"><a href="#3-1-2-方式二" class="headerlink" title="3.1.2 方式二"></a>3.1.2 方式二</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名</span><br><span class="line">set 列名 &#x3D; 值, 列名 &#x3D; 值, ...</span><br></pre></td></tr></table></figure><h4 id="3-1-3-两种方式对比"><a href="#3-1-3-两种方式对比" class="headerlink" title="3.1.3 两种方式对比"></a>3.1.3 两种方式对比</h4><p>① 方式一支持插入多行，方式二不支持</p><p>② 方式一支持子查询，方式二不支持</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"># 1.插入的值的类型要与列的类型一致或兼容</span><br><span class="line"></span><br><span class="line">USE girls;</span><br><span class="line">INSERT INTO beauty(id, NAME, sex, borndate, phone, photo, boyfriend_id)</span><br><span class="line">VALUE(13, &#39;王小虎&#39;, &#39;男&#39;, &#39;1990-4-23&#39;, &#39;18288668899&#39;, NULL, 2);</span><br><span class="line"></span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line"></span><br><span class="line"># 2.不可以为null的列必须插入值，可以为null的列如何插入值？</span><br><span class="line"># 方式一：null</span><br><span class="line">INSERT INTO beauty (</span><br><span class="line">  id,</span><br><span class="line">  NAME,</span><br><span class="line">  sex,</span><br><span class="line">  borndate,</span><br><span class="line">  phone,</span><br><span class="line">  photo,</span><br><span class="line">  boyfriend_id</span><br><span class="line">) VALUE (</span><br><span class="line">  13,</span><br><span class="line">  &#39;王小虎&#39;,</span><br><span class="line">  &#39;男&#39;,</span><br><span class="line">  &#39;1990-4-23&#39;,</span><br><span class="line">  &#39;18288668899&#39;,</span><br><span class="line">  NULL,</span><br><span class="line">  2</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 方式二：省略</span><br><span class="line">INSERT INTO beauty (</span><br><span class="line">  id,</span><br><span class="line">  NAME,</span><br><span class="line">  sex,</span><br><span class="line">  borndate,</span><br><span class="line">  phone,</span><br><span class="line">  boyfriend_id</span><br><span class="line">) VALUE (</span><br><span class="line">  14,</span><br><span class="line">  &#39;金星&#39;,</span><br><span class="line">  &#39;女&#39;,</span><br><span class="line">  &#39;1990-4-23&#39;,</span><br><span class="line">  &#39;18288778899&#39;,</span><br><span class="line">  2</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty (id, NAME, sex, phone) VALUE (15, &#39;娜扎&#39;, &#39;女&#39;, &#39;18288770099&#39;) ;</span><br><span class="line"></span><br><span class="line"># 3.列的顺序能否调换？ # 能，但必须对应</span><br><span class="line">INSERT INTO beauty (NAME, id, sex, phone) VALUE (&#39;蒋欣&#39;, 16, &#39;女&#39;, &#39;18266778899&#39;) ;</span><br><span class="line"></span><br><span class="line"># 4.列数和值的个数必须一致</span><br><span class="line">INSERT INTO beauty (NAME, id, sex, phone) VALUE (&#39;关晓彤&#39;, 17, &#39;女&#39;, &#39;18288778899&#39;) ;</span><br><span class="line"></span><br><span class="line"># 5.可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span><br><span class="line">INSERT INTO beauty VALUE (</span><br><span class="line">  18,</span><br><span class="line">  &#39;张飞&#39;,</span><br><span class="line">  &#39;男&#39;,</span><br><span class="line">  NULL,</span><br><span class="line">  &#39;110&#39;,</span><br><span class="line">  NULL,</span><br><span class="line">  NULL</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 方式二：</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">insert into 表名</span><br><span class="line">set 列名 &#x3D; 值, 列名 &#x3D; 值, ...</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">INSERT INTO beauty SET id &#x3D; 19,</span><br><span class="line">NAME &#x3D; &#39;刘涛&#39;,</span><br><span class="line">phone &#x3D; &#39;199&#39; ;</span><br><span class="line"></span><br><span class="line"># 两种方式大pk ★</span><br><span class="line"># 1、方式一支持插入多行,方式二不支持</span><br><span class="line">INSERT INTO beauty </span><br><span class="line">VALUES</span><br><span class="line">  (</span><br><span class="line">    23,</span><br><span class="line">    &#39;唐艺昕1&#39;,</span><br><span class="line">    &#39;女&#39;,</span><br><span class="line">    &#39;1990-4-23&#39;,</span><br><span class="line">    &#39;1898888888&#39;,</span><br><span class="line">    NULL,</span><br><span class="line">    2</span><br><span class="line">  ),</span><br><span class="line">  (</span><br><span class="line">    24,</span><br><span class="line">    &#39;唐艺昕2&#39;,</span><br><span class="line">    &#39;女&#39;,</span><br><span class="line">    &#39;1990-4-23&#39;,</span><br><span class="line">    &#39;1898888888&#39;,</span><br><span class="line">    NULL,</span><br><span class="line">    2</span><br><span class="line">  ),</span><br><span class="line">  (</span><br><span class="line">    25,</span><br><span class="line">    &#39;唐艺昕3&#39;,</span><br><span class="line">    &#39;女&#39;,</span><br><span class="line">    &#39;1990-4-23&#39;,</span><br><span class="line">    &#39;1898888888&#39;,</span><br><span class="line">    NULL,</span><br><span class="line">    2</span><br><span class="line">  ) ;</span><br><span class="line"></span><br><span class="line"># 2、方式一支持子查询，方式二不支持</span><br><span class="line">INSERT INTO beauty (id, NAME, phone) </span><br><span class="line">SELECT </span><br><span class="line">  26,</span><br><span class="line">  &#39;宋茜&#39;,</span><br><span class="line">  &#39;11809866&#39; ;</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty (id, NAME, phone) </span><br><span class="line">SELECT </span><br><span class="line">  id,</span><br><span class="line">  boyname,</span><br><span class="line">  &#39;1234567&#39; </span><br><span class="line">FROM</span><br><span class="line">  boys </span><br><span class="line">WHERE id &lt; 3 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  beauty ;</span><br></pre></td></tr></table></figure><h3 id="3-2-修改语句"><a href="#3-2-修改语句" class="headerlink" title="3.2 修改语句"></a>3.2 修改语句</h3><h4 id="3-2-1-修改单表的记录★"><a href="#3-2-1-修改单表的记录★" class="headerlink" title="3.2.1 修改单表的记录★"></a>3.2.1 修改单表的记录★</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update 表名</span><br><span class="line">set 列&#x3D;新值,列&#x3D;新值,...</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-修改多表的记录【补充】"><a href="#3-2-2-修改多表的记录【补充】" class="headerlink" title="3.2.2 修改多表的记录【补充】"></a>3.2.2 修改多表的记录【补充】</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># sql92语法：</span><br><span class="line">update 表1 别名1,表2 别名2</span><br><span class="line">set 列&#x3D;值,...</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99语法：</span><br><span class="line">update 表1 别名1</span><br><span class="line">inner|left|right join 表2 别名2</span><br><span class="line">on 连接条件</span><br><span class="line">set 列&#x3D;值,...</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 1.修改单表的记录</span><br><span class="line"># 案例1：修改beauty表中姓唐的女神的电话为13899888899</span><br><span class="line">UPDATE </span><br><span class="line">  beauty </span><br><span class="line">SET</span><br><span class="line">  phone &#x3D; &#39;13899888899&#39; </span><br><span class="line">WHERE NAME LIKE &#39;唐%&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例2：修改boys表中id好为2的名称为张飞，魅力值 10</span><br><span class="line">UPDATE </span><br><span class="line">  boys </span><br><span class="line">SET</span><br><span class="line">  boyname &#x3D; &#39;张飞&#39;,</span><br><span class="line">  usercp &#x3D; 10 </span><br><span class="line">WHERE id &#x3D; 2 ;</span><br><span class="line"></span><br><span class="line"># 2.修改多表的记录</span><br><span class="line"># 案例 1：修改张无忌的女朋友的手机号为114</span><br><span class="line">UPDATE </span><br><span class="line">  boys bo </span><br><span class="line">  INNER JOIN beauty b </span><br><span class="line">    ON bo.&#96;id&#96; &#x3D; b.&#96;id&#96; SET b.&#96;phone&#96; &#x3D; &#39;120&#39;,</span><br><span class="line">  bo.&#96;userCP&#96; &#x3D; 120 </span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;张无忌&#39; ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例2：修改没有男朋友的女神的男朋友编号都为2号</span><br><span class="line">UPDATE </span><br><span class="line">  boys bo </span><br><span class="line">  RIGHT JOIN beauty b </span><br><span class="line">    ON bo.&#96;id&#96; &#x3D; b.&#96;boyfriend_id&#96; SET b.&#96;boyfriend_id&#96; &#x3D; 2 </span><br><span class="line">WHERE bo.&#96;id&#96; IS NULL ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  boys ;</span><br></pre></td></tr></table></figure><h3 id="3-3-删除语句"><a href="#3-3-删除语句" class="headerlink" title="3.3 删除语句"></a>3.3 删除语句</h3><h4 id="3-3-1-方式一：delete"><a href="#3-3-1-方式一：delete" class="headerlink" title="3.3.1 方式一：delete"></a>3.3.1 方式一：delete</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 1 单表的删除【★】</span><br><span class="line">delete from 表名 where 筛选条件</span><br><span class="line"></span><br><span class="line"># 2 多表的删除【补充】</span><br><span class="line"># sql92语法：</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名,表2 别名</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99语法：</span><br><span class="line">delete 表1的别名,表2的别名</span><br><span class="line">from 表1 别名</span><br><span class="line">inner|left|right join 表2 别名 on 连接条件</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure><h4 id="3-3-2-方式二：truncate"><a href="#3-3-2-方式二：truncate" class="headerlink" title="3.3.2 方式二：truncate"></a>3.3.2 方式二：truncate</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure><blockquote><p>delete vs truncate【面试题★】</p><ol><li>delete 可以加where 条件，truncate不能加</li><li>truncate删除，效率高一丢丢</li><li>假如要删除的表中有自增长列，如果<pre><code>用delete删除后，再插入数据，自增长列的值从断点开始，   而truncate删除后，再插入数据，自增长列的值从1开始。</code></pre></li><li>truncate删除没有返回值，delete删除有返回值</li><li>truncate删除不能回滚，delete删除可以回滚.</li></ol></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># 方式一：delete</span><br><span class="line"># 1.单表的删除</span><br><span class="line"># 案例1：删除手机号以9结尾的女神信息</span><br><span class="line">DELETE </span><br><span class="line">FROM</span><br><span class="line">  beauty </span><br><span class="line">WHERE phone LIKE &#39;%9&#39; ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  beauty ;</span><br><span class="line"></span><br><span class="line"># 2.多表的删除</span><br><span class="line"># 案例1：删除张无忌的女朋友的信息</span><br><span class="line">DELETE </span><br><span class="line">  b </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  INNER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;张无忌&#39; ;</span><br><span class="line"></span><br><span class="line"># 案例2：删除黄晓明的信息以及他女朋友的信息</span><br><span class="line">DELETE </span><br><span class="line">  b,</span><br><span class="line">  bo </span><br><span class="line">FROM</span><br><span class="line">  beauty b </span><br><span class="line">  INNER JOIN boys bo </span><br><span class="line">    ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96; </span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;黄晓明&#39; ;</span><br><span class="line"></span><br><span class="line"># 方式二：truncate语句</span><br><span class="line"># 案例：将魅力值&gt;100的男神信息删除</span><br><span class="line">TRUNCATE TABLE boys ;</span><br><span class="line"># 删除整个表</span><br><span class="line"># delete pk truncate【面试题★】</span><br><span class="line">&#x2F;*</span><br><span class="line">1.delete 可以加where 条件，truncate不能加</span><br><span class="line">2.truncate删除，效率高一丢丢</span><br><span class="line">3.假如要删除的表中有自增长列，</span><br><span class="line">如果用delete删除后，再插入数据，自增长列的值从断点开始，</span><br><span class="line">而truncate删除后，再插入数据，自增长列的值从1开始。</span><br><span class="line">4.truncate删除没有返回值，delete删除有返回值</span><br><span class="line">5.truncate删除不能回滚，delete删除可以回滚.</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  boys ;</span><br><span class="line"></span><br><span class="line">DELETE </span><br><span class="line">FROM</span><br><span class="line">  boys ;</span><br><span class="line"></span><br><span class="line">TRUNCATE TABLE boys ;</span><br><span class="line"></span><br><span class="line">INSERT INTO boys (boyname, usercp) </span><br><span class="line">VALUES</span><br><span class="line">  (&#39;张飞&#39;, 100),</span><br><span class="line">  (&#39;刘备&#39;, 100),</span><br><span class="line">  (&#39;关云长&#39;, 100) ;</span><br></pre></td></tr></table></figure><hr><h2 id="第4章-DDL语言"><a href="#第4章-DDL语言" class="headerlink" title="第4章 DDL语言"></a>第4章 DDL语言</h2><p>DDL（Data Definition Language）：数据定义语言，用来定义数据库对象：库、表、列等</p><h3 id="4-1-库的管理"><a href="#4-1-库的管理" class="headerlink" title="4.1 库的管理"></a>4.1 库的管理</h3><h4 id="4-1-1-库的创建"><a href="#4-1-1-库的创建" class="headerlink" title="4.1.1 库的创建"></a>4.1.1 库的创建</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database [if not exists] 库名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 案例：创建库books</span><br><span class="line"></span><br><span class="line">CREATE DATABASE IF NOT EXISTS books ;</span><br></pre></td></tr></table></figure><h4 id="4-1-2-库的修改"><a href="#4-1-2-库的修改" class="headerlink" title="4.1.2 库的修改"></a>4.1.2 库的修改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RENAME DATABASE books TO 新库名; # 不安全，弃用</span><br><span class="line"></span><br><span class="line"># 更改库的字符集</span><br><span class="line">ALTER DATABASE books </span><br><span class="line">  CHARACTER SET gbk ;</span><br></pre></td></tr></table></figure><h4 id="4-1-3-库的删除"><a href="#4-1-3-库的删除" class="headerlink" title="4.1.3 库的删除"></a>4.1.3 库的删除</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS 库名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 案例：删除库books</span><br><span class="line">DROP DATABASE IF EXISTS books ;</span><br></pre></td></tr></table></figure><h3 id="4-2-表的管理"><a href="#4-2-表的管理" class="headerlink" title="4.2 表的管理"></a>4.2 表的管理</h3><h4 id="4-2-1-表的创建"><a href="#4-2-1-表的创建" class="headerlink" title="4.2.1 表的创建"></a>4.2.1 表的创建</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">...</span><br><span class="line">列名 列的类型【（长度）约束】,</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：创建表book</span><br><span class="line">CREATE TABLE book (</span><br><span class="line">  id INT,</span><br><span class="line">  # 编号</span><br><span class="line">  bName VARCHAR (20),</span><br><span class="line">  # 书名</span><br><span class="line">  price DOUBLE,</span><br><span class="line">  # 价格</span><br><span class="line">  authorId INT,</span><br><span class="line">  # 作者编号</span><br><span class="line">  publishDate DATETIME#出版日期</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line"># 案例2：创建表author</span><br><span class="line">CREATE TABLE IF NOT EXISTS author (</span><br><span class="line">  id INT,</span><br><span class="line">  au_name VARCHAR (20),</span><br><span class="line">  nation VARCHAR (10)</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-表的修改"><a href="#4-2-2-表的修改" class="headerlink" title="4.2.2 表的修改"></a>4.2.2 表的修改</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add|drop|modify|change column 列名 【列类型 约束】;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ① 修改列名</span><br><span class="line">ALTER TABLE book </span><br><span class="line">  CHANGE COLUMN publishdate pubDate DATETIME ;</span><br><span class="line"></span><br><span class="line"># ② 修改列的类型或约束</span><br><span class="line">ALTER TABLE book </span><br><span class="line">  MODIFY COLUMN pubdate TIMESTAMP ;</span><br><span class="line"></span><br><span class="line"># ③ 添加新列</span><br><span class="line">ALTER TABLE author </span><br><span class="line">  ADD COLUMN annual DOUBLE ;</span><br><span class="line"></span><br><span class="line"># ④ 删除列</span><br><span class="line">ALTER TABLE author </span><br><span class="line">  DROP COLUMN annual ;</span><br><span class="line"></span><br><span class="line"># ⑤ 修改表名</span><br><span class="line">ALTER TABLE author </span><br><span class="line">  RENAME TO book_author ;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-表的删除"><a href="#4-2-3-表的删除" class="headerlink" title="4.2.3 表的删除"></a>4.2.3 表的删除</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE 【IF EXISTS】 表名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 删除表book_author</span><br><span class="line">DROP TABLE IF EXISTS book_author ;</span><br><span class="line"></span><br><span class="line">SHOW TABLES ;</span><br><span class="line"></span><br><span class="line"># 通用的写法：</span><br><span class="line">DROP DATABASE IF EXISTS 旧库名 ;</span><br><span class="line">CREATE DATABASE 新库名;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS 旧表名 ;</span><br><span class="line">CREATE TABLE 表名 ;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-表的复制"><a href="#4-2-4-表的复制" class="headerlink" title="4.2.4 表的复制"></a>4.2.4 表的复制</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO author </span><br><span class="line">VALUES</span><br><span class="line">  (1, &#39;村上春树&#39;, &#39;日本&#39;),</span><br><span class="line">  (2, &#39;莫言&#39;, &#39;中国&#39;),</span><br><span class="line">  (3, &#39;冯唐&#39;, &#39;中国&#39;),</span><br><span class="line">  (4, &#39;金庸&#39;, &#39;中国&#39;) ;</span><br><span class="line"></span><br><span class="line"># 1、仅仅复制表的结构</span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line"></span><br><span class="line"># 2、复制表的结构 + 数据</span><br><span class="line">CREATE TABLE copy1 </span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  author ;</span><br><span class="line">  </span><br><span class="line"># 3、只复制部分数据</span><br><span class="line">CREATE TABLE copy2 </span><br><span class="line">SELECT </span><br><span class="line">  id,</span><br><span class="line">  au_name </span><br><span class="line">FROM</span><br><span class="line">  author </span><br><span class="line">WHERE nation &#x3D; &#39;中国&#39; ;</span><br><span class="line"></span><br><span class="line"># 4、仅仅复制某些字段</span><br><span class="line">CREATE TABLE copy3 </span><br><span class="line">SELECT </span><br><span class="line">  id,</span><br><span class="line">  au_name </span><br><span class="line">FROM</span><br><span class="line">  author </span><br><span class="line">WHERE 0;</span><br></pre></td></tr></table></figure><h3 id="4-3-数据类型"><a href="#4-3-数据类型" class="headerlink" title="4.3 数据类型"></a>4.3 数据类型</h3><h4 id="4-3-1-分类"><a href="#4-3-1-分类" class="headerlink" title="4.3.1 分类"></a>4.3.1 分类</h4><p><strong>数值型</strong></p><ul><li>整型</li><li>小数：<ul><li>定点数</li><li>浮点数</li></ul></li></ul><p><strong>字符型</strong></p><ul><li>较短的文本：char、varchar</li><li>较长的文本：text、blob（较长的二进制数据）    </li></ul><p><strong>日期型</strong></p><h4 id="4-3-2-整型"><a href="#4-3-2-整型" class="headerlink" title="4.3.2 整型"></a>4.3.2 整型</h4><p><strong>1）分类</strong></p><table><thead><tr><th align="center">tinyint</th><th align="center">smallint</th><th align="center">mediumint</th><th align="center">int/integer</th><th align="center">bigint</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">8</td></tr></tbody></table><p><strong>2）特点</strong></p><p>① 如果不设置无符号还是有符号，默认是有符号，如果想设置无符号，需要添加unsigned关键字</p><p>② 如果插入的数值超出了整型的范围，会报out of range异常，并且插入临界值</p><p>③ 如果不设置长度，会有默认的长度；长度代表显示的最大宽度，如果不够会用0在左边填充，但必须搭配zerofill使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 如何设置无符号和有符号</span><br><span class="line">DROP TABLE IF EXISTS tab_int ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_int (</span><br><span class="line">  t1 INT (7) ZEROFILL,</span><br><span class="line">  t2 INT (7) UNSIGNED ZEROFILL</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC tab_int ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int </span><br><span class="line">VALUES</span><br><span class="line">  (- 12345, 12345) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_int </span><br><span class="line">VALUES</span><br><span class="line">  (24545444, 12345) ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  tab_int ;</span><br></pre></td></tr></table></figure><h4 id="4-3-3-小数"><a href="#4-3-3-小数" class="headerlink" title="4.3.3 小数"></a>4.3.3 小数</h4><p><strong>1）分类</strong></p><p>① <strong>定点数</strong>：float(M,D)、double(M,D)</p><p>② <strong>浮点数</strong>：dec((M,D)、decimal(M,D)</p><p><strong>2）特点</strong></p><p>① M和D</p><p>M：整数部位 + 小数部位</p><p>D：小数部位</p><p>如果超过范围，则插入临界值</p><p>② M和D都可以省略</p><p>如果是decimal，则M默认为10，D默认为0</p><p>如果是float和double，则会根据插入的数值的精度来决定精度</p><p>③ 定点型的精度较高，如果要求插入数值的精度较高，如货币运算等，则考虑使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># M和D测试</span><br><span class="line">CREATE TABLE tab_float(</span><br><span class="line">f1 FLOAT(5,2),</span><br><span class="line">f2 DOUBLE(5,2),</span><br><span class="line">f3 DECIMAL(5,2)</span><br><span class="line">);</span><br><span class="line">SELECT * FROM tab_float VALUES(123.4, 123.4, 123.4);</span><br><span class="line">SELECT * FROM tab_float VALUES(123.45, 123.45, 123.45);</span><br><span class="line">SELECT * FROM tab_float VALUES(123.456, 123.456, 123.456);</span><br></pre></td></tr></table></figure><h4 id="4-3-4-字符型"><a href="#4-3-4-字符型" class="headerlink" title="4.3.4 字符型"></a>4.3.4 字符型</h4><p><strong>1）分类</strong></p><p>① 较短的文本：char、varchar</p><p>其他：binary 和 varbinary用于保存较短的二进制、enum用于保存枚举、set用于保存集合</p><p>② 较长的文本：text、blob（较大的二进制）</p><p><strong>2）特点</strong></p><table><thead><tr><th></th><th>写法</th><th>M的意思</th><th>特点</th><th>空间的耗费</th><th>效率</th></tr></thead><tbody><tr><td>char</td><td>char(M)</td><td>最大的字符数，可以省略，默认为1</td><td>固定长度的字符</td><td>比较耗费</td><td>高</td></tr><tr><td>varchar</td><td>varchar(M)</td><td>最大的字符数，不可以省略</td><td>可变长度的字符</td><td>比较节省</td><td>低</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_char (c1 ENUM (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_char VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;b&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;c&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;m&#39;);</span><br><span class="line">INSERT INTO tab_char VALUES(&#39;A&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_char;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_set (s1 SET (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;)) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;A,B&#39;);</span><br><span class="line">INSERT INTO tab_set VALUES(&#39;a,c,d&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_set;</span><br></pre></td></tr></table></figure><h4 id="4-3-5-日期型"><a href="#4-3-5-日期型" class="headerlink" title="4.3.5 日期型"></a>4.3.5 日期型</h4><p><strong>1）分类</strong></p><p>① date：只保存日期</p><p>② time：只保存时间</p><p>③ year：只保存年</p><p>④ datetime：保存日期 + 时间</p><p>⑤ timestamp：保存日期 + 时间</p><p><strong>2）特点</strong></p><table><thead><tr><th align="center"></th><th align="center">字节</th><th align="center">范围</th><th align="center">时区等的影响</th></tr></thead><tbody><tr><td align="center">datetime</td><td align="center">8</td><td align="center">1000——9999</td><td align="center">不受</td></tr><tr><td align="center">timestamp</td><td align="center">4</td><td align="center">1970-2038</td><td align="center">受</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_date (t1 DATETIME, t2 TIMESTAMP) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_date VALUES(NOW(),NOW());</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_date;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;time_zone&#39;;</span><br><span class="line"></span><br><span class="line">SET time_zone&#x3D;&#39;+9:00&#39;;</span><br></pre></td></tr></table></figure><h3 id="4-4-约束"><a href="#4-4-约束" class="headerlink" title="4.4 约束"></a>4.4 约束</h3><h4 id="4-4-1-含义"><a href="#4-4-1-含义" class="headerlink" title="4.4.1 含义"></a>4.4.1 含义</h4><p>一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p><h4 id="4-4-2-分类"><a href="#4-4-2-分类" class="headerlink" title="4.4.2 分类"></a>4.4.2 分类</h4><p>六大约束：</p><p><strong>1）NOT NULL</strong></p><p>非空，用于保证该字段的值不能为空；比如：姓名、学号等</p><p><strong>2）DEFAULT</strong></p><p>默认，用于保证该字段有默认值；比如：性别</p><p><strong>3）PRIMARY KEY</strong></p><p>主键，用于保证该字段的值具有唯一性，并且非空；比如：学号、员工编号等</p><p><strong>4）UNIQUE</strong></p><p>唯一，用于保证该字段的值具有唯一性，可以为空；比如：座位号</p><p><strong>5）CHECK</strong></p><p>检查约束【mysql中不支持】；比如：年龄、性别</p><p><strong>6）FOREIGN KEY</strong></p><p>外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值；在从表添加外键约束，用于引用主表中某列的值；比如：学生表的专业编号，员工表的部门编号，员工表的工种编号</p><h4 id="4-4-3-约束的添加分类"><a href="#4-4-3-约束的添加分类" class="headerlink" title="4.4.3 约束的添加分类"></a>4.4.3 约束的添加分类</h4><p><strong>1）列级约束</strong></p><p>六大约束语法上都支持，但外键约束没有效果    </p><p><strong>2）表级约束</strong></p><p>除了非空、默认，其他的都支持    </p><p><strong>添加约束的时机</strong>：① 创建表时；② 修改表时</p><p>主键和唯一的大对比：</p><table><thead><tr><th align="center"></th><th align="center">保证唯一性</th><th align="center">是否允许为空</th><th align="center">一个表中可以有多少个</th><th align="center">是否允许组合</th></tr></thead><tbody><tr><td align="center">主键</td><td align="center">√</td><td align="center">×</td><td align="center">至多有1个</td><td align="center">√，但不推荐</td></tr><tr><td align="center">唯一</td><td align="center">√</td><td align="center">√</td><td align="center">可以有多个</td><td align="center">√，但不推荐</td></tr></tbody></table><p><strong>外键</strong></p><p>① 从表设置外键关系</p><p>② 外键列的类型和主表的关联列的类型要求一致或兼容，名称无要求</p><p>③ 关联列必须是一个key（一般是主键或唯一）</p><p>④ 插入数据时，先插入主表，再插入从表；删除数据时，先删除从表，再删除主表</p><h4 id="4-4-4-语法"><a href="#4-4-4-语法" class="headerlink" title="4.4.4 语法"></a>4.4.4 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段名 字段类型 列级约束,</span><br><span class="line">字段名 字段类型,</span><br><span class="line">表级约束</span><br><span class="line"></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>1）创建表时添加约束</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE students ;</span><br><span class="line"></span><br><span class="line"># 一、创建表时添加约束</span><br><span class="line"># 1.添加列级约束</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line"></span><br><span class="line">直接在字段名和类型后面追加 约束类型 即可。</span><br><span class="line"></span><br><span class="line">只支持：默认、非空、主键、唯一</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">USE students ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  # 主键</span><br><span class="line">  stuName VARCHAR (20) NOT NULL,</span><br><span class="line">  # 非空</span><br><span class="line">  gender CHAR(1) CHECK (gender &#x3D; &#39;男&#39; </span><br><span class="line">    OR gender &#x3D; &#39;女&#39;),</span><br><span class="line">  # 检查</span><br><span class="line">  seat INT UNIQUE,</span><br><span class="line">  # 唯一</span><br><span class="line">  age INT DEFAULT 18,</span><br><span class="line">  # 默认约束</span><br><span class="line">  majorId INT REFERENCES major (id) # 外键</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE major (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  majorName VARCHAR (20)</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC stuinfo ;</span><br><span class="line"># 查看stuinfo表中所有的索引，包括主键、外键、唯一</span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br><span class="line"></span><br><span class="line"># 2.添加表级约束</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：在各个字段的最下面</span><br><span class="line"> 【constraint 约束名】 约束类型(字段名) </span><br><span class="line"> </span><br><span class="line">*&#x2F;</span><br><span class="line">DROP TABLE IF EXISTS stuinfo ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">  id INT,</span><br><span class="line">  stuname VARCHAR (20),</span><br><span class="line">  gender CHAR(1),</span><br><span class="line">  seat INT,</span><br><span class="line">  age INT,</span><br><span class="line">  majorid INT,</span><br><span class="line">  CONSTRAINT pk PRIMARY KEY (id),</span><br><span class="line">  #主键</span><br><span class="line">  CONSTRAINT uq UNIQUE (seat),</span><br><span class="line">  #唯一键</span><br><span class="line">  CONSTRAINT ck CHECK (gender &#x3D; &#39;男&#39; </span><br><span class="line">    OR gender &#x3D; &#39;女&#39;),</span><br><span class="line">  #检查</span><br><span class="line">  CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major (id) #外键</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br><span class="line"></span><br><span class="line"># 通用的写法：★</span><br><span class="line">CREATE TABLE IF NOT EXISTS stuinfo (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  stuname VARCHAR (20),</span><br><span class="line">  sex CHAR(1),</span><br><span class="line">  age INT DEFAULT 18,</span><br><span class="line">  seat INT UNIQUE,</span><br><span class="line">  majorid INT,</span><br><span class="line">  CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major (id)</span><br><span class="line">) ;</span><br></pre></td></tr></table></figure><p><strong>2）修改表时添加约束</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"># 二、修改表时添加约束</span><br><span class="line">&#x2F;*</span><br><span class="line">1、添加列级约束</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 新约束;</span><br><span class="line"></span><br><span class="line">2、添加表级约束</span><br><span class="line">alter table 表名 add 【constraint 约束名】 约束类型(字段名) 【外键的引用】;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">DROP TABLE IF EXISTS stuinfo ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo (</span><br><span class="line">  id INT,</span><br><span class="line">  stuname VARCHAR (20),</span><br><span class="line">  gender CHAR(1),</span><br><span class="line">  seat INT,</span><br><span class="line">  age INT,</span><br><span class="line">  majorid INT</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">DESC stuinfo ;</span><br><span class="line"></span><br><span class="line"># 1.添加非空约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN stuname VARCHAR (20) NOT NULL ;</span><br><span class="line"></span><br><span class="line">#2.添加默认约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN age INT DEFAULT 18 ;</span><br><span class="line"></span><br><span class="line"># 3.添加主键</span><br><span class="line"># ①列级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN id INT PRIMARY KEY ;</span><br><span class="line"></span><br><span class="line"># ②表级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  ADD PRIMARY KEY (id) ;</span><br><span class="line"></span><br><span class="line"># 4.添加唯一</span><br><span class="line"># ①列级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN seat INT UNIQUE ;</span><br><span class="line"></span><br><span class="line"># ②表级约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  ADD UNIQUE (seat) ;</span><br><span class="line"></span><br><span class="line"># 5.添加外键</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY (majorid) REFERENCES major (id) ;</span><br></pre></td></tr></table></figure><p><strong>3）修改表时删除约束</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 三、修改表时删除约束</span><br><span class="line"># 1.删除非空约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN stuname VARCHAR (20) NULL ;</span><br><span class="line"></span><br><span class="line"># 2.删除默认约束</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  MODIFY COLUMN age INT ;</span><br><span class="line"></span><br><span class="line"># 3.删除主键</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  DROP PRIMARY KEY ;</span><br><span class="line"></span><br><span class="line"># 4.删除唯一</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  DROP INDEX seat ;</span><br><span class="line"></span><br><span class="line"># 5.删除外键</span><br><span class="line">ALTER TABLE stuinfo </span><br><span class="line">  DROP FOREIGN KEY fk_stuinfo_major ;</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM stuinfo ;</span><br></pre></td></tr></table></figure><h3 id="4-5-标识列"><a href="#4-5-标识列" class="headerlink" title="4.5 标识列"></a>4.5 标识列</h3><h4 id="4-5-1-含义"><a href="#4-5-1-含义" class="headerlink" title="4.5.1 含义"></a>4.5.1 含义</h4><p>又称为自增长列，可以不用手动的插入值，系统提供默认的序列值</p><p>含义：可以不用手动的插入值，系统提供默认的序列值</p><h4 id="4-5-2-特点"><a href="#4-5-2-特点" class="headerlink" title="4.5.2 特点"></a>4.5.2 特点</h4><p>1）标识列必须和主键搭配吗？不一定，但要求是一个key</p><p>2）一个表可以有几个标识列？至多一个！</p><p>3）标识列的类型只能是数值型</p><p>4）标识列可以通过 <code>SET auto_increment_increment=3;设置步长</code>;可以通过手动插入值，设置起始值</p><h4 id="4-5-3-创建表时设置标识列"><a href="#4-5-3-创建表时设置标识列" class="headerlink" title="4.5.3 创建表时设置标识列"></a>4.5.3 创建表时设置标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 一、创建表时设置标识列</span><br><span class="line">DROP TABLE IF EXISTS tab_identity ;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_identity (</span><br><span class="line">  id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">  NAME VARCHAR(20) </span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">TRUNCATE TABLE tab_identity ;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_identity(id,NAME) VALUES(NULL,&#39;john&#39;);</span><br><span class="line">INSERT INTO tab_identity(NAME) VALUES(&#39;lucy&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_identity;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;%auto_increment%&#39; ;</span><br><span class="line"></span><br><span class="line">SET auto_increment_increment &#x3D; 3 ;</span><br></pre></td></tr></table></figure><h4 id="4-5-4-修改表时设置标识列"><a href="#4-5-4-修改表时设置标识列" class="headerlink" title="4.5.4 修改表时设置标识列"></a>4.5.4 修改表时设置标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 二、修改表时设置标识列</span><br><span class="line">ALTER TABLE tab_identity </span><br><span class="line">  MODIFY COLUMN id INT PRIMARY KEY AUTO_INCREMENT ;</span><br></pre></td></tr></table></figure><h4 id="4-5-5-修改表时删除标识列"><a href="#4-5-5-修改表时删除标识列" class="headerlink" title="4.5.5 修改表时删除标识列"></a>4.5.5 修改表时删除标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 三、修改表时删除标识列</span><br><span class="line">ALTER TABLE tab_identity </span><br><span class="line">  MODIFY COLUMN id INT ;</span><br></pre></td></tr></table></figure><hr><h2 id="第5章-TCL语言"><a href="#第5章-TCL语言" class="headerlink" title="第5章 TCL语言"></a>第5章 TCL语言</h2><p>TCL（Transmission Control Language）：事务控制语言</p><h3 id="5-1-事务"><a href="#5-1-事务" class="headerlink" title="5.1 事务"></a>5.1 事务</h3><h4 id="5-1-1-概念"><a href="#5-1-1-概念" class="headerlink" title="5.1.1 概念"></a>5.1.1 概念</h4><p>一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p><h4 id="5-1-2特性"><a href="#5-1-2特性" class="headerlink" title="5.1.2特性"></a>5.1.2特性</h4><p><code>ACID</code><br>原子性（Atomicity）：一个事务不可再分割，要么都执行要么都不执行<br>一致性（Consistency）：一个事务执行会使数据从一个一致状态切换到另外一个一致状态<br>隔离性（Isolation）：一个事务的执行不受其他事务的干扰<br>持久性（Durability）：一个事务一旦提交，则会永久的改变数据库的数据.</p><h4 id="5-1-3-分类"><a href="#5-1-3-分类" class="headerlink" title="5.1.3 分类"></a>5.1.3 分类</h4><p><strong>隐式事务</strong>：事务没有明显的开启和结束的标记<br>比如：insert、update、delete语句</p><p><strong>显式事务</strong>：事务具有明显的开启和结束的标记<br>前提：必须先设置自动提交功能为禁用</p><h3 id="5-2-事务的创建"><a href="#5-2-事务的创建" class="headerlink" title="5.2 事务的创建"></a>5.2 事务的创建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 步骤1：开启事务</span><br><span class="line">SET autocommit &#x3D; 0;</span><br><span class="line">START TRANSACTION; # 可选的</span><br><span class="line"># 步骤2：编写事务中的sql语句（select insert update delete）</span><br><span class="line">语句1;</span><br><span class="line">语句2;</span><br><span class="line">...</span><br><span class="line"># 步骤3：结束事务</span><br><span class="line">COMMIT; # 提交事务</span><br><span class="line">ROLLBACK; # 回滚事务</span><br><span class="line">SAVEPOINT 节点名; # 设置保存点</span><br></pre></td></tr></table></figure><h3 id="5-3-并发事务"><a href="#5-3-并发事务" class="headerlink" title="5.3 并发事务"></a>5.3 并发事务</h3><p>1 事务的并发问题是如何发生的？</p><p>多个事务<strong>同时</strong>操作<strong>同一个</strong>数据库的相同数据时</p><p>2 并发问题都有哪些？</p><p><strong>脏读</strong>：一个事务读取了其他事务还没有提交的数据，读到的是其他事务“更新”的数据</p><p><strong>不可重复读</strong>：一个事务多次读取，结果不一样</p><p><strong>幻读</strong>：一个事务读取了其他事务还没有提交的数据，只是读到的是 其他事务“插入”的数据</p><p>3 如何解决并发问题？</p><p>通过设置<strong>隔离级别</strong>来解决</p><table><thead><tr><th align="center">事务的隔离级别</th><th align="center">脏读</th><th align="center">不可重复读</th><th align="center">幻读</th></tr></thead><tbody><tr><td align="center">read uncommitted</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">read committed</td><td align="center">×</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">repeatable read</td><td align="center">×</td><td align="center">×</td><td align="center">√</td></tr><tr><td align="center">serializable</td><td align="center">×</td><td align="center">×</td><td align="center">×</td></tr></tbody></table><blockquote><p><strong>mysql</strong>中默认第三个隔离级别 repeatable read<br><strong>oracle</strong>中默认第二个隔离级别 read committed</p></blockquote><p><strong>查看隔离级别</strong>：<code>select @@tx_isolation;</code></p><p><strong>设置隔离级别</strong>：<code>set session|global transaction isolation level 隔离级别;</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SHOW ENGINES ; # 查看数据库引擎</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;autocommit&#39; ;</span><br><span class="line"></span><br><span class="line">USE test;</span><br><span class="line">CREATE TABLE account (</span><br><span class="line">  id INT PRIMARY KEY,</span><br><span class="line">  username VARCHAR (20),</span><br><span class="line">  balance DOUBLE</span><br><span class="line">) ;</span><br><span class="line"></span><br><span class="line">INSERT INTO account VALUE (1, &#39;张无忌&#39;, 1000),</span><br><span class="line">(2, &#39;赵敏&#39;, 1000) ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 演示事务的使用步骤</span><br><span class="line"># 1 开启事务</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line"># 2 编写一组事务的语句</span><br><span class="line">UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;张无忌&#39;;</span><br><span class="line">UPDATE account SET balance &#x3D; 1000 WHERE username&#x3D;&#39;赵敏&#39;;</span><br><span class="line"></span><br><span class="line"># 3 结束事务</span><br><span class="line">ROLLBACK;</span><br><span class="line"># commit;</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure><p><strong>演示事务对于<code>delete</code>和<code>truncate</code>的处理的区别</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 演示delete--还原，和原来一样</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION ;</span><br><span class="line">DELETE FROM account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 演示truncate--数据删除，只剩表格</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION ;</span><br><span class="line">TRUNCATE TABLE account;</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure><p><strong>演示<code>savepoint</code>的使用</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 演示savepoint 的使用</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">DELETE FROM account WHERE id&#x3D;25;</span><br><span class="line">SAVEPOINT a;# 设置保存点</span><br><span class="line">DELETE FROM account WHERE id&#x3D;28;</span><br><span class="line">ROLLBACK TO a;# 回滚到保存点</span><br><span class="line"></span><br><span class="line">SELECT * FROM account</span><br></pre></td></tr></table></figure><hr><h2 id="第6章-其他"><a href="#第6章-其他" class="headerlink" title="第6章 其他"></a>第6章 其他</h2><p>视图、变量、存储过程、函数、流程控制过程</p><h3 id="6-1-视图"><a href="#6-1-视图" class="headerlink" title="6.1 视图"></a>6.1 视图</h3><p><strong>含义</strong>：虚拟表，和普通表一样使用</p><blockquote><p>mysql5.1版本出现的新特性，是通过表动态生成的数据</p></blockquote><table><thead><tr><th></th><th>创建语法的关键字</th><th>是否实际占用物理空间</th><th>使用</th></tr></thead><tbody><tr><td>视图</td><td>create view</td><td>只是保存了sql逻辑</td><td>增删改查，只是一般不能增删改</td></tr><tr><td>表</td><td>create table</td><td>保存了数据</td><td>增删改查</td></tr></tbody></table><h4 id="6-1-1-创建视图"><a href="#6-1-1-创建视图" class="headerlink" title="6.1.1 创建视图"></a>6.1.1 创建视图</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW 视图名 AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 1.查询姓名中包含a字符的员工名、部门名和工种信息</span><br><span class="line"># ① 创建</span><br><span class="line">CREATE VIEW myv1 AS </span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  department_name,</span><br><span class="line">  job_title </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN departments d </span><br><span class="line">    ON e.department_id &#x3D; d.department_id </span><br><span class="line">  JOIN jobs j </span><br><span class="line">    ON j.job_id &#x3D; e.job_id ;</span><br><span class="line"></span><br><span class="line"># ② 使用</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  myv1 </span><br><span class="line">WHERE last_name LIKE &#39;%a%&#39; ;</span><br><span class="line"></span><br><span class="line"># 2.查询各部门的平均工资级别</span><br><span class="line"># ① 创建视图查看每个部门的平均工资</span><br><span class="line">CREATE VIEW myv2 AS </span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary) ag,</span><br><span class="line">  department_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY department_id ;</span><br><span class="line"></span><br><span class="line"># ② 使用</span><br><span class="line">SELECT </span><br><span class="line">  myv2.&#96;ag&#96;,</span><br><span class="line">  g.grade_level </span><br><span class="line">FROM</span><br><span class="line">  myv2 </span><br><span class="line">  JOIN job_grades g </span><br><span class="line">    ON myv2.&#96;ag&#96; BETWEEN g.&#96;lowest_sal&#96; </span><br><span class="line">    AND g.&#96;highest_sal&#96; ;</span><br><span class="line"></span><br><span class="line"># 3.查询平均工资最低的部门信息</span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  myv2 </span><br><span class="line">ORDER BY ag </span><br><span class="line">LIMIT 1 ;</span><br><span class="line"></span><br><span class="line">#4.查询平均工资最低的部门名和工资</span><br><span class="line">CREATE VIEW myv3 AS </span><br><span class="line">SELECT </span><br><span class="line">  * </span><br><span class="line">FROM</span><br><span class="line">  myv2 </span><br><span class="line">ORDER BY ag </span><br><span class="line">LIMIT 1 ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  d.*,</span><br><span class="line">  m.ag </span><br><span class="line">FROM</span><br><span class="line">  myv3 m </span><br><span class="line">  JOIN departments d </span><br><span class="line">    ON m.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96; ;</span><br></pre></td></tr></table></figure><h4 id="6-1-2-视图的修改"><a href="#6-1-2-视图的修改" class="headerlink" title="6.1.2 视图的修改"></a>6.1.2 视图的修改</h4><p><strong>1）方式一</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW  视图名 AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv3 AS </span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary),</span><br><span class="line">  job_id </span><br><span class="line">FROM</span><br><span class="line">  employees </span><br><span class="line">GROUP BY job_id ;</span><br></pre></td></tr></table></figure><p><strong>2）方式二</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW 视图名 AS </span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW myv3 </span><br><span class="line">  AS </span><br><span class="line">  SELECT </span><br><span class="line">    * </span><br><span class="line">  FROM</span><br><span class="line">    employees ;</span><br></pre></td></tr></table></figure><h4 id="6-1-3-删除视图"><a href="#6-1-3-删除视图" class="headerlink" title="6.1.3 删除视图"></a>6.1.3 删除视图</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW 视图名,视图名,...;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW emp_v1,</span><br><span class="line">emp_v2,</span><br><span class="line">myv3 ;</span><br></pre></td></tr></table></figure><h4 id="6-1-4-查看视图"><a href="#6-1-4-查看视图" class="headerlink" title="6.1.4 查看视图"></a>6.1.4 查看视图</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 视图名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE VIEW myv3 ;</span><br></pre></td></tr></table></figure><h4 id="6-1-5-视图的更新"><a href="#6-1-5-视图的更新" class="headerlink" title="6.1.5 视图的更新"></a>6.1.5 视图的更新</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW myv1 AS </span><br><span class="line">SELECT </span><br><span class="line">  last_name,</span><br><span class="line">  email </span><br><span class="line">FROM</span><br><span class="line">  employees ;</span><br><span class="line"></span><br><span class="line"># 1.插入</span><br><span class="line">INSERT INTO myv1 </span><br><span class="line">VALUES</span><br><span class="line">  (&#39;张飞&#39;, &#39;zf@qq.com&#39;) ;</span><br><span class="line"></span><br><span class="line"># 2.修改</span><br><span class="line">UPDATE </span><br><span class="line">  myv1 </span><br><span class="line">SET</span><br><span class="line">  last_name &#x3D; &#39;张无忌&#39; </span><br><span class="line">WHERE last_name &#x3D; &#39;张飞&#39; ;</span><br><span class="line"></span><br><span class="line"># 3.删除</span><br><span class="line">DELETE </span><br><span class="line">FROM</span><br><span class="line">  myv1 </span><br><span class="line">WHERE last_name &#x3D; &#39;张无忌&#39; ;</span><br></pre></td></tr></table></figure><blockquote><p>具备以下特点的视图不允许更新</p><p>① 包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all</p><p>② 常量视图</p><p>③ select中包含子查询</p><p>④ join（不能插入）</p><p>⑤ from一个不能更新的视图</p><p>⑥ where子句的子查询引用了from子句中的表</p></blockquote><h3 id="6-2-变量"><a href="#6-2-变量" class="headerlink" title="6.2 变量"></a>6.2 变量</h3><h4 id="6-2-1-分类"><a href="#6-2-1-分类" class="headerlink" title="6.2.1 分类"></a>6.2.1 分类</h4><table><thead><tr><th align="center">系统变量</th><th align="center">自定义变量</th></tr></thead><tbody><tr><td align="center">全局变量</td><td align="center">用户变量</td></tr><tr><td align="center">会话变量</td><td align="center">局部变量</td></tr></tbody></table><h4 id="6-2-2-系统变量"><a href="#6-2-2-系统变量" class="headerlink" title="6.2.2 系统变量"></a>6.2.2 系统变量</h4><p><strong>说明</strong></p><p>变量有系统提供，不是用户定义，属于服务器层面</p><p><strong>语法</strong></p><p><strong>1）查看所有的系统变量</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|【session】 variables;</span><br></pre></td></tr></table></figure><p><strong>2）查看满足条件的部分系统变量</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global|【session】 variables like &#39;%char%&#39;;</span><br></pre></td></tr></table></figure><p><strong>3）查看指定的系统变量的值</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@global|【session】.系统变量名;</span><br></pre></td></tr></table></figure><p><strong>4）为某个系统变量赋值</strong><br><strong>方式一</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global|【session】系统变量名 &#x3D; 值;</span><br></pre></td></tr></table></figure><p><strong>方式二</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @@global|【session】系统变量名 &#x3D; 值;</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong></p><p>如果是全局级别，则需要加global，如果是会话级别，则需要加session，如果不写，则默认session</p></blockquote><p><strong>1）全局变量</strong></p><p><strong>作用域</strong>：服务器每次启动将为所有的全局变量赋初始值，针对于所有会话（连接）有效，但不能跨重启</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ① 查看所有全局变量</span><br><span class="line">SHOW GLOBAL VARIABLES ;</span><br><span class="line"></span><br><span class="line"># ② 查看满足条件的部分系统变量</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &#39;%char%&#39; ;</span><br><span class="line"></span><br><span class="line"># ③ 查看指定的系统变量的值</span><br><span class="line">SELECT </span><br><span class="line">  @@global.autocommit ;</span><br><span class="line"></span><br><span class="line"># ④ 为某个系统变量赋值</span><br><span class="line">SET @@global.autocommit &#x3D; 0 ;</span><br><span class="line"></span><br><span class="line">SET GLOBAL autocommit &#x3D; 0 ;</span><br></pre></td></tr></table></figure><p><strong>2）会话变量</strong></p><p><strong>作用域</strong>：针对于当前会话（连接）有效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ① 查看所有会话变量</span><br><span class="line">SHOW SESSION VARIABLES ;</span><br><span class="line"></span><br><span class="line"># ② 查看满足条件的部分会话变量</span><br><span class="line">SHOW SESSION VARIABLES LIKE &#39;%char%&#39; ;</span><br><span class="line"></span><br><span class="line"># ③ 查看指定的会话变量的值</span><br><span class="line">SELECT </span><br><span class="line">  @@autocommit ;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">  @@session.tx_isolation ;</span><br><span class="line"></span><br><span class="line"># ④ 为某个会话变量赋值</span><br><span class="line"># 方式一：</span><br><span class="line">SET @@session.tx_isolation &#x3D; &#39;read-uncommitted&#39; ;</span><br><span class="line"></span><br><span class="line"># 方式二：</span><br><span class="line">SET SESSION tx_isolation &#x3D; &#39;read-committed&#39; ;</span><br></pre></td></tr></table></figure><h4 id="6-2-3-自定义变量"><a href="#6-2-3-自定义变量" class="headerlink" title="6.2.3 自定义变量"></a>6.2.3 自定义变量</h4><p><strong>说明</strong></p><p>变量由用户自定义，而不是系统提供的</p><p><strong>使用步骤</strong></p><p>声明 → 赋值 → 使用（查看、比较、运算等）</p><p><strong>1）用户变量</strong></p><p><strong>作用域</strong>：针对于当前会话（连接）有效，作用域同于<strong>会话变量</strong>，应用在任何地方，begin end中 或 begin end的外面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 赋值操作符：&#x3D;或:&#x3D;</span><br><span class="line"># ① 声明并初始化</span><br><span class="line">SET @用户变量名 &#x3D; 值;</span><br><span class="line">SET @用户变量名 :&#x3D; 值;</span><br><span class="line">SELECT @用户变量名 :&#x3D; 值;</span><br><span class="line"></span><br><span class="line"># ② 赋值（更新变量的值）</span><br><span class="line"># 方式一：</span><br><span class="line">SET @用户变量名 &#x3D; 值;</span><br><span class="line">SET @用户变量名 :&#x3D; 值;</span><br><span class="line">SELECT @用户变量名 :&#x3D; 值;</span><br><span class="line"># 方式二：</span><br><span class="line">SELECT 字段 INTO @变量名</span><br><span class="line">FROM 表;</span><br><span class="line"># ③ 使用（查看变量的值）</span><br><span class="line">SELECT @变量名;</span><br><span class="line"></span><br><span class="line"># 案例</span><br><span class="line"># 1、声明并初始化</span><br><span class="line">SET @name &#x3D; &#39;john&#39;;</span><br><span class="line">SET @name &#x3D; 100;</span><br><span class="line">SET @account &#x3D; 1;</span><br><span class="line"></span><br><span class="line"># 2、赋值</span><br><span class="line">SELECT COUNT(*) INTO @count</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line"># 3、查看</span><br><span class="line">SELECT @count;</span><br></pre></td></tr></table></figure><p><strong>2）局部变量</strong></p><p><strong>作用域</strong>：仅仅在定义它的begin end块中有效，应用在 begin end中的第一句话</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ① 声明</span><br><span class="line">DECLARE 变量名 类型;</span><br><span class="line">DECLARE 变量名 类型 DEFAULT 值 ;</span><br><span class="line"></span><br><span class="line"># ② 赋值（更新变量的值）</span><br><span class="line"># 方式一：通过set或select</span><br><span class="line">SET 局部变量名&#x3D;值;</span><br><span class="line">SET 局部变量名:&#x3D;值;</span><br><span class="line">SELECT @局部变量名:&#x3D;值;</span><br><span class="line"># 方式二：通过select into</span><br><span class="line">SELECT 字段 INTO 具备变量名</span><br><span class="line">FROM 表;</span><br><span class="line"># ③ 使用（查看变量的值）</span><br><span class="line">SELECT 局部变量名;</span><br></pre></td></tr></table></figure><p><strong>3）用户变量和局部变量的对比</strong></p><table><thead><tr><th align="center"></th><th align="center">作用域</th><th align="center">定义位置</th><th align="center">语法</th></tr></thead><tbody><tr><td align="center"><strong>用户变量</strong></td><td align="center">当前会话</td><td align="center">会话的任何地方</td><td align="center">加@符号，不用限定类型</td></tr><tr><td align="center"><strong>局部变量</strong></td><td align="center">BEGIN END中</td><td align="center">BEGIN END的第一句话</td><td align="center">一般不用加@,需要限定类型</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 案例：声明两个变量，求和并打印</span><br><span class="line"></span><br><span class="line"># 用户变量</span><br><span class="line">SET @m &#x3D; 1;</span><br><span class="line">SET @n &#x3D; 2;</span><br><span class="line">SET @sum &#x3D; @m + @n;</span><br><span class="line">SELECT @sum;</span><br><span class="line"></span><br><span class="line"># 局部变量</span><br><span class="line">DECLARE m INT DEFAULT 1;</span><br><span class="line">DECLARE n INT DEFAULT 2;</span><br><span class="line">DECLARE SUM INT;</span><br><span class="line">SET SUM &#x3D; m + n;</span><br><span class="line">SELECT SUM;</span><br></pre></td></tr></table></figure><h3 id="6-3-存储过程"><a href="#6-3-存储过程" class="headerlink" title="6.3 存储过程"></a>6.3 存储过程</h3><p><strong>含义</strong></p><p>一组预先编译好的SQL语句的集合，理解成批处理语句</p><p><strong>优点</strong></p><p>1）提高代码的重用性</p><p>2）简化操作</p><p>3）减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p><h4 id="6-3-1-创建语法"><a href="#6-3-1-创建语法" class="headerlink" title="6.3.1 创建语法"></a>6.3.1 创建语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE 存储过程名(参数列表)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">存储过程体（一组合法的SQL语句）</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>1）参数列表包含三部分</p><p><code>参数模式  参数名  参数类型</code></p><p>举例：<code>in stuname varchar(20)</code></p><p><strong>参数模式</strong></p><p><code>in</code>：该参数可以作为输入，也就是该参数需要调用方传入值</p><p><code>out</code>：该参数可以作为输出，也就是该参数可以作为返回值</p><p><code>inout</code>：该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</p><p>2）如果存储过程体仅仅只有一句话，begin end可以省略</p><p>存储过程体中的每条sql语句的结尾要求必须加分号</p><p>存储过程的结尾可以使用 <code>delimiter</code> 重新设置</p><p>语法：<code>delimiter 结束标记</code></p><p>举例：<code>delimiter $</code></p><h4 id="6-3-2-调用语法"><a href="#6-3-2-调用语法" class="headerlink" title="6.3.2 调用语法"></a>6.3.2 调用语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CALL 存储过程名(实参列表);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"># 1.空参列表</span><br><span class="line"># 案例：插入到admin表中五条记录</span><br><span class="line">SELECT * FROM admin;</span><br><span class="line"></span><br><span class="line">DELIMITER $</span><br><span class="line">CREATE PROCEDURE myp1 () </span><br><span class="line">BEGIN</span><br><span class="line">  INSERT INTO admin (username, &#96;password&#96;) </span><br><span class="line">  VALUES</span><br><span class="line">    (&#39;john1&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;lily&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;rose&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;jack&#39;, &#39;0000&#39;),</span><br><span class="line">    (&#39;tom&#39;, &#39;0000&#39;) ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp1()$</span><br><span class="line"></span><br><span class="line"># 2.创建带in模式参数的存储过程</span><br><span class="line"># 案例1：创建存储过程实现 根据女神名，查询对应的男神信息</span><br><span class="line">CREATE PROCEDURE myp2 (IN beautyName VARCHAR (20)) </span><br><span class="line">BEGIN</span><br><span class="line">  SELECT </span><br><span class="line">    bo.* </span><br><span class="line">  FROM</span><br><span class="line">    boys bo </span><br><span class="line">    RIGHT JOIN beauty b </span><br><span class="line">      ON bo.id &#x3D; b.boyfriend_id </span><br><span class="line">  WHERE b.name &#x3D; beautyName ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp2(&#39;王语嫣&#39;)$</span><br><span class="line">  </span><br><span class="line"># 案例2 ：创建存储过程实现，用户是否登录成功</span><br><span class="line">CREATE PROCEDURE myp3 (</span><br><span class="line">  IN username VARCHAR (20),</span><br><span class="line">  IN PASSWORD VARCHAR (20)</span><br><span class="line">) </span><br><span class="line">BEGIN</span><br><span class="line">  DECLARE result INT DEFAULT 0 ;#声明并初始化</span><br><span class="line">  SELECT </span><br><span class="line">    COUNT(*) INTO result #赋值</span><br><span class="line">  FROM</span><br><span class="line">    admin </span><br><span class="line">  WHERE admin.username &#x3D; username </span><br><span class="line">    AND admin.password &#x3D; PASSWORD ;</span><br><span class="line">  SELECT </span><br><span class="line">    IF(result &gt; 0, &#39;成功&#39;, &#39;失败&#39;) ;#使用</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp3(&#39;张飞&#39;,&#39;8888&#39;)$</span><br><span class="line"></span><br><span class="line"># 3.创建out 模式参数的存储过程</span><br><span class="line"># 案例1：根据输入的女神名，返回对应的男神名</span><br><span class="line">CREATE PROCEDURE myp4 (</span><br><span class="line">  IN beautyName VARCHAR (20),</span><br><span class="line">  OUT boyName VARCHAR (20)</span><br><span class="line">) </span><br><span class="line">BEGIN</span><br><span class="line">  SELECT </span><br><span class="line">    bo.boyname INTO boyname </span><br><span class="line">  FROM</span><br><span class="line">    boys bo </span><br><span class="line">    RIGHT JOIN beauty b </span><br><span class="line">      ON b.boyfriend_id &#x3D; bo.id </span><br><span class="line">  WHERE b.name &#x3D; beautyName ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp4(&#39;小昭&#39;,@name)$</span><br><span class="line">SELECT @name$    </span><br><span class="line">    </span><br><span class="line"># 案例2：根据输入的女神名，返回对应的男神名和魅力值</span><br><span class="line">CREATE PROCEDURE myp5 (</span><br><span class="line">  IN beautyName VARCHAR (20),</span><br><span class="line">  OUT boyName VARCHAR (20),</span><br><span class="line">  OUT usercp INT</span><br><span class="line">) </span><br><span class="line">BEGIN</span><br><span class="line">  SELECT </span><br><span class="line">    boys.boyname,</span><br><span class="line">    boys.usercp INTO boyname,</span><br><span class="line">    usercp </span><br><span class="line">  FROM</span><br><span class="line">    boys </span><br><span class="line">    RIGHT JOIN beauty b </span><br><span class="line">      ON b.boyfriend_id &#x3D; boys.id </span><br><span class="line">  WHERE b.name &#x3D; beautyName ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">CALL myp5(&#39;小昭&#39;,@name,@cp)$</span><br><span class="line">SELECT @name,@cp$    </span><br><span class="line"></span><br><span class="line"># 4.创建带inout模式参数的存储过程</span><br><span class="line"># 案例1：传入a和b两个值，最终a和b都翻倍并返回</span><br><span class="line">CREATE PROCEDURE myp6 (INOUT a INT, INOUT b INT) </span><br><span class="line">BEGIN</span><br><span class="line">  SET a &#x3D; a * 2 ;</span><br><span class="line">  SET b &#x3D; b * 2 ;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line">SET @m&#x3D;10$</span><br><span class="line">SET @n&#x3D;20$</span><br><span class="line">CALL myp6(@m,@n)$</span><br><span class="line">SELECT @m,@n$</span><br></pre></td></tr></table></figure><h4 id="6-3-3-删除语法"><a href="#6-3-3-删除语法" class="headerlink" title="6.3.3 删除语法"></a>6.3.3 删除语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop procedure 存储过程名</span><br></pre></td></tr></table></figure><blockquote><p>一次只能删除一个</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE p1 ;</span><br><span class="line">DROP PROCEDURE p2,p3 ; # 错误</span><br></pre></td></tr></table></figure><h4 id="6-3-4-查看存储过程的信息"><a href="#6-3-4-查看存储过程的信息" class="headerlink" title="6.3.4 查看存储过程的信息"></a>6.3.4 查看存储过程的信息</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE PROCEDURE 存储过程名 ;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE PROCEDURE myp2 ;</span><br><span class="line">DESC myp2 ; # 错误</span><br></pre></td></tr></table></figure><h3 id="6-4-函数"><a href="#6-4-函数" class="headerlink" title="6.4 函数"></a>6.4 函数</h3><p><strong>含义</strong></p><p>一组预先编译好的SQL语句的集合，理解成批处理语句</p><p><strong>优点</strong></p><p>1）提高代码的重用性</p><p>2）简化操作</p><p>3）减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p><h4 id="6-4-1-创建语法"><a href="#6-4-1-创建语法" class="headerlink" title="6.4.1 创建语法"></a>6.4.1 创建语法</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION 函数名 (参数列表) RETURNS 返回类型 </span><br><span class="line">BEGIN</span><br><span class="line">  函数体 </span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>注意：<br>1）参数列表包含两部分：<code>参数名 参数类型</code></p><p>2）函数体：肯定会有return语句，如果没有会报错<br>如果return语句没有放在函数体的最后也不报错，但不建议</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return 值;</span><br></pre></td></tr></table></figure><p>3）函数体中仅有一句话，则可以省略begin end</p><p>4）使用 <code>delimiter</code> 语句设置结束标记</p><h4 id="6-4-2-调用语法"><a href="#6-4-2-调用语法" class="headerlink" title="6.4.2 调用语法"></a>6.4.2 调用语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">  函数名 (参数列表) 结束标记&#96;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># 1.无参有返回</span><br><span class="line"># 案例：返回公司的员工个数</span><br><span class="line">  CREATE FUNCTION myf1 () RETURNS INT </span><br><span class="line">  BEGIN</span><br><span class="line">    DECLARE c INT DEFAULT 0 ;</span><br><span class="line"></span><br><span class="line"> # 定义局部变量</span><br><span class="line">SELECT COUNT(*) INTO c # 赋值</span><br><span class="line">FROM employees;</span><br><span class="line">RETURN c;</span><br><span class="line"></span><br><span class="line">END $ </span><br><span class="line">SELECT </span><br><span class="line">myf1 () $ </span><br><span class="line"></span><br><span class="line"># 2.有参有返回</span><br><span class="line"># 案例1：根据员工名，返回它的工资</span><br><span class="line"> CREATE FUNCTION myf2 (empName VARCHAR (20)) RETURNS DOUBLE </span><br><span class="line">BEGIN</span><br><span class="line">  SET @sal &#x3D; 0 ;</span><br><span class="line">  </span><br><span class="line">  #定义用户变量 </span><br><span class="line">SELECT salary INTO @sal   #赋值</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name &#x3D; empName;</span><br><span class="line"></span><br><span class="line">RETURN @sal;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf2(&#39;k_ing&#39;) $</span><br><span class="line"></span><br><span class="line"># 案例2：根据部门名，返回该部门的平均工资</span><br><span class="line"></span><br><span class="line">CREATE FUNCTION myf3(deptName VARCHAR(20)) RETURNS DOUBLE</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE sal DOUBLE ;</span><br><span class="line">SELECT </span><br><span class="line">  AVG(salary) INTO sal </span><br><span class="line">FROM</span><br><span class="line">  employees e </span><br><span class="line">  JOIN departments d </span><br><span class="line">    ON e.department_id &#x3D; d.department_id </span><br><span class="line">WHERE d.department_name &#x3D; deptName ;</span><br><span class="line"></span><br><span class="line">RETURN sal;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT myf3(&#39;IT&#39;)$</span><br></pre></td></tr></table></figure><h4 id="6-4-3-查看函数"><a href="#6-4-3-查看函数" class="headerlink" title="6.4.3 查看函数"></a>6.4.3 查看函数</h4><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE FUNCTION 函数名</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE FUNCTION myf3;</span><br></pre></td></tr></table></figure><h4 id="6-4-4-删除函数"><a href="#6-4-4-删除函数" class="headerlink" title="6.4.4 删除函数"></a>6.4.4 删除函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP FUNCTION 函数名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP FUNCTION myf3;</span><br></pre></td></tr></table></figure><h4 id="6-4-5-存储过程和函数的区别"><a href="#6-4-5-存储过程和函数的区别" class="headerlink" title="6.4.5 存储过程和函数的区别"></a>6.4.5 存储过程和函数的区别</h4><p><strong>存储过程</strong>：可以有0个返回，也可以有多个返回，适合做<strong>批量插入</strong>、<strong>批量更新</strong><br><strong>函数</strong>：有且仅有1个返回，适合做<strong>处理数据后返回一个结果</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 案例</span><br><span class="line"># 一、创建函数，实现传入两个float，返回二者之和</span><br><span class="line">CREATE FUNCTION test_fun1 (num1 FLOAT, num2 FLOAT) RETURNS FLOAT </span><br><span class="line">BEGIN</span><br><span class="line">  DECLARE SUMFLOAT DEFAULT 0 ;  </span><br><span class="line">  SET SUM &#x3D; num1 + num2;</span><br><span class="line">RETURN SUM;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT test_fun1(1,2)$</span><br></pre></td></tr></table></figure><h3 id="6-5-流程控制过程"><a href="#6-5-流程控制过程" class="headerlink" title="6.5 流程控制过程"></a>6.5 流程控制过程</h3><p><strong>分类</strong></p><p><strong>顺序结构</strong>：程序从上往下依次执行</p><p><strong>分支结构</strong>：程序从两条或多条路径中选择一条去执行</p><p><strong>循环结构</strong>：程序在满足一定条件的基础上，重复执行一段代码</p><h4 id="6-5-1-分支结构"><a href="#6-5-1-分支结构" class="headerlink" title="6.5.1 分支结构"></a>6.5.1 分支结构</h4><p><strong>1）if函数</strong></p><p><strong>功能</strong>：实现简单的双分支</p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(表达式1,表达式2,表达式3)</span><br></pre></td></tr></table></figure><p><strong>执行顺序</strong>：如果表达式1成立，则if函数返回表达式2的值，否则返回表达式3的值</p><p><strong>应用</strong>：任何地方</p><p><strong>2）if结构</strong></p><p><strong>功能</strong>：实现多重分支</p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if 条件1 then 语句1;</span><br><span class="line">ifelse 条件2 then 语句2;</span><br><span class="line">...</span><br><span class="line">【else 语句n;】</span><br></pre></td></tr></table></figure><p><strong>应用</strong>：在begin end中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 案例1：创建函数，实现传入成绩，如果成绩&gt;90,返回A，如果成绩&gt;80,返回B，如果成绩&gt;60,返回C，否则返回D</span><br><span class="line">CREATE FUNCTION test_if (score INT) RETURNS CHAR </span><br><span class="line">BEGIN</span><br><span class="line">DECLARE ch CHAR DEFAULT &#39;A&#39; ;</span><br><span class="line"></span><br><span class="line">IF score&gt;90 THEN SET ch&#x3D;&#39;A&#39;;</span><br><span class="line">ELSEIF score&gt;80 THEN SET ch&#x3D;&#39;B&#39;;</span><br><span class="line">ELSEIF score &gt; 60 </span><br><span class="line">THEN SET ch &#x3D; &#39;C&#39; ;</span><br><span class="line">ELSE SET ch&#x3D;&#39;D&#39;;</span><br><span class="line">END IF;</span><br><span class="line">RETURN ch;</span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">SELECT test_if(87)$</span><br></pre></td></tr></table></figure><p><strong>3）case结构</strong></p><p><strong>情况1</strong>：类似于java中的switch语句，一般用于实现等值判断</p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE 变量|表达式|字段</span><br><span class="line">WHEN 要判断的值 THEN 返回的值1 或 语句1;</span><br><span class="line">WHEN 要判断的值 THEN 返回的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">ELSE 要返回的值n 或 语句n;</span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure><p><strong>情况2</strong>：类似于java中的多重if语句，一般用于实现区间判断<br>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE </span><br><span class="line">WHEN 要判断的条件1 THEN 返回的值1 或 语句1;</span><br><span class="line">WHEN 要判断的条件2 THEN 返回的值2 或 语句2;</span><br><span class="line">...</span><br><span class="line">ELSE 要返回的值n 或 语句n;</span><br><span class="line">END case;</span><br></pre></td></tr></table></figure><p><strong>特点</strong><br>① 可以作为表达式，嵌套在其他语句中使用，可以放在任何地方，begin end中 或 begin end的外面<br>可以作为独立的语句去使用，只能放在begin end中<br>② 如果when中的值满足 或 条件成立，则执行对应的then后面的语句，并且结束case<br>如果不满足，则执行else中的语句或值<br>③ else可以省略，如果else省略了，并且所有when条件都不满足，则返回null</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 案例： 创建存储过程，根据传入的成绩，来显示等级，比如传入的成绩90-100，显示A，80-90，显示B，60-80，显示C，否则，显示D</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE test_case(IN score INT)</span><br><span class="line">BEGIN</span><br><span class="line">CASE </span><br><span class="line">WHEN score &gt;&#x3D; 90 AND score &lt;&#x3D; 100 THEN SELECT &#39;A&#39;;</span><br><span class="line">WHEN score &gt;&#x3D; 80 THEN SELECT &#39;B&#39;;</span><br><span class="line">WHEN score &gt;&#x3D; 60 THEN SELECT &#39;C&#39;;</span><br><span class="line">ELSE SELECT &#39;D&#39;;</span><br><span class="line">END CASE</span><br><span class="line">END $ </span><br><span class="line"></span><br><span class="line">CALL test_case (95) $</span><br></pre></td></tr></table></figure><h4 id="6-5-2-循环结构"><a href="#6-5-2-循环结构" class="headerlink" title="6.5.2 循环结构"></a>6.5.2 循环结构</h4><p><strong>分类</strong>：while、loop、repeat</p><p><strong>循环控制</strong>：<br><code>iterate</code>： 类似于 continue，继续，结束本次循环，继续下一次<br><code>leave</code>：类似于 break，跳出，结束当前所在的循环</p><p><strong>1）while</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【标签:】WHILE 循环条件 DO</span><br><span class="line">循环体;</span><br><span class="line">END WHILE【 标签】;</span><br></pre></td></tr></table></figure><p><strong>2）loop</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【标签:】LOOP</span><br><span class="line">循环体;</span><br><span class="line">END LOOP 【标签】;</span><br></pre></td></tr></table></figure><blockquote><p>可以用来模拟简单的死循环</p></blockquote><p><strong>3）repeat</strong></p><p><strong>语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【标签：】REPEAT</span><br><span class="line">循环体;</span><br><span class="line">UNTIL 结束循环的条件</span><br><span class="line">END REPEAT 【标签】;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># 没有添加循环控制语句</span><br><span class="line"># 案例：批量插入，根据次数到admin表中多条记录</span><br><span class="line">CREATE PROCEDURE pro_while1(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">DECLARE i INT DEFAULT 1;</span><br><span class="line">WHILE i &lt;&#x3D; insertCount DO</span><br><span class="line">INSERT INTO admin(username, &#96;password&#96;) VALUES(CONCAT(&#39;Rose&#39;,i), &#39;666&#39;);</span><br><span class="line">SET i &#x3D; i + 1;</span><br><span class="line">END WHILE;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL pro_while1(100) $</span><br><span class="line"></span><br><span class="line"># 2、添加leave语句</span><br><span class="line"># 案例：批量插入，根据次数插入到admin表中多条记录，如果次数 &gt; 20则停止</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while2 $</span><br><span class="line">CREATE PROCEDURE test_while2(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 1;</span><br><span class="line">a:WHILE i &lt;&#x3D; insertCount DO</span><br><span class="line">INSERT INTO admin(username, &#96;password&#96;) VALUES(CONCAT(&#39;xiaonhau&#39;,i), &#39;0000&#39;);</span><br><span class="line">IF i &gt; 20 THEN LEAVE a;</span><br><span class="line">END IF;</span><br><span class="line">SET i &#x3D; i + 1;</span><br><span class="line">END WHILE a;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL test_while2(100)$</span><br><span class="line"></span><br><span class="line"># 3、添加iterate语句</span><br><span class="line"># 案例：批量插入，根据次数插入到admin表中多条记录，直插入偶数次</span><br><span class="line">TRUNCATE TABLE admin$</span><br><span class="line">DROP PROCEDURE test_while2 $</span><br><span class="line">CREATE PROCEDURE test_while3(IN insertCount INT)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line">a:WHILE i &lt;&#x3D; insertCount DO</span><br><span class="line">SET i &#x3D; i + 1;</span><br><span class="line">IF MOD(i, 2) !&#x3D; 0 THEN ITERATE a;</span><br><span class="line">END IF;</span><br><span class="line">INSERT INTO admin(username, &#96;password&#96;) VALUES(CONCAT(&#39;xiaohua&#39;,i), &#39;0000&#39;);</span><br><span class="line">END WHILE a;</span><br><span class="line"></span><br><span class="line">END $</span><br><span class="line"></span><br><span class="line">CALL test_while3(100)$</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我的MySQL笔记&lt;/p&gt;
    
    </summary>
    
    
      <category term="MySQL" scheme="https://ActionDing.github.io/categories/MySQL/"/>
    
      <category term="数据库" scheme="https://ActionDing.github.io/categories/MySQL/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="MySQL" scheme="https://ActionDing.github.io/tags/MySQL/"/>
    
      <category term="数据库" scheme="https://ActionDing.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】10-异常处理</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%9110-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%9110-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</id>
    <published>2020-07-04T19:02:10.000Z</published>
    <updated>2020-09-11T01:09:53.999Z</updated>
    
    <content type="html"><![CDATA[<p>异常的体系结构、异常处理、手动抛出异常、自定义异常类</p><a id="more"></a><h3 id="一、异常的体系结构"><a href="#一、异常的体系结构" class="headerlink" title="一、异常的体系结构"></a>一、异常的体系结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java.lang.Throwable</span><br><span class="line"> |-----java.lang.Error:一般不编写针对性的代码进行处理。</span><br><span class="line"> |-----java.lang.Exception:可以进行异常的处理</span><br><span class="line">|------编译时异常(checked)</span><br><span class="line">|-----IOException</span><br><span class="line">|-----FileNotFoundException</span><br><span class="line">|-----ClassNotFoundException</span><br><span class="line">|------运行时异常(unchecked,RuntimeException)</span><br><span class="line">|-----NullPointerException</span><br><span class="line">|-----ArrayIndexOutOfBoundsException</span><br><span class="line">|-----ClassCastException</span><br><span class="line">|-----NumberFormatException</span><br><span class="line">|-----InputMismatchException</span><br><span class="line">|-----ArithmeticException</span><br></pre></td></tr></table></figure><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%9110-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/../images/%E5%BC%82%E5%B8%B8%E4%BD%93%E7%B3%BB.png" alt="异常体系"></p><h4 id="1-分类"><a href="#1-分类" class="headerlink" title="1 分类"></a>1 分类</h4><p>从程序执行过程看分为<strong>编译时异常</strong>和<strong>运行时异常</strong></p><p>1）编译时异常：执行<code>javac.exe</code>命名时，可能出现的异常</p><p>2）运行时异常：执行<code>java.exe</code>命名时，出现的异常</p><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%9110-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/../images/%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="执行过程"></p><h4 id="2-常见的异常类型"><a href="#2-常见的异常类型" class="headerlink" title="2 常见的异常类型"></a>2 常见的异常类型</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见的异常类型，请举例说明：</span></span><br><span class="line"><span class="comment">//******************以下是运行时异常***************************</span></span><br><span class="line"><span class="comment">//ArithmeticException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">System.out.println(a / b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//InputMismatchException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span></span>&#123;</span><br><span class="line">Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"><span class="keyword">int</span> score = scanner.nextInt();</span><br><span class="line">System.out.println(score);</span><br><span class="line"></span><br><span class="line">scanner.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//NumberFormatException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">String str = <span class="string">"123"</span>;</span><br><span class="line">str = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">int</span> num = Integer.parseInt(str);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ClassCastException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">Object obj = <span class="keyword">new</span> Date();</span><br><span class="line">String str = (String)obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//IndexOutOfBoundsException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//ArrayIndexOutOfBoundsException</span></span><br><span class="line"><span class="comment">//int[] arr = new int[10];</span></span><br><span class="line"><span class="comment">//System.out.println(arr[10]);</span></span><br><span class="line"><span class="comment">//StringIndexOutOfBoundsException</span></span><br><span class="line">String str = <span class="string">"abc"</span>;</span><br><span class="line">System.out.println(str.charAt(<span class="number">3</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//NullPointerException</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int[] arr = null;</span></span><br><span class="line"><span class="comment">//System.out.println(arr[3]);</span></span><br><span class="line"></span><br><span class="line">String str = <span class="string">"abc"</span>;</span><br><span class="line">str = <span class="keyword">null</span>;</span><br><span class="line">System.out.println(str.charAt(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//******************以下是编译时异常***************************</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//File file = new File("hello.txt");</span></span><br><span class="line"><span class="comment">//FileInputStream fis = new FileInputStream(file);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//int data = fis.read();</span></span><br><span class="line"><span class="comment">//while(data != -1)&#123;</span></span><br><span class="line"><span class="comment">//System.out.print((char)data);</span></span><br><span class="line"><span class="comment">//data = fis.read();</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//fis.close();</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="二、异常处理"><a href="#二、异常处理" class="headerlink" title="二、异常处理"></a>二、异常处理</h3><h4 id="1-java异常处理的抓抛模型"><a href="#1-java异常处理的抓抛模型" class="headerlink" title="1 java异常处理的抓抛模型"></a>1 java异常处理的抓抛模型</h4><h5 id="1）过程一：”抛”"><a href="#1）过程一：”抛”" class="headerlink" title="1）过程一：”抛”"></a>1）过程一：”抛”</h5><p>程序在正常执行的过程中，<strong>一旦</strong>出现异常，就会在异常代码处生成一个对应异常类的对象，并将此对象抛出。<strong>一旦</strong>抛出对象以后，其后的代码就不再执行</p><p>关于异常对象的产生：</p><p>① 系统自动生成的异常对象</p><p>② 手动的生成一个异常对象，并抛出（throw）</p><h5 id="2）过程二：”抓”"><a href="#2）过程二：”抓”" class="headerlink" title="2）过程二：”抓”"></a>2）过程二：”抓”</h5><p>可以理解为异常的处理方式：</p><p>① try-catch-finally  </p><p>② throws</p><h4 id="2-异常处理方式一"><a href="#2-异常处理方式一" class="headerlink" title="2 异常处理方式一"></a>2 异常处理方式一</h4><p>try-catch-finally</p><h5 id="1）语法格式"><a href="#1）语法格式" class="headerlink" title="1）语法格式"></a>1）语法格式</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可能出现异常的代码</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">1</span> 变量名<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//处理异常的方式1</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">2</span> 变量名<span class="number">2</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//处理异常的方式2</span></span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">3</span> 变量名<span class="number">3</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//处理异常的方式3</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一定会执行的代码</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2）使用说明"><a href="#2）使用说明" class="headerlink" title="2）使用说明"></a>2）使用说明</h5><p>1）<code>finally</code> 是可选的。</p><p>2）使用 <code>try</code> 将可能出现异常代码包装起来，在执行过程中，一旦出现异常，就会生成一个对应异常类的对象，根据此对象的类型，去 <code>catch</code> 中进行匹配</p><p>3）一旦 <code>try</code> 中的异常对象匹配到某一个 <code>catch</code> 时，就进入 <code>catch</code> 中进行异常的处理。一旦处理完成，就跳出当前的 <code>try-catch</code> 结构（在没写 <code>finally</code> 的情况）。继续执行其后的代码</p><p>4）<code>catch</code> 中的异常类型如果没子父类关系，则谁声明在上，谁声明在下无所谓</p><p>​    <code>catch</code> 中的异常类型如果满足子父类关系，则要求子类一定声明在父类的上面。否则，报错</p><p>5）常用的异常对象处理的方式： ① String  getMessage()    ② printStackTrace()</p><p>6）在 <code>try</code> 结构中声明的变量，再出了 <code>try</code> 结构以后，就不能再被调用</p><p>7）<code>try-catch-finally</code> 结构可以嵌套</p><h5 id="3）总结"><a href="#3）总结" class="headerlink" title="3）总结"></a>3）总结</h5><p><strong>如何看待代码中的编译时异常和运行时异常？</strong></p><p>① 使用 <code>try-catch-finally</code> 处理编译时异常，是得程序在编译时就不再报错，但是运行时仍可能报错。相当于我们使用 <code>try-catch-finally</code> 将一个编译时可能出现的异常，延迟到运行时出现。</p><p>② 开发中，由于运行时异常比较常见，所以我们通常就不针对运行时异常编写 <code>try-catch-finally</code> 了。针对于编译时异常，我们说一定要考虑异常的处理。</p><p><strong>finally 的再说明</strong></p><p>① <code>finally</code>是可的</p><p>② <code>finally</code> 中声明的是一定会被执行的代码。即使 <code>catch</code> 中又出现异常了，<code>try</code> 中 <code>return</code> 语句，<code>catch</code> 中 <code>return</code> 语句等情况</p><p>③ 像数据库连接、输入输出流、网络编程Socket等资源，JVM是不能自动的回收的，我们需要自己手动的进行资源的释放。此时的资源释放，就需要声明在 <code>finally</code> 中</p><p><strong>面试题</strong></p><p>final、finally、finalize三者的区别？</p><blockquote><p>类似：</p><p>throw 和 throws<br>Collection 和 Collections<br>String 、StringBuffer、StringBuilder<br>ArrayList 、 LinkedList<br>HashMap 、LinkedHashMap<br>重写、重载</p><p>结构不相似的：</p><p>抽象类、接口<br>== 、 equals()<br>sleep()、wait()</p></blockquote><h4 id="3-异常处理方式二"><a href="#3-异常处理方式二" class="headerlink" title="3 异常处理方式二"></a>3 异常处理方式二</h4><p>“throws + 异常类型”写在方法的声明处。指明此方法执行时，可能会抛出的异常类型</p><p>一旦当方法体执行时，出现异常，仍会在异常代码处生成一个异常类的对象，此对象满足throws后异常类型时，就会被抛出。异常代码后续的代码，就不再执行！</p><h5 id="1）对比两种处理方式"><a href="#1）对比两种处理方式" class="headerlink" title="1）对比两种处理方式"></a>1）对比两种处理方式</h5><p>try-catch-finally:真正的将异常给处理掉了。<br>throws的方式只是将异常抛给了方法的调用者。并没真正将异常处理掉。  </p><h5 id="2）体会开发中应该如何选择两种处理方式？"><a href="#2）体会开发中应该如何选择两种处理方式？" class="headerlink" title="2）体会开发中应该如何选择两种处理方式？"></a>2）体会开发中应该如何选择两种处理方式？</h5><p>① 如果父类中被重写的方法没throws方式处理异常，则子类重写的方法也不能使用throws，意味着如果子类重写的方法中异常，必须使用try-catch-finally方式处理</p><p>② 执行的方法a中，先后又调用了另外的几个方法，这几个方法是递进关系执行的。我们建议这几个方法使用throws的方式进行处理。而执行的方法a可以考虑使用try-catch-finally方式进行处理</p><blockquote><p>补充<br>方法重写的规则之一：子类重写的方法抛出的异常类型不大于父类被重写的方法抛出的异常类型</p></blockquote><h3 id="三、手动抛出异常"><a href="#三、手动抛出异常" class="headerlink" title="三、手动抛出异常"></a>三、手动抛出异常</h3><h4 id="1-使用说明"><a href="#1-使用说明" class="headerlink" title="1 使用说明"></a>1 使用说明</h4><p>在程序执行中，除了自动抛出异常对象的情况之外，我们还可以手动的throw一个异常类的对象。</p><h4 id="2-面试题"><a href="#2-面试题" class="headerlink" title="2 面试题"></a>2 面试题</h4><p>throw 和  throws区别：</p><p>throw 表示抛出一个异常类的对象，生成异常对象的过程。声明在方法体内<br>throws 属于异常处理的一种方式，声明在方法的声明处</p><h4 id="3-典型例题"><a href="#3-典型例题" class="headerlink" title="3 典型例题"></a>3 典型例题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(id &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//手动抛出异常对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//throw new RuntimeException("您输入的数据非法！");</span></span><br><span class="line"><span class="comment">//throw new Exception("您输入的数据非法！");</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"不能输入负数"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Student [id="</span> + id + <span class="string">"]"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四、自定义异常类"><a href="#四、自定义异常类" class="headerlink" title="四、自定义异常类"></a>四、自定义异常类</h3><p><strong>如何自定义异常类？</strong></p><p>① 继承于现的异常结构：RuntimeException 、Exception</p><p>② 提供全局常量：serialVersionUID</p><p>③ 提供重载的构造器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">7034897193246939L</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line"><span class="keyword">super</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;异常的体系结构、异常处理、手动抛出异常、自定义异常类&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】9-面向对象·下</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%919-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8B/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%919-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8B/</id>
    <published>2020-07-04T19:02:09.000Z</published>
    <updated>2020-09-12T09:41:02.052Z</updated>
    
    <content type="html"><![CDATA[<p>面向对象学习的三条主线：</p><ol><li><p>Java类及类的成员：属性、方法、构造器；<strong>代码块</strong>、<strong>内部类</strong></p></li><li><p>面向对象的三大特征：封装性、继承性、多态性</p></li><li><p>其它关键字：this、super、<strong>static</strong>、<strong>final</strong>、abstract、<strong>interface</strong>、package、import等</p></li></ol><a id="more"></a><h3 id="一、关键字static"><a href="#一、关键字static" class="headerlink" title="一、关键字static"></a>一、关键字static</h3><p>static：静态的</p><h4 id="1-可以用来修饰的结构"><a href="#1-可以用来修饰的结构" class="headerlink" title="1 可以用来修饰的结构"></a>1 可以用来修饰的结构</h4><p>主要用来修饰类的内部结构（属性、方法、代码块、内部类）</p><h4 id="2-static修饰属性：静态变量（或类变量）"><a href="#2-static修饰属性：静态变量（或类变量）" class="headerlink" title="2 static修饰属性：静态变量（或类变量）"></a>2 static修饰属性：静态变量（或类变量）</h4><h5 id="1）静态属性和非静态属性-实例变量"><a href="#1）静态属性和非静态属性-实例变量" class="headerlink" title="1）静态属性和非静态属性(实例变量)"></a>1）静态属性和非静态属性(实例变量)</h5><p>属性按是否使用static修饰，又分为：静态属性 和 非静态属性(实例变量)</p><p>实例变量：我们创建了类的多个对象，每个对象都独立的拥一套类中的非静态属性。当修改其中一个对象中的非静态属性时，不会导致其他对象中同样的属性值的修改。</p><p>静态变量：我们创建了类的多个对象，多个对象共享同一个静态变量。当通过某一个对象修改静态变量时，会导致其他对象调用此静态变量时，是修改过了的。</p><h5 id="2）static修饰属性的其他说明"><a href="#2）static修饰属性的其他说明" class="headerlink" title="2）static修饰属性的其他说明"></a>2）static修饰属性的其他说明</h5><p>① 静态变量随着类的加载而加载。可以通过”类.静态变量”的方式进行调用</p><p>② 静态变量的加载要早于对象的创建。</p><p>③ 由于类只会加载一次，则静态变量在内存中也只会存在一份：存在方法区的静态域中。</p><p>④</p><table><thead><tr><th align="center"></th><th align="center">类变量</th><th align="center">实例变量</th></tr></thead><tbody><tr><td align="center">类</td><td align="center">yes</td><td align="center">no</td></tr><tr><td align="center">对象</td><td align="center">yes</td><td align="center">yes</td></tr></tbody></table><h5 id="3）静态属性举例：System-out-Math-PI"><a href="#3）静态属性举例：System-out-Math-PI" class="headerlink" title="3）静态属性举例：System.out; Math.PI;"></a>3）静态属性举例：System.out; Math.PI;</h5><h4 id="3-static修饰方法：静态方法、类方法"><a href="#3-static修饰方法：静态方法、类方法" class="headerlink" title="3 static修饰方法：静态方法、类方法"></a>3 static修饰方法：静态方法、类方法</h4><p>1）随着类的加载而加载，可以通过”类.静态方法”的方式进行调用<br>2）</p><table><thead><tr><th></th><th>静态方法</th><th>非静态方法</th></tr></thead><tbody><tr><td>类</td><td>yes</td><td>no</td></tr><tr><td>对象</td><td>yes</td><td>yes</td></tr></tbody></table><p>3）静态方法中，只能调用静态的方法或属性<br>      非静态方法中，既可以调用非静态的方法或属性，也可以调用静态的方法或属性</p><blockquote><p>static的注意点<br>① 在静态的方法内，不能使用this关键字、super关键字<br>② 关于静态属性和静态方法的使用，大家都从生命周期的角度去理解。</p></blockquote><h4 id="4-如何判定属性和方法是否应该使用static关键字"><a href="#4-如何判定属性和方法是否应该使用static关键字" class="headerlink" title="4 如何判定属性和方法是否应该使用static关键字"></a>4 如何判定属性和方法是否应该使用static关键字</h4><p>1）关于属性</p><p>属性是可以被多个对象所共享的，不会随着对象的不同而不同的</p><p>类中的常量也常常声明为static</p><p>2）关于方法</p><p>操作静态属性的方法，通常设置为static的</p><p>工具类中的方法，习惯上声明为static的。 比如：Math、Arrays、Collections</p><h4 id="5-使用举例"><a href="#5-使用举例" class="headerlink" title="5 使用举例"></a>5 使用举例</h4><p>举例一：Arrays、Math、Collections等工具类</p><p>举例二：单例模式</p><h3 id="二、单例模式"><a href="#二、单例模式" class="headerlink" title="二、单例模式"></a>二、单例模式</h3><h4 id="1-设计模式的说明"><a href="#1-设计模式的说明" class="headerlink" title="1 设计模式的说明"></a>1 设计模式的说明</h4><h5 id="1）理解"><a href="#1）理解" class="headerlink" title="1）理解"></a>1）理解</h5><p><strong>设计模式</strong>是<strong>在大量的实践中总结和理论化之后优选的代码结构、编程风格、以及解决问题的思考方式</strong> 。 设计模免去我们自己再思考和摸索 。就像是经典的棋谱，不同的棋局，我们用不同的棋谱。“套路”</p><h5 id="2）常用的设计模式"><a href="#2）常用的设计模式" class="headerlink" title="2）常用的设计模式"></a>2）常用的设计模式</h5><p>① <strong>创建型模式</strong>，共5种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式<br>② <strong>结构型模式</strong>，共7种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式<br>③ <strong>行为型模式</strong>，共11种：策略模式、模板方法模式、观察者模式、迭代器模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式</p><h4 id="2-单例模式"><a href="#2-单例模式" class="headerlink" title="2 单例模式"></a>2 单例模式</h4><h5 id="1）要解决的问题"><a href="#1）要解决的问题" class="headerlink" title="1）要解决的问题"></a>1）要解决的问题</h5><p>所谓<strong>类的单例设计模式</strong>，就是采取一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例。</p><h5 id="2）具体代码的实现"><a href="#2）具体代码的实现" class="headerlink" title="2）具体代码的实现"></a>2）具体代码的实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 饿汉式1</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span>&#123;</span><br><span class="line"><span class="comment">//1.私化类的构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Bank</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.内部创建类的对象</span></span><br><span class="line"><span class="comment">//4.要求此对象也必须声明为静态的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Bank instance = <span class="keyword">new</span> Bank();</span><br><span class="line"><span class="comment">//3.提供公共的静态的方法，返回类的对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 饿汉式2：使用了静态代码块</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span></span>&#123;</span><br><span class="line"><span class="comment">//1.私化类的构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Order</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.声明当前类对象，没初始化</span></span><br><span class="line"><span class="comment">//4.此对象也必须声明为static的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Order instance = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">instance = <span class="keyword">new</span> Order();</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">//3.声明public、static的返回当前类对象的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Order <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 懒汉式</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span></span>&#123;</span><br><span class="line"><span class="comment">//1.私化类的构造器</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Order</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.声明当前类对象，没初始化</span></span><br><span class="line"><span class="comment">//4.此对象也必须声明为static的</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Order instance = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">//3.声明public、static的返回当前类对象的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Order <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">instance = <span class="keyword">new</span> Order();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3）两种方式的对比"><a href="#3）两种方式的对比" class="headerlink" title="3）两种方式的对比"></a>3）两种方式的对比</h5><p>① 饿汉式    </p><p>坏处：对象加载时间过长。</p><p>好处：饿汉式是线程安全的</p><p>② 懒汉式</p><p>好处：延迟对象的创建。</p><p>目前的写法坏处：线程不安全。—&gt;到多线程内容时，再修改</p><h3 id="三、代码块"><a href="#三、代码块" class="headerlink" title="三、代码块"></a>三、代码块</h3><h4 id="1-代码块的作用"><a href="#1-代码块的作用" class="headerlink" title="1 代码块的作用"></a>1 代码块的作用</h4><p>用来初始化类、对象的信息</p><h4 id="2-分类"><a href="#2-分类" class="headerlink" title="2.分类"></a>2.分类</h4><p>代码块要是使用修饰符，只能使用static</p><p>分类：静态代码块  vs 非静态代码块</p><h4 id="3-静态代码块"><a href="#3-静态代码块" class="headerlink" title="3 静态代码块"></a>3 静态代码块</h4><p>① 内部可以有输出语句</p><p>② 随着类的加载而执行,而且只执行一次</p><p>③ 作用：初始化类的信息</p><p>④ 如果一个类中定义了多个静态代码块，则按照声明的先后顺序执行</p><p>⑤ 静态代码块的执行要优先于非静态代码块的执行</p><p>⑥ 静态代码块内只能调用静态的属性、静态的方法，不能调用非静态的结构</p><h4 id="4-非静态代码块"><a href="#4-非静态代码块" class="headerlink" title="4 非静态代码块"></a>4 非静态代码块</h4><p>① 内部可以有输出语句</p><p>② 随着对象的创建而执行</p><p>③ 每创建一个对象，就执行一次非静态代码块</p><p>④ 作用：可以在创建对象时，对对象的属性等进行初始化</p><p>⑤ 如果一个类中定义了多个非静态代码块，则按照声明的先后顺序执行</p><p>⑥ 非静态代码块内可以调用静态的属性、静态的方法，或非静态的属性、非静态的方法</p><blockquote><p>实例化子类对象时，涉及到父类、子类中静态代码块、非静态代码块、构造器的加载顺序：由父及子，静态先行。</p></blockquote><blockquote><p>①默认初始化</p><p>②显式初始化/⑤在代码块中赋值</p><p>③构造器中初始化</p><p>④有了对象以后，可以通过”对象.属性”或”对象.方法”的方式，进行赋值</p><p>执行的先后顺序：① - ② / ⑤ - ③ - ④</p></blockquote><h3 id="四、关键字final"><a href="#四、关键字final" class="headerlink" title="四、关键字final"></a>四、关键字final</h3><p>final：最终的</p><h4 id="1-可以用来修饰结构"><a href="#1-可以用来修饰结构" class="headerlink" title="1 可以用来修饰结构"></a>1 可以用来修饰结构</h4><p>类、方法、变量</p><h4 id="2-final-用来修饰一个类"><a href="#2-final-用来修饰一个类" class="headerlink" title="2 final 用来修饰一个类"></a>2 final 用来修饰一个类</h4><p>此类不能被其他类所继承。</p><p>比如：String类、System类、StringBuffer类</p><h4 id="3-final-用来修饰方法"><a href="#3-final-用来修饰方法" class="headerlink" title="3 final 用来修饰方法"></a>3 final 用来修饰方法</h4><p>表明此方法不可以被重写</p><p>比如：Object类中getClass();</p><h4 id="4-final-用来修饰变量"><a href="#4-final-用来修饰变量" class="headerlink" title="4 final 用来修饰变量"></a>4 final 用来修饰变量</h4><p>此时的”变量”就称为是一个常量</p><p>1）final修饰属性：可以考虑赋值的位置：显式初始化、代码块中初始化、构造器中初始化</p><p>2）final修饰局部变量：尤其是使用final修饰形参时，表明此形参是一个常量。当我们调用此方法时，给常量形参赋一个实参。一旦赋值以后，就只能在方法体内使用此形参，但不能进行重新赋值。</p><blockquote><p>static final 用来修饰属性：全局常量</p></blockquote><h3 id="五、关键字abstract"><a href="#五、关键字abstract" class="headerlink" title="五、关键字abstract"></a>五、关键字abstract</h3><p>abstract：抽象的</p><h4 id="1-可以用来修饰结构-1"><a href="#1-可以用来修饰结构-1" class="headerlink" title="1 可以用来修饰结构"></a>1 可以用来修饰结构</h4><p>类、方法</p><h4 id="2-abstract修饰类：抽象类"><a href="#2-abstract修饰类：抽象类" class="headerlink" title="2 abstract修饰类：抽象类"></a>2 abstract修饰类：抽象类</h4><p>1）此类<strong>不能实例化</strong></p><p>2）抽象类中<strong>一定有构造器</strong>，便于子类实例化时调用（涉及：子类对象实例化的全过程）</p><p>3）开发中，都会提供抽象类的子类，让子类对象实例化，完成相关的操作 —&gt;抽象的使用前提：继承性</p><h4 id="3-abstract修饰方法：抽象方法"><a href="#3-abstract修饰方法：抽象方法" class="headerlink" title="3 abstract修饰方法：抽象方法"></a>3 abstract修饰方法：抽象方法</h4><p>1）抽象方法只有方法的声明，没方法体</p><p>2）包含抽象方法的类，一定是一个抽象类。反之，抽象类中可以没有抽象方法的。</p><p>3）若子类重写了父类中的所的抽象方法后，此子类方可实例化</p><p>​      若子类没重写父类中的所的抽象方法，则此子类也是一个抽象类，需要使用abstract修饰</p><h4 id="4-注意点"><a href="#4-注意点" class="headerlink" title="4 注意点"></a>4 注意点</h4><p>1）abstract不能用来修饰：属性、构造器等结构</p><p>2）abstract不能用来修饰私方法、静态方法、final的方法、final的类</p><h3 id="六、模板方法模式"><a href="#六、模板方法模式" class="headerlink" title="六、模板方法模式"></a>六、模板方法模式</h3><h4 id="1-解决的问题"><a href="#1-解决的问题" class="headerlink" title="1 解决的问题"></a>1 解决的问题</h4><p>在软件开发中实现一个算法时，整体步骤很固定、通用，这些步骤已经在父类中写好了。但是某些部分易变，易变<br>部分可以抽象出来，供不同子类实现。这就是一种模板模式。</p><h4 id="2-举例"><a href="#2-举例" class="headerlink" title="2 举例"></a>2 举例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//计算某段代码执行所需要花费的时间</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">spendTime</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.code();<span class="comment">//不确定的部分、易变的部分</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"花费的时间为："</span> + (end - start));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubTemplate</span> <span class="keyword">extends</span> <span class="title">Template</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>;i &lt;= <span class="number">1000</span>;i++)&#123;</span><br><span class="line"><span class="keyword">boolean</span> isFlag = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span>;j &lt;= Math.sqrt(i);j++)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(i % j == <span class="number">0</span>)&#123;</span><br><span class="line">isFlag = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(isFlag)&#123;</span><br><span class="line">System.out.println(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-应用场景"><a href="#3-应用场景" class="headerlink" title="3 应用场景"></a>3 应用场景</h4><p>模板方法设计模式是编程中经常用得到的模式。各个框架、类库中都有他的影子，比如常见的有：</p><p>1）数据库访问的封装</p><p>2）Junit单元测试</p><p>3）JavaWeb的Servlet中关于doGet/doPost方法调用</p><p>4）Hibernate中模板程序</p><p>5）Spring中JDBCTemlate、Hibernate Template等</p><h3 id="七、关键字interface"><a href="#七、关键字interface" class="headerlink" title="七、关键字interface"></a>七、关键字interface</h3><p>interface：接口</p><h4 id="1-使用说明"><a href="#1-使用说明" class="headerlink" title="1 使用说明"></a>1 使用说明</h4><p>1）接口使用 <code>interface</code> 来定义</p><p>2）Java中，接口和类是<strong>并列</strong>的两个结构</p><p>3）如何定义接口：定义接口中的成员</p><p>​    ① JDK7及以前：只能定义全局常量和抽象方法</p><blockquote><p>全局常量：public static final的.但是书写时，可以省略不写</p><p>抽象方法：public abstract的</p></blockquote><p>​    ② JDK8：除了定义全局常量和抽象方法之外，还可以定义静态方法、默认方法（略）</p><p>4）接口中不能定义构造器的！意味着接口不可以实例化</p><p>5）Java开发中，接口通过让类去实现（implements）的方式来使用</p><p>​    如果实现类覆盖了接口中的所抽象方法，则此实现类就可以实例化</p><p>​    如果实现类没覆盖接口中所的抽象方法，则此实现类仍为一个抽象类</p><p>6）Java类可以实现多个接口   —&gt; 弥补了Java单继承性的局限性</p><p>​    格式：class AA extends BB implements CC,DD,EE</p><p>7）接口与接口之间可以继承，而且可以多继承</p><p>8）接口的具体使用，体现多态性</p><p>9）接口，实际上可以看做是一种规范</p><h4 id="2-举例-1"><a href="#2-举例-1" class="headerlink" title="2 举例"></a>2 举例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transferData</span><span class="params">(USB usb)</span></span>&#123;<span class="comment">//USB usb = new Flash();</span></span><br><span class="line">usb.start();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"具体传输数据的细节"</span>);</span><br><span class="line"></span><br><span class="line">usb.stop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">USB</span></span>&#123;</span><br><span class="line"><span class="comment">//常量：定义了长、宽、最大最小的传输速度等</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flash</span> <span class="keyword">implements</span> <span class="title">USB</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"U盘开启工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"U盘结束工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printer</span> <span class="keyword">implements</span> <span class="title">USB</span></span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"打印机开启工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"打印机结束工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>体会</strong></p><p>1）接口使用上也满足多态性</p><p>2）接口，实际上就是定义了一种规范</p><p>3）开发中，体会面向接口编程！    </p><h4 id="3-体会面向接口编程的思想"><a href="#3-体会面向接口编程的思想" class="headerlink" title="3 体会面向接口编程的思想"></a>3 体会面向接口编程的思想</h4><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%919-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8B/../images/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B.png" alt="image-20200910163721358"></p><p>我们在应用程序中，调用的结构都是JDBC中定义的接口，不会出现具体某一个数据库厂商的API</p><h4 id="4-Java8中关于接口的新规范"><a href="#4-Java8中关于接口的新规范" class="headerlink" title="4 Java8中关于接口的新规范"></a>4 Java8中关于接口的新规范</h4><p>1）接口中定义的静态方法，只能通过接口来调用</p><p>2）通过实现类的对象，可以调用接口中的默认方法</p><p>​    如果实现类重写了接口中的默认方法，调用时，仍然调用的是重写以后的方法</p><p>3）如果子类（或实现类）继承的父类和实现的接口中声明了同名同参数的默认方法，那么子类在没重写此方法的情况下，默认调用的是父类中的同名同参数的方法。–&gt; <strong>类优先原则</strong></p><p>4）如果实现类实现了多个接口，而这多个接口中定义了同名同参数的默认方法，那么在实现类没重写此方法的情况下，报错。–&gt; <strong>接口冲突</strong></p><p>​    这就需要我们必须在实现类中重写此方法</p><p>5）如何在子类（或实现类）的方法中调用父类、接口中被重写的方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    method3();<span class="comment">//调用自己定义的重写的方法</span></span><br><span class="line">    <span class="keyword">super</span>.method3();<span class="comment">//调用的是父类中声明的</span></span><br><span class="line">    <span class="comment">//调用接口中的默认方法</span></span><br><span class="line">    CompareA.<span class="keyword">super</span>.method3();</span><br><span class="line">    CompareB.<span class="keyword">super</span>.method3();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>面试题</strong></p><p>抽象类和接口的异同？</p><p>相同点：不能实例化；都可以包含抽象方法的</p><p>不同点：</p><p>1）把抽象类和接口（java7，java8，java9）的定义、内部结构解释说明</p><p>2）类：单继承性    接口：多继承      类与接口：多实现</p><h3 id="八、代理模式"><a href="#八、代理模式" class="headerlink" title="八、代理模式"></a>八、代理模式</h3><h4 id="1-解决的问题-1"><a href="#1-解决的问题-1" class="headerlink" title="1 解决的问题"></a>1 解决的问题</h4><p>代理模式是Java开发中使用较多的一种设计模式。代理设计就是为其他对象提供一种代理以控制对这个对象的访问 </p><h4 id="2-举例-2"><a href="#2-举例-2" class="headerlink" title="2 举例"></a>2 举例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">NetWork</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">browse</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Server</span> <span class="keyword">implements</span> <span class="title">NetWork</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">browse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"真实的服务器访问网络"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 代理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyServer</span> <span class="keyword">implements</span> <span class="title">NetWork</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> NetWork work;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ProxyServer</span><span class="params">(NetWork work)</span></span>&#123;</span><br><span class="line"><span class="keyword">this</span>.work = work;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"联网之前的检查工作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">browse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">check();</span><br><span class="line"></span><br><span class="line">work.browse();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-应用场景-1"><a href="#3-应用场景-1" class="headerlink" title="3 应用场景"></a>3 应用场景</h4><h5 id="1）应用场景"><a href="#1）应用场景" class="headerlink" title="1）应用场景"></a>1）应用场景</h5><p>安全代理：屏蔽对真实角色的直接访问</p><p>远程代理：通过代理类处理远程方法调用（RMl）</p><p>延迟加载：先加载轻量级的代理对象，真正需要再加载真实对象</p><p>比如你要开发一个大文档查看软件，大文档中有大的图片，有可能一个图片有100MB，在打开文件时，不可能将所有的图片都显示出来，这样就可以使用代理模式，当需要查看图片时，用proxy来进行大图片的打开。</p><h5 id="2）分类"><a href="#2）分类" class="headerlink" title="2）分类"></a>2）分类</h5><p>① 静态代理（静态定义代理类）</p><p>② 动态代理（动态生成代理类）</p><blockquote><p>JDK自带的动态代理，需要反射等知识</p></blockquote><blockquote><p><strong>工厂的设计模式</strong></p><p>① 解决的问题<br>实现了创建者与调用者的分离，即将创建对象的具体过程屏蔽隔离起来，达到提高灵活性的目的</p><p>② 具体模式<br>简单工厂模式：用来生产同一等级结构中的任意产品。（对于增加新的产品，需要修改已有代码）<br>工厂方法模式：用来生产同一等级结构中的固定产品。（支持增加任意产品)<br>抽象工厂模式：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族)</p></blockquote><h3 id="九、内部类"><a href="#九、内部类" class="headerlink" title="九、内部类"></a>九、内部类</h3><h4 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h4><p>Java中允许将一个类A声明在另一个类B中，则类A就是内部类，类B称为外部类</p><h4 id="2-内部类的分类"><a href="#2-内部类的分类" class="headerlink" title="2 内部类的分类"></a>2 内部类的分类</h4><p>成员内部类（静态、非静态 ）vs 局部内部类(方法内、代码块内、构造器内)</p><h4 id="3-成员内部类的理解"><a href="#3-成员内部类的理解" class="headerlink" title="3 成员内部类的理解"></a>3 成员内部类的理解</h4><p>一方面，作为外部类的成员：① 调用外部类的结构；②可以被static修饰；③可以被4种不同的权限修饰<br>另一方面，作为一个类：① 类内可以定义属性、方法、构造器等；② 可以被final修饰，表示此类不能被继承。言外之意，不使用final，就可以被继承；③ 可以被abstract修饰</p><h4 id="4-成员内部类"><a href="#4-成员内部类" class="headerlink" title="4 成员内部类"></a>4 成员内部类</h4><p>1）如何创建成员内部类的对象？(静态的 &amp; 非静态的)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建静态的Dog内部类的实例(静态的成员内部类):</span></span><br><span class="line">Person.Dog dog = <span class="keyword">new</span> Person.Dog();</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建非静态的Bird内部类的实例(非静态的成员内部类):</span></span><br><span class="line"><span class="comment">//Person.Bird bird = new Person.Bird();//错误的</span></span><br><span class="line">Person p = <span class="keyword">new</span> Person();</span><br><span class="line">Person.Bird bird = p.<span class="keyword">new</span> Bird();</span><br></pre></td></tr></table></figure><p>2）如何在成员内部类中调用外部类的结构？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">String name = <span class="string">"小明"</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//非静态成员内部类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span></span>&#123;</span><br><span class="line">String name = <span class="string">"杜鹃"</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">System.out.println(name);<span class="comment">//方法的形参</span></span><br><span class="line">System.out.println(<span class="keyword">this</span>.name);<span class="comment">//内部类的属性</span></span><br><span class="line">System.out.println(Person.<span class="keyword">this</span>.name);<span class="comment">//外部类的属性</span></span><br><span class="line"><span class="comment">//Person.this.eat();</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-局部内部类"><a href="#5-局部内部类" class="headerlink" title="5 局部内部类"></a>5 局部内部类</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;返回一个实现了Comparable接口的类的对象</span><br><span class="line">public Comparable getComparable()&#123;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;创建一个实现了Comparable接口的类:局部内部类</span><br><span class="line">&#x2F;&#x2F;方式一：</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;class MyComparable implements Comparable&#123;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;@Override</span><br><span class="line">&#x2F;&#x2F;public int compareTo(Object o) &#123;</span><br><span class="line">&#x2F;&#x2F;return 0;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line">&#x2F;&#x2F;return new MyComparable();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;方式二：</span><br><span class="line">return new Comparable()&#123;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public int compareTo(Object o) &#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-注意点"><a href="#6-注意点" class="headerlink" title="6 注意点"></a>6 注意点</h4><p>在局部内部类的<strong>方法</strong>中如果调用局部内部类所声明的<strong>方法</strong>中的<strong>局部变量</strong>的话，要求此局部变量声明为final的</p><blockquote><p>jdk 7及之前版本：要求此局部变量显式的声明为final的<br>jdk 8及之后的版本：可以省略final的声明</p></blockquote><p><strong>总结：</strong></p><p>成员内部类和局部内部类，在编译以后，都会生成字节码文件。</p><p><strong>格式：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">成员内部类：外部类$内部类名<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">局部内部类：外部类$数字 内部类名.<span class="title">class</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;面向对象学习的三条主线：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Java类及类的成员：属性、方法、构造器；&lt;strong&gt;代码块&lt;/strong&gt;、&lt;strong&gt;内部类&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;面向对象的三大特征：封装性、继承性、多态性&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;其它关键字：this、super、&lt;strong&gt;static&lt;/strong&gt;、&lt;strong&gt;final&lt;/strong&gt;、abstract、&lt;strong&gt;interface&lt;/strong&gt;、package、import等&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】8-面向对象·中</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%918-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%AD/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%918-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%AD/</id>
    <published>2020-07-04T19:02:08.000Z</published>
    <updated>2020-09-12T09:40:58.399Z</updated>
    
    <content type="html"><![CDATA[<p>面向对象学习的三条主线：</p><ol><li><p>Java类及类的成员：属性、方法、构造器；代码块、内部类</p></li><li><p>面向对象的三大特征：封装性、<strong>继承性</strong>、<strong>多态性</strong></p></li><li><p>其它关键字：this、<strong>super</strong>、static、final、abstract、interface、package、import等</p></li></ol><a id="more"></a><h3 id="一、OOP特征之继承性"><a href="#一、OOP特征之继承性" class="headerlink" title="一、OOP特征之继承性"></a>一、OOP特征之继承性</h3><h4 id="1-为什么要有类的继承性（继承性的好处）"><a href="#1-为什么要有类的继承性（继承性的好处）" class="headerlink" title="1 为什么要有类的继承性（继承性的好处）"></a>1 为什么要有类的继承性（继承性的好处）</h4><p>① 减少了代码的冗余，提高了代码的复用性</p><p>② 便于功能的扩展</p><p>③ 为之后多态性的使用，提供了前提</p><h4 id="2-继承性的格式"><a href="#2-继承性的格式" class="headerlink" title="2 继承性的格式"></a>2 继承性的格式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">B</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A:子类、派生类、subclass</span></span><br><span class="line"><span class="comment">// B:父类、超类、基类、superclass</span></span><br><span class="line"><span class="comment">// extends：延展、扩展</span></span><br></pre></td></tr></table></figure><h4 id="3-子类继承父类以后有哪些不同？"><a href="#3-子类继承父类以后有哪些不同？" class="headerlink" title="3 子类继承父类以后有哪些不同？"></a>3 子类继承父类以后有哪些不同？</h4><p>① 体现：一旦子类A继承父类B以后，子类A中就获取了父类B中声明的所有的属性和方法</p><p>② 特别的，父类中声明为private的属性或方法，子类继承父类以后，仍然认为获取了父类中私有的结构。只因为封装性的影响，使得子类不能直接调用父类的结构而已</p><p>③ 子类继承父类以后，还可以声明自己特有的属性或方法：实现功能的拓展。子类和父类的关系，不同于子集和集合的关系。（extends：延展、扩展）</p><h4 id="4-Java中继承性的说明"><a href="#4-Java中继承性的说明" class="headerlink" title="4 Java中继承性的说明"></a>4 Java中继承性的说明</h4><p>① 一个类可以被多个子类继承。<br>② Java中类的单继承性：一个类只能有一个父类<br>③ 子父类是相对的概念。<br>④ 子类直接继承的父类，称为：直接父类；间接继承的父类称为：间接父类<br>⑤ 子类继承父类以后，就获取了直接父类以及所间接父类中声明的属性和方法</p><h4 id="5-java-lang-Object类的理解"><a href="#5-java-lang-Object类的理解" class="headerlink" title="5 java.lang.Object类的理解"></a>5 java.lang.Object类的理解</h4><p>① 如果我们没显式的声明一个类的父类的话，则此类继承于java.lang.Object类</p><p>② 所有的java类（除java.lang.Object类之外）都直接或间接的继承于java.lang.Object类</p><p>③ 意味着，所有的java类具有java.lang.Object类声明的功能。</p><h3 id="二、方法的重写"><a href="#二、方法的重写" class="headerlink" title="二、方法的重写"></a>二、方法的重写</h3><h4 id="1-什么是方法的重写-override-或-overwrite"><a href="#1-什么是方法的重写-override-或-overwrite" class="headerlink" title="1 什么是方法的重写(override 或 overwrite)"></a>1 什么是方法的重写(override 或 overwrite)</h4><p>子类继承父类以后，可以对父类中同名同参数的方法，进行覆盖操作</p><h4 id="2-应用"><a href="#2-应用" class="headerlink" title="2 应用"></a>2 应用</h4><p>重写以后，当创建子类对象以后，通过子类对象调用子父类中的同名同参数的方法时，实际执行的是子类重写父类的方法</p><h4 id="3-重写的规则"><a href="#3-重写的规则" class="headerlink" title="3 重写的规则"></a>3 重写的规则</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方法的声明： 权限修饰符  返回值类型  方法名(形参列表) <span class="keyword">throws</span> 异常的类型&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法体</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>约定俗称：子类中的叫重写的方法，父类中的叫被重写的方法</p><p>① 子类重写的方法的方法名和形参列表与父类被重写的方法的方法名和形参列表<strong>相同</strong></p><p>② 子类重写的方法的权限修饰符<strong>不小于</strong>父类被重写的方法的权限修饰符</p><blockquote><p>特殊情况：子类不能重写父类中声明为private权限的方法</p></blockquote><p>③ 返回值类型</p><blockquote><p>父类被重写的方法的返回值类型是void，则子类重写的方法的返回值类型只能是void</p><p>父类被重写的方法的返回值类型是A类型，则子类重写的方法的返回值类型可以是A类或A类的子类</p><p>父类被重写的方法的返回值类型是基本数据类型(比如：double)，则子类重写的方法的返回值类型必须是相同的基本数据类型(必须也是double)</p></blockquote><p>④ 子类重写的方法抛出的异常类型<strong>不大于</strong>父类被重写的方法抛出的异常类型（具体放到异常处理时候讲）</p><p>⑤ 子类和父类中的同名同参数的方法要么都声明为非static的（考虑重写），要么都声明为static的（不是重写)。</p><p><strong>面试题</strong></p><p>区分方法的重写和重载？</p><p>答：① 二者的概念；② 重载和重写的具体规则；③ 重载：不表现为多态性；重写：表现为多态性。</p><p><strong>重载</strong>，是指允许存在多个同名方法，而这些方法的参数不同。编译器根据方法不同的参数表，对同名方法的名称做修饰。对于编译器而言，这些同名方法就成了不同的方法。它们的调用地址在编译期就绑定了。Java的重载是可以包括父类和子类的，即子类可以重载父类的同名不同参数的方法。所以，对于重载而言，在方法调用之前，编译器就已经确定了所要调用的方法，这称为“早绑定”或“静态绑定”；而对于<strong>多态</strong>，只等到方法调用的那一刻，解释运行器才会确定所要调用的具体方法，这称为“晚绑定”或“动态绑定”。 引用一句Bruce Eckel的话：“不要犯傻，如果它不是晚绑定，它就不是多态。”</p><h3 id="三、关键字super"><a href="#三、关键字super" class="headerlink" title="三、关键字super"></a>三、关键字super</h3><p>super 关键字可以理解为：父类的</p><h4 id="1-可以用来调用的结构"><a href="#1-可以用来调用的结构" class="headerlink" title="1 可以用来调用的结构"></a>1 可以用来调用的结构</h4><p>属性、方法、构造器</p><h4 id="2-super调用属性、方法"><a href="#2-super调用属性、方法" class="headerlink" title="2 super调用属性、方法"></a>2 super调用属性、方法</h4><p>① 我们可以在子类的方法或构造器中。通过使用”super.属性”或”super.方法”的方式，显式的调用父类中声明的属性或方法。但是，通常情况下，我们习惯省略”super.”</p><p>② 特殊情况：当子类和父类中定义了同名的属性时，我们要想在子类中调用父类中声明的属性，则必须显式的使用”super.属性”的方式，表明调用的是父类中声明的属性</p><p>③ 特殊情况：当子类重写了父类中的方法以后，我们想在子类的方法中调用父类中被重写的方法时，则必须显式的使用”super.方法”的方式，表明调用的是父类中被重写的方法</p><h4 id="3-super调用构造器"><a href="#3-super调用构造器" class="headerlink" title="3 super调用构造器"></a>3 super调用构造器</h4><p>① 我们可以在子类的构造器中显式的使用”super(形参列表)”的方式，调用父类中声明的指定的构造器</p><p>② “super(形参列表)”的使用，必须声明在子类构造器的首行！</p><p>③ 我们在类的构造器中，针对于”this(形参列表)”或”super(形参列表)”只能二选一，不能同时出现</p><p>④ 在构造器的首行，没显式的声明”this(形参列表)”或”super(形参列表)”，则默认调用的是父类中空参的构造器：super()</p><p>⑤ 在类的多个构造器中，至少一个类的构造器中使用了”super(形参列表)”，调用父类中的构造器</p><h4 id="4-子类对象实例化全过程"><a href="#4-子类对象实例化全过程" class="headerlink" title="4 子类对象实例化全过程"></a>4 子类对象实例化全过程</h4><p>1）从结果上看：继承性</p><p>子类继承父类以后，就获取了父类中声明的属性或方法。创建子类的对象，在堆空间中，就会加载所父类中声明的属性<br>2）从过程上看</p><p>当我们通过子类的构造器创建子类对象时，我们一定会直接或间接的调用其父类的构造器，进而调用父类的父类的构造器，……，直到调用了java.lang.Object类中空参的构造器为止。正因为加载过所的父类的结构，所以才可以看到内存中父类中的结构，子类对象才可以考虑进行调用</p><blockquote><p>强调说明：虽然创建子类对象时，调用了父类的构造器，但是自始至终就创建过一个对象，即为new的子类对象。</p></blockquote><h3 id="四、OOP特征之多态性"><a href="#四、OOP特征之多态性" class="headerlink" title="四、OOP特征之多态性"></a>四、OOP特征之多态性</h3><p>多态性可以理解为一个事物的多种形态</p><h4 id="1何为多态性"><a href="#1何为多态性" class="headerlink" title="1何为多态性"></a>1何为多态性</h4><p>对象的多态性：<strong>父类的引用指向子类的对象</strong>（或子类的对象赋给父类的引用）</p><h4 id="2-多态性的使用：虚拟方法调用"><a href="#2-多态性的使用：虚拟方法调用" class="headerlink" title="2 多态性的使用：虚拟方法调用"></a>2 多态性的使用：虚拟方法调用</h4><p>有了对象的多态性以后，我们在编译期，只能调用父类中声明的方法，但在运行期，我们实际执行的是子类重写父类的方法。</p><blockquote><p>总结：编译，看左边；运行，看右边</p><p>注意点：对象的多态性，只适用于方法，不适用于属性（编译和运行都看左边）</p><p>多态是编译时行为还是运行时行为？答：运行时行为</p></blockquote><h4 id="3-多态性的使用前提"><a href="#3-多态性的使用前提" class="headerlink" title="3 多态性的使用前提"></a>3 多态性的使用前提</h4><p>① 类的继承关系  </p><p>② 方法的重写</p><h4 id="4-关于向上转型与向下转型"><a href="#4-关于向上转型与向下转型" class="headerlink" title="4 关于向上转型与向下转型"></a>4 关于向上转型与向下转型</h4><p>1）向上转型：多态</p><p>2）向下转型</p><p>① 为什么使用向下转型？</p><p>有了对象的多态性以后，内存中实际上是加载了子类特有的属性和方法的，但是由于变量声明为父类类型，导致编译时，只能调用父类中声明的属性和方法。子类特有的属性和方法不能调用。如何才能调用子类特的属性和方法？使用向下转型</p><p>② 如何实现向下转型？</p><p>使用强制类型转换符：()</p><blockquote><p>使用时的注意点：<br>① 使用强转时，可能出现ClassCastException的异常。<br>② 为了避免在向下转型时出现ClassCastException的异常，我们在向下转型之前，先进行instanceof的判断，一旦返回true，就进行向下转型。如果返回false，不进行向下转型。</p></blockquote><h4 id="5-instanceof-的使用"><a href="#5-instanceof-的使用" class="headerlink" title="5 instanceof 的使用"></a>5 instanceof 的使用</h4><p>① a instanceof A：判断对象a是否是类A的实例。如果是，返回true；如果不是，返回false</p><p>② 如果 a instanceof A返回true，则 a instanceof B也返回true。其中，类B是类A的父类</p><p>③ 要求a所属的类与类A必须是子类和父类的关系，否则编译错误</p><p><strong>面试题</strong></p><p>谈谈你对多态性的理解？</p><p>① 实现代码的通用性</p><p>② Object类中定义的public boolean equals(Object obj){  }<br>        JDBC:使用java程序操作(获取数据库连接、CRUD)数据库(MySQL、Oracle、DB2、SQL Server)</p><p>③ 抽象类、接口的使用肯定体现了多态性。（抽象类、接口不能实例化）</p><h3 id="五、Object类的使用"><a href="#五、Object类的使用" class="headerlink" title="五、Object类的使用"></a>五、Object类的使用</h3><h4 id="1-java-lang-Object类的说明"><a href="#1-java-lang-Object类的说明" class="headerlink" title="1 java.lang.Object类的说明"></a>1 java.lang.Object类的说明</h4><p>1）Object类是所Java类的根父类</p><p>2）如果在类的声明中未使用extends关键字指明其父类，则默认父类为java.lang.Object类 </p><p>3）Object类中的功能(属性、方法)就具通用性。</p><p>① 属性：无</p><p>② 方法：equals() / toString() / getClass() /hashCode() / clone() / finalize()；wait() 、 notify()、notifyAll()</p><p>4）Object类只声明了一个空参的构造器</p><h4 id="2-equals-方法"><a href="#2-equals-方法" class="headerlink" title="2 equals()方法"></a>2 equals()方法</h4><h5 id="1）equals-的使用"><a href="#1）equals-的使用" class="headerlink" title="1）equals()的使用"></a>1）equals()的使用</h5><p>① equals()是一个方法，而非运算符</p><p>② 只能适用于引用数据类型</p><p>③ Object类中equals()的定义：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="keyword">this</span> == obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说明：Object类中定义的equals()和==的作用是相同的：比较两个对象的地址值是否相同。即两个引用是否指向同一个对象实体</p><p>④ 像String、Date、File、包装类等都重写了Object类中的equals()方法。重写以后，比较的不是两个引用的地址是否相同，而是比较两个对象的”实体内容”是否相同</p><p>⑤ 通常情况下，我们自定义的类如果使用equals()的话，也通常是比较两个对象的”实体内容”是否相同。那么，我们就需要对Object类中的equals()进行重写</p><blockquote><p>重写的原则：比较两个对象的实体内容是否相同</p></blockquote><h5 id="2）如何重写equals"><a href="#2）如何重写equals" class="headerlink" title="2）如何重写equals()"></a>2）如何重写equals()</h5><p>开发中如何实现：自动生成的</p><blockquote><p>回顾 == 运算符的使用：</p><ol><li><p>可以使用在基本数据类型变量和引用数据类型变量中</p></li><li><p>如果比较的是基本数据类型变量：比较两个变量保存的数据是否相等。（不一定类型要相同）</p><p>如果比较的是引用数据类型变量：比较两个对象的地址值是否相同.即两个引用是否指向同一个对象实体</p></li></ol><p>补充： == 符号使用时，必须保证符号左右两边的变量类型一致。</p></blockquote><h4 id="3-toString-方法"><a href="#3-toString-方法" class="headerlink" title="3 toString()方法"></a>3 toString()方法</h4><h5 id="1）toString-的使用"><a href="#1）toString-的使用" class="headerlink" title="1）toString()的使用"></a>1）toString()的使用</h5><p>① 当我们输出一个对象的引用时，实际上就是调用当前对象的toString()</p><p>② Object类中toString()的定义：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> getClass().getName() + <span class="string">"@"</span> + Integer.toHexString(hashCode());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③ 像String、Date、File、包装类等都重写了Object类中的toString()方法</p><p>​     使得在调用对象的toString()时，返回”实体内容”信息</p><p>④ 自定义类也可以重写toString()方法，当调用此方法时，返回对象的”实体内容”</p><h5 id="2）如何重写toString"><a href="#2）如何重写toString" class="headerlink" title="2）如何重写toString()"></a>2）如何重写toString()</h5><p>开发中如何实现：自动生成的</p><p><strong>面试题</strong></p><p>① final、finally、finalize的区别？</p><p>②  == 和 equals() 区别</p><h3 id="六、Java中的JUnit单元测试"><a href="#六、Java中的JUnit单元测试" class="headerlink" title="六、Java中的JUnit单元测试"></a>六、Java中的JUnit单元测试</h3><h4 id="1-步骤"><a href="#1-步骤" class="headerlink" title="1 步骤"></a>1 步骤</h4><p>1）在中当前工程 - 右键择：build path - add libraries - JUnit 4 - 下一步</p><p>2）创建Java类，进行单元测试。</p><p>​      此时的Java类要求：① 此类是public的  ②此类提供公共的无参的构造器</p><p>3）此类中声明单元测试方法</p><p>​      此时的单元测试方法：方法的权限是public,没返回值，没形参</p><p>4）此单元测试方法上需要声明注解：@Test,并在单元测试类中导入：import org.junit.Test;</p><p>5）声明好单元测试方法以后，就可以在方法体内测试相关的代码。</p><p>6）写完代码以后，左键双击单元测试方法名，右键：run as - JUnit Test</p><h5 id="2-说明"><a href="#2-说明" class="headerlink" title="2 说明"></a>2 说明</h5><p>1）如果执行结果没任何异常：绿条</p><p>2）如果执行结果出现异常：红条</p><h3 id="七、包装类的使用"><a href="#七、包装类的使用" class="headerlink" title="七、包装类的使用"></a>七、包装类的使用</h3><h4 id="1-为什么要有包装类-或封装类）"><a href="#1-为什么要有包装类-或封装类）" class="headerlink" title="1 为什么要有包装类(或封装类）"></a>1 为什么要有包装类(或封装类）</h4><p>为了使基本数据类型的变量具有类的特征，引入包装类。</p><h4 id="2-基本数据类型与对应的包装类"><a href="#2-基本数据类型与对应的包装类" class="headerlink" title="2 基本数据类型与对应的包装类"></a>2 基本数据类型与对应的包装类</h4><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%918-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%AD/../images/%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%AF%B9%E5%BA%94%E7%9A%84%E5%8C%85%E8%A3%85%E7%B1%BB.png" alt="基本数据类型与对应的包装类"></p><h4 id="3-需要掌握的类型间的转换：（基本数据类型、包装类、String）"><a href="#3-需要掌握的类型间的转换：（基本数据类型、包装类、String）" class="headerlink" title="3 需要掌握的类型间的转换：（基本数据类型、包装类、String）"></a>3 需要掌握的类型间的转换：（基本数据类型、包装类、String）</h4><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%918-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%AD/../images/%E7%B1%BB%E5%9E%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2.png" alt="类型间的转换"></p><p>简易版：</p><p>基本数据类型&lt;—&gt;包装类：JDK 5.0 新特性：自动装箱 与 自动拆箱</p><p>基本数据类型、包装类—&gt;String:调用String重载的valueOf(Xxx xxx)</p><p>String—&gt;基本数据类型、包装类:调用包装类的parseXxx(String s)</p><p><strong>注意</strong>：转换时，可能会报NumberFormatException</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;面向对象学习的三条主线：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Java类及类的成员：属性、方法、构造器；代码块、内部类&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;面向对象的三大特征：封装性、&lt;strong&gt;继承性&lt;/strong&gt;、&lt;strong&gt;多态性&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;其它关键字：this、&lt;strong&gt;super&lt;/strong&gt;、static、final、abstract、interface、package、import等&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】7-面向对象·上</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%917-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8A/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%917-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8A/</id>
    <published>2020-07-04T19:02:07.000Z</published>
    <updated>2020-09-12T09:40:54.338Z</updated>
    
    <content type="html"><![CDATA[<p>面向对象学习的三条主线：</p><ol><li><p>Java类及类的成员：<strong>属性</strong>、<strong>方法</strong>、<strong>构造器</strong>；代码块、内部类</p></li><li><p>面向对象的三大特征：<strong>封装性</strong>、继承性、多态性</p></li><li><p>其它关键字：<strong>this</strong>、super、static、final、abstract、interface、<strong>package</strong>、<strong>import</strong>等</p></li></ol><a id="more"></a><h3 id="一、类和对象"><a href="#一、类和对象" class="headerlink" title="一、类和对象"></a>一、类和对象</h3><h4 id="1-面向对象与面向过程"><a href="#1-面向对象与面向过程" class="headerlink" title="1 面向对象与面向过程"></a>1 面向对象与面向过程</h4><p>1）面向过程：强调的是<strong>功能行为</strong>，以函数为最小单位，考虑<strong>怎么做</strong></p><p>2）面向对象：强调具备了功能的<strong>对象</strong>，以类/对象为最小单位，考虑<strong>谁来做</strong></p><p>举例对比：<strong>人</strong>把<strong>大象</strong>装进<strong>冰箱</strong>。</p><blockquote><p>面向对象：Object Oriented Programming<br>面向过程：Procedure Oriented Programming</p></blockquote><h4 id="2-面向对象中两个重要的概念"><a href="#2-面向对象中两个重要的概念" class="headerlink" title="2 面向对象中两个重要的概念"></a>2 面向对象中两个重要的概念</h4><p>1）类（Class）：对一类事物的描述，是抽象的、概念上的定义</p><p>2）对象（Object）：是实际存在的该类事物的每个个体，因而也称为实例（instance）</p><p><strong>二者的关系</strong>：对象，是由类new出来的，派生出来的。</p><p><strong>“万事万物皆对象”</strong></p><blockquote><p>面向对象程序设计的重点是类的设计</p><p>设计类，就是设计类的成员</p><p>创建类的对象 = 类的实例化 = 实例化类</p><p>匿名对象：我们创建的对象，没显式的赋给一个变量名。即为匿名对象</p><p>特点：匿名对象只能调用一次</p></blockquote><h4 id="3-面向对象的三大特征"><a href="#3-面向对象的三大特征" class="headerlink" title="3 面向对象的三大特征"></a>3 面向对象的三大特征</h4><p>1）封装（Encapsulation）</p><p>2）继承（Inheritance）</p><p>3）多态（Polymorphism）</p><h3 id="二、类的成员"><a href="#二、类的成员" class="headerlink" title="二、类的成员"></a>二、类的成员</h3><h4 id="1-类的属性"><a href="#1-类的属性" class="headerlink" title="1 类的属性"></a>1 类的属性</h4><p><strong>属性</strong>：对应类中的<strong>成员变量</strong></p><blockquote><p>属性 = 成员变量 = field = 域、字段</p></blockquote><p><strong>属性与局部变量的对比</strong></p><p>1）相同点</p><ul><li>定义变量的<strong>格式</strong>：数据类型  变量名 = 变量值</li><li>先声明，后使用</li><li>变量都其对应的作用域 </li></ul><p>2）不同点</p><p>① 在类中声明的位置的不同</p><ul><li>属性：直接定义在类的一对{}内</li><li>局部变量：声明在方法内、方法形参、代码块内、构造器形参、构造器内部的变量</li></ul><p>② 关于权限修饰符的不同</p><ul><li>属性：可以在声明属性时，指明其权限，使用权限修饰符。<ul><li>常用的权限修饰符：private、public、缺省、protected  —&gt;封装性</li></ul></li><li>局部变量：不可以使用权限修饰符。</li></ul><p>③ 默认初始化值的情况：</p><ul><li>属性：类的属性，根据其类型，都默认初始化值。<ul><li>整型（byte、short、int、long：0）</li><li>浮点型（float、double：0.0）</li><li>字符型（char：0  （或’\u0000’））</li><li>布尔型（boolean：false）</li><li>引用数据类型（类、数组、接口：null）</li></ul></li><li>局部变量：没默认初始化值。<ul><li>意味着，我们在调用局部变量之前，一定要显式赋值。</li><li>特别地：形参在调用时，我们赋值即可。</li></ul></li></ul><p>④ 在内存中加载的位置：</p><ul><li>属性：加载到<strong>堆</strong>空间中   （非static）</li><li>局部变量：加载到<strong>栈</strong>空间</li></ul><h4 id="2-类的方法"><a href="#2-类的方法" class="headerlink" title="2 类的方法"></a>2 类的方法</h4><p><strong>方法</strong>：描述类应该具的功能。</p><blockquote><p>方法 = 成员方法 = 函数 = method</p></blockquote><p><strong>方法的声明</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">权限修饰符 返回值类型 方法名(形参列表)&#123;</span><br><span class="line">方法体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1）<strong>权限修饰符</strong></p><p>默认方法的权限修饰符先都使用public</p><p>Java规定的4种权限修饰符：private、public、缺省、protected  –&gt;封装性再细说</p><p>2）<strong>返回值类型</strong></p><p>返回值  vs 没返回值</p><p>① 如果方法返回值，则必须在方法声明时，指定返回值的类型。同时，方法中，需要使用</p><p>return关键字来返回指定类型的变量或常量：“return 数据”。</p><p>② 如果方法没返回值，则方法声明时，使用void来表示。通常，没返回值的方法中，就不需要</p><p>使用return.但是，如果使用的话，只能“return;”表示结束此方法的意思。</p><p>3）<strong>方法名</strong></p><p>属于标识符，遵循标识符的规则和规范，“见名知意”</p><p>4） <strong>形参列表</strong></p><p>方法可以声明0个，1个，或多个形参。</p><p><strong>格式</strong>：数据类型1 形参1,数据类型2 形参2,…</p><p>5）<strong>方法体</strong></p><p>方法功能的体现。     </p><blockquote><p>return关键字</p><p>使用范围：使用在方法体中</p><p>作用：</p><p>① 结束方法</p><p>② 针对于返回值类型的方法，使用”return 数据”方法返回所要的数据。</p><p><strong>注意点</strong>：return关键字后面不可以声明执行语句。</p></blockquote><h4 id="3-方法的重载"><a href="#3-方法的重载" class="headerlink" title="3 方法的重载"></a>3 方法的重载</h4><p>定义：在同一个类中，允许存在一个以上的<strong>同名方法</strong>，只要它们的参数个数或者参数类型不同即可。</p><p><strong>“两同一不同”</strong></p><p>1）同一个类、相同方法名</p><p>2）参数列表不同：参数个数不同，参数类型不同</p><blockquote><p>严格按照定义判断：两同一不同。</p><p>跟方法的权限修饰符、返回值类型、形参变量名、方法体都没关系！</p></blockquote><p><strong>可变个数形参的方法</strong></p><p>1）可变个数形参的格式：数据类型 … 变量名</p><p>2）当调用可变个数形参的方法时，传入的参数个数可以是：0个，1个,2个，。。。</p><p>3）可变个数形参的方法与本类中方法名相同，形参不同的方法之间构成重载</p><p>4）可变个数形参的方法与本类中方法名相同，形参类型也相同的数组之间不构成重载。换句话说，二者不能共存。</p><p>5）可变个数形参在方法的形参中，必须声明在末尾</p><p>6）可变个数形参在方法的形参中,最多只能声明一个可变形参。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"show(String)"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(String ... strs)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"show(String ... strs)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; strs.length;i++)&#123;</span><br><span class="line">System.out.println(strs[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不能与上一个方法同时存在</span></span><br><span class="line"><span class="comment">//public void show(String[] strs)&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure><h4 id="4-java的值传递机制"><a href="#4-java的值传递机制" class="headerlink" title="4 java的值传递机制"></a>4 java的值传递机制</h4><p>1）值传递规则</p><p>如果变量是<strong>基本数据类型</strong>，此时赋值的是变量所保存的<strong>数据值</strong></p><p>如果变量是<strong>引用数据类型</strong>，此时赋值的是变量所保存的<strong>数据的地址值</strong></p><p>2）形参和实参</p><p>形参：方法定义时，声明的小括号内的参数</p><p>实参：方法调用时，实际传递给形参的数据</p><p>3）java中参数传递机制：值传递</p><p><strong>规则</strong></p><p>如果参数是基本数据类型，此时实参赋给形参的是实参真实存储的数据值</p><p>如果参数是引用数据类型，此时实参赋给形参的是实参存储数据的地址值</p><h4 id="5-递归方法"><a href="#5-递归方法" class="headerlink" title="5 递归方法"></a>5 递归方法</h4><p>定义：一个方法体内调用它自身</p><p>理解</p><p>方法递归包含了一种隐式的循环，它会重复执行某段代码，但这种重复执行无须循环控制。</p><p>递归一定要向已知方向递归，否则这种递归就变成了无穷递归，类似于死循环。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例1：计算1-n之间所自然数的和</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;<span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> n + getSum(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例2：计算1-n之间所自然数的乘积:n!</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSum1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> n * getSum1(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//例3：已知一个数列：f(0) = 1,f(1) = 4,f(n+2)=2*f(n+1) + f(n),</span></span><br><span class="line"><span class="comment">//其中n是大于0的整数，求f(10)的值。</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(n == <span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//return f(n + 2) - 2 * f(n + 1);</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>*f(n - <span class="number">1</span>) + f(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//例4：斐波那契数列</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//例5：汉诺塔问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//例6：快排</span></span><br></pre></td></tr></table></figure><h4 id="6-类的构造器"><a href="#6-类的构造器" class="headerlink" title="6 类的构造器"></a>6 类的构造器</h4><p>1）构造器（或构造方法，Constructor）的作用：</p><p>① 创建对象</p><p>② 初始化对象的信息</p><p>2）使用说明</p><p>① 如果没显式的定义类的构造器的话，则系统默认提供一个空参的构造器</p><p>② 定义构造器的格式：<code>权限修饰符  类名(形参列表){}</code></p><p>③ 一个类中定义的多个构造器，彼此构成重载</p><p>④ 一旦我们显式的定义了类的构造器之后，系统就不再提供默认的空参构造器</p><p>⑤ 一个类中，至少会有一个构造器。</p><blockquote><p>总结：属性赋值的先后顺序</p><p>① 默认初始化</p><p>② 显式初始化</p><p>③ 构造器中初始化</p><p>④ 通过”对象.方法” 或 “对象.属性”的方式，赋值</p><p>以上操作的先后顺序：① - ② - ③ - ④  </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">所谓JavaBean，是指符合如下标准的Java类：</span><br><span class="line">&gt;类是公共的</span><br><span class="line">&gt;一个无参的公共的构造器</span><br><span class="line">&gt;属性，且对应的get、set方法</span><br></pre></td></tr></table></figure><h4 id="7-关键字this"><a href="#7-关键字this" class="headerlink" title="7 关键字this"></a>7 关键字this</h4><p>1）可以调用的结构：属性、方法；构造器</p><p>2）this 调用属性、方法：</p><p>this 理解为：当前对象  或 当前正在创建的对象</p><p>① 在类的方法中，我们可以使用<code>this.属性</code>或<code>this.方法</code>的方式，调用当前对象属性或方法。但是，通常情况下，我们都择省略<code>this.</code>。特殊情况下，如果方法的形参和类的属性同名时，我们必须显式的使用<code>this.变量</code>的方式，表明此变量是属性，而非形参。</p><p>② 在类的构造器中，我们可以使用<code>this.属性</code>或<code>this.方法</code>的方式，调用当前正在创建的对象属性或方法。但是，通常情况下，我们都择省略<code>this.</code>。特殊情况下，如果构造器的形参和类的属性<strong>同名</strong>时，我们必须显式的使用<code>this.变量</code>的方式，表明此变量是属性，而非形参。</p><p>3）this调用构造器：</p><p>① 我们在类的构造器中，可以显式的使用”this(形参列表)”方式，调用本类中指定的其他构造器</p><p>② 构造器中不能通过<code>this(形参列表)</code>方式调用自己</p><p>③ 如果一个类中有n个构造器，则最多有 n - 1构造器中使用了<code>this(形参列表)</code></p><p>④ 规定：<code>this(形参列表)</code>必须声明在当前构造器的<strong>首行</strong></p><p>⑤ 构造器内部，<strong>最多只能声明一个</strong><code>this(形参列表)</code>，用来调用其他的构造器</p><h4 id="8-关键字package"><a href="#8-关键字package" class="headerlink" title="8 关键字package"></a>8 关键字package</h4><h5 id="1）使用说明"><a href="#1）使用说明" class="headerlink" title="1）使用说明"></a>1）使用说明</h5><p>① 为了更好的实现项目中类的管理，提供包的概念</p><p>② 使用package声明类或接口所属的包，声明在源文件的首行</p><p>③ 包，属于标识符，遵循标识符的命名规则、规范(xxxyyyzzz)、“见名知意”</p><p>④ 每”.”一次，就代表一层文件目录。</p><h5 id="2）举例：MVC设计模式"><a href="#2）举例：MVC设计模式" class="headerlink" title="2）举例：MVC设计模式"></a>2）举例：MVC设计模式</h5><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%917-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8A/../images%5CMVC%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.png" alt="MVC设计模式"></p><h5 id="3）JDK中的主要包介绍"><a href="#3）JDK中的主要包介绍" class="headerlink" title="3）JDK中的主要包介绍"></a>3）JDK中的主要包介绍</h5><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%917-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%C2%B7%E4%B8%8A/images%5CJDK%E4%B8%AD%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8C%85.png" alt="JDK中的主要包"></p><h4 id="9-关键字import"><a href="#9-关键字import" class="headerlink" title="9 关键字import"></a>9 关键字import</h4><h5 id="1）使用说明-1"><a href="#1）使用说明-1" class="headerlink" title="1）使用说明"></a>1）使用说明</h5><p>① 在源文件中显式的使用import结构导入指定包下的类、接口</p><p>② 声明在包的声明和类的声明之间</p><p>③ 如果需要导入多个结构，则并列写出即可</p><p>④ 可以使用”xxx.*”的方式，表示可以导入xxx包下的所结构</p><p>⑤ 如果使用的类或接口是java.lang包下定义的，则可以省略import结构</p><p>⑥ 如果使用的类或接口是本包下定义的，则可以省略import结构</p><p>⑦ 如果在源文件中，使用了不同包下的同名的类，则必须至少一个类需要以全类名的方式显示。</p><p>⑧ 使用”xxx.*”方式表明可以调用xxx包下的所有结构。但是如果使用的是xxx子包下的结构，则仍需要显式导入</p><p>⑨ <code>import static</code>：导入指定类或接口中的静态结构（属性或方法） </p><h3 id="三、OOP特征之封装性"><a href="#三、OOP特征之封装性" class="headerlink" title="三、OOP特征之封装性"></a>三、OOP特征之封装性</h3><h4 id="1-为什么要引入封装性？"><a href="#1-为什么要引入封装性？" class="headerlink" title="1 为什么要引入封装性？"></a>1 为什么要引入封装性？</h4><p>① 我们程序设计追求<strong>“高内聚，低耦合”</strong>。</p><p>高内聚 ：类的内部数据操作细节自己完成，不允许外部干涉；</p><p>低耦合 ：仅对外暴露少量的方法用于使用。</p><p>② 隐藏对象内部的复杂性，只对外公开简单的接口。便于外界调用，从而提高系统的可扩展性、可维护性。通俗的说，把该隐藏的隐藏起来，该暴露的暴露出来。这就是封装性的设计思想。</p><h4 id="2-封装性思想具体的代码体现"><a href="#2-封装性思想具体的代码体现" class="headerlink" title="2 封装性思想具体的代码体现"></a>2 封装性思想具体的代码体现</h4><p>体现一：将类的属性xxx私化(private),同时，提供公共的(public)方法来获取(getXxx)和设置(setXxx)此属性的值</p><p>体现二：不对外暴露的私有的方法</p><p>体现三：单例模式（将构造器私有化）</p><p>体现四：如果不希望类在包外被调用，可以将类设置为缺省的。</p><h4 id="3）Java规定的四种权限修饰符"><a href="#3）Java规定的四种权限修饰符" class="headerlink" title="3）Java规定的四种权限修饰符"></a>3）Java规定的四种权限修饰符</h4><p>① 权限从小到大顺序为：private &lt;  缺省 &lt; protected &lt; public</p><p>② 具体的修饰范围：</p><table><thead><tr><th align="center">修饰符</th><th align="center">内部类</th><th align="center">同一个包</th><th align="center">不同包的子类</th><th align="center">同一个工程</th></tr></thead><tbody><tr><td align="center">private</td><td align="center">Yes</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">（缺省）</td><td align="center">Yes</td><td align="center">Yes</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">protected</td><td align="center">Yes</td><td align="center">Yes</td><td align="center">Yes</td><td align="center"></td></tr><tr><td align="center">public</td><td align="center">Yes</td><td align="center">Yes</td><td align="center">Yes</td><td align="center">Yes</td></tr></tbody></table><p>③ 权限修饰符可用来修饰的结构</p><p>4种权限都可以用来修饰类的内部结构：属性、方法、构造器、内部类</p><p>修饰类的话，只能使用：缺省、public</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;面向对象学习的三条主线：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Java类及类的成员：&lt;strong&gt;属性&lt;/strong&gt;、&lt;strong&gt;方法&lt;/strong&gt;、&lt;strong&gt;构造器&lt;/strong&gt;；代码块、内部类&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;面向对象的三大特征：&lt;strong&gt;封装性&lt;/strong&gt;、继承性、多态性&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;其它关键字：&lt;strong&gt;this&lt;/strong&gt;、super、static、final、abstract、interface、&lt;strong&gt;package&lt;/strong&gt;、&lt;strong&gt;import&lt;/strong&gt;等&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】6-数组</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%916-%E6%95%B0%E7%BB%84/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%916-%E6%95%B0%E7%BB%84/</id>
    <published>2020-07-04T19:02:06.000Z</published>
    <updated>2020-08-15T03:02:15.461Z</updated>
    
    <content type="html"><![CDATA[<p>数组、一维数组、二维数组</p><a id="more"></a><h3 id="一、数组的概念"><a href="#一、数组的概念" class="headerlink" title="一、数组的概念"></a>一、数组的概念</h3><h4 id="1-数组的理解"><a href="#1-数组的理解" class="headerlink" title="1 数组的理解"></a>1 数组的理解</h4><p>数组 (<strong>Array</strong>) 是多个相同类型数据按一定顺序排列的集合，并使用一个名字命名，并通过编号的方式对这些数据进行统一管理。</p><h4 id="2-相关的概念"><a href="#2-相关的概念" class="headerlink" title="2 相关的概念"></a>2 相关的概念</h4><p>1）<strong>数组名</strong></p><p>2）<strong>元素</strong></p><p>3）<strong>索引</strong>：角标、下标、</p><p>4）<strong>数组的长度</strong>：元素的个数</p><h4 id="3-数组的特点"><a href="#3-数组的特点" class="headerlink" title="3 数组的特点"></a>3 数组的特点</h4><p>1）数组是有序排列的</p><p>2）数组属于<strong>引用数据类型</strong>的变量。数组的元素，既可以是基本数据类型，也可以是引用数据类型</p><p>3）创建数组对象会在内存中开辟一整块连续的空间</p><p>4）数组的长度一旦确定，就不能修改</p><h4 id="4-数组的分类"><a href="#4-数组的分类" class="headerlink" title="4 数组的分类"></a>4 数组的分类</h4><p>1）按照维数：一维数组、二维数组……</p><p>2）按照数组元素的类型：基本数据类型元素的数组、引用数据类型元素的数组</p><h3 id="二、一维数组"><a href="#二、一维数组" class="headerlink" title="二、一维数组"></a>二、一维数组</h3><h4 id="1-声明与初始化"><a href="#1-声明与初始化" class="headerlink" title="1 声明与初始化"></a>1 声明与初始化</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ids;<span class="comment">//声明</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//①静态初始化:数组的初始化和数组元素的赋值操作同时进行</span></span><br><span class="line">ids = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>,<span class="number">1004</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//②动态初始化:数组的初始化和数组元素的赋值操作分开进行</span></span><br><span class="line">String[] names = <span class="keyword">new</span> String[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[] arr4 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;<span class="comment">//类型推断</span></span><br></pre></td></tr></table></figure><h4 id="2-调用数组的指定位置的元素"><a href="#2-调用数组的指定位置的元素" class="headerlink" title="2 调用数组的指定位置的元素"></a>2 调用数组的指定位置的元素</h4><p>通过角标的方式调用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">names[<span class="number">0</span>] = <span class="string">"王铭"</span>;</span><br><span class="line">names[<span class="number">1</span>] = <span class="string">"王赫"</span>;</span><br><span class="line">names[<span class="number">2</span>] = <span class="string">"张学良"</span>;</span><br><span class="line">names[<span class="number">3</span>] = <span class="string">"孙居龙"</span>;</span><br><span class="line">names[<span class="number">4</span>] = <span class="string">"王宏志"</span>;</span><br></pre></td></tr></table></figure><h4 id="3-数组的长度"><a href="#3-数组的长度" class="headerlink" title="3 数组的长度"></a>3 数组的长度</h4><p>数组一旦初始化，其长度就是确定的，就不可修改。使用<code>arr.length</code>获取数组的长度。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(names.length);<span class="comment">//5</span></span><br><span class="line">System.out.println(ids.length);</span><br></pre></td></tr></table></figure><h4 id="4-遍历数组"><a href="#4-遍历数组" class="headerlink" title="4 遍历数组"></a>4 遍历数组</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; names.length;i++)&#123;</span><br><span class="line">System.out.println(names[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-数组元素的默认初始化值"><a href="#5-数组元素的默认初始化值" class="headerlink" title="5 数组元素的默认初始化值"></a>5 数组元素的默认初始化值</h4><p>1）数组元素是整型：0</p><p>2）数组元素是浮点型：0.0</p><p>3）数组元素是char型：0 或 ‘\u0000’，而非 ‘0’</p><p>4）数组元素是boolean型：false</p><p>5）数组元素是引用数据类型：null</p><h3 id="三、二维数组"><a href="#三、二维数组" class="headerlink" title="三、二维数组"></a>三、二维数组</h3><h4 id="1-理解二维数组"><a href="#1-理解二维数组" class="headerlink" title="1 理解二维数组"></a>1 理解二维数组</h4><p>一个一维数组A的元素如果还是一个一维数组类型的，则，此数组A称为二维数组</p><h4 id="2-声明与初始化"><a href="#2-声明与初始化" class="headerlink" title="2 声明与初始化"></a>2 声明与初始化</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">int[][] arr1;&#x2F;&#x2F;声明</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;静态初始化</span><br><span class="line">arr1 &#x3D; new int[][]&#123;&#123;1,2,3&#125;,&#123;4,5&#125;,&#123;6,7,8&#125;&#125;;</span><br><span class="line">&#x2F;&#x2F;动态初始化1</span><br><span class="line">String[][] arr2 &#x3D; new String[3][2];</span><br><span class="line">&#x2F;&#x2F;动态初始化2</span><br><span class="line">String[][] arr3 &#x3D; new String[3][];</span><br><span class="line"></span><br><span class="line">int[] arr4[] &#x3D; new int[][]&#123;&#123;1,2,3&#125;,&#123;4,5,9,10&#125;,&#123;6,7,8&#125;&#125;;&#x2F;&#x2F;也是正确的写法</span><br><span class="line">int[] arr5[] &#x3D; &#123;&#123;1,2,3&#125;,&#123;4,5&#125;,&#123;6,7,8&#125;&#125;;&#x2F;&#x2F;类型推断</span><br></pre></td></tr></table></figure><h4 id="3-调用数组的指定位置的元素"><a href="#3-调用数组的指定位置的元素" class="headerlink" title="3 调用数组的指定位置的元素"></a>3 调用数组的指定位置的元素</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(arr1[<span class="number">0</span>][<span class="number">1</span>]);<span class="comment">//2</span></span><br><span class="line">System.out.println(arr2[<span class="number">1</span>][<span class="number">1</span>]);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">arr3[<span class="number">1</span>] = <span class="keyword">new</span> String[<span class="number">4</span>];</span><br><span class="line">System.out.println(arr3[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">System.out.println(arr3[<span class="number">0</span>]);<span class="comment">//</span></span><br></pre></td></tr></table></figure><h4 id="4-数组的长度"><a href="#4-数组的长度" class="headerlink" title="4 数组的长度"></a>4 数组的长度</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(arr4.length);<span class="comment">//3</span></span><br><span class="line">System.out.println(arr4[<span class="number">0</span>].length);<span class="comment">//3</span></span><br><span class="line">System.out.println(arr4[<span class="number">1</span>].length);<span class="comment">//4</span></span><br></pre></td></tr></table></figure><h4 id="5-遍历二维数组元素"><a href="#5-遍历二维数组元素" class="headerlink" title="5 遍历二维数组元素"></a>5 遍历二维数组元素</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr4.length;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; arr4[i].length;j++)&#123;</span><br><span class="line">System.out.print(arr4[i][j] + <span class="string">"  "</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-默认初始化值"><a href="#6-默认初始化值" class="headerlink" title="6 默认初始化值"></a>6 默认初始化值</h4><p>二维数组分为外层数组的元素，内层数组的元素</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">外层元素：arr[<span class="number">0</span>],arr[<span class="number">1</span>]等</span><br><span class="line"></span><br><span class="line">内层元素：arr[<span class="number">0</span>][<span class="number">0</span>],arr[<span class="number">1</span>][<span class="number">2</span>]等</span><br></pre></td></tr></table></figure><p>1）针对于初始化方式一</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][<span class="number">3</span>];</span><br></pre></td></tr></table></figure><p>外层元素的初始化值为：<strong>地址值</strong></p><p>内层元素的初始化值为：与一维数组初始化情况相同</p><p>2）针对于初始化方式二</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][];</span><br></pre></td></tr></table></figure><p>外层元素的初始化值为：<strong>null</strong></p><p>内层元素的初始化值为：不能调用，否则报错。</p><h3 id="四、数组的常见算法"><a href="#四、数组的常见算法" class="headerlink" title="四、数组的常见算法"></a>四、数组的常见算法</h3><h4 id="1-数组的创建与元素赋值"><a href="#1-数组的创建与元素赋值" class="headerlink" title="1 数组的创建与元素赋值"></a>1 数组的创建与元素赋值</h4><p>杨辉三角（二维数组）、回形数（二维数组）、6个数，1-30之间随机生成且不重复。</p><h4 id="2-对于数值型的数组"><a href="#2-对于数值型的数组" class="headerlink" title="2 对于数值型的数组"></a>2 对于数值型的数组</h4><p>最大值、最小值、总和、平均数</p><h4 id="3-数组的赋值与复制"><a href="#3-数组的赋值与复制" class="headerlink" title="3 数组的赋值与复制"></a>3 数组的赋值与复制</h4><p><strong>1）赋值</strong></p><p>两个变量指向同一个数组的地址，修改一个数组的元素，另一个也跟着修改。</p><p><strong>2）复制</strong></p><p>两个独立的数组，数组的元素相同。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr1,arr2;</span><br><span class="line">arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//赋值</span></span><br><span class="line">arr2 = arr1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//复制</span></span><br><span class="line">arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[arr1.length];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr2.length;i++)&#123;</span><br><span class="line">arr2[i] = arr1[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-反转"><a href="#4-反转" class="headerlink" title="4 反转"></a>4 反转</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一：</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr.length / <span class="number">2</span>;i++)&#123;</span><br><span class="line">String temp = arr[i];</span><br><span class="line">arr[i] = arr[arr.length - i -<span class="number">1</span>];</span><br><span class="line">arr[arr.length - i -<span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法二：</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>,j = arr.length - <span class="number">1</span>;i &lt; j;i++,j--)&#123;</span><br><span class="line">String temp = arr[i];</span><br><span class="line">arr[i] = arr[j];</span><br><span class="line">arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-查找"><a href="#5-查找" class="headerlink" title="5 查找"></a>5 查找</h4><p><strong>1）线性查找</strong> </p><p><strong>实现思路</strong>：通过遍历的方式，一个一个的数据进行比较、查找</p><p><strong>适用性</strong>：具有普遍适用性。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isFlag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr.length;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(dest.equals(arr[i]))&#123;</span><br><span class="line">System.out.println(<span class="string">"找到了指定的元素，位置为："</span> + i);</span><br><span class="line">isFlag = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isFlag)&#123;</span><br><span class="line">System.out.println(<span class="string">"很遗憾，没有找到的啦！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）二分法查找</strong></p><p><strong>实现思路</strong>：每次比较中间值，折半的方式检索</p><p><strong>适用性</strong>：（前提：数组必须有序）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> head = <span class="number">0</span>;<span class="comment">//初始的首索引</span></span><br><span class="line"><span class="keyword">int</span> end = arr.length - <span class="number">1</span>;<span class="comment">//初始的末索引</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isFlag = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">while</span>(head &lt;= end)&#123;</span><br><span class="line"><span class="keyword">int</span> middle = (head + end)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(dest == arr[middle])&#123;</span><br><span class="line">System.out.println(<span class="string">"找到了指定的元素，位置为："</span> + middle);</span><br><span class="line">isFlag = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(arr[middle] &gt; dest1)&#123;</span><br><span class="line">end = middle - <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;<span class="comment">//arr[middle] &lt; dest1</span></span><br><span class="line">head = middle + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isFlag)&#123;</span><br><span class="line">System.out.println(<span class="string">"很遗憾，没有找到的啦！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-排序"><a href="#6-排序" class="headerlink" title="6 排序"></a>6 排序</h4><table><thead><tr><th align="center">排序算法</th><th align="center">平均时间复杂度</th><th align="center">最差时间复杂度</th><th align="center">空间复杂度</th><th align="center">数据对象稳定性</th></tr></thead><tbody><tr><td align="center">冒泡排序</td><td align="center">O(n2)</td><td align="center">O(n2)</td><td align="center">O(1)</td><td align="center">稳定</td></tr><tr><td align="center">选择排序</td><td align="center">O(n2)</td><td align="center">O(n2)</td><td align="center">O(1)</td><td align="center">数组不稳定、链表稳定</td></tr><tr><td align="center">插入排序</td><td align="center">O(n2)</td><td align="center">O(n2)</td><td align="center">O(1)</td><td align="center">稳定</td></tr><tr><td align="center">快速排序</td><td align="center">O(n*log2n)</td><td align="center">O(n2)</td><td align="center">O(log2n)</td><td align="center">不稳定</td></tr><tr><td align="center">堆排序</td><td align="center">O(n*log2n)</td><td align="center">O(n*log2n)</td><td align="center">O(1)</td><td align="center">不稳定</td></tr><tr><td align="center">归并排序</td><td align="center">O(n*log2n)</td><td align="center">O(n*log2n)</td><td align="center">O(n)</td><td align="center">稳定</td></tr><tr><td align="center">希尔排序</td><td align="center">O(n*log2n)</td><td align="center">O(n2)</td><td align="center">O(1)</td><td align="center">不稳定</td></tr><tr><td align="center">计数排序</td><td align="center">O(n+m)</td><td align="center">O(n+m)</td><td align="center">O(n+m)</td><td align="center">稳定</td></tr><tr><td align="center">桶排序</td><td align="center">O(n)</td><td align="center">O(n)</td><td align="center">O(m)</td><td align="center">稳定</td></tr><tr><td align="center">基数排序</td><td align="center">O(k*n)</td><td align="center">O(n2)</td><td align="center"></td><td align="center">稳定</td></tr></tbody></table><p><strong>1）冒泡排序</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; arr.length - <span class="number">1</span>;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; arr.length - <span class="number">1</span> - i;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[j] &gt; arr[j + <span class="number">1</span>])&#123;</span><br><span class="line"><span class="keyword">int</span> temp = arr[j];</span><br><span class="line">arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2）快速排序</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] data, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> temp = data[i];</span><br><span class="line">data[i] = data[j];</span><br><span class="line">data[j] = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">subSort</span><span class="params">(<span class="keyword">int</span>[] data, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (start &lt; end) &#123;</span><br><span class="line"><span class="keyword">int</span> base = data[start];</span><br><span class="line"><span class="keyword">int</span> low = start;</span><br><span class="line"><span class="keyword">int</span> high = end + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> (low &lt; end &amp;&amp; data[++low] - base &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line"><span class="keyword">while</span> (high &gt; start &amp;&amp; data[--high] - base &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line"><span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">swap(data, low, high);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">swap(data, start, high);</span><br><span class="line"></span><br><span class="line">subSort(data, start, high - <span class="number">1</span>);<span class="comment">//递归调用</span></span><br><span class="line">subSort(data, high + <span class="number">1</span>, end);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] data)</span></span>&#123;</span><br><span class="line">subSort(data,<span class="number">0</span>,data.length-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="五、Array工具类"><a href="#五、Array工具类" class="headerlink" title="五、Array工具类"></a>五、Array工具类</h3><p>Arrays 定义在 <code>java.util</code> 包下，提供了很多操作数组的方法</p><p>导包：<code>import java.util.Arrays;</code></p><h4 id="1-equals"><a href="#1-equals" class="headerlink" title="1 equals()"></a>1 equals()</h4><p><code>boolean equals(int[] a,int[] b)</code>: 判断两个数组是否相等</p><h4 id="2-toString"><a href="#2-toString" class="headerlink" title="2 toString()"></a>2 toString()</h4><p><code>String toString(int[] a)</code>: 输出数组信息</p><h4 id="3-fill"><a href="#3-fill" class="headerlink" title="3 fill()"></a>3 fill()</h4><p><code>void fill(int[] a,int val)</code>: 将指定值填充到数组之中</p><h4 id="4-sort"><a href="#4-sort" class="headerlink" title="4 sort()"></a>4 sort()</h4><p><code>void sort(int[] a)</code>: 对数组进行排序</p><h4 id="5-binarySearch"><a href="#5-binarySearch" class="headerlink" title="5 binarySearch()"></a>5 binarySearch()</h4><p><code>int binarySearch(int[] a,int key)</code>: 二分查找</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.boolean equals(int[] a,int[] b): 判断两个数组是否相等。</span></span><br><span class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">boolean</span> isEquals = Arrays.equals(arr1, arr2);</span><br><span class="line">System.out.println(isEquals);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.String toString(int[] a): 输出数组信息。</span></span><br><span class="line">System.out.println(Arrays.toString(arr1));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.void fill(int[] a,int val): 将指定值填充到数组之中。</span></span><br><span class="line">Arrays.fill(arr1,<span class="number">10</span>);</span><br><span class="line">System.out.println(Arrays.toString(arr1));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.void sort(int[] a): 对数组进行排序。</span></span><br><span class="line">Arrays.sort(arr2);</span><br><span class="line">System.out.println(Arrays.toString(arr2));</span><br><span class="line"></span><br><span class="line"><span class="comment">//5.int binarySearch(int[] a,int key)</span></span><br><span class="line"><span class="keyword">int</span>[] arr3 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">98</span>,-<span class="number">34</span>,<span class="number">2</span>,<span class="number">34</span>,<span class="number">54</span>,<span class="number">66</span>,<span class="number">79</span>,<span class="number">105</span>,<span class="number">210</span>,<span class="number">333</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> index = Arrays.binarySearch(arr3, <span class="number">210</span>);</span><br><span class="line"><span class="keyword">if</span>(index &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"未找到"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="六、数组的常见异常"><a href="#六、数组的常见异常" class="headerlink" title="六、数组的常见异常"></a>六、数组的常见异常</h3><h4 id="1-数组角标越界异常"><a href="#1-数组角标越界异常" class="headerlink" title="1 数组角标越界异常"></a>1 数组角标越界异常</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//System.out.println(arr[-2]);//ArrayIndexOutOfBoundsException</span></span><br></pre></td></tr></table></figure><h4 id="2-空指针异常"><a href="#2-空指针异常" class="headerlink" title="2 空指针异常"></a>2 空指针异常</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况一：</span></span><br><span class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">arr1 = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">//System.out.println(arr1[0]);//NullPointerException</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//情况二：</span></span><br><span class="line"><span class="keyword">int</span>[][] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][];</span><br><span class="line"><span class="comment">//System.out.println(arr2[0][0]);//NullPointerException</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;数组、一维数组、二维数组&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】5-流程控制之循环结构</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%915-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B9%8B%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%915-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B9%8B%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84/</id>
    <published>2020-07-04T19:02:05.000Z</published>
    <updated>2020-08-15T03:07:01.928Z</updated>
    
    <content type="html"><![CDATA[<p>循环结构：for 循环结构、while 循环结构、do-while 循环结构、嵌套循环</p><a id="more"></a><h3 id="一、循环结构的四要素"><a href="#一、循环结构的四要素" class="headerlink" title="一、循环结构的四要素"></a>一、循环结构的四要素</h3><p>① 初始化条件<br>② 循环条件  —&gt;是boolean类型<br>③ 循环体<br>④ 迭代条件</p><p><strong>说明</strong>：通常情况下，循环结束都是因为②中循环条件返回 <code>false</code>了。</p><h3 id="二、for-循环结构"><a href="#二、for-循环结构" class="headerlink" title="二、for 循环结构"></a>二、for 循环结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(①;②;④)&#123;</span><br><span class="line">③</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>执行过程</strong>：① - ② - ③ - ④ - ② - ③ - ④ - … - ②</p><h3 id="三、while-循环结构"><a href="#三、while-循环结构" class="headerlink" title="三、while 循环结构"></a>三、while 循环结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">①</span><br><span class="line"><span class="keyword">while</span>(②)&#123;</span><br><span class="line">③;</span><br><span class="line">④;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>执行过程</strong>：① - ② - ③ - ④ - ② - ③ - ④ - … - ②</p><p><strong>说明</strong></p><p>1）写while循环千万小心不要丢了迭代条件。一旦丢了，就可能导致死循环！<br>2）我们写程序，要避免出现死循环。<br>3）for循环和while循环是可以相互转换的！ </p><blockquote><p>for 和 while 循环总结：</p><p>1）开发中，基本上我们都会从for、while中进行选择，实现循环结构。</p><p>2）for循环和while循环是可以相互转换的！ </p><p>3）我们写程序，要避免出现死循环。</p><p>4）<strong>区别</strong>：for循环和while循环的初始化条件部分的作用范围不同。</p></blockquote><h3 id="四、do-while-循环结构"><a href="#四、do-while-循环结构" class="headerlink" title="四、do-while 循环结构"></a>四、do-while 循环结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">①</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">③;</span><br><span class="line">④;</span><br><span class="line">&#125;<span class="keyword">while</span>(②);</span><br></pre></td></tr></table></figure><p><strong>执行过程</strong>：① - ③ - ④ - ② - ③ - ④ - … - ②</p><p><strong>说明</strong><br>1）do-while 循环至少会执行一次循环体！<br>2）开发中，使用 for 和 while 更多一些。较少使用 do-while</p><h3 id="五、嵌套循环"><a href="#五、嵌套循环" class="headerlink" title="五、嵌套循环"></a>五、嵌套循环</h3><p><strong>1 嵌套循环</strong>：将一个循环结构A声明在另一个循环结构B的循环体中,就构成了嵌套循环</p><p>1）<strong>外层循环</strong>：循环结构B</p><p>2）<strong>内层循环</strong>：循环结构A</p><p><strong>2 说明</strong></p><p>1）内层循环结构遍历一遍，只相当于外层循环循环体执行了一次</p><p>2）假设外层循环需要执行m次，内层循环需要执行n次。此时内层循环的循环体一共执行了m * n次</p><p>3）外层循环控制行数，内层循环控制列数</p><h3 id="六、break-和-continue-关键字"><a href="#六、break-和-continue-关键字" class="headerlink" title="六、break 和 continue 关键字"></a>六、break 和 continue 关键字</h3><table><thead><tr><th align="center"></th><th align="center">使用范围</th><th align="center">循环中的作用</th><th align="center">相同点</th></tr></thead><tbody><tr><td align="center">break</td><td align="center">switch-case、循环结构中</td><td align="center">结束当前循环</td><td align="center">关键字后面不能声明执行语句</td></tr><tr><td align="center">continue</td><td align="center">循环结构中</td><td align="center">结束当次循环</td><td align="center">关键字后面不能声明执行语句</td></tr></tbody></table><blockquote><p><strong>“无限循环”结构</strong>: while(true) 或 for(;;)</p><p><strong>总结</strong>：如何结束一个循环结构？<br>​    方式一：当循环条件是false时<br>​    方式二：在循环体中，执行break</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;循环结构：for 循环结构、while 循环结构、do-while 循环结构、嵌套循环&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】4-流程控制之分支结构</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%914-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B9%8B%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%914-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B9%8B%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84/</id>
    <published>2020-07-04T19:02:04.000Z</published>
    <updated>2020-08-15T03:06:05.588Z</updated>
    
    <content type="html"><![CDATA[<p>分支结构：if-else 条件判断结构、switch-case 选择结构</p><a id="more"></a><h3 id="一、if-else-条件判断结构"><a href="#一、if-else-条件判断结构" class="headerlink" title="一、if-else 条件判断结构"></a>一、if-else 条件判断结构</h3><p>分支结构中的if-else（条件判断结构）</p><h4 id="1-三种结构"><a href="#1-三种结构" class="headerlink" title="1 三种结构"></a>1 三种结构</h4><p>① 第一种：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">执行表达式</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>② 第二种：二选一</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">执行表达式<span class="number">1</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">执行表达式<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③ 第三种：n选一</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">执行表达式<span class="number">1</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">执行表达式<span class="number">2</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(条件表达式)&#123;</span><br><span class="line">执行表达式<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">执行表达式n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>产生<strong>随机数</strong>：使用 Math.random() → [0.0 - 1.0)</p><p>公式：[a,b] → (int)(Math.random() * (b - a + 1) ) + a</p></blockquote><h4 id="2-说明"><a href="#2-说明" class="headerlink" title="2 说明"></a>2 说明</h4><p>1）else 结构是可选的。</p><p>2）针对于条件表达式：</p><p>​    如果多个条件表达式之间是“互斥”关系(或没有交集的关系)，哪个判断和执行语句声明顺序无所谓。<br>​    如果多个条件表达式之间有交集的关系，需要根据实际情况，考虑清楚应该将哪个结构先声明。<br>​    如果多个条件表达式之间有包含的关系，通常情况下，需要将范围小声明在范围大的前面。否则，范围小的就没机会执行了。</p><p>3）if-else结构是可以相互嵌套的。</p><p>4）如果if-else结构中的执行语句只有一行时，对应的一对{}可以省略的。但是，不建议大家省略。</p><h3 id="二、switch-case-选择结构"><a href="#二、switch-case-选择结构" class="headerlink" title="二、switch-case 选择结构"></a>二、switch-case 选择结构</h3><h4 id="1-格式"><a href="#1-格式" class="headerlink" title="1 格式"></a>1 格式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line"><span class="keyword">case</span> 常量<span class="number">1</span>:</span><br><span class="line">执行语句<span class="number">1</span>;</span><br><span class="line"><span class="comment">//break;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> 常量<span class="number">2</span>:</span><br><span class="line">执行语句<span class="number">2</span>;</span><br><span class="line"><span class="comment">//break;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">执行语句n;</span><br><span class="line"><span class="comment">//break;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-说明-1"><a href="#2-说明-1" class="headerlink" title="2 说明"></a>2 说明</h4><p>1）根据switch表达式中的值，依次匹配各个case中的常量。一旦匹配成功，则进入相应case结构中，调用其执行语句。<br>    当调用完执行语句以后，则仍然继续向下执行其他case结构中的执行语句，直到遇到break关键字或此switch-case结构末尾结束为止。</p><p>2）<code>break</code>：可以使用在switch-case结构中，表示一旦执行到此关键字，就跳出switch-case结构</p><p>3）switch结构中的表达式，只能是如下的6种数据类型之一：<code>byte 、short、char、int、枚举类型(JDK5.0新增)、String类型(JDK7.0新增)</code></p><p>4）case 之后只能声明常量。不能声明范围。</p><p>5）break关键字是可选的。</p><p>6）<code>default</code>：相当于if-else结构中的else；default结构是可选的，而且位置是灵活的。</p><blockquote><p><strong>注意</strong></p><p>1）凡是可以使用switch-case的结构，都可以转换为if-else。反之，不成立。</p><p>2）我们写分支结构时，当发现既可以使用switch-case,（同时，switch中表达式的取值情况不太多），又可以使用if-else时，我们优先选择使用switch-case。原因：switch-case执行效率稍高。</p><p>3）如果switch-case结构中的多个case的执行语句相同，则可以考虑进行合并。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;分支结构：if-else 条件判断结构、switch-case 选择结构&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】3-运算符</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%913-%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%913-%E8%BF%90%E7%AE%97%E7%AC%A6/</id>
    <published>2020-07-04T19:02:03.000Z</published>
    <updated>2020-08-15T03:27:27.848Z</updated>
    
    <content type="html"><![CDATA[<p>算数运算符、赋值运算符、比较运算符、逻辑运算符、位运算符、三元运算符</p><a id="more"></a><h3 id="一、算术运算符"><a href="#一、算术运算符" class="headerlink" title="一、算术运算符"></a>一、算术运算符</h3><table><thead><tr><th align="center"><code>+</code></th><th align="center"><code>-</code></th><th align="center"><code>+</code></th><th align="center"><code>-</code></th><th align="center"><code>*</code></th><th align="center"><code>/</code></th><th align="center"><code>%</code></th><th align="center"><code>++</code></th><th align="center"><code>--</code></th><th align="center"><code>++</code></th><th align="center"><code>--</code></th><th align="center"><code>+</code></th></tr></thead><tbody><tr><td align="center">正号</td><td align="center">负号</td><td align="center">加</td><td align="center">减</td><td align="center">乘</td><td align="center">除</td><td align="center">取余</td><td align="center">前自增</td><td align="center">前自减</td><td align="center">后自增</td><td align="center">后自减</td><td align="center">字符串连接</td></tr></tbody></table><p><strong>1 自增</strong></p><p>​    (前)++：先自增1，后运算<br>​    (后)++：先运算，后自增1</p><p><strong>2 自减</strong></p><p>​    (前)–：先自减1，后运算<br>​    (后)–：先运算，后自减1</p><p><strong>3 连接符</strong>：+（只能使用在String与其他数据类型变量之间使用）</p><h3 id="二、赋值运算符"><a href="#二、赋值运算符" class="headerlink" title="二、赋值运算符"></a>二、赋值运算符</h3><p><code>=</code>、<code>+=</code>、<code>-=</code>、<code>*=</code>、<code>/=</code>、<code>%=</code></p><blockquote><p><strong>注意</strong>：运算的结果不会改变变量本身的数据类型</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开发中，如果希望变量实现+2的操作，有几种方法？(前提：int num = 10;)</span></span><br><span class="line"><span class="comment">//方式一：num = num + 2;</span></span><br><span class="line"><span class="comment">//方式二：num += 2; (推荐)</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开发中，如果希望变量实现+1的操作，有几种方法？(前提：int num = 10;)</span></span><br><span class="line"><span class="comment">//方式一：num = num + 1;</span></span><br><span class="line"><span class="comment">//方式二：num += 1; </span></span><br><span class="line"><span class="comment">//方式三：num++; (推荐)</span></span><br></pre></td></tr></table></figure><h3 id="三、比较运算符"><a href="#三、比较运算符" class="headerlink" title="三、比较运算符"></a>三、比较运算符</h3><p>也叫<strong>关系运算符</strong></p><p><code>==</code>、<code>!=</code>、<code>&lt;</code>、<code>&gt;</code>、<code>&lt;=</code>、<code>&gt;=</code>、<code>instanceof</code></p><blockquote><p>比较运算符的结果都是 boolean 型</p><ol><li><p>&lt;、&gt;=、&lt;= :只能使用在数值类型的数据之间。</p></li><li><p>== 和 !=: 不仅可以使用在数值类型数据之间，还可以使用在其他引用类型变量之间。</p></li></ol></blockquote><h3 id="四、逻辑运算符"><a href="#四、逻辑运算符" class="headerlink" title="四、逻辑运算符"></a>四、逻辑运算符</h3><table><thead><tr><th align="center"><code>&amp;</code></th><th align="center"><code>&amp;&amp;</code></th><th align="center"><code>|</code></th><th align="center"><code>||</code></th><th align="center"><code>!</code></th><th align="center"><code>^</code></th></tr></thead><tbody><tr><td align="center">逻辑与</td><td align="center">短路与</td><td align="center">逻辑或</td><td align="center">短路或</td><td align="center">逻辑非</td><td align="center">逻辑异或</td></tr></tbody></table><blockquote><p>逻辑运算符操作的都是boolean类型的变量，而且结果也是boolean类型</p></blockquote><h3 id="五、位运算符"><a href="#五、位运算符" class="headerlink" title="五、位运算符"></a>五、位运算符</h3><table><thead><tr><th align="center"><code>&lt;&lt;</code></th><th align="center"><code>&gt;&gt;</code></th><th align="center"><code>&gt;&gt;&gt;</code></th><th align="center"><code>&amp;</code></th><th align="center"><code>|</code></th><th align="center"><code>^</code></th><th align="center"><code>~</code></th></tr></thead><tbody><tr><td align="center">左移</td><td align="center">右移</td><td align="center">无符号右移</td><td align="center">与运算</td><td align="center">或运算</td><td align="center">异或运算</td><td align="center">取反运算</td></tr></tbody></table><p><strong>注</strong>：无<code>&lt;&lt;&lt;</code></p><blockquote><p>位运算是直接对整数的二进制进行的运算，操作的都是整型的数据</p><ol><li>&lt;&lt;：在一定范围内，每向左移1位，相当于 * 2</li><li>&gt;&gt;：在一定范围内，每向右移1位，相当于 / 2</li></ol></blockquote><h3 id="六、三元运算符"><a href="#六、三元运算符" class="headerlink" title="六、三元运算符"></a>六、三元运算符</h3><p><strong>格式</strong>：<code>(条件表达式)?表达式 1 : 表达式 2;</code></p><p><strong>1</strong> 条件表达式的结果为 <strong>boolean</strong> 类型 </p><p><strong>2</strong> 根据条件表达式真或假，决定执行表达式1，还是表达式2.</p><p>​     如果表达式为true，则执行表达式1。<br>​     如果表达式为false，则执行表达式2。</p><p><strong>3</strong> 表达式1 和表达式2要求是一致的。</p><p><strong>4</strong> 三元运算符可以嵌套使用</p><p><strong>5</strong> 凡是可以使用三元运算符的地方，都可以改写为if-else；反之，不成立。</p><p><strong>6</strong> 如果程序既可以使用三元运算符，又可以使用if-else结构，那么优先选择三元运算符。原因：简洁、执行效率高。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;算数运算符、赋值运算符、比较运算符、逻辑运算符、位运算符、三元运算符&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】2-变量</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%912-%E5%8F%98%E9%87%8F/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%912-%E5%8F%98%E9%87%8F/</id>
    <published>2020-07-04T19:02:02.000Z</published>
    <updated>2020-08-15T01:15:07.085Z</updated>
    
    <content type="html"><![CDATA[<p>关键字、保留字、标识符、变量、自动类型转换、强制类型转换</p><a id="more"></a><h3 id="一、关键字与保留字"><a href="#一、关键字与保留字" class="headerlink" title="一、关键字与保留字"></a>一、关键字与保留字</h3><h4 id="1-关键字-keyword"><a href="#1-关键字-keyword" class="headerlink" title="1 关键字(keyword)"></a>1 关键字(keyword)</h4><p><strong>定义</strong></p><p>​     被 Java 语言赋予了特殊含义，用做专门用途的字符串（单词）</p><p><strong>特点</strong></p><p>​    关键字中所有字母都为<strong>小写</strong></p><p><strong><a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html" target="_blank" rel="noopener">官方地址</a></strong></p><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%912-%E5%8F%98%E9%87%8F/../images/%E5%85%B3%E9%94%AE%E5%AD%971.png" alt="关键字1"></p><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%912-%E5%8F%98%E9%87%8F/../images/%E5%85%B3%E9%94%AE%E5%AD%972.png" alt="关键字2"></p><h4 id="2-保留字-reserved-word"><a href="#2-保留字-reserved-word" class="headerlink" title="2 保留字(reserved word)"></a>2 保留字(reserved word)</h4><p><strong>保留字</strong></p><p>​    现有 Java 版本尚未使用,但以后版本可能会作为关键字使用。自己命名标识符时要避免使用这些保留字</p><ul><li><strong>goto</strong> 、 <strong>const</strong></li><li>命名标识符时要避免使用这些保留字</li></ul><h3 id="二、标识符-Identifier"><a href="#二、标识符-Identifier" class="headerlink" title="二、标识符 (Identifier)"></a>二、标识符 (Identifier)</h3><h4 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h4><p>​    Java 对各种变量、方法和类等要素命名时使用的字符序列称为<strong>标识符</strong></p><blockquote><p>凡是自己可以起名字的地方都叫<strong>标识符</strong></p><p>包名、类名、接口名、变量名、方法名、常量名</p></blockquote><h4 id="2-规则"><a href="#2-规则" class="headerlink" title="2 规则"></a>2 规则</h4><ul><li>由 26 个英文字母大小写， 0 9 或 $ 组成</li><li>数字不可以开头。</li><li>不可以使用关键字和保留字，但能包含关键字和保留字。</li><li>Java 中严格区分大小写，长度无限制。</li><li>标识符不能包含空格。</li></ul><h4 id="3-命名规范"><a href="#3-命名规范" class="headerlink" title="3 命名规范"></a>3 命名规范</h4><ul><li>包名：<code>xxxyyyzzz</code></li><li>类名、接口名：<code>XxxYyyZzz</code></li><li>变量名、方法名：<code>xxxYyyZzz</code></li><li>常亮名：<code>XXX_YYY_ZZZ</code></li></ul><blockquote><p>在起名字时，为了提高阅读性，要尽量意义，“见名知意”。</p></blockquote><h3 id="三、变量"><a href="#三、变量" class="headerlink" title="三、变量"></a>三、变量</h3><h4 id="1-定义变量"><a href="#1-定义变量" class="headerlink" title="1 定义变量"></a>1 定义变量</h4><p><strong>格式</strong></p><ol><li>数据类型  变量名 = 变量值;</li><li>数据类型  变量名;<br>变量名 = 变量值;<blockquote><p><strong>注意</strong></p><ol><li>变量必须先声明，后使用</li><li>变量都定义在其<strong>作用域</strong>内</li><li>同一个作用域内，不可以声明两个同名的变量</li></ol></blockquote></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//变量的定义</span></span><br><span class="line"><span class="keyword">int</span> myAge = <span class="number">22</span>;</span><br><span class="line"><span class="comment">//变量的使用</span></span><br><span class="line">System.out.println(myAge);</span><br><span class="line"></span><br><span class="line"><span class="comment">//变量的声明</span></span><br><span class="line"><span class="keyword">int</span> myNumber;</span><br><span class="line"><span class="comment">//System.out.println(myNnmber);//赋值后才能使用</span></span><br><span class="line"><span class="comment">//变量的赋值</span></span><br><span class="line">myNumber = <span class="number">1001</span>;</span><br><span class="line">System.out.println(myNumber);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span> <span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//作用域不同，可以定义同名变量</span></span><br><span class="line"><span class="comment">//变量的定义</span></span><br><span class="line"><span class="keyword">int</span> myAge = <span class="number">22</span>;</span><br><span class="line"><span class="comment">//变量的使用</span></span><br><span class="line">System.out.println(myAge);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-变量的分类"><a href="#2-变量的分类" class="headerlink" title="2 变量的分类"></a>2 变量的分类</h4><h5 id="按数据类型分类"><a href="#按数据类型分类" class="headerlink" title="按数据类型分类"></a>按数据类型分类</h5><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%912-%E5%8F%98%E9%87%8F/../images/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" alt="数据类型"></p><h5 id="按声明的位置分类"><a href="#按声明的位置分类" class="headerlink" title="*按声明的位置分类"></a>*按声明的位置分类</h5><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%912-%E5%8F%98%E9%87%8F/../images/%E5%8F%98%E9%87%8F.png" alt="变量"></p><h4 id="3-基本数据类型"><a href="#3-基本数据类型" class="headerlink" title="3 基本数据类型"></a>3 基本数据类型</h4><h5 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h5><table><thead><tr><th align="center">byte</th><th align="center">short</th><th align="center">int</th><th align="center">long</th></tr></thead><tbody><tr><td align="center">1字节</td><td align="center">2字节</td><td align="center">4字节</td><td align="center">8字节</td></tr></tbody></table><blockquote><ol><li>byte范围：-128 ~ 127</li><li>声明long型变量，必须以”l”或”L”结尾</li><li>通常，定义整型变量时，使用int型。</li><li>整型的常量，默认类型是：int型</li></ol></blockquote><h5 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h5><table><thead><tr><th align="center">float</th><th align="center">double</th></tr></thead><tbody><tr><td align="center">4字节</td><td align="center">8字节</td></tr></tbody></table><blockquote><ol><li>浮点型，表示带小数点的数值</li><li>float表示数值的范围比long还大</li><li>定义float类型变量时，变量要以”f”或”F”结尾</li><li>通常，定义浮点型变量时，使用double型。</li><li>浮点型的常量，默认类型为：double</li></ol></blockquote><h5 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h5><table><thead><tr><th align="left">char</th></tr></thead><tbody><tr><td align="left">定义char型变量，通常使用一对’’,内部只能写一个字符</td></tr><tr><td align="left">表示方式：1. 声明一个字符 2. 转义字符 3. 直接使用 Unicode 值来表示字符型常量</td></tr></tbody></table><h5 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h5><table><thead><tr><th align="left">boolean</th></tr></thead><tbody><tr><td align="left">只能取两个值之一：true 、 false</td></tr><tr><td align="left">常常在条件判断、循环结构中使用</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest1</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//基本数据类型</span></span><br><span class="line"><span class="comment">//整型：byte 1字节 -128 ~ 127</span></span><br><span class="line"><span class="keyword">byte</span> b1 = <span class="number">12</span>;</span><br><span class="line"><span class="comment">//byte b2 = 128;</span></span><br><span class="line">System.out.println(b1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//整型：short 2字节</span></span><br><span class="line"><span class="comment">//整型：int 4字节</span></span><br><span class="line"><span class="comment">//整型：long 8字节 以'l'或'L'结尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通常，定义整型变量时，使用int型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> l1 = <span class="number">123456789098765432L</span>;</span><br><span class="line"><span class="comment">//long l2 = 987654321012345678;</span></span><br><span class="line">System.out.println(l1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//浮点型：float 4字节 以'f'或'F'结尾</span></span><br><span class="line"><span class="comment">//浮点型：double 8字节</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通常，定义浮点型变量时，使用double型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> f1 = <span class="number">123.45f</span>;</span><br><span class="line"><span class="comment">//float f2 = 678.90;</span></span><br><span class="line">System.out.println(f1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//字符型：char 1字符=2字节 用一对单引号''</span></span><br><span class="line"><span class="comment">//表示方式：</span></span><br><span class="line"><span class="comment">//1.声明一个字符 </span></span><br><span class="line"><span class="comment">//2.转义字符 </span></span><br><span class="line"><span class="comment">//3.直接使用 Unicode 值来表示字符型常量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c1 = <span class="string">'A'</span>;</span><br><span class="line"><span class="comment">//char c2 = 'ab';</span></span><br><span class="line">System.out.println(c1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c3 = <span class="string">'1'</span>;</span><br><span class="line"><span class="keyword">char</span> c4 = <span class="string">'の'</span>;</span><br><span class="line"><span class="keyword">char</span> c5 = <span class="string">'中'</span>;</span><br><span class="line">System.out.println(c3);</span><br><span class="line">System.out.println(c4);</span><br><span class="line">System.out.println(c5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c6 = <span class="string">'\n'</span>;</span><br><span class="line"><span class="keyword">char</span> c7 = <span class="string">'\t'</span>;</span><br><span class="line"><span class="keyword">char</span> c8 = <span class="string">'\u1001'</span>;</span><br><span class="line">System.out.println(<span class="string">"***"</span> + c6 + <span class="string">"***"</span>);</span><br><span class="line">System.out.println(<span class="string">"***"</span> + c7 + <span class="string">"***"</span>);</span><br><span class="line">System.out.println(c8);</span><br><span class="line"></span><br><span class="line"><span class="comment">//布尔型：boolean true/false </span></span><br><span class="line"><span class="comment">//常常在条件判断、循环结构中使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isMale = <span class="keyword">true</span>;</span><br><span class="line">System.out.println(isMale);</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isMarried = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">if</span> (isMarried)&#123;</span><br><span class="line">System.out.println(<span class="string">"Go home"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">System.out.println(<span class="string">"Go party"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四、自动类型转换"><a href="#四、自动类型转换" class="headerlink" title="四、自动类型转换"></a>四、自动类型转换</h3><p>当容量小的数据类型的变量与容量大的数据类型的变量做运算时，结果自动提升为容量大的数据类型。<br>    <code>byte 、char 、short --&gt; int --&gt; long --&gt; float --&gt; double</code><br><strong>特别的</strong>：当byte、char、short三种类型的变量做运算时，结果为int型</p><blockquote><p>此时的容量大小指的是，表示数的范围的大和小。比如：float容量要大于long的容量</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest2</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> b1 = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> i1 = <span class="number">129</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i2 = b1 + i1;</span><br><span class="line"><span class="keyword">long</span> l = b1 + i1;</span><br><span class="line"><span class="keyword">float</span> f = b1 + i1;</span><br><span class="line">System.out.println(i2);</span><br><span class="line">System.out.println(l);</span><br><span class="line">System.out.println(f);</span><br><span class="line"></span><br><span class="line"><span class="keyword">short</span> s1 = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">double</span> d1 = s1;</span><br><span class="line">System.out.println(d1);<span class="comment">//123.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//***************特别地*********************</span></span><br><span class="line"><span class="keyword">char</span> c1 = <span class="string">'a'</span>;<span class="comment">//97</span></span><br><span class="line"><span class="keyword">int</span> i3 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> i4 = c1 + i3;</span><br><span class="line">System.out.println(i4);</span><br><span class="line"></span><br><span class="line"><span class="keyword">short</span> s2 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">byte</span> b2 = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//char c3 = c1 + b2;//编译不通过</span></span><br><span class="line"><span class="comment">//short s3 = b2 + s2;//编译不通过</span></span><br><span class="line"><span class="comment">//short s4 = b1 + b2;//编译不通过</span></span><br><span class="line"><span class="comment">//****************************************</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="五、强制类型转换"><a href="#五、强制类型转换" class="headerlink" title="五、强制类型转换"></a>五、强制类型转换</h3><p><strong>强转符</strong>：()</p><blockquote><p><strong>注意</strong>：强制类型转换，可能导致精度损失。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VariableTest3</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> d1 = <span class="number">12.9</span>;</span><br><span class="line"><span class="comment">//精度损失举例1</span></span><br><span class="line"><span class="keyword">int</span> i1 = (<span class="keyword">int</span>)d1;<span class="comment">//截断操作</span></span><br><span class="line">System.out.println(i1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//没有精度损失</span></span><br><span class="line"><span class="keyword">long</span> l1 = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">short</span> s2 = (<span class="keyword">short</span>)l1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//精度损失举例2</span></span><br><span class="line"><span class="keyword">int</span> i2 = <span class="number">128</span>;</span><br><span class="line"><span class="keyword">byte</span> b = (<span class="keyword">byte</span>)i2;</span><br><span class="line">System.out.println(b);<span class="comment">//-128</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关键字、保留字、标识符、变量、自动类型转换、强制类型转换&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】1-第一个Java程序</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%911-%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E7%A8%8B%E5%BA%8F/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%911-%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E7%A8%8B%E5%BA%8F/</id>
    <published>2020-07-04T19:02:01.000Z</published>
    <updated>2020-08-15T00:58:44.984Z</updated>
    
    <content type="html"><![CDATA[<p><strong>国际惯例</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打印 Hello World</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="一、第一个Java程序"><a href="#一、第一个Java程序" class="headerlink" title="一、第一个Java程序"></a>一、第一个Java程序</h3><h4 id="1-编译运行过程"><a href="#1-编译运行过程" class="headerlink" title="1 编译运行过程"></a>1 编译运行过程</h4><p>① 将 Java 代码编写到扩展名为 .java 的文件中。</p><p>② 通过 javac 命令对该 java 文件进行<strong>编译</strong> 。</p><p>③ 通过 java 命令对生成的 class 文件进行<strong>运行</strong> 。</p><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%911-%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E7%A8%8B%E5%BA%8F/../images/%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="编译运行过程"></p><h4 id="2-具体步骤"><a href="#2-具体步骤" class="headerlink" title="2 具体步骤"></a>2 具体步骤</h4><p><strong>步骤一</strong>：打开记事本，输入以上代码，保存为 <code>HelloWorld.java</code></p><p><strong>步骤二</strong>：在保存文件的位置打开命令行，输入<code>javac HelloWorld.java</code>，会生成一个HelloWorld.class文件</p><p><strong>步骤三</strong>：命令行继续输入<code>java HelloWorld</code></p><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%911-%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E7%A8%8B%E5%BA%8F/../images/helloworld.png" alt="helloworld"></p><h3 id="二、注释"><a href="#二、注释" class="headerlink" title="二、注释"></a>二、注释</h3><h4 id="1-单行注释"><a href="#1-单行注释" class="headerlink" title="1 单行注释"></a>1 单行注释</h4><p>​    <strong>格式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注释文字</span></span><br></pre></td></tr></table></figure><h4 id="2-多行注释"><a href="#2-多行注释" class="headerlink" title="2 多行注释"></a>2 多行注释</h4><p>​    <strong>格式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">注释文字 </span></span><br><span class="line"><span class="comment">注释文字 </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="3-文档注释"><a href="#3-文档注释" class="headerlink" title="3 文档注释"></a>3 文档注释</h4><p>​    <strong>格式</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"><span class="doctag">@author</span> 指定 java 程序的作者</span></span><br><span class="line"><span class="comment"><span class="doctag">@version</span> 指定源文件的版本</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><blockquote><p>注释内容可以被 JDK 提供的工具 javadoc 所解析，生成一套以网页文件形式体现的该程序的说明文档。</p></blockquote><p>​    <strong>操作方式</strong>：<code>javadoc -d mydoc -author -version HelloWorld.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Java注释的三种方式：</span></span><br><span class="line"><span class="comment">①单行注释</span></span><br><span class="line"><span class="comment">②多行注释</span></span><br><span class="line"><span class="comment">③文档注释（Java特有）</span></span><br><span class="line"><span class="comment">生成文档：javadoc -d mydoc -author -version HelloJava.java</span></span><br><span class="line"><span class="comment">mydoc为文档目录</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*****这属于多行注释*****</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"><span class="doctag">@author</span> Ding</span></span><br><span class="line"><span class="comment"><span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*****这属于文档注释*****</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloJava</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main方法是程序的入口*****这属于单行注释*****</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印HelloJava</span></span><br><span class="line">System.out.println(<span class="string">"HelloJava"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="附"><a href="#附" class="headerlink" title="附"></a>附</h3><p><strong>Tips | 文件资源管理器</strong></p><p>①<code>win + E</code>打开文件资源管理器</p><p>②在地址栏输入 <code>cmd</code> 回车即可打开<strong>命令行</strong></p><p>③在查看工具栏中，打开<code>隐藏/显示</code>中的 <code>文件扩展名</code></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;国际惯例&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 打印 Hello World&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;HelloWorld&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【Java基础】0-Java语言概述</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%910-Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%910-Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/</id>
    <published>2020-07-04T19:02:00.000Z</published>
    <updated>2020-08-15T04:28:26.664Z</updated>
    
    <content type="html"><![CDATA[<p>Java 是 SUN (Stanford University Network, 斯坦福大学网络公司) 1995 年推出的一门高级编程语言。</p><p><a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener"><strong>TIOBE 指数</strong></a></p><a id="more"></a><h3 id="一、Java简史"><a href="#一、Java简史" class="headerlink" title="一、Java简史"></a>一、Java简史</h3><p>1991 年，Green 项目，开发语言最初命名为 Oak ( 橡树 )<br>1994 年，开发组意识到 Oak 非常适合于互联网<br>1996 年，发布 JDK 1.0，约 8.3 万个网页应用 Java 技术来制作<br>1997 年，发布 JDK 1.1 JavaOne 会议召开，创当时全球同类会议规模之最<br>1998 年，发布 JDK 1.2 ，同年发布企业平台 J2EE<br>1999 年， Java 分成 J2SE 、 J2EE 和 J2ME JSP/Servlet 技术诞生<br><strong>2004 年，发布里程碑式版本： JDK 1.5 为突出此版本的重要性，更名为 JDK 5.0</strong><br>2005 年， J2SE –&gt; JavaSE；J2EE –&gt; JavaEE；J2ME –&gt; JavaME<br>2009 年， Oracle 公司收购 SUN，交易价格 74 亿美元<br>2011 年，发布 JDK 7.0<br><strong>2014 年，发布 JDK 8.0 ，是继 JDK 5.0 以来变化最大的版本</strong><br>2017 年，发布 JDK 9.0 ，最大限度实现模块化<br>2018 年 3 月，发布 JDK 10.0 ，版本号也称为 18.3<br>2018 年 9 月，发布 JDK 11.0 ，版本号也称为 18.9<br>2019 年 3 月，发布 JDK 12.0 ，版本号也称为 19.3<br>2019 年 9 月，发布 JDK 13.0 ，版本号也称为 19.9<br>2020 年 3 月，发布 JDK 14.0 ，版本号也称为 20.3</p><h3 id="二、Java技术体系平台"><a href="#二、Java技术体系平台" class="headerlink" title="二、Java技术体系平台"></a>二、Java技术体系平台</h3><h4 id="1-Java-SE"><a href="#1-Java-SE" class="headerlink" title="1 Java SE"></a>1 Java SE</h4><p>Java SE (Java Standard Edition): 标准版，支持面向桌面级应用（如Windows 下的应用程序）的 Java 平台，提供了完整的 Java 核心 API ，此版本以前称为 J2SE</p><h4 id="2-Java-EE"><a href="#2-Java-EE" class="headerlink" title="2 Java EE"></a>2 Java EE</h4><p>Java EE (Java Enterprise Edition): 企业版，为开发企业环境下的应用程序提供的一套解决方案。该技术体系中包含的技术如Servlet 、 Jsp 等，主要针对于 Web 应用程序开发。版本以前称为 J2EE</p><h4 id="3-Java-ME"><a href="#3-Java-ME" class="headerlink" title="3 Java ME"></a>3 Java ME</h4><p>Java ME (Java Micro Edition): 小型版，支持Java 程序运行在移动终端（手机、 PDA ）上的平台，对 Java API 有所精简，并加入了针对移动终端的支持，此版本以前称为 J2ME</p><h4 id="4-Java-Card"><a href="#4-Java-Card" class="headerlink" title="4 Java Card"></a>4 Java Card</h4><p>支持一些Java 小程序（ Applets ）运行在小内存设备（如智能卡）上的平台</p><h3 id="三、应用领域"><a href="#三、应用领域" class="headerlink" title="三、应用领域"></a>三、应用领域</h3><h4 id="1-企业级应用"><a href="#1-企业级应用" class="headerlink" title="1 企业级应用"></a>1 企业级应用</h4><p>主要指复杂的大企业的软件系统、各种类型的网站。Java 的安全机制以及它的跨平台的优势，使它在分布式系统领域开发中有广泛应用。应用领域包括金融、电信、交通、电子商务等。</p><h4 id="2-Android-平台应用"><a href="#2-Android-平台应用" class="headerlink" title="2 Android 平台应用"></a>2 Android 平台应用</h4><p>Android 应用程序使用 Java 语言编写。Android 开发水平的高低很大程度上取决于 Java 语言核心能力是否扎实。</p><h4 id="3-大数据平台开发"><a href="#3-大数据平台开发" class="headerlink" title="3 大数据平台开发"></a>3 大数据平台开发</h4><p>各类框架有 Hadoop、spark、storm、flink 等，就这类技术生态圈来讲，还有各种中间件如 flume、kafka、sqoop 等等 ，这些框架以及工具大多数是用 Java 编写而成，但提供诸如 Java、scala、Python、R 等各种语言 API 供编程。</p><h4 id="4-移动领域应用"><a href="#4-移动领域应用" class="headerlink" title="4 移动领域应用"></a>4 移动领域应用</h4><p>主要表现在消费和嵌入式领域，是指在各种小型设备上的应用，包括手机、 PDA 、机顶盒、汽车通信设备等。</p><h3 id="四、主要特性"><a href="#四、主要特性" class="headerlink" title="四、主要特性"></a>四、主要特性</h3><p>1 <strong>Java 语言是易学的</strong></p><p>2 <strong>Java 语言是强制面向对象的</strong></p><p>3 <strong>Java 语言是分布式的</strong></p><p>4 <strong>Java 语言是健壮的</strong></p><p>5 <strong>Java 语言是安全的</strong></p><p>6 <strong>Java 语言是体系结构中立的</strong></p><p>7 <strong>Java 语言是解释型的</strong></p><p>8 <strong>Java 是性能略高的</strong></p><p>9 <strong>Java 语言是原生支持多线程的</strong></p><h3 id="五、Java语言运行机制"><a href="#五、Java语言运行机制" class="headerlink" title="五、Java语言运行机制"></a>五、Java语言运行机制</h3><h4 id="1-Java语言的特点"><a href="#1-Java语言的特点" class="headerlink" title="1 Java语言的特点"></a>1 Java语言的特点</h4><p>① 面向对象</p><ul><li>两个基本概念：类、对象</li><li>三大特性：封装、继承、多态</li></ul><p>② 健壮性</p><p>③ 跨平台性</p><h4 id="2-Java两种核心机制"><a href="#2-Java两种核心机制" class="headerlink" title="2 Java两种核心机制"></a>2 Java两种核心机制</h4><p>① <strong>Java虚拟机</strong>（Java Virtual Machine）</p><p>​    JVM 是一个虚拟的计算机，具有指令集并使用不同的存储区域。负责执行指令，管理数据、内存、寄存器 。</p><ul><li>对于不同的平台，有不同的虚拟机。</li><li>Java 虚拟机机制屏蔽了底层运行平台的差别，实现了“ 一次编译，到处运行“</li></ul><p>② <strong>垃圾回收机制</strong>（Garbage Collection）</p><ul><li>不再使用的内存空间应回收–垃圾回收。</li><li>垃圾回收在 Java 程序运行过程中自动进行，程序员无法精确控制和干预。</li></ul><h4 id="3-Java语言的环境搭建"><a href="#3-Java语言的环境搭建" class="headerlink" title="3 Java语言的环境搭建"></a>3 Java语言的环境搭建</h4><p>①<strong>JDK</strong>(Java Development Kit Java 开发工具包)</p><p>②<strong>JRE</strong>(Java R untime Environment Java 运行环境 )</p><p>③<strong>JDK、 JRE 、JVM之间的关系</strong></p><p><img src="/2020/07/%E3%80%90Java%E5%9F%BA%E7%A1%80%E3%80%910-Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/../images/JDK%E3%80%81JRE%E3%80%81JVM%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="JDK、JRE、JVM之间的关系"></p><ul><li>JDK = JRE + 开发工具集（例如 Javac 编译工具 等）</li><li>JRE = JVM + Java SE 标准类库</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Java 是 SUN (Stanford University Network, 斯坦福大学网络公司) 1995 年推出的一门高级编程语言。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.tiobe.com/tiobe-index/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;TIOBE 指数&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/categories/Java/"/>
    
      <category term="Java基础" scheme="https://ActionDing.github.io/categories/Java/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Java" scheme="https://ActionDing.github.io/tags/Java/"/>
    
      <category term="编程" scheme="https://ActionDing.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>【小工具】Markdown</title>
    <link href="https://actionding.github.io/2020/07/%E3%80%90%E5%B0%8F%E5%B7%A5%E5%85%B7%E3%80%91Markdown/"/>
    <id>https://actionding.github.io/2020/07/%E3%80%90%E5%B0%8F%E5%B7%A5%E5%85%B7%E3%80%91Markdown/</id>
    <published>2020-07-03T04:11:10.000Z</published>
    <updated>2020-09-11T02:00:23.685Z</updated>
    
    <content type="html"><![CDATA[<p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。</p><p>推荐软件 <a href="https://www.typora.io/" target="_blank" rel="noopener">Typora</a></p><a id="more"></a><h3 id="一、标题"><a href="#一、标题" class="headerlink" title="一、标题"></a>一、标题</h3><p>1.1级标题<br>   使用<code>=</code>（一个以上）或者<code>#</code>（一个）+ 空格<br>2.2级标题<br>   使用<code>-</code>（一个以上）或者<code>#</code>（两个）+ 空格<br>3.3-6级标题<br>   使用#（3-6个）+ 空格</p><h3 id="二、段落"><a href="#二、段落" class="headerlink" title="二、段落"></a>二、段落</h3><ol><li>换行<br>使用两个以上空格加回车</li><li>字体<ol><li>斜体<br>使用一对<code>*</code>或者<code>_</code></li><li>粗体<br>使用一对<code>**</code>或者<code>__</code></li><li>粗斜体<br>使用一对<code>***</code>或者<code>___</code></li></ol></li><li>分割线<br>使用两个以上的<code>*</code>、<code>-</code>或者<code>_</code></li><li>删除线<br>使用波浪线<code>~~删除线文本~~</code></li><li>下划线<br>使用HTML的标签<code>&lt;u&gt;下划线文本&lt;/u&gt;</code></li><li>脚注<br>使用<code>[^脚注]</code> +<code>[^脚注]:脚注内容</code></li><li>角标<br>上角标：使用<code>x^2^</code>–x^2^<br>下角标：使用<code>H~2~O</code>–H<del>2</del>O</li><li>高亮<br>使用等号<code>==高亮文本==</code><blockquote><p>角标和高亮在设置中打开</p></blockquote></li><li>居中<br>使用HTML的标签<code>&lt;center&gt;居中文本&lt;/center&gt;</code></li><li>目录<br>使用<code>[TOC]</code></li><li>表情<br>使用<code>:单词:</code></li></ol><h3 id="三、列表"><a href="#三、列表" class="headerlink" title="三、列表"></a>三、列表</h3><p>可分为<strong>有序列表</strong>和<strong>无序列表</strong>，可嵌套使用</p><ol><li>有序列表<br>使用<code>数字</code> + <code>.</code> + <code>空格</code></li><li>无序列表<br>使用<code>*</code>、<code>+</code>或者<code>-</code> + <code>空格</code></li></ol><h3 id="四、区块"><a href="#四、区块" class="headerlink" title="四、区块"></a>四、区块</h3><p>使用<code>&gt;</code> + <code>空格</code>，可嵌套，并可与列表嵌套</p><h3 id="五、代码"><a href="#五、代码" class="headerlink" title="五、代码"></a>五、代码</h3><ol><li>一行代码<br>使用一对反引号</li><li>一段代码<br>使用三个反引号</li></ol><h3 id="六、链接"><a href="#六、链接" class="headerlink" title="六、链接"></a>六、链接</h3><ol><li>使用<code>[链接名称](链接地址)</code>（链接名称可省略）</li><li>使用<code>[链接名称][变量]</code>（与脚注类似）</li></ol><h3 id="七、图片"><a href="#七、图片" class="headerlink" title="七、图片"></a>七、图片</h3><ol><li>使用<code>![alt 属性文本](图片地址)</code></li><li>把图片直接拖入文档自动创建</li></ol><h3 id="八、表格"><a href="#八、表格" class="headerlink" title="八、表格"></a>八、表格</h3><ol><li>使用<code>|</code>来分隔单元格</li><li>使用<code>-</code>来分隔表头</li><li>对齐方式<ul><li>左对齐：<code>:---</code></li><li>右对齐：<code>---:</code></li><li>居中对齐：<code>:---:</code></li></ul></li></ol><h3 id="附：快捷键"><a href="#附：快捷键" class="headerlink" title="附：快捷键"></a>附：快捷键</h3><table><thead><tr><th align="center">快捷键</th><th align="center">功能</th><th align="center">快捷键</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">Ctrl+1</td><td align="center">一阶标题</td><td align="center">Ctrl+B</td><td align="center">字体加粗</td></tr><tr><td align="center">Ctrl+2</td><td align="center">二阶标题</td><td align="center">Ctrl+I</td><td align="center">字体倾斜</td></tr><tr><td align="center">Ctrl+3</td><td align="center">三阶标题</td><td align="center">Ctrl+U</td><td align="center">下划线</td></tr><tr><td align="center">Ctrl+4</td><td align="center">四阶标题</td><td align="center">Ctrl+Home</td><td align="center">返回顶部</td></tr><tr><td align="center">Ctrl+5</td><td align="center">五阶标题</td><td align="center">Ctrl+End</td><td align="center">返回底部</td></tr><tr><td align="center">Ctrl+6</td><td align="center">六阶标题</td><td align="center">Ctrl+T</td><td align="center">创建表格</td></tr><tr><td align="center">Ctrl+L</td><td align="center">选中某句话</td><td align="center">Ctrl+K</td><td align="center">创建超链接</td></tr><tr><td align="center">Ctrl+D</td><td align="center">选中某个单词</td><td align="center">Ctrl+F</td><td align="center">搜索</td></tr><tr><td align="center">Ctrl+E</td><td align="center">选中相同格式的文字</td><td align="center">Ctrl+H</td><td align="center">搜索并替换</td></tr><tr><td align="center">Alt+Shift+5</td><td align="center">删除线</td><td align="center">Ctrl+Shift+I</td><td align="center">插入图片</td></tr><tr><td align="center">Ctrl+Shift+M</td><td align="center">公式块</td><td align="center">Ctrl+Shift+Q</td><td align="center">引用</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。&lt;/p&gt;
&lt;p&gt;推荐软件 &lt;a href=&quot;https://www.typora.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Typora&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="小工具" scheme="https://ActionDing.github.io/categories/%E5%B0%8F%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Markdown" scheme="https://ActionDing.github.io/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>images</title>
    <link href="https://actionding.github.io/2020/07/images/"/>
    <id>https://actionding.github.io/2020/07/images/</id>
    <published>2020-06-30T16:00:00.000Z</published>
    <updated>2020-07-19T07:19:11.663Z</updated>
    
    <content type="html"><![CDATA[<h5 id="本文用于生成图片文件夹，点击这里转到主页"><a href="#本文用于生成图片文件夹，点击这里转到主页" class="headerlink" title="本文用于生成图片文件夹，点击这里转到主页"></a>本文用于生成图片文件夹，点击<a href="https://actionding.github.io/">这里</a>转到主页</h5><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;本文用于生成图片文件夹，点击这里转到主页&quot;&gt;&lt;a href=&quot;#本文用于生成图片文件夹，点击这里转到主页&quot; class=&quot;headerlink&quot; title=&quot;本文用于生成图片文件夹，点击这里转到主页&quot;&gt;&lt;/a&gt;本文用于生成图片文件夹，点击&lt;a href=&quot;https://actionding.github.io/&quot;&gt;这里&lt;/a&gt;转到主页&lt;/h5&gt;
    
    </summary>
    
    
    
  </entry>
  
</feed>
